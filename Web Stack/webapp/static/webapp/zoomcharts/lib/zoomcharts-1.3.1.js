// DVSL Charting library, version 1.3.1.
// GIT revision: b63d6fee5fc1f62484ec8d7ab77e86c9bbd564f6
// (c) 2013 - 2015 Data Visualization Software Lab
//
// http://zoomcharts.com
//
//
// 3rd party software license acknowledgement:
// moment.js
// version : 2.0.0
// author : Tim Wood
// license : MIT
// momentjs.com

(function(){
var Netchart_Graph;Netchart_Graph=function(){function t(t){this.chart=t,this.settings=this.chart.settings,this.scene=this.chart.scene,this.idToNode={},this.idToLink={},this.state={},this.userLoading=!1}return t.prototype.exportCoordinates=function(t){var e,i,n,s;for(n=0,s=t.length;s>n;n++)i=t[n],e=this.idToNode[i.id],e&&(i.x=e.x,i.y=e.y)},t.prototype.save=function(){var t,e,i,n;i={},n=this.idToNode;for(t in n)e=n[t],i[e.id]={x:e.x,y:e.y,r:e.currentRadius,w:e.currentHwidth};return i},t.prototype.restore=function(t){var e,i,n;this.state={};for(e in t)n=t[e],this.idToNode.hasOwnProperty(e)?(i=this.idToNode[e],i.x=n.x,i.y=n.y,i.currentRadius=n.r,i.currentHwidth=n.w?n.w:n.r):this.state[e]=n},t.prototype.lockNode=function(t,e,i){var n;return this.idToNode.hasOwnProperty(t)?(n=this.idToNode[t],n.userLock=!0,void 0!==e&&void 0!==i&&(n.x=e,n.y=i),this.scene.touchNode(n)):this.chart.error("Locking nonexistant node: "+t)},t.prototype.unlockNode=function(t){var e;return this.idToNode.hasOwnProperty(t)?(e=this.idToNode[t],e.userLock=!1,this.scene.touchNode(e)):this.chart.error("Locking nonexistant node: "+t)},t.prototype.addNode=function(t){var e,i,n;if(i=this.scene.addNode(t),this.idToNode[t]=i,e=this.scene.data.getNodeData(t),!e)throw"Internal error";return i.data=e,i.dataLinks=this.scene.data.getNodeLinksRaw(t),i.dataLinksFiltered=[],null!=e.x&&(i.x=e.x),null!=e.y&&(i.y=e.y),this.state.hasOwnProperty(t)&&(n=this.state[t],delete this.state[t],i.x=n.x,i.y=n.y,i.currentRadius=n.r,i.currentHwidth=n.w?n.w:n.r),i},t.prototype.tryAddLink=function(t){var e;return this.idToLink.hasOwnProperty(t.id)?(e=this.idToLink[t.id],e.data!==t&&(e.data=t,this.scene.touchLink(e)),e):this.idToNode.hasOwnProperty(t.from)&&this.idToNode.hasOwnProperty(t.to)?(e=this.scene.addLink(t.id,t.from,t.to),e.data=t,this.idToLink[t.id]=e,e.from=this.idToNode[t.from],e.from.links.push(e),this.scene.touchNode(e.from),e.to=this.idToNode[t.to],e.to.links.push(e),this.scene.touchNode(e.to),e):null},t.prototype.removeNode=function(t){var e,i,n,s,r,o;if(this.idToNode.hasOwnProperty(t)){for(i=this.idToNode[t],o=i.links,s=0,r=o.length;r>s;s++)e=o[s],delete this.idToLink[e.id],n=e.otherEnd(i),n!==i&&(Base_Helpers.removeFromArray(n.links,e),this.scene.touchNode(n)),this.scene.removeLink(e);return i.links=[],delete this.idToNode[t],this.scene.removeNode(i),this.scene.data.nodeRemoved(t)}},t.prototype.removeLink=function(t){var e;return this.idToLink.hasOwnProperty(t)?(e=this.idToLink[t],delete this.idToLink[t],Base_Helpers.removeFromArray(e.from.links,e),Base_Helpers.removeFromArray(e.to.links,e),this.scene.touchNode(e.from),this.scene.touchNode(e.to),this.scene.removeLink(e)):void 0},t.prototype.removeAll=function(){return this.replaceGraph({},{})},t.prototype.exportData=function(){var t,e,i,n,s,r,o;s=[],i=[],r=this.idToNode;for(t in r)n=r[t],s.push(n.data);o=this.idToLink;for(t in o)e=o[t],i.push(e.data);return{nodes:s,links:i}},t.prototype.replaceGraph=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S;h=!0,d={},S=this.idToNode;for(r in S)for(f=S[r],l=f.links;l.length>0;)l.pop();g=this.idToNode,this.idToNode=a={};for(r in t)if(v=t[r],n=g[r],n?(h=!1,a[r]=n):n=this.addNode(r),e.hasOwnProperty(r))for(n.dataLinksFiltered=p=e[r],_=0,x=p.length;x>_;_++)l=p[_],d[l.id]=l;m=this.idToLink,this.idToLink=o={};for(r in d)c=d[r],i=m[r],i?(s=c.from,y=c.to,a.hasOwnProperty(s)&&a.hasOwnProperty(y)&&(a[s].links.push(i),a[y].links.push(i),o[r]=i)):this.tryAddLink(c);for(r in m)u=m[r],o.hasOwnProperty(r)||(this.scene.touchNode(u.from),this.scene.touchNode(u.to),this.scene.removeLink(u));for(r in g)f=g[r],a.hasOwnProperty(r)||this.scene.removeNode(f);return h},t.prototype.updateGraphWithNewData=function(t,e){var i,n,s,r,o,a;if(t)for(n in t)r=t[n],this.idToNode.hasOwnProperty(n)&&(o=this.idToNode[n],o.data=this.scene.data.getNodeData(n),o.dataLinks=this.scene.data.getNodeLinksRaw(n),null!=r.x&&(o.x=r.x),null!=r.y&&(o.y=r.y),this.scene.touchNode(o));if(e){a=[];for(n in e)i=e[n],this.idToLink.hasOwnProperty(n)?(s=this.idToLink[n],s.data=this.scene.data.getLinkData(n),a.push(this.scene.touchLink(s))):a.push(void 0);return a}},t}();var builtinImages={"no-data-light.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABPCAYAAABWIbNMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzIyQjVERERFNTYzMTFFMkFCQzA5QTIyQ0RFNjkyMTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzIyQjVEREVFNTYzMTFFMkFCQzA5QTIyQ0RFNjkyMTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MjJCNUREQkU1NjMxMUUyQUJDMDlBMjJDREU2OTIxNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MjJCNUREQ0U1NjMxMUUyQUJDMDlBMjJDREU2OTIxNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqaQJv8AAA0dSURBVHja7FwLVJTHFV5w0YVdwAVUXFACCqiVl9IjEkTemAKmFhCDSQFBLIoHKb6NJ7WnNqipJoqJNTWa06MmimiaaMFXQFN8YagaFRFFLYLgCzHJgsuj34VZsq67sC9w18Occ8+/O/PPnTvff+fOvfPP/EZtbW2cpUuXcuRTdnY2R5WkqK6SxAWNA00CuYNcQI4gAYjP7vmR0U3QddBF0AlQKahFEVNV5VRHZuLJ5fRsMgH9BvQW6A2QhWxhv379GoyNjRu4XO49ekAtLS1mra2tfFx9Uewrc+sT0EHQTlCBMpB0mXoKGNKCFNAfQcMYCE8sLCyKBg0a9IOjo+M1V1fXapFI9BhFzSAJyIjJw62urhaWlZWJKisrR92/f9/t6dOnHgArHmVEt0DrQdtAPxsKMMQvFbQKZGNkZNQsFAoLXVxcjoWFhZ0xMzOrQz6BUU+dgko3K1FlLkCj4WUJsmpsbBx0+PDhX1+9ejWsvr7eD9q1EfnLQCvAYwfub9NnYMaCdoDGEyBDhgz5KigoKNfd3Z3sRDXoITrRpqINaGbDh+gOOm40derU70EHS0tLPQsLC6Pr6ureAECfoXw27k/BPVf0EZg00AbQAAyXc9COzd7e3mfw/zaEFmvLnAH6kAgAlHt5eZ0tKSnZV1BQMB/DbCLyS3BPOso+0wtgIEw/XD4EpcOINsFubExISPgc/8tQ1iPjnwF9FSDcBkBXduzYkVhRUZEC7dmGsjEoW6SLocXVQsD+bJaIMTExuRceHr7Sz88vH/lVnF5IDPhzAKG2qKjo0tGjR/8skUiykDcUZUnIf6YNf2NNNQV2ZBeBwuPxbsTHx6cBlC96CxS5dGfy5Mk7IyMjM6G1BFY8ZNsOWYxehsZsgupGA5RbycnJc4cNG1YEQZo4Lymh7RaAkgQfyIzAwZWm9Tts5uodjYEQZGjT+vfvXx0dHZ0BUI6/ZFDMoCEHAEawubn593FxcbMxtB90FC2d2SvAoCE3CPEhGdqQkJBlbm5uBcp8kV5K7aBAe0MJlJSUlAwPD4/9AQEBy5AvAW2BfM49CgwaAB7Gn0OI/s7Ozp/4+/vnIbtJn0CB73QK+eLg4OA9I0eO3IoyAWTWyN6oDAwaSIa6ekGI80lJSX9jwZ6+gSKNoRrgNqwTCAQXIPPr+P/7HgEGiJtDiPdJPX19fSmcrdJjUDpmFS73to+PTzbubQGtRR9MdQ4MtGU+BLFGAHgwMDDw3/oOijTBDn5jY2NTgPsHI4hN0ikwQJqWDjIIebj5m/D7J0MARbq+4+npmYN65AkvIjupM2CgLREYp4MRJZ+AwS3WJ1DIf+muIgxxkaWlZXFLS8tr6EugzoCBCibSFYLsw6XRkEBh6Wfcn8fsTqJOgEHj3Obm5hBaaQsNDd1vgKC0J/g1e6EtP6EvkaoOJ+NutGU8hOJbWFicFYlENYYICiVHR8e7bOoeiD65aQ0M3P4QuvL5fDJybYYICkutAOY0/UC4EKo1MBBuPF2hMWcMGJT2BF6n2GTipTUwGJNOdLW2tr5oyKAwYC7RFbOTi9bAgMkwMrwRERE1hgwKpZiYmFsU/KJPIq2BgZC0vkExUbMhg8JSE73DggE21woYikjBhAdm4lcAFKmzKkY7plprDNOatlcBFHX7ohQYWmkHwo00nF4FUGRMg1hrjYHgtH5q9iqAwiYTc2YztQNmwIABNWA2EAILDB0U8LdFmzw4rTVaAwMv8Q67jjZkUNobNjMbw7z5W1oDA2aXGTC+hgwKS7TEyeHxeFe0BgYe70k2NgMNHBTqw2S62trantQamNDQ0O/oBZZEIpnMVvIMEhS0xUMffMiLj4qKOq01MOjA44EDB/6HwnUAFG6IoDDHLop2atEqJMxDgy4cvDaoXh5bm5ltiKAw2Wl3F0ckEuXqZAWPUnh4+AEY3zpE2hHolKOhgYI2XTCMQjAb3Y2MjDyoM2DQoVogvQ+d7MflcpcYEihMW1ZQP4cPH77LwsLioc6AoeEUFBSUgwbqYdmT0cFRhgIK2vWEbXmbXvJPmTJlC0eNVUiVFoZdXV2vOTk5bUeHuTBkHxsIKEaQdTPkMXZxcdlib29/S536qr6Aapk+ffpGWPRyPIFANJqsz6CwlAlZffl8/g8zZsz4BP9bewIYWhq87e/v/yc8hWcAYRM67a6voKBtb8iUTa9M4IutxFCqVnuKVydqDwgI+BrDinZTmaLhQ7T3RA9BcYBMX0Emk7Fjx27w8fEp0Mj3UfP+HxMSEjYMHTqUZik7CHBez0AZDJmOQSaRnZ3dl/Hx8ZuRLe4NYCjdTU9Pf9fKyuo4BKD1DbGfn99qPQDlNYDyHWQaQTsc0tLS3kP2PY29ZQ19g7LU1NTFAOdbGDjT/Pz8jyDY2JdsU04BFGcCZd68eYvhc13TKozQtCJiqNKsrKxMNqzsSTBkz+F0HJborWQEUGhvbzFksMWUvDszM3ORqanpJa3jKy3qtkJzLmRkZKxwc3Nby/agkBN1HPSrXgCF3igWgj7AcJZ4enr+FUP8Pch0iaOD18nGOlDjazNnzvxo2rRpafBzriIrAPRf0FbQyB4AxJXTcSTnLMhfIBBcio2NTYWvQpuaruuqEa6Oxnh1dnZ27rhx48p3794dXVZWNgtBJ0Xj5AgeAP0TRFvUNN3lyQNFcDo2GUbSAyU3f/To0f+Ii4vbz7REp++/uDo0gLRd/TQAuvPkyZMjeXl5UZWVldHPnj37HfKJ6IxSESPaJEDa9VgJOyGI1mh9QJMZtZ+Ooyh5xIgR+6ChXyMopKXXHnl9rPMTbkx77iUlJV0FKLlHjhzxgQYFPnr0yBdB6Ju45U1Zvwh0n13JaNPhrcGcX85ISmfBJ5gBD0FDCsPCws5ixrmB7Gq01arJmciXAgwDh+KS/0HoqoiIiEugbwDS0JMnT46BFo2GRjmIxWJRU1PTYIBlgxllOBlMGHAxQHhKK/mwV1WY+W6MGjXq4sSJE6/DwNYy7Xis6oGwlwpMN0+MOvCICJ29EhwcfI5mek7HmUl6kWfKZJDK0cyI9vrR7tCnbLg9VaPNngVGjWPDKsdanF+O8+l9Mub0pT5g+oDpA6YPmD5g+oDpA6YPmFcqST3fEhDtAveGu31TzgOOxWUPaDrK9srkUwS8hJE0HQXtZWsxXSUpT0VpDbHvou4NJuscmXbGsz50l6xkIvpOPujXVoXAIFrlNzc3CxHE0W6AcbI3ILQf2NDQ0H6VAcUJ9x5FwFfj6ek5PyYmpn2BaO3atZGIov/OGlTaOSlPJyen1ampqZ0beXJzc51LS0v/gMCSDnd4K6hK+U4mJibX6dUr7tvKYidqf4r0pvXr10+vq6ub5e3t3SmbNJpnoc5zfBQ9yM5YiXYz0ilZVFyChtZ0BTsBiKDw0apVqzLwtxx1GpiA5Tk5Oa1VVVWkRTe705wHDx7Q10IKZILDUzwer6a4uHg7ZMmWBxcP8B1E4jVWVlZ5tbW1S9gDuMna7+QjEAiC6FpRUXERZSde6LQcH3rQ8iOl08ZAoPOEIDq9jA0TZcFlKph62dnZ0SdJSqSgsLLK9PT0daampqUAOl2D5YqGyMjIQ3w+vwj14+XLoSG/NTMzKxEKhf9i6zTxmtgPVfgYy9z8bMKECXTC3Rj0qTKm0BR/0i4MgS+VdK4KwNAuLDf2RNUFR4z2ScWHydWPxQOxoM4kJiaWEvj4P1sDXFTi89ysRE/L2tr6C/qgBTO6ipINEG7/glAXQ62Mrnjytpo8UdR/IF+f1J9s2ty5c/cTeAz84czwqj7bKOGD3+O7mq7FWVlZ77MhtU7RkCKNAnBd7hyQSCTt324BH40WwiBoi1x9Ie26NDc3/xYytT8QLy+vbaS56OjbarBWmY8iP6bSwcEhB52nl+Nr5Qtp5yMEt+sGGAdmt+o1tAGWsvUheBqpf319fTxb8Go7duxYKeQQgKJVdtrU4KPQwUtJSdmJKfUQmKQ0Nja6y5YB7WI68wPEQ7oAJoC0bsGCBRq950F9D1J3aX08oLeIH2aOKbJkb2+/kdmiWBWHaJd8ZM2HMlV/OGnSpL/k5+d7QcjnPhiRmZm5a+XKleRrvMscuhd8DfhErw8ZMmSNhh/uckJ9P9i63az+eLQ11tLS8mPZqZ1N75eXL18+C5rwDurs7YavQj60foyZtJMPc1CVhwQApgRT8hZSPbmie2z2GokGjsgZP/ItjsA/2AMAczSZMZiPVLFw4cI1zM5EkA1YvHjxB4pmQBjoQrbrW9gV4674IHXykdrVrmIlCSz3VlR4YYs5zV6rV6+Ox7C6y1zx9vEKAxZFaonGV6ryvSp4v1uldTkdr08+pZdocBznkE/E7E0yCS39/4I1FQppk5AF2Y9u7JZafIzYoS/6lhy9SbygoI4HyJaVye83kX5ItHMIsnu6A8WW8X3hYbC65TJ5/ozvZSW8rFn4QHWknXZkstEOjAZN+Bj17Mk+w03/F2AAHZMD17Q4OMAAAAAASUVORK5CYII=","no-data-dark.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABPCAYAAABWIbNMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUI0RTA2RDZFNTYzMTFFMkJDOTdGRTQ2M0VGMEIxOEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUI0RTA2RDdFNTYzMTFFMkJDOTdGRTQ2M0VGMEIxOEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1QjRFMDZENEU1NjMxMUUyQkM5N0ZFNDYzRUYwQjE4QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1QjRFMDZENUU1NjMxMUUyQkM5N0ZFNDYzRUYwQjE4QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjyBbi0AAAvnSURBVHja7JwLUFTnFcdZ2EVYEQNxMkgEI9MoaoVQpdakom0hE6t2nFocFRrHlqSatlOLio+pjDOZjCYkdmKiE9vRacahoyMdH4wYsE2iIdIWEIurRV4LldfyXJ7Lm/7Pci69ud1d7t59Ycs3c+Yu997vfOf+7vnO97yoxsbGvCwllUrlJSdZy28hqSHfgKyGREEWQhZAAiAz+Z4elmpIBaQUchtSAhlxxE57bVa5GIwG8n3INsg6SKD44tDQUBekd3BwsI/K02g0WshMSKBETyfkOiQTkiuG9KSBIS9IgaRCwhhCZ319/b1Hjx7pbt++/ejGjRsNJSUlHbg0TJepSPYqdUxMTND69etDV69eHYm0bO7cudEiWDWQE5CzkD5XgTHfZEnsKUQkasgbkBbI2Ojo6FB1dfVnp0+f/k1wcHACbo+GhLPnqG2UTYBm870vzJ49O+HkyZOH9Xr959A5PDaeGiA7ISolYCYTZ4L5OqSILB4ZGRkqLS29smXLlmSOJ3ME71Qi7E1PE9ikpKQdOp3uGpXBgO5AlkxVMLsh/WRlXV3d33fu3LkDlyIh/kph2LDLH7KYymhsbCxiOH2Qn0wZMLjPB/IBWTY8PNyfnZ39Prc8WmcDsWAfBerY3NzcU/CeAQb0rpyq5VIwuMcXcoms6e3tbdyzZw8F23muBmLBzvC0tLRdfX19zQwnk2zzCBjyFATBLLLCaDRWbty4cRO1RO6GIrJz1q5du5Ko6ecYl2nLc1wJ5jRD0a9cufJlnJrhCSiCnThqAeXPZJMAB+mYW8FwoB3r6empT0xM/IGtZtdNooX35pFNCMbFW7du3Y5q1cJwktwCBueXwYgBCrT79+9/1ZOeYgnK0qVLv02t1pEjR1JQnQZxrRuXnncpGJzzhpveJSNycnJ+y73bqQbFh80NzMvL+5Bby3xpvHEqGBTwGhtRRK2PPYW4GYo5+fn5zTcYDPe4Su1wCRj8PQuu2UrueejQoR/ZW4i7oQjp6NGjW2kIAbsNuN3f6WBQhQ6TIQ8ePLgsmiLwBBjZUITBbFlZ2XW6HyP4N5wKBr81qEYGIr9v377vKglkHoJiTunp6euQbxRg9BQnnQYGUDaRMVVVVZ9S1fUQGItQZA5dtLW1tfncx/me08Cgu3+FlGIc9HOlfQJXQZE7prt+/Xoq973OOwUMza8gcPUMDAx0xsTEhHoAjE0ocsHExcWFwVt64P0dVJ0cBoN6uZKMqqmpuclzIu4EMykUO6ZHvOvq6r7kIBwtp3xvW9rgevF0bG5uLiAGXu5LNG1xRaVSJTQ1Nd2Nj4//FVrEAhofKtQ3imf4K/3AcCFBFslJBovL6Yg39rcnGIo5QVcBNyYxDoPx9fWNoGNlZWXpkwyFX+5987KFRrPQoWk+jjFtFHh5ctrLxTFGVkxROgVLA14a/JpMpnqHgy8UmdBc1zs6G+YqKHaC8QKUZlrLcggMjUjJ0K6urkoXg1EMxV4waExqaUnHKWC6u7srXAjGISj2goH31/Cyi+NVCc2bq6qSw1CUVCXEzS6HwSDwtkFRhwvAOAWKvWDgLRQzGxwG09bWpuOJngAngnEaFDsXBkOozJaWlmKHe76oRv/i4+Kp3k+ZLOElLxHijMMdvPb29gd07O/vf/FJhsK7N16io9FofOgwGPR4vzBvPVCrv/MkQ+FnWENHnU73hcM9X9T/YFrA4uG6RmGMcWpMUbjG7odnME+fBAcHBzpjokpVXV2dx8sQGxSAcSkUuWBgeyLZUF5enu20GbyrV6/u4oX7q3aCcTkUuWBgey7ZcfHixR1OA4MHCkGrZOCdTAtkgnELFJm7MhZSLMNwoC40NHSOM5dPVPn5+eZFfLROH8kA4zYocsAgrnxMtty8efMdYRbSaetK69atW4ICOngAFmkDjFuhyNiV8QLsGaFF/tjY2AhXLNH65ObmnuAliE+tgHE7lEl2Zahgq3me9/Lly2+KuyZOXbsOCQl5Dr3HRzxE+KmkEI9AmQSMecmkubn5vlarDXXlNhDVwYMHt6HpGwAE2gwYJWza8RQUG9tVVtDiIy2Z7N69e5M7Ng4FZGdnv8t7eOto74knoVjZrjIfo+h6bp7f5F2ebtlq9uy9e/eyGE6XJ6FY2JXxDGyqJJuKi4svUARw6x48X1/fyKqqqr9wMO5LS0v7oSegSDYfPAco5dzD/WTGjBmLPLKdNTw8fDkt9LPnPMYh2lNgOKY0ClCCgoKiPLkB2luj0USLqhUF5J/xXLG7wFBZe2nllWwoLCz8I7x5mbXlZLdumUdadOnSpbfRWgnbSD+DLHUDlBjILWELa2Zm5luw5fkp9S0BUmhKSsqrra2tDxkO9ZB/B/maC4AsgpzlMsYMBkNpcnJykrVA6/GvT3hv/7eysrIyTCZTGwMagfwJQpuPHNn66gfZDLnKOseom3/hwoVjKPOblprkqfRZzoT3hIWFvZyTk/MBRrQNY/9JNNlFm5B+DXkREmTDMLr2EsePa5BOQQmNkuljDoyUaSfGXCWzeR4Bw3lpXBIWEBCw5r333jtQVlb2Ca/nSBNtUK6GlELu8+8e6U3Ia6RNhhkZGfv9/PzW8HZab3uXT+wB49JvIlXjSoLozc6cOXNuamrqkri4uMXwqPloUkMB7hm0IgE+Pj5aUkXrPoDQi2qCYVlbXW1tbRU8r/TUqVMVtEGSNi1AyPPG7LVTrs0Teh0FY89Evdf4J39P8a5yLccGtWg3xTBLP028QboJBB+dlhwC8/+evKcRTIOZBjMNZhrMNJhpMNNgpsH8b4Kh7xzbIRE0FBALUqLX+HcEiZLzNAY6ztcEoY8xXpdRbqIkn1iOT5K3iu8Tl7Pchj6xBFnSY+GZx8H09/fT53w01M+SWtHQ0PCU+MhjjQiaiEe+1efOnfsllL1Cotfry3D5zGQPJ+i6devWW0JeEtKFQeQGflGWEk01RGCQWYH7kkXjugqxnocPH56j82LbWHps6fmvAZXJZPonRq/dPMo/IL5eX19v/nqWjsK50dHRu52dnWT8ChoYiqYbFhQWFr7Pel63NqQX65RMVwSeOHFiM2yhKYrj0nyw8+OBgYEGnU53nMuIsKTfYDC8TRcxOo+zdN2SHimTiRhjNBqLiSBOHqKJIhsjU3K9mJKSEnor9G9KukTX9LGxsRnQVYKH+4WCUW9XampqTktLyy3k3y697uvru6m9vb2opqbmGv2Nt71dSfyQo2cCjEajGTxz5swheIM35PfWlPb29sbRV29r1669aOXh6jo6Or5Uq9U0Wx+hAI4J+iuQP0ySP9Hb2zuQHmbDhg0lBN/Hx+c1BVxk6flKq0Rvq7Ky8gIy0vxqohXD55Ab4mebtZIBlmKNV2tra4iSN4oyWqX5UeaP8WYbV61adZngEXw8UDgHXtnJmh7h2yxrzbUpMjLyGFUpPFyGpSpFHoU0aqtwf3//QTpCj1oJGHjLiCR/EDx6TVNTEy3NmF/I+fPnz5LnogFItkO1bD2W+jH6O3fufIiHnw8I70gvUmCE8mdtla7VaufTEQHaqAQM9M8W50eZu8n9w8PDtwtNb3p6OlWBAEDcLFevPXosdvASEhIy0aTmQElKYGBglKSpvQNFs0A83poBfn5+a8nroqKiKpSAgcdFk7sL+VHWNtInaXpfKSoqOsmxKFFmFbWp5yvhQ2iu8XbyxEr27t27imIJ3KxT0lyHIACXDw0NfS7kl0g83c9NoV3NNUsElVleXv4R/72cP4g/ZWE1Yh51M1ANrslori3q4TShZ2JO2BoY8mhUqXRhCUPcj6G+Bt4o7Y+5yQUKBR2ge6urq6nFmqcATCL3kYqpT0Tn8IbTyWjhb6k0NjZm88sLsgXGmh4hSfXYAmP2jubm5ttSMF7js/txqFZ/EK//QE8+dfBwbaGtNRsBjDQBivHx48f0Nf0K4V48TC0ZbU1XQUFBCq9fH7YFxpoeIUn1mFcJUM9WUSMA+YcFOPTfDkP4WpPkmvCPRIXUxvfUTVLdQ1ivNA1x3nLRuTjW+8CKrqe5B0559HxuAdtGnxR32auHOqrTyydW0r8FGADOGvuNcLn3BwAAAABJRU5ErkJggg=="},Piechart_images_back="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAA1CAYAAADRarJRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgFJREFUeNrUmc8rBGEYx9/dUbTkoIhCcXSQLUV74szRH6C9uConJy9HZwdylisnjsuNxE2ituS0tChx8eP1fXmnpm1mza/X7vepT00708znfd/Z533fZ4RIP1YEaWhxxSyumMUVs7hiFlfM4opZXDGLK2ZxxSyumMUVs/i/yWdCiMuY99aNeDbHL+AePIAKuAHX4BJcga9m6PE46AYegCUwzCTuxymYB21s4l7uQBFk2cS9HIMhRnGXKigwiru8gglGcRedbvtd8WyIXN9M0Q22an+URL2vmdbSjpEvmRGYIhmBHrDDOgLv+hVyauRZRkD/Vy8cnxMsDSg7AScYGlBx6pxM0oAn8AFaLcpXW/64QMYsnnZ5jjvBABgEo2DS0JtQ3gl7YdQsFCbyYN1sUOJknFKUlkphZxvYZjYijxHl96MOlRT29rB94DCC/Each0hhbwPumLVLGPnFuA+Rwl71QGe43RDyidK4tFj6yJnqQtD9dRruSPoQabFuM1tH/iStyUJaks+Ymo6f/Fqas520VDFbDpAfT3u6lhbkCz7iZVvrDZmyfM5HftXmak+mfD/vzPsZpobTVOt2j/yeIIvbtCamRoT72pyxibd7en2OTT5vxM/JimM/UTTyM4IwtsGRIA397WqMUXwEbLL2+kJNFSJ++aAB8SZ+v0sFxrcAAwAU8YKsEeepXgAAAABJRU5ErkJggg==",Piechart_Data,Piechart_PieData,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Piechart_PieData=function(){function t(){this.values=[],this.offset=0,this.totalCount=null,this.total=0,this.valuesSum=0,this.beforeSum=0,this.afterSum=0,this.done=!1}return t.prototype.addData=function(t,e,i,n,s,r,o){var a,h;if(a=t.length,0===this.values.length&&(this.offset=e),e<this.offset){if(e+a<this.offset)return void o.error("Data cannot be merged");for(;e<this.offset;)this.offset--,h=t[this.offset-e],this.values.unshift(h),this.valuesSum+=h.value,this.beforeSum-=h.value}if(e+a>this.offset+this.values.length){if(this.offset+this.values.length<e)return void o.error("Data cannot be merged");for(;this.offset+this.values.length<e+a;)h=t[this.offset+this.values.length-e],this.values.push(h),this.valuesSum+=h.value,this.afterSum-=h.value}return(!i||t.length<i)&&(this.done=!0),this.beforeSum=(e=0)?0:n?parseFloat(n):Math.max(0,this.beforeSum),this.done?(this.afterSum=0,this.totalCount=this.values.length+this.offset):this.afterSum=s?parseFloat(s):Math.max(0,this.afterSum),r?(this.total=parseFloat(r),s||!this.beforeSum&&0!==this.offset||(this.afterSum=this.total-this.valuesSum-this.beforeSum),n||!this.afterSum&&!this.done?void 0:this.beforeSum=this.total-this.valuesSum-this.afterSum):this.total=this.beforeSum+this.valuesSum+this.afterSum},t.prototype.markDone=function(){return this.done?void 0:(this.done=!0,this.afterSum=0,this.totalCount=this.offset+this.values.length)},t}(),Piechart_Data=function(){function t(t){var e,i,n;if(this.chart=t,this.runRequests=__bind(this.runRequests,this),this.settings=t.settings,this.pies={},this.pendingPies={},this.requestedPies={},this.requests=[],this.nextId=0,this.dataFunc=this.getDataFunction(),this.settings.data.preloaded&&this.dataArrived(null,this.settings.data.preloaded),!this.dataFunc){n=this.pies;for(e in n)i=n[e],i.markDone();this.chart.scene.loading=!1}}return t.settings={itemsToLoad:50,partialLoad:!0,autoCategories:null,sortField:null},t.prototype.requestScheduled=!1,t.prototype.cleanupScheduled=!1,t.prototype.removed=!1,t.prototype.CS=String.fromCharCode(63743),t.prototype.remove=function(){return this.removed=!0},t.prototype.getQueueLength=function(){return Base_Helpers.countProperties(this.pendingPies)+Base_Helpers.countProperties(this.requestedPies)},t.prototype.getRootId=function(){return Base_Helpers.isArray(this.settings.navigation.initialDrilldown)?this.settings.navigation.initialDrilldown[0]:this.settings.navigation.initialDrilldown},t.prototype.canExapnd=function(t){return this.pies.hasOwnProperty(t)||Base_Helpers.isString(t)&&t[0]!==this.CS},t.prototype.getPieData=function(t){var e;return this.pies.hasOwnProperty(t)?(e=this.pies[t],this.needPostprocessing()&&(e=this.filterAndSortData(e)),e):null},t.prototype.requestMorePieData=function(t,e){return null==e&&(e=this.settings.data.itemsToLoad),!this.pies.hasOwnProperty(t)||this.pies[t].done?!1:(this.requestPieData(t,this.pies[t].offset+this.pies[t].values.length,e),!0)},t.prototype.requestLessPieData=function(t,e){return null==e&&(e=this.settings.data.itemsToLoad),this.pies.hasOwnProperty(t)&&!this.pies[t].done&&this.pies[t].offset>0?(this.requestPieData(t,Math.max(this.pies[t].offset-this.settings.data.itemsToLoad,0),e),!0):!1},t.prototype.pieRemoved=function(t){return delete this.pendingPies[t],delete this.requestedPies[t]},t.prototype.requestPieData=function(t,e,i){var n,s,r,o,a,h;if(null==i&&(i=this.settings.data.itemsToLoad),t[0]===this.CS)throw"Invalid Id: "+t;if(this.pies.hasOwnProperty(t))if(n=this.pies[t],h=n.offset,s=h+n.values.length,h>e)i=h-e;else{if(!(e+i>s))return;i=e+i-s,e=s}else(this.needPostprocessing()||!this.settings.data.partialLoad||this.settings.autoCategories)&&(i=2147483647,e=0);if(!this.requestedPies.hasOwnProperty(t))if(this.pendingPies.hasOwnProperty(t))a=this.pendingPies[t],o=Math.min(a.offset,e),r=Math.max(a.offset+a.count,e+i),a.offset=o,a.count=r-o;else if(null!=this.dataFunc&&(this.pendingPies[t]={offset:e,count:i},!this.requestScheduled))return this.requestScheduled=!0,setTimeout(this.runRequests,0)},t.prototype.runRequests=function(){var t,e,i,n,s,r,o,a,h,l;if(!this.removed){if(this.requestScheduled=!1,s=(new Date).getTime(),r=this.settings.data.requestTimeout,this.cleanupScheduled){for(this.cleanupScheduled=!1,i=[],h=this.requests,o=0,a=h.length;a>o;o++)e=h[o],e.time+r>s?i.push(e):(t=e.__id,this.requestedPies.hasOwnProperty(t)&&(n=this.requestedPies[t],delete this.requestedPies[t],this.pendingPies[t]=n),0!==e.time&&this.chart.error("Data request timed out, timeout "+r+" ms"));this.requests=i}for(;Base_Helpers.hasProperties(this.pendingPies)&&this.requests.length<this.settings.data.numberOfParallelRequests;)l=Base_Helpers.removePropertyValue(this.pendingPies),t=l[0],n=l[1],this.makeRequest(t,n.offset,n.count,s);return this.chart.scene.loading=this.requests.length>0,this.chart.events.notifySceneChanges({loading:!0}),this.requests.length>0&&!this.cleanupScheduled?(this.cleanupScheduled=!0,setTimeout(this.runRequests,r)):void 0}},t.prototype.makeRequest=function(t,e,i,n){var s,r,o,a;return this.requestedPies[t]={offset:e,count:i},this.chart.log("Requesting data on "+t+", ["+e+", "+i+"]"),o={time:n,id:t,offset:e,limit:i},r=function(t){return function(e){return t.dataArrived(o,e)}}(this),s=function(t){return function(){return t.dataError(o)}}(this),this.requests.push(o),a=this.dataFunc(t,i,e,r,s),null!=a&&(Base_Helpers.isObject(a)||Base_Helpers.isString(a))?(this.dataArrived(o,a),Base_Helpers.removeFromArray(this.requests,o)):void 0},t.prototype.dataError=function(t){var e;return t?(e=new Piechart_PieData(t.id),e.done=!0,this.pies[t.id]=e,this.chart.error("Data request failed for pie: "+t.id),Base_Helpers.removeFromArray(this.requests,t),delete this.requestedPies[t.id]):this.chart.error("Data request failed"),this.cleanupScheduled=!0,this.runRequests()},t.prototype.dataArrived=function(t,e){var i,n,s,r,o,a,h,l;if(!this.removed){if(i=!1,e)if(n=Base_Helpers.parseData(e,this.settings.data.format,this.chart),s=n.hasOwnProperty("id")?n.id:t?t.id:this.getRootId(),null!=n.error)this.chart.error(n.error),i=!1;else{for(i=!0,l=["values"],a=0,h=l.length;h>a;a++)o=l[a],n.hasOwnProperty(o)||(i=!1,this.chart.error("Field "+o+" not set in data"));n.hasOwnProperty("offset")&&parseInt(n.offset)>=0?(n.offset=parseInt(n.offset),t&&t.offset!==n.offset&&(i=!1,this.chart.error("Response Offset "+n.offset+" does not match request offset: "+t.offset),this.markDone(s))):n.offset=t?t.offset:0,n.limit=parseInt(n.limit)?parseInt(n.limit):null}else this.chart.error("Got empty response");return r={},r[s]=!0,i&&(this.chart.log(t?"Data arrived, id="+s+", offset="+t.offset+", len="+n.values.length+" of "+t.limit:"Data arrived, id="+s+", offset="+n.offset+", len="+n.values.length+" of "+n.limit),this.settings.data.autoCategories&&(n=this.autoCategorize(n,this.settings.data.autoCategories)),this.addData(s,n.values,n.offset,n.limit,n.afterSum,n.beforeSum,n.sum,n,r)),this.chart.events.notifySceneChanges({dataArrived:!0,dataArrivedIds:r}),t?(Base_Helpers.removeFromArray(this.requests,t),delete this.requestedPies[t.id],this.runRequests()):void 0}},t.prototype.autoCategorize=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y;if(t.offset||t.afterSum>0||t.total>t.values.length)return this.chart.error("Cannot auto categorize partial data"),t;if(!(e.length>0))return t;for(t.subvalues=t.values,a=[t],c=0,f=e.length;f>c;c++){for(n=e[c],h=[],p=0,m=a.length;m>p;p++){for(i=a[p],r=[],s={},y=i.subvalues,d=0,g=y.length;g>d;d++)u=y[d],l=Base_Helpers.isFunction(n)?n(u):u[n],l=void 0===l||null===l?"None":l.toString(),s.hasOwnProperty(l)?o=s[l]:(o=Base_Helpers.clone(u),delete o.id,o.subvalues=[],o.name=l,o.__category=n,o.value=0,s[l]=o,r.push(o),h.push(o)),o.subvalues.push(u),Base_Helpers.isNumber(u.value)&&(o.value+=parseFloat(u.value));i.subvalues=r}a=h}return t.values=t.subvalues,delete t.subvalues,t},t.prototype.addData=function(t,e,i,n,s,r,o,a,h){var l,u,c,p,d,f,m,g,y;for(p={},m=0,g=e.length;g>m;m++)d=e[m],d.value=parseFloat(d.value),d.id?(d.__id=""+d.id,p.hasOwnProperty(d.__id)&&this.chart.error("Data response: Multiple slices with the same ID: "+d.__id),p[d.__id]=!0):(d.__id=this.CS+this.nextId,this.nextId++),d.subvalues&&(h[d.__id]=!0,this.addData(d.__id,d.subvalues,0,1/0,0,0,0,null,h),this.markDone(d.__id));if(c=this.pies.hasOwnProperty(t)?this.pies[t]:this.pies[t]=new Piechart_PieData(t),c.addData(e,i,n,s,r,o,this.chart),a){l={values:!0,id:!0,offset:!0,limit:!0,afterSum:!0,beforeSum:!0,subvalues:!0,sum:!0},y=[];for(u in a)f=a[u],y.push(l[u]?void 0:c[u]=f);return y}},t.prototype.markDone=function(t){return this.pies.hasOwnProperty(t)?this.pies[t].markDone():void 0},t.prototype.getDataFunction=function(){var t;return t=this.settings.data,t.dataFunction?t.dataFunction:t.url?function(e,i,n,s,r){var o;return o=[],null!=e&&o.push(["id",e]),o.push(["limit",i]),o.push(["offset",n]),Base_Helpers.doRequest(t.url,o,s,r)}:null},t.prototype.needPostprocessing=function(){return null!=this.chart.settings.filters.sliceFilter||this.chart.settings.data.sortField},t.prototype.filterAndSortData=function(t){var e,i,n,s,r,o,a,h,l,u;if(i=this.chart.settings.filters.sliceFilter){for(r=t.total||0,o=t.totalCount||0,a=[],u=t.values,h=0,l=u.length;l>h;h++)s=u[h],i(s)?a.push(s):(r-=s.value,o-=1);n={values:a,done:t.done,beforeSum:t.beforeSum,afterSum:t.afterSum},t.total&&(n.total=r),t.totalCount&&(n.totalCount=o),t=n}return this.chart.settings.data.sortField&&(e=this.chart.settings.data.sortField,t.values.sort(function(t,i){return i[e]-t[e]})),t},t}(),function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(t,e){function i(){he.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var n=!0;return h(function(){return n&&(i(),n=!1),e.apply(this,arguments)},e)}function n(t,e){return function(i){return c(t.call(this,i),e)}}function s(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function r(){}function o(t){C(t),h(this,t)}function a(t){var e=y(t),i=e.year||0,n=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,h=e.minute||0,l=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*l+6e4*h+36e5*a,this._days=+o+7*r,this._months=+s+3*n+12*i,this._data={},this._bubble()}function h(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function l(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&be.hasOwnProperty(e)&&(i[e]=t[e]);return i}function u(t){return 0>t?Math.ceil(t):Math.floor(t)}function c(t,e,i){for(var n=""+Math.abs(t),s=t>=0;n.length<e;)n="0"+n;return(s?i?"+":"":"-")+n}function p(t,e,i,n){var s=e._milliseconds,r=e._days,o=e._months;n=null==n?!0:n,s&&t._d.setTime(+t._d+s*i),r&&ne(t,"Date",ie(t,"Date")+r*i),o&&ee(t,ie(t,"Month")+o*i),n&&he.updateOffset(t,r||o)}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function m(t,e,i){var n,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&_(t[n])!==_(e[n]))&&o++;return o+r}function g(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Qe[t]||Ke[e]||e}return t}function y(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=g(i),e&&(n[e]=t[i]));return n}function v(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}he[e]=function(s,r){var o,a,h=he.fn._lang[e],l=[];if("number"==typeof s&&(r=s,s=t),a=function(t){var e=he().utc().set(n,t);return h.call(he.fn._lang,e,s||"")},null!=r)return a(r);for(o=0;i>o;o++)l.push(a(o));return l}}function _(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function x(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function S(t,e,i){return K(he([t,11,31+e-i]),e,i).week}function b(t){return w(t)?366:365}function w(t){return t%4===0&&t%100!==0||t%400===0}function C(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[me]<0||t._a[me]>11?me:t._a[ge]<1||t._a[ge]>x(t._a[fe],t._a[me])?ge:t._a[ye]<0||t._a[ye]>23?ye:t._a[ve]<0||t._a[ve]>59?ve:t._a[_e]<0||t._a[_e]>59?_e:t._a[xe]<0||t._a[xe]>999?xe:-1,t._pf._overflowDayOfYear&&(fe>e||e>ge)&&(e=ge),t._pf.overflow=e)}function P(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function M(t){return t?t.toLowerCase().replace("_","-"):t}function T(t,e){return e._isUTC?he(t).zone(e._offset||0):he(t).local()}function k(t,e){return e.abbr=t,Se[t]||(Se[t]=new r),Se[t].set(e),Se[t]}function D(t){delete Se[t]}function L(t){var e,i,n,s,r=0,o=function(t){if(!Se[t]&&we)try{require("./lang/"+t)}catch(e){}return Se[t]};if(!t)return he.fn._lang;if(!d(t)){if(i=o(t))return i;t=[t]}for(;r<t.length;){for(s=M(t[r]).split("-"),e=s.length,n=M(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=o(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&m(s,n,!0)>=e-1)break;e--}r++}return he.fn._lang}function B(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function A(t){var e,i,n=t.match(Te);for(e=0,i=n.length;i>e;e++)n[e]=ii[n[e]]?ii[n[e]]:B(n[e]);return function(s){var r="";for(e=0;i>e;e++)r+=n[e]instanceof Function?n[e].call(s,t):n[e];return r}}function I(t,e){return t.isValid()?(e=F(e,t.lang()),$e[e]||($e[e]=A(e)),$e[e](t)):t.lang().invalidDate()}function F(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(ke.lastIndex=0;n>=0&&ke.test(t);)t=t.replace(ke,i),ke.lastIndex=0,n-=1;return t}function O(t,e){var i,n=e._strict;switch(t){case"Q":return He;case"DDDD":return Ye;case"YYYY":case"GGGG":case"gggg":return n?ze:Be;case"Y":case"G":case"g":return Ve;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Ge:Ae;case"S":if(n)return He;case"SS":if(n)return Ue;case"SSS":if(n)return Ye;case"DDD":return Le;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Fe;case"a":case"A":return L(e._l)._meridiemParse;case"X":return Ne;case"Z":case"ZZ":return Oe;case"T":return Ee;case"SSSS":return Ie;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ue:De;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return De;case"Do":return Re;default:return i=new RegExp(G(z(t.replace("\\","")),"i"))}}function E(t){t=t||"";var e=t.match(Oe)||[],i=e[e.length-1]||[],n=(i+"").match(Xe)||["-",0,0],s=+(60*n[1])+_(n[2]);return"+"===n[0]?-s:s}function N(t,e,i){var n,s=i._a;switch(t){case"Q":null!=e&&(s[me]=3*(_(e)-1));break;case"M":case"MM":null!=e&&(s[me]=_(e)-1);break;case"MMM":case"MMMM":n=L(i._l).monthsParse(e),null!=n?s[me]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[ge]=_(e));break;case"Do":null!=e&&(s[ge]=_(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=_(e));break;case"YY":s[fe]=he.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":s[fe]=_(e);break;case"a":case"A":i._isPm=L(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[ye]=_(e);break;case"m":case"mm":s[ve]=_(e);break;case"s":case"ss":s[_e]=_(e);break;case"S":case"SS":case"SSS":case"SSSS":s[xe]=_(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=E(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=e)}}function R(t){var e,i,n,s,r,o,a,h,l,u,c=[];if(!t._d){for(n=U(t),t._w&&null==t._a[ge]&&null==t._a[me]&&(r=function(e){var i=parseInt(e,10);
return e?e.length<3?i>68?1900+i:2e3+i:i:null==t._a[fe]?he().weekYear():t._a[fe]},o=t._w,null!=o.GG||null!=o.W||null!=o.E?a=$(r(o.GG),o.W||1,o.E,4,1):(h=L(t._l),l=null!=o.d?X(o.d,h):null!=o.e?parseInt(o.e,10)+h._week.dow:0,u=parseInt(o.w,10)||1,null!=o.d&&l<h._week.dow&&u++,a=$(r(o.gg),u,l,h._week.doy,h._week.dow)),t._a[fe]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(s=null==t._a[fe]?n[fe]:t._a[fe],t._dayOfYear>b(s)&&(t._pf._overflowDayOfYear=!0),i=q(s,0,t._dayOfYear),t._a[me]=i.getUTCMonth(),t._a[ge]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=c[e]=n[e];for(;7>e;e++)t._a[e]=c[e]=null==t._a[e]?2===e?1:0:t._a[e];c[ye]+=_((t._tzm||0)/60),c[ve]+=_((t._tzm||0)%60),t._d=(t._useUTC?q:j).apply(null,c)}}function H(t){var e;t._d||(e=y(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],R(t))}function U(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Y(t){t._a=[],t._pf.empty=!0;var e,i,n,s,r,o=L(t._l),a=""+t._i,h=a.length,l=0;for(n=F(t._f,o).match(Te)||[],e=0;e<n.length;e++)s=n[e],i=(a.match(O(s,t))||[])[0],i&&(r=a.substr(0,a.indexOf(i)),r.length>0&&t._pf.unusedInput.push(r),a=a.slice(a.indexOf(i)+i.length),l+=i.length),ii[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),N(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=h-l,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[ye]<12&&(t._a[ye]+=12),t._isPm===!1&&12===t._a[ye]&&(t._a[ye]=0),R(t),C(t)}function z(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})}function G(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function V(t){var i,n,s,r,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(r=0;r<t._f.length;r++)o=0,i=h({},t),i._pf=e(),i._f=t._f[r],Y(i),P(i)&&(o+=i._pf.charsLeftOver,o+=10*i._pf.unusedTokens.length,i._pf.score=o,(null==s||s>o)&&(s=o,n=i));h(t,n||i)}function W(t){var e,i,n=t._i,s=We.exec(n);if(s){for(t._pf.iso=!0,e=0,i=je.length;i>e;e++)if(je[e][1].exec(n)){t._f=je[e][0]+(s[6]||" ");break}for(e=0,i=qe.length;i>e;e++)if(qe[e][1].exec(n)){t._f+=qe[e][0];break}n.match(Oe)&&(t._f+="Z"),Y(t)}else he.createFromInputFallback(t)}function Z(e){var i=e._i,n=Ce.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?W(e):d(i)?(e._a=i.slice(0),R(e)):f(i)?e._d=new Date(+i):"object"==typeof i?H(e):"number"==typeof i?e._d=new Date(i):he.createFromInputFallback(e)}function j(t,e,i,n,s,r,o){var a=new Date(t,e,i,n,s,r,o);return 1970>t&&a.setFullYear(t),a}function q(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function X(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function J(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function Q(t,e,i){var n=de(Math.abs(t)/1e3),s=de(n/60),r=de(s/60),o=de(r/24),a=de(o/365),h=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===r&&["h"]||22>r&&["hh",r]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",de(o/30)]||1===a&&["y"]||["yy",a];return h[2]=e,h[3]=t>0,h[4]=i,J.apply({},h)}function K(t,e,i){var n,s=i-e,r=i-t.day();return r>s&&(r-=7),s-7>r&&(r+=7),n=he(t).add("d",r),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function $(t,e,i,n,s){var r,o,a=q(t,0,1).getUTCDay();return i=null!=i?i:s,r=s-a+(a>n?7:0)-(s>a?7:0),o=7*(e-1)+(i-s)+r+1,{year:o>0?t:t-1,dayOfYear:o>0?o:b(t-1)+o}}function te(e){var i=e._i,n=e._f;return null===i||n===t&&""===i?he.invalid({nullInput:!0}):("string"==typeof i&&(e._i=i=L().preparse(i)),he.isMoment(i)?(e=l(i),e._d=new Date(+i._d)):n?d(n)?V(e):Y(e):Z(e),new o(e))}function ee(t,e){var i;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),x(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function ie(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function ne(t,e,i){return"Month"===e?ee(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function se(t,e){return function(i){return null!=i?(ne(this,t,i),he.updateOffset(this,e),this):ie(this,t)}}function re(t){he.duration.fn[t]=function(){return this._data[t]}}function oe(t,e){he.duration.fn["as"+t]=function(){return+this/e}}function ae(t){"undefined"==typeof ender&&(le=pe.moment,pe.moment=t?i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",he):he)}for(var he,le,ue,ce="2.6.0",pe="undefined"!=typeof global?global:this,de=Math.round,fe=0,me=1,ge=2,ye=3,ve=4,_e=5,xe=6,Se={},be={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},we="undefined"!=typeof module&&module.exports,Ce=/^\/?Date\((\-?\d+)/i,Pe=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Me=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Te=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ke=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,De=/\d\d?/,Le=/\d{1,3}/,Be=/\d{1,4}/,Ae=/[+\-]?\d{1,6}/,Ie=/\d+/,Fe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Oe=/Z|[\+\-]\d\d:?\d\d/gi,Ee=/T/i,Ne=/[\+\-]?\d+(\.\d{1,3})?/,Re=/\d{1,2}/,He=/\d/,Ue=/\d\d/,Ye=/\d{3}/,ze=/\d{4}/,Ge=/[+-]?\d{6}/,Ve=/[+-]?\d+/,We=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ze="YYYY-MM-DDTHH:mm:ssZ",je=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],qe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Xe=/([\+\-]|\d\d)/gi,Je=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Qe={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ke={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},$e={},ti="DDD w W M D d".split(" "),ei="M D H h m s w W".split(" "),ii={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+c(Math.abs(t),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return _(this.milliseconds()/100)},SS:function(){return c(_(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(_(t/60),2)+":"+c(_(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(_(t/60),2)+c(_(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ni=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ti.length;)ue=ti.pop(),ii[ue+"o"]=s(ii[ue],ue);for(;ei.length;)ue=ei.pop(),ii[ue+ue]=n(ii[ue],2);for(ii.DDDD=n(ii.DDD,3),h(r.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=he.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=he([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return K(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),he=function(i,n,s,r){var o;return"boolean"==typeof s&&(r=s,s=t),o={},o._isAMomentObject=!0,o._i=i,o._f=n,o._l=s,o._strict=r,o._isUTC=!1,o._pf=e(),te(o)},he.suppressDeprecationWarnings=!1,he.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),he.utc=function(i,n,s,r){var o;return"boolean"==typeof s&&(r=s,s=t),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=s,o._i=i,o._f=n,o._strict=r,o._pf=e(),te(o).utc()},he.unix=function(t){return he(1e3*t)},he.duration=function(t,e){var i,n,s,r=t,o=null;return he.isDuration(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(o=Pe.exec(t))?(i="-"===o[1]?-1:1,r={y:0,d:_(o[ge])*i,h:_(o[ye])*i,m:_(o[ve])*i,s:_(o[_e])*i,ms:_(o[xe])*i}):(o=Me.exec(t))&&(i="-"===o[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},r={y:s(o[2]),M:s(o[3]),d:s(o[4]),h:s(o[5]),m:s(o[6]),s:s(o[7]),w:s(o[8])}),n=new a(r),he.isDuration(t)&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},he.version=ce,he.defaultFormat=Ze,he.momentProperties=be,he.updateOffset=function(){},he.lang=function(t,e){var i;return t?(e?k(M(t),e):null===e?(D(t),t="en"):Se[t]||L(t),i=he.duration.fn._lang=he.fn._lang=L(t),i._abbr):he.fn._lang._abbr},he.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),L(t)},he.isMoment=function(t){return t instanceof o||null!=t&&t.hasOwnProperty("_isAMomentObject")},he.isDuration=function(t){return t instanceof a},ue=ni.length-1;ue>=0;--ue)v(ni[ue]);he.normalizeUnits=function(t){return g(t)},he.invalid=function(t){var e=he.utc(0/0);return null!=t?h(e._pf,t):e._pf.userInvalidated=!0,e},he.parseZone=function(){return he.apply(null,arguments).parseZone()},he.parseTwoDigitYear=function(t){return _(t)+(_(t)>68?1900:2e3)},h(he.fn=o.prototype,{clone:function(){return he(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=he(this).utc();return 0<t.year()&&t.year()<=9999?I(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?he.utc(this._a):he(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=I(this,t||he.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?he.duration(+e,t):he.duration(t,e),p(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?he.duration(+e,t):he.duration(t,e),p(this,i,-1),this},diff:function(t,e,i){var n,s,r=T(t,this),o=6e4*(this.zone()-r.zone());return e=g(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+r.daysInMonth()),s=12*(this.year()-r.year())+(this.month()-r.month()),s+=(this-he(this).startOf("month")-(r-he(r).startOf("month")))/n,s-=6e4*(this.zone()-he(this).startOf("month").zone()-(r.zone()-he(r).startOf("month").zone()))/n,"year"===e&&(s/=12)):(n=this-r,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-o)/864e5:"week"===e?(n-o)/6048e5:n),i?s:u(s)},from:function(t,e){return he.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(he(),t)},calendar:function(){var t=T(he(),this).startOf("day"),e=this.diff(t,"days",!0),i=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){return w(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=X(t,this.lang()),this.add({d:t-e})):e},month:se("Month",!0),startOf:function(t){switch(t=g(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=g(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+he(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+he(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+T(t,this).startOf(e)},min:function(t){return t=he.apply(null,arguments),this>t?this:t},max:function(t){return t=he.apply(null,arguments),t>this?this:t},zone:function(t,e){var i=this._offset||0;return null==t?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof t&&(t=E(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,i!==t&&(!e||this._changeInProgress?p(this,he.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,he.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?he(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return x(this.year(),this.month())},dayOfYear:function(t){var e=de((he(this).startOf("day")-he(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=K(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=K(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=K(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return S(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return S(this.year(),t.dow,t.doy)},get:function(t){return t=g(t),this[t]()},set:function(t,e){return t=g(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=L(e),this)}}),he.fn.millisecond=he.fn.milliseconds=se("Milliseconds",!1),he.fn.second=he.fn.seconds=se("Seconds",!1),he.fn.minute=he.fn.minutes=se("Minutes",!1),he.fn.hour=he.fn.hours=se("Hours",!0),he.fn.date=se("Date",!0),he.fn.dates=i("dates accessor is deprecated. Use date instead.",se("Date",!0)),he.fn.year=se("FullYear",!0),he.fn.years=i("years accessor is deprecated. Use year instead.",se("FullYear",!0)),he.fn.days=he.fn.day,he.fn.months=he.fn.month,he.fn.weeks=he.fn.week,he.fn.isoWeeks=he.fn.isoWeek,he.fn.quarters=he.fn.quarter,he.fn.toJSON=he.fn.toISOString,h(he.duration.fn=a.prototype,{_bubble:function(){var t,e,i,n,s=this._milliseconds,r=this._days,o=this._months,a=this._data;a.milliseconds=s%1e3,t=u(s/1e3),a.seconds=t%60,e=u(t/60),a.minutes=e%60,i=u(e/60),a.hours=i%24,r+=u(i/24),a.days=r%30,o+=u(r/30),a.months=o%12,n=u(o/12),a.years=n},weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)},humanize:function(t){var e=+this,i=Q(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=he.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=he.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=g(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=g(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:he.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||s||r?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"}});for(ue in Je)Je.hasOwnProperty(ue)&&(oe(ue,Je[ue]),re(ue.toLowerCase()));oe("Weeks",6048e5),he.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},he.lang("en",{ordinal:function(t){var e=t%10,i=1===_(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),we?module.exports=he:"function"==typeof define&&define.amd?(define("moment",function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(pe.moment=le),he}),ae(!0)):ae()}.call(this);var Base_AssetsLoader,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Base_AssetsLoader=function(){function t(t){this.chart=t,this.loadNextAsset=__bind(this.loadNextAsset,this),this.load=__bind(this.load,this),this.loadedAssets={},this.queuedAssets={},this.imgAssets={},this.callbacks=[]}return t.prototype.load=function(t,e){var i,n,s,r,o,a;for(n=!1,s=!0,o=0,a=t.length;a>o;o++)i=t[o],r=this.chart.settings.getAssetUrl(i),this.loadedAssets.hasOwnProperty(r)||(n=!0,this.queuedAssets.hasOwnProperty(r)||(this.queuedAssets[r]=!0,s=!0));return s?(this.callbacks.push(e),1===this.callbacks.length&&(this.chart.log("Loading assets"),this.loadNextAsset(!0)),!0):!1},t.prototype.loadNextAsset=function(t){var e,i,n,s,r,o,a,h,l;null==t&&(t=!1),i=null,h=this.queuedAssets;for(e in h){if(r=h[e],!this.loadedAssets.hasOwnProperty(e)){i=e;break}delete this.queuedAssets[e]}if(i)return s=function(t){return function(e){return t.chart.removed?void 0:(t.loadedAssets[e]=!0,t.loadNextAsset())}}(this),this.loadAsset(i,s);if(t)return setTimeout(this.loadNextAsset,0);if(this.callbacks.length>0){for(this.chart.log("Chart assets loaded"),l=this.callbacks,o=0,a=l.length;a>o;o++)(n=l[o])();return this.callbacks=[]}},t.prototype.loadAsset=function(t,e){var i,n;return n=Base_Helpers.getExtension(t),"css"===n?(i=document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("href",t),i.setAttribute("type","text/css"),Base_Helpers.listen(i,"load",function(){return e(t)}),Base_Helpers.listen(i,"error",function(i){return function(){return i.chart.error("Assets: Failed to load asset",t),e(t)}}(this)),document.getElementsByTagName("head")[0].appendChild(i),setTimeout(function(i){return function(){var n;return i.loadedAssets.hasOwnProperty(t)||i.imgAssets.hasOwnProperty(t)?void 0:(i.imgAssets[t]=!0,n=document.createElement("img"),n.onerror=function(){return e(t)},n.src=t)}}(this),200)):"js"===n?(i=document.createElement("script"),i.setAttribute("src",t),i.setAttribute("type","text/javascript"),Base_Helpers.listen(i,"load",function(){return e(t)}),Base_Helpers.listen(i,"error",function(i){return function(){return i.chart.error("Assets: Failed to load asset",t),e(t)}}(this)),document.getElementsByTagName("head")[0].appendChild(i)):(this.chart.error("Assets: Do not know how to load",t),e(t))},t}();var Base_Random;Base_Random=function(){function t(t){this.seed=t,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,this.R=this.M%this.A,this.oneOverM=1/this.M}return t.prototype.get=function(){var t,e,i;return t=this.seed/this.Q,e=this.seed%this.Q,i=this.A*e-this.R*t,this.seed=i>0?i:i+this.M,this.seed*this.oneOverM},t}();var Base_Data,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Base_Data=function(){function t(t,e){this.chart=t,this.dataSettings=e,this._runRequests=__bind(this._runRequests,this),this.settings=t.settings,this.removed=!1,this.requestScheduled=!1,this.cleanupScheduled=!1,this.requestsRunning=!1,this.requests=[],this.requestedItems={}}return t.settings={url:null,dataFunction:null,preloaded:null,format:"JSON",requestTimeout:4e4,numberOfParallelRequests:3},t.prototype.buildRequest=function(){return 1},t.prototype.dataFunc=function(){return 1},t.prototype.verifyData=function(){return 1},t.prototype.addVerifiedData=function(){return{}},t.prototype.requestTimeout=function(){return 1},t.prototype.requestFailedPermanently=function(){return 1},t.prototype.removeData=function(){return 1},t.prototype.exportData=function(){return 1},t.prototype.remove=function(){return this.removed=!0},t.prototype.getQueueLength=function(){return Base_Helpers.countProperties(this.requestedItems)},t.prototype.addData=function(t){return this._dataArrived(null,t)},t.prototype.applyPreloadedData=function(){return this.dataSettings.preloaded?this._dataArrived(null,this.dataSettings.preloaded):void 0},t.prototype.scheduleRequests=function(){return this.requestScheduled?void 0:(this.requestScheduled=!0,setTimeout(this._runRequests,0))},t.prototype._runRequests=function(){var t,e,i,n,s,r,o;if(!this.removed&&!this.requestsRunning){if(this.requestScheduled=!1,i=(new Date).getTime(),n=this.dataSettings.requestTimeout,this.cleanupScheduled){for(this.cleanupScheduled=!1,e=[],o=this.requests,s=0,r=o.length;r>s;s++)t=o[s],t.time+n>i?e.push(t):(this.requestTimeout(t),0!==t.time&&this.chart.error("Data request timed out, timeout "+n+" ms"));this.requests=e}for(this.requestsRunning=!0;this.requests.length<this.dataSettings.numberOfParallelRequests&&(t=this.buildRequest());)!function(e){return function(){var n,s,r,o,a;o=t,o.time=i,r=function(t){return e._dataArrived(o,t)},s=function(){return e._dataError(o)},e.requests.push(o),e.chart.log("Requesting data for",o);try{a=e.dataFunc(o,r,s)}catch(h){throw n=h,e.requestsRunning=!1,n}return a?a!==!0?e._dataArrived(o,a):void 0:Base_Helpers.removeFromArray(e.requests,o)}}(this)();return this.requestsRunning=!1,this.requests.length>0&&!this.cleanupScheduled?(this.cleanupScheduled=!0,setTimeout(this._runRequests,n)):void 0}},t.prototype._dataError=function(t){return this.removed?void 0:(this.chart.error("Data request failed for nodes: "+t.nodes),t.time=0,this.cleanupScheduled=!0,this._runRequests())},t.prototype._dataArrived=function(t,e){var i,n,s;if(!this.removed)return this.chart.log("Data arrived for request",t),e?(s=Base_Helpers.parseData(e,this.dataSettings.format,this.chart),null!=s.error&&this.chart.error(s.error),i=this.verifyData(t,s)):(i=!1,this.chart.error("Got empty response")),i?(n=this.addVerifiedData(t,s),n.dataArrived=!0,this.chart.events.notifySceneChanges(n)):this.requestFailedPermanently(t),t?(Base_Helpers.removeFromArray(this.requests,t),this._runRequests()):void 0},t}();var Linearchart_DataLimitRenderer;Linearchart_DataLimitRenderer=function(){"use strict";function t(t){this.r=t,this.scene=t.scene}return t.prototype.paint=function(t,e,i){},t.prototype.paintFancyRect=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y;if(!(n>=i||e>=s)&&(m=Math.max(n,e),g=Math.min(s,i),t.beginPath(),t.rect(m,r,g-m,o),Base_Graphics.paint(t,a),null!=a.image&&(l=this.r.getImage(a.image),null!=l)))if(u=l.width,h=l.height,f=(m+g)/2,y=r+(o-h)/2,d=u/2+2,f+d-2>s){if(f=s-u-2,p=m-f,(u-p|0)>0&&(0|u)>(0|p))return t.drawImage(l,0|p,0,u-p|0,h,f+p|0,0|y,u-p|0,0|h)}else{if(!(n>f-d))return t.drawImage(l,f-u/2|0,0|y);if(f=n+2,c=Math.min(g-f,u),(0|c)>0)return t.drawImage(l,0,0,0|c,h,0|f,0|y,0|c,0|h)}},t}();var Base_images_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAAkCAYAAACkCKB2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFbxJREFUeNrsXQt4FFWWPp2k0yEPHgKB8BaQlzwEwgwP37LKMrwcHUQcmRnHDYzuuLPKqviBozI64Koz6qoQ0XHcHWARR8URGQmgO6IYExCIMPIOCEh4JyGvTrrn/tXndm5XV3VXd7qTdq3/+87X1VW3bt261fXfc/977m2H1+slGzZsRI7cfIddCTbihqI8LyXZ1WDDRpPwz8KOCfPaZlsM7Bj/pjTYBG3DRtPwirAcuxpsxAg5/JvSkGLXh40WlQlyc1u2G1lUhDL8iLffiPKFsmEj1iRtTNCO/OLvbrUkOynt1GEa9OZCSmpwk9cRcQfjamGv8/ZqYfd+l6oPZNcCyBOW38Q8FvHnGzY32EgkJJIHfRkcKmGXCksXdljYNmGFwk59S+ozQ1h33u6c4GVFOSfyNnSvd7+Fv98HmFzbCVtsv842bIKOPX4gbJ6wsXDgDY4fF7ZC2CPCKhK8Pj3Kdn2Cl3WosCW8/XkLEvRI/oym69bbfoVt2AQdP4B050NcCJEmh6UCEPgdwnbbjy0mUBuQqhYsRx5/zo7i3MW2NGHDJuj4AF7zr5Xvu4S9Qz5JA55yJ2FXCZvK26PZy7tc2Df2o/t/A8gTZ6M890CUxG7DxrcCLRVmN1nYE8p3bEN/fkjY28I2CFvOL18uEzfQR9h/h/G4EwWJPgOo0sSbbm6MtF9DGzase9AIkv6eRYKBZrxO2Gdh0rXi/Gr4+wLl2OPkkznM8LUwhEGtFTaebZKwreTTrzGo2ENYlrAGTl/IBH9eWJqwa4R9X1hfYdl83zi2m/P92AKJYEBtEHt8uM5JYXuFbebz6w3qBufdIKy/sI68/xjX159CSAud+LyhfG+t+ZroOewgX4TI0TBlRmM2TthAYd2EXcR1gm0X14WadgE1jgHgWkspcHAWvZkJfC8Z3Mv5SthGblAjRm5u7nje7K1IHQXsGRM/d2wX87ZMn8/7evM+9RwJ+Vtpp3jb+U3w1mOO7LR+NGvw/dQ5qxtV1pZT4dGPaG3pC9qx2UOepqU77zM8z+zYoLbX0sS+M7X8vqn4mtbuW067zm3U9g/LHkcr9iwMm8+4TjNocPYow+uqadWy41qvlzxJZTV7Qt7vrf0W0PayzVqZQu3H99auttp2ee052nD4f03zRtr+HYZQpqt1wD2rx63kZVZH2H9F9x/4vyMPfRqjdEZ1Fg0c+qnejvziV8XHzyLIAyPpT+r29WSiBzFeIqwN+QbQTpNv0G8Ke+87mDhrLFwH5LiFibhMmFN5+Yywh8lzLJOKGTxMRg9RsvOcLsyuEzcgs/h6ZnhG2H18z2vlsyRfNIqZjIQIlblMcPq6+0RYlxDXQ+PwNNe7V1dHN3I5LmMiVYFBwTkWn+sQYSWcx9NhpIS/gECLiopqIiDnPK73IP6hxrC5/Uy+xZz2AD/zf+J9Mg/1HPmbXMRkfFZpBA5wj8xP0hwHvZ+3+0TUwPimekfVU8IL/czEFXSy8hs6UXHc1ypn5dDta4Zpx16fvoFmrbouiMzMjk3seTc9eM1i2nV8O1XWVVBmapYgrKP0yCfTNSK+cciPacLyTv70c3OX0bAuo7TrqcD+8f0ma9vpqRlUVXfBf2zWn6/QyE1fdpS7Y2ZnunftrUHlVbFu5gl6a+f/BJGWfj++y7wH5wzXyrFo0wP+xsv/Y75hM/Vq35dKjm/z11/Pi/oEpEVeKszyemTsKrq230S6eeWIAAJH3d02cjYVln6s1Smud6GukhYU/EvAvcp0an2pdRYNN2OqtxF5NESYkUfnKWNA7z+YlPXoq/v+hEVyBnax1zmHvWCjcqiSTT82o/tzsxfp4HN+Qb6wuB+SV8641IgJcstoA2nAw/fqVDxQPVqHuZ/hwtYIG0WBA58ZCjnXM9HL8rbl/R2ZgOAN/1JXn1NNrufmsiO/TL53h8lzdCs9gsd05OzhfJI4H+KGODWCZwkyzBfECPJdzyS8WPF0VbTje32Q01jRrAu4zG8oaSVp51EChOTNu/J3GrHM3TShyXmBMEHOfypeasljQ/opg2doRKXHU0V3CgtNqAvHvxxUdhAc7klP+NHi44MF/uvCC8b9Fa1c7yc7kDOgNjqyB7D5xMqAfeo9gEj1eWneSJeRGrle1+OWIA8Z+9V7RSOGBkpPvkinL088NOgXhU3nLqXephp4fLv4M4dfjN8YkHM5vyi1OhL4PMLyfqTTTZ/lco0RNoK98dvZM1e14H38ck5kz3Ioyw/zlDLdSElJNzlrKyi5rg7e8zMKOXvZ+xzLXuoAzmeasJXcM9CjhuvqLvb4ULaryTcwWqGQ8Yu654DyvCTsZr5Gf7YBLFm8pqT9VyZHI5LdxeR6M5cbb85/km+QFY3D3UraYt43gg0S10FuKFRyfp6PD+R6GMPEWUjGIZLhSFol4wMG5CylimKFVK1IFMUGcob8Pr6lyRmEA0/vyU/viUl+0wfNodIz+y13p+8Yfr/mEeq9SCuAp94xsxO9ui2w0/zi1vnaPeF4rAHCBPndeMlsfxkG5Qyj5z5bEJRWT85GkoOal5RrcE+HTu/T5JJwQCMGLxoST0to0NvYjHADe3wSz3GXHp7cB/ziSnzBZLKZ9dI6Ye2FDRY2g1+UCxGWt0zZvsDadaUuDcjiQ76HDvI3KexvJvfaoEg0eeTxvCn4+GKx/RPF4wbpr9Cde5waI0+MvOV3+D6NGpkPuDHLYNIeyvUlu/V3GZwHzfwEyx/p3IgSy1GblIZE4lFhq0LU4UW6BnSHQdoxikyC+9EzyhGWnZ6m+A2KtqOmzxQkRe5o8djpkV3HaQQZZdc3CKN7XaV5iVagacw5wzU5IipvveNwOll5IkjKwL2gkcDxtaWxrzOQZ5bL5/dd23uyJuWEklPC5ZWT1d3/HV4zSHvbsS10ff9plvL49NAmGtNL+EZxnjwbSRRHTybcLNlYsZyBQbhXdeT8W/ba4OEWMZmdZl34z0wukyny6IFMVaNRyqLH16yLynS9QuT5nl/WcTj6pNRWiRM817KkoD0LA3Imgx6CkQdthi1MtH45M8J6+LVSd+NNGohwkS4uC7+DDjrP3gz1UUhjkSBW6w8kxAAhCHLvqS9jkhfkig6Z2fS3I+9ZSj/n+/OoYM+7UZMbBgUPnt5reAyaMY7HAxmuzID623c6+ukQHbM60/GKI/7v8Joh2aAO4UnDow6Ho+WllJGaGfffilWCdjJJyenLZ4TdyS9lHnfhpQeHbjfC5aoDcsC6FtraFv6e8GYTaSAUIhG49inbbUOkq2bvHmVLS6kWDrnHM1w5vj5Odav+ys1+1Q4+BlnhCrZR3DBVKCTa2eTcpmK72pMm3xjACGreMEcz6aMliT5h0M6VbTkt9Nd0QSrookcLDMSZAVEUF7e/JC73iUFIkKJERe35qBs0kPCR8safFPRnNJhotKQOHfbFKNusNYzIT5+/NCtEH43EYYSF3N2VQJf/79z9/ZWyHxploLCVLC6RlEzwTDVXy+nSFiXSuBx0Xi+40euxUoa2FFl0iUoiobrfjUTmcJCzpjyZvN4eam8mTu+W6pGm6d8DrldISn0Negp1yrND+VPj6LlCkrmKv89k2aaE96+IY/3EAhifGEmN0T4tHnMdqccb1hvPHkWnKsssecRWu+/hiBIDeEYAacbaqwTJ3TXiN5rmCy1a1p8eajhdSdnnAVo0pBEZPog6gDwi9XepP8vnAU9a06GjUJ9QLkTYSOC5NHXQMMXij3yujoRlKBkGrS7m7XMsbTQitRV1OXucbv/ifRp9ZBfVJyfTedFVOdS2MxV1HUAeQS3bOvWlk1nthdcatoc8X7lWvCCI3OHUSQblzfDeqg3IlcL+GEaWSQ1xfizh5kZxGaQ/pWcwlO1ulpLm6noELQ3ozKuYkNVQuxaXOE7VfK15aZF4viG1tdpzltIhvGzLoY80bzFUjLUVSC04nkBYIAzlhraNsDa1/vSYOOBmrfFA+sLSSwMIGmGDMBxbU7IyoAch9WfEMMs4ZtRRVM9WELKq7aOs8fag4Um+qHij8JrUJztJ2cYkiMYp2CkuGn1oGz2+Pp96lJdRTYqPU5KEt3z54R10244PqE7sm3LrE/CwHYKgQ5HML3XXbU7CbE70ZK9UhtmVcWOIaJeD7HVnsOyxiMKH8sUCuO549p6ncKPcVSFr7MPAL6JDjicIOUtZSh9qt5RaOIoDg2kgBHhz4SIOLGlQWlf7Mc2zDOVF45qIiUaIGLzIaAkaHqaZzoyBN8QvxwLQyTHpBFDvS9afHjK876lr1gUdk2F2CM3Tlx3eMogbjYHamMGzDjWIa9bARqvtmyGUToo4X8xYkwNFZ9ibcitd68uV9O805ppMbarO0uMFL1NO5RnhNWdQbbJTs2pB3JXCs65KTaNk4TVP2vMJtGl08R8mX3gXCMjJkgaCD9Gfeo5zria9th1biHvyurk34O/VNeP7e49Czp+xB/gzbiTfJ1/YHtYjeamZPHu1wYL+DHEOMzevD3jePlJ8IEG85zwuD8L/9KF27RKhgOiux8oLlR5lrzYDLaXHjD906eFFxxqYzScn3TQVkEtAdkaEF239rfn7cvpez8sDtOE+HfprXjWkCGlWdOhIpKV4ETRm0I1SXtAfszclAVKVteQJ9J6dNL1kI3U7X0ZVTpdCfuob76C65BTKK3qXcku3V1NKKmbAIboBw9sYnNrNpHQdn4LmbBo3FHGiIS+507IayOFQA4XGNaPHrg6CPkW+aBTDd0FXn83576Xn2UOdRo0L3RMlQHyxIskdIOMV7hJi3Y+dx4q1WXyx8sgR9obwNqvpQUjR6tEYTEMUhREwQIiBwngDIW7R1B90Z8glMn4ZRI3Y7V0nA6OKrcRDo7eAdPGGGUFjcsO/Kd9/x2Rp4HH6CaZRRBaece7Rr6g+KWCwH4scYf2MIu6yF3ocSYXp7trl4458icHEM5wfuvlwB2RkAjzFPzJRb6DgAbVY8qTDndEGHn2hsnNCM767KtHWhkmbpjzDhiZeyxNleRcqDWZCeKffBqzatSSmkzo++OptbWag1agB6UVHc/239i7VJAD9uRiEQ57I2wz6+GNJksgPA3uWiXbf8qjrDwOccip7bidf8FnRicBALYTwhdKhISdhWvhHB9e1CEHjKb+qHENX1kiwgtRwkrfBxOrEB2pwBEVioUkazl5MLnvnozwOR/dT6ZBSvVJKgZeOiRdv8nXhVf6Uvcn4jk40NFBt646uhhRXgcPrlRNgLqPgCRp6dIgRMX+l7JsZIv1NSn0fCeFph0K1hfJjjCLU+hR4numy55ngvDiSEmSBf3SLMVHlnnEPB4Rp6QkWOqcatmUG6Kvwoh+76g8BeZgRtvSibx2WF5XHjrLjXFkmXAfx1eEm30BiALGpxIoIDZQ9Ej0e9Yfyo/4iJWl1yjd6HfCo9WX+9EhBUDy0fAZoiDClHZEgZosmWXlmVmE0SIhuqxrWBT14mQmZqwv6YCqzb7aeIOdTwhNNDgyfC/IIMWBY7sp4e3P3wZlUXy+JANrhqjBSQHzgqafai7qmVnfoXpZxYv/z3pTUeXwEE27Q3EL7LWWPExo5Ii4mcZf6JzEoARrGPG7wZnAv4gUmbjcTKXo3cxRSxz8AR/NPM3uZpDHWMJivs4yfExpQiGtYeQ9vDibdYILRZu7RQLdCTPZ8xZP/vybcdyzlkWJqXMXurE76SJiV7LC2Awa0lkxb4x/0grZ60+rG9vDZqYHzo17+9BnT8DxEOYA4Vs/Y6s8PURsYGDTzolcP3qoRXKRTvlF2DLjJssMDBmGFW1cE1xlUMlxbC+Oeuof9+6OZ1eiLxFgWlJeM1AgFDEBC4qkS9b39WLDnjsaiqu5Zvw6ths/hftEQGd2rPswOMFrwKiLPzWA1OyydGY3uCkFmqPbSp7aiH217nx7fsIzK0/wLqhVS4DRxyqyrPrvx4hG9754yd6bX0/ACeb0ggkvJfGJCOyaW9kwUWJ/CbFQCT+1R3kYUyH+ZpINXVcJEdYxcrQZkF79X0evD15wNqa1WsLeqop4bCnV1O/QyIOqpq9lB0pkVor6w1se/K43iPINy+317bhT0K+rtJF/4m1wWFL2OH/L2beSLrAmFZw16B26+Dtba2M313Vd3PEUnkWDC0diioqKIo0dzc3PXs3c7mxonksjnv58/zbx4o9XsQM7I8w1u7CU553H+I9X8Wmo1O9XLxboQmDiBrrb05oy8L/mih4rYkPG++lhgo6iEcJEK4Y6bXcvqPZst/xnuuvq0IFLEQKMce89vDTjXLC/pHZtdRz1PfRYYlDU7J9Qzi4abzVazi/ZfVvqyF7mE6mtp7YBxdMuXm2jgyVKqdrqCEqc21HsrU1v99KVRU73epORHqUGbufwxhZ415lC61OkUenDMabJtlGcrf57uOseZfqOp8/a/ul0Vp2/zJCXvZ4kl26R+KpjgpdQj4QpTX6km24+xXDBHIcZkXd6QX+BK3UuBazanRfgcEb+MAUe4Chm6upLdH3jOdygyiNPAY0UDGO3CEg8yocpeUz417V9SCjjPRUzMxJ7zdOV7wgAvu1HIW6gXO9QxEKURWRqRSjgSDHfc7FrR3rPV6+rTGkkN4fKK5N6tkmw8IjqMXmIMcXa06BngJZ7MLzCAyI9PyOPZcSEtk+Zfdye99tYiSnfXIGIjxc+w7prTF5xpv7r/+l+s2dlt4Gqqq5Ev/+/DXK+SXzQXe3KhIjrgPcoFiL4Ike4b9n5TNO/f01BVn9meKroOoLSSD2spNRnhY4hJupp8YYXtuG6gvyPqBOFwhzmvz1mCIJZCQgFEtMlAeya+3hKWja5nqUP+ycAXTGiHDPJcyDKJ7LGEA+rw5+RbpvQW7pHUcrlk/g+wt4/ZhGOYqL3cc3mfZQ93EyWJXEXmUKMvci3UodFi/Yt5/0glz7NkPtU7l2zYSEAYSRyR5gFPFsKLXJqzjLv2fyVXOk0q2Ui/LcintPq6dR5HUqv6pKT3tnS79JXfj72lemdOv+XkrpHrFz9P4QfjmgfONOq1IZ+yd2yghtQ0+1diEZALvkuIhcRhw0akEkekqGJpA15XF5YCMJniFaqt+sNfBl5ZfKR1x4YrSndOKE9Lp90derUp7tJvusfpuk+Qs/ynE8xQfCihqsdrv3c2bNhoWcTqX70h2GAxfMw2wyAfdMo5mtXXbd/edeDu7T2GXBCk1528ntFiX2ty+4M6MKg2k4LXdbZhw4YNm6BjBMz+Q9gZ/uYAC87Lga9hgpCHaavWBQIj/4hWwDTmBvtR2LBhw0b8CBrAoB1CxxCbi8FDxJ1gBbo2TMIgZQyI4R9FIIMctR+BDRs2bBgjaJDQhg0b1sCDhJjMk2PXho0YApFlORgkTLLrwoaNJuFOUhcKs2GjaYCq8HP5JcWuDxs2moS1tgdtI174hwADAIWSg7lTzeQwAAAAAElFTkSuQmCC",Base_images_error="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAANSURBVBhXY/j//787AAlDA0XbduzfAAAAAElFTkSuQmCC",Base_Rect;
Base_Rect=function(){function t(t,e,i,n){this.x0=t,this.y0=e,this.x1=i,this.y1=n}return t.prototype.x0=0,t.prototype.x1=0,t.prototype.y0=0,t.prototype.y1=0,t.prototype.isEmpty=function(){return this.x0>=this.x1||this.y0>=this.y1},t.prototype.clone=function(){return new t(this.x0,this.y0,this.x1,this.y1)},t.prototype.infinite=function(){return this.x0=1/0,this.y0=1/0,this.x1=-1/0,this.y1=-1/0,this},t.prototype.w=function(){return this.x1-this.x0},t.prototype.h=function(){return this.y1-this.y0},t.prototype.inflate=function(t){var e,i;return e=(this.x0+this.x1)/2,i=(this.y0+this.y1)/2,this.x0=(this.x0-e)*t+e,this.x1=(this.x1-e)*t+e,this.y0=(this.y0-i)*t+i,this.y1=(this.y1-i)*t+i,this},t.prototype.clip=function(t){return this.x0=Math.max(this.x0,t.x0),this.x1=Math.min(this.x1,t.x1),this.y0=Math.max(this.y0,t.y0),this.y1=Math.min(this.y1,t.y1),this},t.prototype.isInside=function(t){return this.x0>=t.x0&&this.x1<=t.x1&&this.y0>=t.y0&&this.y1<=t.y1},t.prototype.isOutside=function(t){return this.x0>t.x1||this.x1<t.x0||this.y0>t.y1||this.y1<t.y0},t.prototype.overlapsRect=function(t,e,i,n){return t<this.x1&&i>this.x0&&e<this.y1&&n>this.y0},t.prototype.area=function(){return(this.x1-this.x0)*(this.y1-this.y0)},t.prototype.toString=function(){return""+this.x0+","+this.y0+", "+this.x1+", "+this.y1},t.prototype.addPoint=function(t,e){return this.x0=Math.min(this.x0,t),this.x1=Math.max(this.x1,t),this.y0=Math.min(this.y0,e),this.y1=Math.max(this.y1,e),this},t.prototype.addLine=function(t){var e,i,n;for(e=i=0,n=t.length-2;n>=i;e=i+=2)this.addPoint(t[e],t[e+1]);return this},t.prototype.overlaps=function(t){return this.x0<t.x1&&this.x1>t.x0&&this.y0<t.y1&&this.y1>t.y0},t}();var Base_Geometry;Base_Geometry=function(){function t(){}return t.distanceToLineSq=function(t,e,i,n,s,r){var o,a,h;return h=this.closestPointToLine(t,e,i,n,s,r),o=h[0],a=h[1],(s-o)*(s-o)+(r-a)*(r-a)},t.closestPointToLine=function(t,e,i,n,s,r){var o,a,h,l;return o=i-t,a=n-e,h=o*o+a*a,h>0?(l=((s-t)*o+(r-e)*a)/h,l=Math.min(Math.max(l,0),1)):l=0,[t+o*l,e+a*l]},t.rayIntersectsLine=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d;return h=1/0,u=o-s,c=a-r,l=i*c-n*u,0!==l&&(d=(e*u-t*c+s*c-r*u)/l,p=Math.abs(u)>Math.abs(c)?(t+i*d-s)/u:(e+n*d-r)/c,p>=0&&1>=p&&d>=0&&(h=d)),h},t.rayIntersectsLineBidir=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d;return h=1/0,u=o-s,c=a-r,l=i*c-n*u,0!==l&&(d=(e*u-t*c+s*c-r*u)/l,p=Math.abs(u)>Math.abs(c)?(t+i*d-s)/u:(e+n*d-r)/c,p>=0&&1>=p&&(h=d)),h},t.rayIntersectsCircle=function(t,e,i,n,s){var r,o,a,h,l,u,c;return r=i*i+n*n,o=t*i+e*n,a=t*t+e*e-s*s,l=o*o-r*a,h=1/0,l>0&&(l=Math.sqrt(l),u=(-o-l)/r,c=(-o+l)/r,u>=0&&(h=u),c>=0&&(h=Math.min(h,c))),h},t.rayIntersectsCircleOuter=function(t,e,i,n,s){var r,o,a,h;return r=i*i+n*n,o=t*i+e*n,a=t*t+e*e-s*s,h=o*o-r*a,h=Math.sqrt(h),Math.max((-o+h)/r,(-o-h)/r)},t.lineTouchingCircle=function(t,e,i,n,s){var r,o,a,h,l,u,c;return r=Math.sqrt(t*t+e*e),r>s?(a=Math.sqrt(r*r-s*s),u=s*a/r,c=s*s/r,h=t/r,l=e/r,o=t*n-e*i,0>o&&(u=-u),[h*c-l*u,l*c+h*u]):null},t.distanceToPolygonSq=function(e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m;if(t.isInsidePolygon(e,i,n))return 0;for(s=1/0,p=0,f=n.length;f>p;p++)for(a=n[p],o=a.length,h=a[o-2],u=a[o-1],r=d=0,m=o-2;m>=d;r=d+=2)l=a[r],c=a[r+1],s=Math.min(s,t.distanceToLineSq(h,u,l,c,e,i)),h=l,u=c;return s},t.distanceToLinesSq=function(e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m;for(s=1/0,p=0,f=n.length;f>p;p++)if(a=n[p],o=a.length,2===o)s=Math.min(s,(e-a[0])*(e-a[0])+(i-a[1])*(i-a[1]));else if(o>2)for(h=a[0],u=a[1],r=d=2,m=o-2;m>=d;r=d+=2)l=a[r],c=a[r+1],s=Math.min(s,t.distanceToLineSq(h,u,l,c,e,i)),h=l,u=c;return s},t.isInsidePolygon=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f;for(s=!1,c=0,d=i.length;d>c;c++)for(o=i[c],r=o.length,a=o[r-2],l=o[r-1],n=p=0,f=r-2;f>=p;n=p+=2)h=o[n],u=o[n+1],u>e!=l>e&&(h-a)*(e-l)/(u-l)+a>t&&(s=!s),a=h,l=u;return s},t.distanceToBalloon=function(e,i,n,s){var r,o;return e>=i?r=e:0===s?r=i:(o=Base_Helpers.sign(s),r=e/s*o,Math.abs(n*r)>i-e&&(r=t.rayIntersectsCircleOuter(-(i-e),0,Math.abs(n),s,e))),r},t.distanceToRect=function(t,e,i,n,s,r){var o,a;return o=i>t?i-t:t>s?t-s:0,a=n>e?n-e:e>r?e-r:0,Math.sqrt(o*o+a*a)},t.simplify=function(e,i){var n;return i&&e.length?(n=i*i,e=t.reducePoints(e,n),e=t.simplifyDP(e,n)):e},t.simplifyDP=function(e,i){var n,s,r,o,a,h;for(r=e.length,n=void 0!==typeof Uint8Array?Uint8Array:Array,o=new n(r),o[0]=o[r-2]=1,t.simplifyDPStep(e,o,i,0,r-2),a=[],s=h=0;r>h;s=h+=2)o[s]&&(a.push(e[s]),a.push(e[s+1]));return a},t.simplifyDPStep=function(e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g;for(h=0,a=0,u=e[s],p=e[s+1],c=e[r],d=e[r+1],o=f=m=s+2,g=r-2;g>=f;o=f+=2)l=t.distanceToLineSq(u,p,c,d,e[o],e[o+1]),l>h&&(a=o,h=l);return h>n?(i[a]=1,t.simplifyDPStep(e,i,n,s,a),t.simplifyDPStep(e,i,n,a,r)):void 0},t.reducePoints=function(t,e){var i,n,s,r,o,a,h,l;for(r=t[0],a=t[1],s=[r,a],n=t.length,i=l=2;n>l;i=l+=2)o=t[i],h=t[i+1],(r-o)*(r-o)+(a-h)*(a-h)>e&&(s.push(o),s.push(h),r=o,a=h);return r!==o&&a!==h&&s.push(o,h),s},t}();var Netchart_Layout_BHTree;Netchart_Layout_BHTree=function(){function t(){this.root=null,this.freeNodeRoot=null,this.temperature=0,this.nodeCount=0}var e,i;return e=function(){function t(){}return t.prototype.forceLinkList=null,t.prototype.x=0,t.prototype.y=0,t.prototype.r=0,t.prototype.fx=0,t.prototype.fy=0,t.prototype.sizeEstimate=0,t.prototype.left=null,t.prototype.right=null,t.prototype.nodes=null,t}(),t.prototype.maxLeafCount=5,t.test=function(){var e,i,n;return n=new t,n.maxLeafCount=2,n.temperature=1,i=[],e={z:0,dx:0,dy:0,dz:0,repulsiveForceX:0,repulsiveForceY:0,repulsiveForceZ:0,fsum:0},i.push(Base_Helpers.extend({r:5,x:10,y:10},e)),i.push(Base_Helpers.extend({r:5,x:0,y:0},e)),i.push(Base_Helpers.extend({r:5,x:0,y:10},e)),i.push(Base_Helpers.extend({r:5,x:10,y:0},e)),i.push(Base_Helpers.extend({r:5,x:10,y:10},e)),i.push(Base_Helpers.extend({r:5,x:20,y:0},e)),i.push(Base_Helpers.extend({r:5,x:25,y:0},e)),n.buildTree(i,i.length)},t.prototype.buildTree=function(t){var e,i,n,s;for(this.iters=0,e=t.length,null!=this.root&&this.freeNode(this.root),this.root=this.newNode(),e>0&&this.buildTreeRecursive(t,0,e,this.root),i=n=0,s=e-1;s>=n;i=n+=1)t[i].repulsiveForceX=0,t[i].repulsiveForceY=0,t[i].repulsiveForceZ=0;return this.calculateForces()},t.prototype.freeNode=function(t){return null!=t.left&&this.freeNode(t.left),null!=t.right&&this.freeNode(t.right),t.left=this.freeNodeRoot,this.freeNodeRoot=t},t.prototype.newNode=function(){var t;return null!=this.freeNodeRoot?(t=this.freeNodeRoot,this.freeNodeRoot=t.left,t.left=null,t.right=null,t.leafCount=0,t.sizeEstimate=0,t.forceLinkList.length=0):(t=new e,t.forceLinkList=[],t.leaves=new Array(this.maxLeafCount)),t.repulsiveForceX=0,t.repulsiveForceY=0,t.repulsiveForceZ=0,t},i=function(t,e,i){var n;return n=t[e],t[e]=t[i],t[i]=n},t.prototype.addForceLink=function(t,e){return t.forceLinkList.push(e)},t.prototype.getMedianX=function(t,e,n){var s,r,o,a,h;for(n-=1,o=(e+n)/2|0;;){if(e>=n)return o;if(n===e+1&&t[e].x>t[n].x)return i(t,e,n),o;for(a=(e+n)/2|0,t[a].x>t[n].x&&i(t,a,n),t[e].x>t[n].x&&i(t,e,n),t[a].x>t[e].x&&i(t,a,e),i(t,a,e+1),r=e+1,s=n;;){for(;;)if(r+=1,!(t[e].x>t[r].x))break;for(;;)if(s-=1,!(t[s].x>t[e].x))break;if(r>s)break;h=t[r],t[r]=t[s],t[s]=h}i(t,e,s),o>=s&&(e=r),s>=o&&(n=s-1)}},t.prototype.getMedianY=function(t,e,n){var s,r,o,a,h;for(n-=1,o=(e+n)/2|0;;){if(e>=n)return o;if(n===e+1)return t[e].y>t[n].y&&i(t,e,n),o;for(a=(e+n)/2|0,t[a].y>t[n].y&&i(t,a,n),t[e].y>t[n].y&&i(t,e,n),t[a].y>t[e].y&&i(t,a,e),i(t,a,e+1),r=e+1,s=n;;){for(;;)if(r+=1,!(t[e].y>t[r].y))break;for(;;)if(s-=1,!(t[s].y>t[e].y))break;if(r>s)break;h=t[r],t[r]=t[s],t[s]=h}i(t,e,s),o>=s&&(e=r),s>=o&&(n=s-1)}},t.prototype.buildTreeRecursive=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;for(d=f=t[e].x,g=y=t[e].y,o=_=S=e+1,b=i-1;b>=_;o=_+=1)u=t[o],p=u.x,m=u.y,d>p&&(d=p),p>f&&(f=p),g>m&&(g=m),m>y&&(y=m);if(n.sizeEstimate=Math.max(f-d,y-g),n.sizeEstimate=n.sizeEstimate*n.sizeEstimate+.1,n.sizeEstimate*=2,r=i-e,r<=this.maxLeafCount){for(n.leafCount=r,p=0,m=0,v=0,c=0,o=x=0,w=r-1;w>=x;o=x+=1)l=t[o+e],p+=l.x,m+=l.y,v+=l.z,c+=l.r,n.leaves[o]=l;return a=1/r,n.r=c,n.x=p*a,n.y=m*a,void(n.z=v*a)}return h=f-d>y-g?this.getMedianX(t,e,i):this.getMedianY(t,e,i),h++,s=this.newNode(),n.left=s,this.buildTreeRecursive(t,e,h,s),s=this.newNode(),n.right=s,this.buildTreeRecursive(t,h,i,s),a=1/r,n.r=n.right.r+n.left.r,n.x=(n.left.x*(h-e)+n.right.x*(i-h))*a,n.y=(n.left.y*(h-e)+n.right.y*(i-h))*a,n.z=(n.left.z*(h-e)+n.right.z*(i-h))*a},t.prototype.calculateForces=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y;for(l=new Array(this.nodeCount),c=0,u=0,null!==this.root.left?(l[u]=this.root.left,u++,l[u]=this.root.right,u++,this.addForceLink(this.root.left,this.root.right)):(l[u]=this.root,u++),y=[];u>c;){if(o=l[c],c++,s=1/o.r,null!==o.left)this.processTreeNode(o,o.left),this.processTreeNode(o,o.right),l[u]=o.left,u++,l[u]=o.right,u++,t=o.left.r*s,e=o.repulsiveForceX*t,i=o.repulsiveForceY*t,o.left.repulsiveForceX+=e,o.left.repulsiveForceY+=i,o.right.repulsiveForceX+=o.repulsiveForceX-e,o.right.repulsiveForceY+=o.repulsiveForceY-i,this.addForceLink(o.left,o.right);else for(n=p=0,f=o.leafCount-1;f>=p;n=p+=1)for(a=o.leaves[n],this.processLeafNode(o,a),t=a.r*s,a.repulsiveForceX+=o.repulsiveForceX*t,a.repulsiveForceY+=o.repulsiveForceY*t,r=d=m=n+1,g=o.leafCount-1;g>=d;r=d+=1)h=o.leaves[r],this.forceBetweenParticles(a,h);y.push(o.forceLinkList.length=0)}return y},t.prototype.processTreeNode=function(t,i){var n,s,r,o,a,h,l,u,c,p,d,f,m;for(a=t.forceLinkList.length,m=[],r=d=0,f=a-1;f>=d;r=d+=1)h=t.forceLinkList[r],u=i.x-h.x,c=i.y-h.y,o=u*u+c*c,l=i.sizeEstimate,h instanceof e&&(l+=h.sizeEstimate),o>l?(p=i.r*h.r/(o*Math.sqrt(o)),n=u*p,i.repulsiveForceX+=n,h.repulsiveForceX-=n,s=c*p,i.repulsiveForceY+=s,m.push(h.repulsiveForceY-=s)):m.push(h instanceof e?this.addForceLink(h,i):this.addForceLink(i,h));return m},t.prototype.processLeafNode=function(t,i){var n,s,r,o,a,h,l,u,c,p,d,f;for(d=t.forceLinkList,f=[],c=0,p=d.length;p>c;c++)o=d[c],o instanceof e?(h=i.x-o.x,l=i.y-o.y,r=h*h+l*l,a=o.sizeEstimate,r>a?(u=i.r*o.r/(r*Math.sqrt(r)),n=h*u,i.repulsiveForceX+=n,o.repulsiveForceX-=n,s=l*u,i.repulsiveForceY+=s,f.push(o.repulsiveForceY-=s)):f.push(this.addForceLink(o,i))):f.push(this.forceBetweenParticles(i,o));return f},t.prototype.forceBetweenParticles=function(t,e){var i,n,s,r,o,a;return s=t.x-e.x,r=t.y-e.y,o=t.z-e.z,i=s*s+r*r+o*o,n=t.r+e.r,a=i*this.temperature<n?.25*this.temperature*Math.sqrt(this.temperature*n):.25*n*n/(i*Math.sqrt(i)),t.repulsiveForceX+=s*a,e.repulsiveForceX-=s*a,t.repulsiveForceY+=r*a,e.repulsiveForceY-=r*a,t.repulsiveForceZ+=o*a,e.repulsiveForceZ-=o*a},t}();var Netchart_Layout_GraphAdjacency;Netchart_Layout_GraphAdjacency=function(){function t(t,e){var i,n,s;for(this.edgecnt=0,this.nodecnt=t,this.maxedges=e,this.increment=e+1,this.nodestart=new Array(t),this.enodes=new Array(e),this.next=new Array(e),i=n=0,s=this.nodecnt-1;s>=n;i=n+=1)this.nodestart[i]=-1}return t.prototype.addEdge=function(t,e){return this.edgecnt>=this.maxedges&&(this.maxedges+=this.increment,this.increment*=2,this.next.length=this.maxedges,this.enodes.length=this.maxedges),this.enodes[this.edgecnt]=e,this.next[this.edgecnt]=this.nodestart[t],this.nodestart[t]=this.edgecnt,this.edgecnt++},t.prototype.addUndirectEdge=function(t,e){return this.addEdge(t,e),this.addEdge(e,t)},t}();var Base_CssColorParser;Base_CssColorParser=function(){function t(){}return t.clamp_css_byte=function(t){return t=Math.round(t),0>t?0:t>255?255:t},t.clamp_css_float=function(t){return 0>t?0:t>1?1:t},t.parse_css_int=function(e){return t.clamp_css_byte("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))},t.parse_css_float=function(e){return t.clamp_css_float("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))},t.css_hue_to_rgb=function(t,e,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t},t.parseCSSColor=function(e){var i,n,s,r,o,a,h,l,u,c,p,d;if(d=e.replace(RegExp(" ","g"),"").toLowerCase(),d in t.kCSSColorTable)return t.kCSSColorTable[d].slice();if("#"===d[0])return 4===d.length?(o=parseInt(d.substr(1),16),o>=0&&4095>=o?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null):7===d.length?(o=parseInt(d.substr(1),16),o>=0&&16777215>o?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null):null;if(u=d.indexOf("("),n=d.indexOf(")"),-1!==u&&n+1===d.length){if(s=d.substr(0,u),c=d.substr(u+1,n-(u+1)).split(","),i=1,"rgba"===s){if(4!==c.length)return null;i=t.parse_css_float(c.pop())}if("rgba"===s||"rgb"===s)return 3!==c.length?null:[t.parse_css_int(c[0]),t.parse_css_int(c[1]),t.parse_css_int(c[2]),i];if("hsla"===s){if(4!==c.length)return null;i=t.parse_css_float(c.pop())}if("hsla"===s||"hsl"===s)return 3!==c.length?null:(r=(parseFloat(c[0])%360+360)%360/360,p=parse_css_float(c[1]),a=parse_css_float(c[2]),l=.5>=a?a*(p+1):a+p-a*p,h=2*a-l,[t.clamp_css_byte(255*t.css_hue_to_rgb(h,l,r+1/3)),t.clamp_css_byte(255*t.css_hue_to_rgb(h,l,r)),t.clamp_css_byte(255*t.css_hue_to_rgb(h,l,r-1/3)),i])}return null},t.kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},t}();var PieChart_Renderer_Base;PieChart_Renderer_Base=function(){function t(t){this.renderer=t,this.settings=this.renderer.settings}return t.prototype.paintPie=function(t,e,i,n,s,r,o,a){return a.fillColor?(t.beginPath(),t.arc(e,i,s,r,o,!1),t.arc(e,i,n,o,r,!0),t.closePath(),Base_Graphics.fill(t,a)):void 0},t.prototype.paintSlices=function(){throw"paintSlices not implemented"},t.prototype.paintExpandableHilights=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g;for(s=this.settings.slice.expandableMarkStyle.distance,g=[],f=0,m=n.length;m>f;f++)c=n[f],c.expandable&&(a=c.renderParams,p=e+c.x,d=i+c.y,l=a[0],u=a[1],h=Math.max((l+u)/2,u-s),r=a[2],o=a[3],t.beginPath(),t.arc(p,d,h,r,o),g.push(Base_Graphics.paint(t,this.settings.slice.expandableMarkStyle)));return g},t.prototype.strokeSlice=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d;return l=n.renderParams,e+=n.x,i+=n.y,c=l[0],p=l[1],o=l[2],a=l[3],s=l[4],r=l[5],u=p*Math.abs(a-o),d=p-c,h=Math.min(.1*Math.min(u,d),3),c+p===-2&&(c=0,p=0),t.beginPath(),"zigzag"===n.lineDecoration?this.strokeZigZag(t,e,i,p,h,o,a):t.arc(e,i,p,o,a,!1,!0),s===r?t.lineTo(e+Math.cos(r)*c,i+Math.sin(s)*c):t.arc(e,i,c,r,s,!0),t.closePath()},t.prototype.strokeZigZag=function(t,e,i,n,s,r,o){var a,h;for(h=5/n,a=r,t.moveTo(e+n*Math.cos(r),i+n*Math.sin(r));o>a+h;)a+=h,t.lineTo(e+(n+s)*Math.cos(a),i+(n+s)*Math.sin(a)),s=-s;return t.lineTo(e+n*Math.cos(o),i+n*Math.sin(o))},t.prototype.strokeAndPaint=function(t,e,i,n){var s;return s=Base_Graphics.beginStrokeAndFill(t,n),this.strokeSlice(s,e,i,n),Base_Graphics.endStrokeAndFill(t,s,n)},t}();var Base_MonotoneCurve;Base_MonotoneCurve=function(){function t(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f;for(null==i&&(i=0),null==n&&(n=t.length),this.n0=i,h=[],h.length=n-i,u=0,h[n-i-1]=(e[n-1]-e[n-2])/(t[n-1]-t[n-2]),r=(e[i+1]-e[i])/(t[i+1]-t[i]),a=p=d=i+1,f=n-1;f>=d?f>p:p>f;a=f>=d?++p:--p)s=(e[a+1]-e[a])/(t[a+1]-t[a]),0===r?u=l=0:(l=(r+s)/2,o=(u*u+l*l)/(r*r),o>9&&(c=3/Math.sqrt(o),u=c*u,l=c*l)),h[a-i-1]=u,u=l,r=s;h[a-i-1]=u,this.x=t,this.y=e,this.m=h}return t.prototype.interpolate=function(t,e){var i,n,s,r,o,a,h,l,u;return i=this.x[t+1]-this.x[t],a=(e-this.x[t])/i,h=a*a,l=h*a,n=2*l-3*h+1,r=l-2*h+a,s=-2*l+3*h,o=l-h,u=n*this.y[t]+r*i*this.m[t-this.n0]+s*this.y[t+1]+o*i*this.m[t-this.n0+1]},t.prototype.interpolateArray=function(t,e,i,n,s){var r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S;for(y=this.x[t],_=this.y[t],p=this.m[t-this.n0],x=this.y[t+1],d=this.m[t-this.n0+1],r=this.x[t+1]-y,u=1/r,c=S=i;n>=i?n>S:S>n;c=n>=i?++S:--S)f=(e[c]-y)*u,m=f*f,g=m*f,o=2*g-3*m+1,h=g-2*m+f,a=-2*g+3*m,l=g-m,v=o*_+h*r*p+a*x+l*r*d,s.push(v)},t.prototype.clear=function(){return this.m.length=0},t}();var Netchart_Data,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Data=function(t){function e(t){this.chart=t,e.__super__.constructor.call(this,t,t.settings.data),this.nodes={},this.links={},this.nodeToLinks={},this.pendingNodes={},this.requestedNodes={},this.hasAllData=!this.hasDataFunc(),this.pendingAllData=!1,this.requestedAllData=!1}return __extends(e,t),e.prototype.nextLinkId=0,e.prototype.buildRequest=function(){var t,e,i,n;if(this.pendingAllData&&!this.requestedAllData)return this.pendingNodes={},this.requestedAllData=!0,{nodes:[]};if(!Base_Helpers.hasProperties(this.pendingNodes))return null;e=[],n=this.pendingNodes;for(t in n)if(i=n[t],e.push(t),delete this.pendingNodes[t],this.requestedNodes[t]=!0,e.length>this.settings.data.requestMaxUnits)break;return{nodes:e}},e.prototype.hasDataFunc=function(){var t;return t=this.settings.data,t.dataFunction||t.url},e.prototype.dataFunc=function(t,e,i){var n,s,r;return n=this.settings.data,n.dataFunction?(r=n.dataFunction(t.nodes||null,e,i),r?r:!0):n.url?(s=[],t.nodes&&s.push(["nodes",t.nodes]),Base_Helpers.doRequest(n.url,s,e,i),!0):null},e.prototype.verifyData=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b;for(_=["links","nodes"],c=0,m=_.length;m>c;c++)l=_[c],e.hasOwnProperty(l)||(e[l]=[]);if(i=!0,!Base_Helpers.isArray(e.nodes)){h=e.nodes,e.nodes=[];for(o in h)u=h[o],u.id=o,e.nodes.push(u)}if(!Base_Helpers.isArray(e.links)){h=e.links,e.links=[];for(o in h)u=h[o],u.id=o,e.links.push(u)}for(this.chart.log(t?"Got "+e.nodes.length+" data on  "+t.nodes:"Got "+e.nodes.length+" data on all nodes"),s=!(t&&t.nodes.length>0),n=!(t&&t.nodes.length>0&&e.nodes.length>0),r={},x=e.nodes,p=0,g=x.length;g>p;p++)a=x[p],r.hasOwnProperty(a.id)&&this.chart.error("Data response: Multiple nodes with the same ID: "+a.id),r[a.id]=!0,t&&Base_Helpers.arrayContains(t.nodes,a.id)&&(s=!0,n||(n=a.loaded));for(r={},S=e.links,d=0,y=S.length;y>d;d++)a=S[d],a.hasOwnProperty("id")&&r.hasOwnProperty(a.id)&&this.chart.error("Data response: Multiple links with the same ID: "+a.id),r[a.id]=!0;if(s){if(!n)for(this.chart.error("Data response: loaded field was not set on any of the requested nodes, adding manually"),b=e.nodes,f=0,v=b.length;v>f;f++)a=b[f],Base_Helpers.arrayContains(t.nodes,a.id)&&(a.loaded=!0)}else this.chart.error("Data response: Results set did not contain any of requested nodes: ",t.nodes),i=!1;return i},e.prototype.addVerifiedData=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v;for(n=!this.hasDataFunc(),i={},this.updateGraph(e,n),m=e.nodes,a=0,c=m.length;c>a;a++)s=m[a],s.loaded&&(i[s.id]=!0,delete this.requestedNodes[s.id]),s.error&&(delete this.requestedNodes[s.id],i[s.id]=!0);if(t)if(0===t.nodes.length)this.pendingNodes={},this.hasAllData=!0;else for(g=t.nodes,h=0,p=g.length;p>h;h++)s=g[h],this.requestedNodes[s]&&(this.pendingNodes[s]=!0,delete this.requestedNodes[s]);for(o={},r={},y=e.nodes,l=0,d=y.length;d>l;l++)s=y[l],this.isFilteredNode(s.id)||(o[s.id]=s);for(v=e.links,u=0,f=v.length;f>u;u++)s=v[u],r[s.id]=!0;return{dataLoadedNodesIds:i,dataNodesIds:o,dataLinksIds:r}},e.prototype.requestTimeout=function(){return!0},e.prototype.requestFailedPermanently=function(t){var e,i,n,s,r;if(t.nodes){for(i=[],r=t.nodes,n=0,s=r.length;s>n;n++)e=r[n],i.push({id:e,error:"Bad response",loaded:!0});this.addVerifiedData(t,{nodes:i,links:[]})}return this.chart.error("Failed data request, giving up on nodes: ",t.nodes)},e.prototype.removeData=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d;if(n=[],t.nodes)for(c=t.nodes,r=0,h=c.length;h>r;r++)s=c[r],this.removeNode(s.id,n);if(t.links)for(p=t.links,o=0,l=p.length;l>o;o++)i=p[o],e=this.links[i.id],e&&this.removeLink(e);for(d=[],a=0,u=n.length;u>a;a++)i=n[a],d.push(this.removeLink(i));return d},e.prototype.exportData=function(){var t,e,i,n,s,r,o;s=[],i=[],r=this.nodes;for(t in r)n=r[t],s.push(n);o=this.links;for(t in o)e=o[t],i.push(e);return{nodes:s,links:i}},e.prototype.applyPreloadedData=function(){return this.settings.data.randomNodes>0?this.addData(this.genRandomGraph(this.settings.data)):e.__super__.applyPreloadedData.call(this)},e.otherEnd=function(t,e){return e===t.from?t.to:e===t.to?t.from:null},e.multiLinkId=function(t){return t.from<t.to?t.from+"#"+t.to:t.to+"#"+t.from},e.prototype.getNodeData=function(t){return this.nodes.hasOwnProperty(t)?this.nodes[t]:(this.requestNodeData(t),null)},e.prototype.nodeRemoved=function(t){return delete this.pendingNodes[t],delete this.requestedNodes[t]},e.prototype.getLinkData=function(t){return this.links[t]},e.prototype.getNodeLinks=function(t){return this.nodes.hasOwnProperty(t)&&this.nodes[t].loaded?this.applyLinkFilter(t):(this.requestNodeData(t),null)},e.prototype.getNodeCollectedLinks=function(t){return this.applyLinkFilter(t)},e.prototype.getNodeLinksRaw=function(t){return this.nodeToLinks[t]},e.prototype.isLoaded=function(t){return this.nodes.hasOwnProperty(t)&&this.nodes[t].loaded},e.prototype.isFilteredNode=function(t){var e,i;return i=this.settings.filters.nodeFilter,e=this.nodes[t],i&&e?!i(e,this.isLoaded(t)?this.nodeToLinks[t]:null):!1},e.prototype.getNodes=function(){var t,e,i,n,s;if(i=this.settings.filters.nodeFilter,!i)return this.nodes;n={},s=this.nodes;for(t in s)e=s[t],i(e,this.isLoaded(t)?this.nodeToLinks[t]:null)&&(n[t]=e);return n},e.prototype.applyLinkFilter=function(t){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k;if(f=this.nodes[t],l=this.nodeToLinks[t],!(l&&l.length>0))return[];if(h=this.settings.filters.linkFilter,m=this.settings.filters.nodeFilter,g=this.settings.filters.nodeLinksProcessor,p=this.settings.filters.multilinkProcessor,m&&!m(f,f.loaded?l:null))return[];if(m||h){for(s=[],S=0,P=l.length;P>S;S++)a=l[S],v=e.otherEnd(a,t),y=this.nodes[v],(!h||(a.from===t?(i=f,n=y):(i=y,n=f),h(a,i,n)))&&(!m||m(y,y.loaded?this.nodeToLinks[v]:null))&&s.push(a);l=s}if(g&&(l=g(f,l)),p){for(_={},b=0,M=l.length;M>b;b++)a=l[b],_[e.otherEnd(a,t)]=!0;if(Base_Helpers.countProperties(_)<l.length){for(s=[],c={},d={},w=0,T=l.length;T>w;w++)o=l[w],u=e.multiLinkId(o),c.hasOwnProperty(u)?d.hasOwnProperty(u)?d[u].push(o):d[u]=[c[u],o]:c[u]=o;for(C=0,k=l.length;k>C;C++)o=l[C],u=e.multiLinkId(o),d.hasOwnProperty(u)||s.push(o);for(r in d)l=d[r],o=l[0],x=p(l,this.nodes[o.from],this.nodes[o.to]),Base_Helpers.isArray(x)?s.concat(x):x&&s.push(x);l=s}}return l},e.prototype.requestAllNodes=function(){return this.hasAllData?!1:(this.pendingAllData||(this.pendingAllData=!0,this.scheduleRequests()),!0)},e.prototype.requestNodeData=function(t){return!this.hasDataFunc()||this.pendingNodes.hasOwnProperty(t)||this.requestedNodes.hasOwnProperty(t)?void 0:(this.pendingNodes[t]=!0,this.scheduleRequests())},e.prototype.updateGraph=function(t,e){var i,n,s,r,o,a,h,l;for(h=t.nodes,s=0,o=h.length;o>s;s++)i=h[s],i.id=i.id.toString(),e&&(i.loaded=!0),this.nodes.hasOwnProperty(i.id)?!i.error&&i.loaded&&(delete this.nodes[i.id]._noData,Base_Helpers.extendDataItem(this.nodes[i.id],i)):(this.nodes[i.id]=i,this.nodeToLinks[i.id]=[]);for(l=t.links,r=0,a=l.length;a>r;r++)if(i=l[r],i.hasOwnProperty("id")?i.id=i.id.toString():(i.id="°"+this.nextLinkId,this.nextLinkId+=1),this.links.hasOwnProperty(i.id))n=this.links[i.id],i.hasOwnProperty("from")&&(i.from=i.from.toString()),i.hasOwnProperty("to")&&(i.to=i.to.toString()),i.from&&n.from!==i.from||i.to&&n.to!==i.to?this.chart.error("Changing link from,to not supported"):Base_Helpers.extendDataItem(n,i);else{if(!i.hasOwnProperty("from")){this.chart.error("Link.from missing for link "+i.id);continue}if(i.from=i.from.toString(),!i.hasOwnProperty("to")){this.chart.error("Link.to missing for link "+i.id);continue}i.to=i.to.toString(),this.nodes.hasOwnProperty(i.from)||(this.nodes[i.from]={id:i.from,_noData:!0},this.nodeToLinks[i.from]=[],e&&(this.nodes[i.from].loaded=!0)),this.nodes.hasOwnProperty(i.to)||(this.nodes[i.to]={id:i.to,_noData:!0},this.nodeToLinks[i.to]=[],e&&(this.nodes[i.to].loaded=!0)),this.links[i.id]=i,this.nodeToLinks[i.from].push(i),this.nodeToLinks[i.to].push(i)}},e.prototype.removeNode=function(t,e){var i,n,s,r,o,a;if(this.chart.graph.removeNode(t),delete this.pendingNodes[t],delete this.requestedNodes[t],s=this.nodes[t],s&&(delete this.nodes[t],n=this.nodeToLinks[t])){for(delete this.nodeToLinks[t],a=[],r=0,o=n.length;o>r;r++)i=n[r],a.push(e.push(i));return a}},e.prototype.removeLink=function(t){return this.chart.graph.removeLink(t.id),delete this.links[t.id],this.nodeToLinks[t.from]&&Base_Helpers.removeFromArray(this.nodeToLinks[t.from],t),this.nodeToLinks[t.to]?Base_Helpers.removeFromArray(this.nodeToLinks[t.to],t):void 0},e.prototype.genRandomGraph=function(t){var e,i,n,s,r,o,a,h,l,u,c,p;for(o=new Base_Random(32131),r=t.randomNodes,s=t.randomLinks,e="grid"===t.random?this.genRandomGrid(r,t.randomGridLinkProbability):this.genRandomUniform(r,s),c=e.nodes,a=0,l=c.length;l>a;a++)n=c[a],n.style={label:"Node "+n.id},n.value=10+40*o.get();for(p=e.links,h=0,u=p.length;u>h;h++)i=p[h],i.style={label:"Link "+i.id},i.value=1+5*o.get();return e},e.prototype.genRandomGrid=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;for(h=[],o=[],n=p=0,y=t-1;y>=0?y>=p:p>=y;n=y>=0?++p:--p)a={id:"n"+n,loaded:!0},h.push(a);for(i=Math.ceil(Math.sqrt(t)),l=new Base_Random(32131),c=d=0,v=i-1;v>=d;c=d+=1)for(u=f=0,_=i-1;_>=f;u=f+=1)s=u+c*i,s>=t||(u>0&&l.get()<=e&&o.push({from:"n"+s,to:"n"+(s-1)}),c>0&&l.get()<=e&&o.push({from:"n"+s,to:"n"+(s-i)}));for(s=m=0,g=o.length;g>m;s=++m)r=o[s],r.id=""+s;return{nodes:h,links:o}},e.prototype.genRandomUniform=function(t,e){var i,n,s,r,o,a,h,l,u,c,p;for(a=new Base_Random(32131),o=[],s=[],i=h=0,u=t-1;u>=0?u>=h:h>=u;i=u>=0?++h:--h)r={id:"n"+i,loaded:!0},o.length>0&&(n={id:"l"+i,from:r.id,to:o[a.get()*o.length|0].id},s.push(n)),o.push(r);for(i=l=c=s.length,p=e-1;p>=l;i=l+=1)n={id:"l"+(i+1),from:o[a.get()*o.length|0].id,to:o[a.get()*o.length|0].id},s.push(n);return{nodes:o,links:s}},e}(Base_Data);var Base_TimeStep;Base_TimeStep=function(){"use strict";function t(t,e){this.unit=t,this.count=e,this.name=""+this.count+" "+this.unit}return t.parsingMap={milliseconds:"ms",millisecond:"ms",second:"s",seconds:"s",minute:"m",minutes:"m",hour:"h",hours:"h",day:"d",days:"d",week:"w",weeks:"w",month:"M",months:"M",year:"y",years:"y",ms:"ms",s:"s",m:"m",h:"h",d:"d",w:"w",M:"M",y:"y"},t.knownUnits=["ms","s","m","h","d","w","M","y"],t.isGoodUnit=function(e){return null!=t.parsingMap[e]},t.prototype.unit="s",t.prototype.count=1,t.prototype.name=null,t.parse=function(e){var i,n,s,r,o,a;if(null==e)return null;if(null!=e.unit?(s=e.name,a=e.unit):(a=e,s=e),null!=e.count)i=e.count,o=e.unit;else if(n=a.split(" "),2===n.length)i=parseInt(n[0],10),o=n[1];else{if(1!==n.length)return null;i=1,o=n[0]}return o=t.parsingMap[o],"number"==typeof i&&t.isGoodUnit(o)?(r=new t(o,i),r.name=s,r):null},t.prototype.clone=function(){return new t(this.unit,this.count)},t.prototype.add=function(t,e){return null==e&&(e=1),moment(t).utc().add(this.unit,this.count*e).valueOf()},t.prototype.sub=function(t,e){return null==e&&(e=1),moment(t).utc().subtract(this.unit,this.count*e).valueOf()},t.prototype.numberOfUnits=function(e,i){return Math.round(moment(i).utc().diff(e,t.unitsTranslation[this.unit],!0)/this.count)},t.prototype.toString=function(){return""+this.count+" "+this.unit},t.timeUnitDiffs={ms:1,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5,M:2592e6,y:31536e6},t.unitsTranslation={s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},t.toBiggerUnit={ms:"s",s:"m",m:"h",h:"d",d:"w",w:"M",M:"y",y:null},t.toSmallerUnit={ms:null,s:"ms",m:"s",h:"m",d:"h",w:"d",M:"d",y:"M"},t.prototype.approxTime=function(){return t.timeUnitDiffs[this.unit]*this.count},t.prototype.isSmallerOrEqual=function(t){return this.approxTime()<=t.approxTime()},t.prototype.isSmaller=function(t){return this.approxTime()<t.approxTime()},t.prototype.isBigger=function(t){return this.approxTime()>t.approxTime()},t.prototype.isEqual=function(t){return this.approxTime()===t.approxTime()},t.prototype.getBigger=function(){return"y"===this.unit?new t(this.unit,10*this.count):new t(t.toBiggerUnit[this.unit],1)},t.prototype.roundTimeDown=function(e){var i;return e=Math.round(e),i=this.count,"ms"===this.unit&&Math.floor(e/i)*i,"ms"!==this.unit&&(e=moment(e).utc().startOf(t.unitsTranslation[this.unit])),"y"===this.unit?e.year(Math.floor(e.year()/i)*i):"M"===this.unit?e.month(Math.floor(e.month()/i)*i):"w"===this.unit?e.week(Math.floor(e.week()/i)*i):"d"===this.unit?e.date(Math.floor(e.date()/i)*i):"h"===this.unit?e.hours(Math.floor(e.hours()/i)*i):"m"===this.unit?e.minutes(Math.floor(e.minutes()/i)*i):"s"===this.unit&&e.seconds(Math.floor(e.seconds()/i)*i),e.valueOf()
},t.prototype.roundTimeUp=function(t){return this.roundTimeDown(moment(Math.round(t)).utc().add(this.unit,this.count).valueOf()-1)},t.prototype.roundTimeRound=function(t){var e;return e=moment(Math.round(t)).utc().add(this.unit,this.count),this.roundTimeDown((e.valueOf()+t-1)/2)},t}();var Netchart_Layout_TimedSpringEmbedder;Netchart_Layout_TimedSpringEmbedder=function(){function t(t){this.random=t,this.nodeCount=0,this.nodes=[],this.forceX=[],this.forceY=[],this.forceZ=[],this.forceSum=[],this.oldForceX=[],this.oldForceY=[],this.oldForceZ=[],this.componentX=[],this.componentY=[],this.componentSum=[],this.componentNodeCount=[],this.nodePermutation=[],this.nodesAspect=1,this.idToIndex={},this.repulsiveForceTree=new Netchart_Layout_BHTree}var e,i;return e=function(){function t(){}return t.prototype.to=null,t.prototype.K=0,t.prototype.len=0,t.prototype.strength=0,t}(),i=function(){function t(){}return t.prototype.x=0,t.prototype.y=0,t.prototype.z=0,t.prototype.r=1,t.prototype.zattr=1,t.prototype.repulsiveForceX=0,t.prototype.repulsiveForceY=0,t.prototype.repulsiveForceZ=0,t.prototype.fsum=0,t.prototype.edges=[],t}(),t.prototype.temperature=0,t.prototype.unitTemperature=0,t.prototype.randomLayoutRadius=0,t.prototype.repulsiveForceTree=null,t.prototype.randomGenerator=null,t.prototype.nodePermutation=null,t.prototype.nodeRepulsionFactor=15,t.prototype.componentCenterFactor=.005,t.prototype.linkForceFactor=.2,t.prototype.zAxisAttraction=1,t.prototype.nodeDegreeModifier=1.2,t.prototype.forceReductionFactor=1,t.prototype.stability=1,t.prototype.globalForceX=0,t.prototype.globalForceY=0,t.prototype.centerX=0,t.prototype.centerY=0,t.prototype.aspectRatio=null,t.prototype.updateParams=function(t,e,i){this.spacing=t,this.nodeDegreeModifier=e,this.aspectRatio=i},t.prototype.updateGraph=function(t,e,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J,Q,K,$,te;if(n|=t.length!==this.nodeCount){for(C=this.nodes,P=this.oldForceX,M=this.oldForceY,T=this.oldForceZ,S=this.idToIndex,this.nodeCount=t.length,this.oldForceX=new Array(this.nodeCount),this.oldForceY=new Array(this.nodeCount),this.oldForceZ=new Array(this.nodeCount),this.forceX=new Array(this.nodeCount),this.forceY=new Array(this.nodeCount),this.forceZ=new Array(this.nodeCount),this.forceSum=new Array(this.nodeCount),this.nodes=new Array(this.nodeCount),this.idToIndex={},_=0,x=0,c=N=0,Y=t.length;Y>N;c=++N)g=t[c],u=g.id,v=new i,v.edges=[],g.currentRadius>0&&(_+=g.currentRadius/g.currentHwidth,x+=1),this.idToIndex[u]=c,this.nodes[c]=v,S.hasOwnProperty(u)?(b=S[u],w=C[b],v.z=w.z,this.oldForceX[c]=P[b],this.oldForceY[c]=M[b],this.oldForceZ[c]=T[b]):(this.oldForceX[c]=0,this.oldForceY[c]=0,this.oldForceZ[c]=0);this.nodePermutation=this.nodes.slice(0),this.nodesAspect=x>0?Math.max(.3,_/x):1}for(c=R=0,z=t.length;z>R;c=++R)g=t[c],y=this.nodes[c],y.x=g.x,y.y=g.y,y.r=Math.max(1,g.currentHwidth),y.minr=Math.max(1,(g.currentRadius+.5*g.currentHwidth)/1.5),y.zattr=g.visibility,y.edges.length=0,y.locked=g.locked,this.forceX[c]=0,this.forceY[c]=0,this.forceZ[c]=0,this.forceSum[c]=0;for(o={U:"D","null":null,D:"U",L:"R",R:"L"},H=0,G=e.length;G>H;H++)m=e[H],B=m.strength,d=m.length,O=m.visibility,h=this.nodes[this.idToIndex[m.from.id]],I=this.nodes[this.idToIndex[m.to.id]],h&&I?h!==I&&(h.edges.push({to:I,strength:B,len:d,vis:O,direction:m.direction}),I.edges.push({to:h,strength:B,len:d,vis:O,direction:o[m.direction]})):console.log("Layout: missing node for link: "+m.from.id+" "+m.to.id+", topology = "+n);for(n&&this.computeComponents(),L=this.spacing/2,Q=this.nodes,U=0,V=Q.length;V>U;U++){for(g=Q[U],A=0,K=g.edges,q=0,W=K.length;W>q;q++)a=K[q],A+=a.to.edges.length*a.vis;E=Math.sqrt(A),g.r+=L,g.minr+=L,E>4&&(g.r+=(E-4)*g.r/4*this.nodeDegreeModifier,g.minr+=(E-4)*g.minr/4*this.nodeDegreeModifier)}for(p=0,k=0,D=0,$=this.nodes,X=0,Z=$.length;Z>X;X++){for(g=$[X],l=0,te=g.edges,J=0,j=te.length;j>J;J++)a=te[J],F=a.to,g.locked&&F.locked||g===F||(D++,s=g.minr+F.minr,f=a.len,r=Math.min(20,a.strength),a.len=Math.max(1,s*f),a.K=30*r/a.len,l+=a.K,p+=a.len);g.fsum=l,k+=g.r*g.r}return D>0?(this.randomLayoutRadius=Math.max(1,p/10),this.unitTemperature=p/D/50):(this.randomLayoutRadius=Math.max(1,Math.sqrt(k)),this.unitTemperature=1)},t.prototype.computeComponents=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g;for(this.componentX=[],this.componentY=[],this.componentSum=[],this.componentNodeCount=[],o=new Array(this.nodeCount),f=this.nodes,h=0,c=f.length;c>h;h++)r=f[h],r.component=-1;for(t=0,m=this.nodes,l=0,p=m.length;p>l;l++)if(r=m[l],!(r.component>=0)){for(r.component=t,e=0,a=0,n=0,o[n]=r,n+=1;n>a;)for(r=o[a],a+=1,e+=1,g=r.edges,u=0,d=g.length;d>u;u++)i=g[u],s=i.to,-1===s.component&&(s.component=t,o[n]=s,n+=1);this.componentNodeCount.push(e),this.componentX.push(0),this.componentY.push(0),this.componentSum.push(0),t+=1}},t.prototype.updateComponents=function(){var t,e,i,n,s,r,o,a,h,l;for(t=i=0,o=this.componentNodeCount.length-1;o>=i;t=i+=1)this.componentX[t]=0,this.componentY[t]=0,this.componentSum[t]=0;for(a=this.nodes,n=0,r=a.length;r>n;n++)e=a[n],t=e.component,this.componentX[t]+=e.x*e.r,this.componentY[t]+=e.y*e.r,this.componentSum[t]+=e.r;for(l=[],t=s=0,h=this.componentNodeCount.length-1;h>=s;t=s+=1)this.componentX[t]/=this.componentSum[t],l.push(this.componentY[t]/=this.componentSum[t]);return l},t.prototype.globalLayout=function(t,e,i){var n,s,r,o,a,h,l,u,c;if(!(this.nodeCount<=0)){if(i){if(1===this.nodeCount)return void(t[0].x=t[0].y=0);this.initialRandomLayout()}for(o=0,c=this.nodes,l=0,u=c.length;u>l;l++)r=c[l],r.locked||o++;for(a=Math.floor(Math.sqrt(o)+10),s=2*a,this.forceReductionFactor=1,this.temperature=(2*Math.sqrt(o)+20)*this.unitTemperature,this.zAxisAttraction=.02,h=(new Date).getTime(),n=3;this.temperature>this.unitTemperature&&(s--<=0&&(s=3*a/n++,this.temperature=this.temperature/1.5-.5,this.temperature<20*this.unitTemperature&&(this.zAxisAttraction=1.5*this.zAxisAttraction+.02)),this.randomNodePermutation(),this.repulsiveForceTree.temperature=1.75*this.zAxisAttraction,this.repulsiveForceTree.buildTree(this.nodePermutation),this.moveNodesGlobal(),!((new Date).getTime()>h+e)););return i&&this.centerNodes(),this.storeNodes(t)}},t.prototype.initialRandomLayout=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f;for(s=this.nodeCount,r=new Array(s),i=h=0,p=s-1;p>=h;i=h+=1)r[i]=i;for(i=l=0;s>=l;i=l+=1)n=Math.floor(this.random.get()*(s-i))+i,a=r[i],r[i]=r[n],r[n]=a;for(t=this.randomLayoutRadius,e=2*Math.PI/this.nodeCount,d=this.nodes,f=[],i=u=0,c=d.length;c>u;i=++u)s=d[i],this.oldForceX[i]=0,this.oldForceY[i]=0,this.oldForceZ[i]=0,s.z=this.random.get()-.5,s.locked?f.push(void 0):(o=t+s.r,s.x=o*Math.cos(r[i]*e),f.push(s.y=o*Math.sin(r[i]*e)));return f},t.prototype.timedLayout=function(t,e){var i,n,s,r;if(!(this.nodeCount<=1)&&e>0){for(i=0,.1>e?(i=2,this.forceReductionFactor=Math.max(.002,Math.min(this.forceReductionFactor,10*e))):i=Math.min(6,Math.round(2+10*e)),this.zAxisAttraction=this.nodeRepulsionFactor/28,this.temperature=this.unitTemperature,n=s=0,r=i-1;r>=0?r>=s:s>=r;n=r>=0?++s:--s)this.randomNodePermutation(),this.applyAspect(1/this.nodesAspect),this.repulsiveForceTree.temperature=1.75*this.zAxisAttraction,this.repulsiveForceTree.buildTree(this.nodePermutation),this.applyAspect(this.nodesAspect),this.moveNodesIncremental();return this.storeNodes(t)}},t.prototype.prepareAspectRatio=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;for(a=this.nodes,f=a[0].x,g=a[0].y,m=f,y=g,n=v=1,_=this.nodeCount-1;_>=v;n=v+=1)f=Math.min(f,a[n].x),m=Math.max(m,a[n].x),g=Math.min(g,a[n].y),y=Math.max(y,a[n].y);return e=(f+m)/2,i=(g+y)/2,p=m-f,d=y-g,h=Math.sqrt(this.aspectRatio),c=Math.sqrt(p*d),l=c*h/p,u=c/h/d,l=t*l+(1-t),u=t*u+(1-t),s=e-e*l,r=i-i*u,o=1/this.forceReductionFactor,[l,s,u,r,o]},t.prototype.updateAspectRatioNode=function(t,e,i){return this.forceX[i]+=(e.x*(t[0]-1)+t[1])*t[4],this.forceY[i]+=(e.y*(t[2]-1)+t[3])*t[4]},t.prototype.updateAspectRatio=function(t){var e,i,n,s,r,o,a;for(s=this.prepareAspectRatio(t),i=this.nodes,a=[],e=r=0,o=this.nodeCount-1;o>=r;e=r+=1)n=i[e],a.push(this.updateAspectRatioNode(s,n,e));return a},t.prototype.moveNodesGlobal=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p;for(this.initIteration(),l=.5*this.temperature,e=this.forceReductionFactor,this.aspectRatio&&(t=this.prepareAspectRatio(.005)),p=[],o=u=0,c=this.nodeCount-1;c>=u;o=u+=1)h=this.nodes[o],h.locked||(this.calculateForce(o,.5),this.aspectRatio&&this.updateAspectRatioNode(t,h,o),this.oldForceX[o]=n=this.forceX[o],this.oldForceY[o]=s=this.forceY[o],this.oldForceZ[o]=r=this.forceZ[o],i=this.forceSum[o],n*=i,s*=i,r*=i,a=n*n+s*s+r*r,a<this.temperature*this.temperature&&a>.001&&(a=this.temperature/Math.sqrt(a),n*=a,s*=a,r*=a),h.x+=n*e+(this.random.get()-.5)*l,h.y+=s*e+(this.random.get()-.5)*l,p.push(h.z+=r*e+(this.random.get()-.5)*l));return p},t.prototype.moveNodesIncremental=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;for(this.initIteration(),l=g=0,x=this.nodeCount-1;x>=g;l=g+=1)this.nodes[l].locked||this.calculateForce(l,0);for(this.aspectRatio&&(o=Math.min(.4,.5/Math.pow(this.nodeCount,.5)),this.updateAspectRatio(o)),d=0,c=0,f=0,u=0,a=new Array(this.nodeCount),l=y=0,S=this.nodeCount-1;S>=y;l=y+=1)this.nodes[l].locked||(n=this.forceX[l],s=this.forceY[l],r=this.forceZ[l],h=this.forceSum[l],i=n*n+s*s+r*r,i*h*h>this.unitTemperature*this.unitTemperature*.05*.05?(u+=i,m=this.oldForceX[l]*n+this.oldForceY[l]*s+this.oldForceZ[l]*r,f+=m,m>0?c+=m:d-=m):a[l]=!0);for(this.stability=(c-5*d)/this.nodeCount,f>1e-7?this.forceReductionFactor*=1+.4/1.618033989:-1e-7>f&&(this.forceReductionFactor/=1.4),t=this.globalForceX/this.nodeCount,e=this.globalForceY/this.nodeCount,l=v=0,b=this.nodeCount-1;b>=v;l=v+=1)this.forceX[l]+=t,this.forceY[l]+=e;for(this.forceReductionFactor=Math.min(1,this.forceReductionFactor),this.forceReductionFactor=Math.max(.002,this.forceReductionFactor),l=_=0,w=this.nodeCount-1;w>=_;l=_+=1)p=this.nodes[l],p.locked||a[l]||(h=this.forceSum[l]*this.forceReductionFactor,p.x+=this.forceX[l]*h,p.y+=this.forceY[l]*h,p.z+=this.forceZ[l]*h),this.oldForceX[l]=this.forceX[l],this.oldForceY[l]=this.forceY[l],this.oldForceZ[l]=this.forceZ[l]},t.prototype.initIteration=function(){var t,e,i,n,s,r,o;for(t=0,e=0,n=0,o=this.nodes,s=0,r=o.length;r>s;s++)i=o[s],n+=i.r,t+=i.x*i.r,e+=i.y*i.r;return this.centerX=t/n,this.centerY=e/n,this.updateComponents(),this.globalForceX=0,this.globalForceY=0},t.prototype.applyAspect=function(t){var e,i,n,s,r;for(s=this.nodes,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.y*=t);return r},t.prototype.calculateForce=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;for(g=this.nodes[t],h=this.oldForceX[t]*e,l=this.oldForceY[t]*e,u=this.oldForceZ[t]*e,w=g.edges,S=0,b=w.length;b>S;S++)c=w[S],y=c.to,p=c.len,v=g.x-y.x,_=g.y-y.y,x=g.z-y.z,c.direction&&("U"===c.direction?(_-=p,p=0):"D"===c.direction?(_+=p,p=0):"L"===c.direction?(v-=p,p=0):"R"===c.direction&&(v+=p,p=0)),m=Math.sqrt(v*v+_*_+x*x),.01>m&&(m=.01),d=(p-m)*c.K/m*this.linkForceFactor,h+=d*v,l+=d*_,u+=d*x;if(h+=g.repulsiveForceX*this.nodeRepulsionFactor,l+=g.repulsiveForceY*this.nodeRepulsionFactor,u+=g.repulsiveForceZ*this.nodeRepulsionFactor,f=g.zattr*this.zAxisAttraction,u-=g.z*f,o=g.component,i=this.componentX[o]-this.centerX,n=this.componentY[o]-this.centerY,a=Math.min(10,Math.sqrt(this.componentNodeCount[o])),s=i*a*this.componentCenterFactor,r=n*a*this.componentCenterFactor,h-=s,l-=r,this.globalForceX+=s,this.globalForceY+=r,isNaN(h))throw"Internal error: Nan in layout";return this.forceX[t]=h,this.forceY[t]=l,this.forceZ[t]=u,this.forceSum[t]=1/(g.fsum+f)},t.prototype.storeNodes=function(t){var e,i,n;for(e=i=0,n=this.nodeCount-1;n>=i;e=i+=1)this.nodes[e].locked||(t[e].x=this.nodes[e].x,t[e].y=this.nodes[e].y)},t.prototype.centerNodes=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m;for(r=new Base_Random(243178931),n=this.nodes,a=h=n[0].x,l=u=n[0].y,i=c=1,d=this.nodeCount-1;d>=c;i=c+=1)a=Math.min(a,n[i].x),h=Math.max(h,n[i].x),l=Math.min(l,n[i].y),u=Math.max(u,n[i].y);for(t=(a+h)/2,e=(l+u)/2,m=[],i=p=0,f=this.nodeCount-1;f>=p;i=p+=1)s=n[i],s.x-=t,s.y-=e,s.locked?m.push(void 0):(o=.3*s.r,s.x+=r.get()*o,m.push(s.y+=r.get()*o));return m},t.prototype.randomNodePermutation=function(){var t,e,i,n,s;for(t=n=0,s=this.nodeCount-1;s>=n;t=n+=1)e=Math.floor(this.random.get()*(this.nodeCount-t))+t,i=this.nodePermutation[t],this.nodePermutation[t]=this.nodePermutation[e],this.nodePermutation[e]=i},t}();var Base_Animator;Base_Animator=function(){"use strict";function t(t,e,i,n,s){if(this.from=t,this.to=e,this.duration=i,null==n&&(n="<>"),(void 0===this.from||null===this.from)&&(this.from=this.to),this.startTime=void 0===s?(new Date).getTime():s,this.x=this.from,this.t=this.startTime,!this.easing_formulas[n])throw"Easing formula not defined: "+n;this.formula=this.easing_formulas[n]}return t.prototype.formula=null,t.prototype.startTime=null,t.prototype.from=0,t.prototype.to=0,t.prototype.fromColor=null,t.prototype.toColor=null,t.prototype.t=0,t.prototype.startSpeed=0,t.prototype.easing_formulas={"=":function(t){return t},"<>":function(t){return.5>t?2*t*t:-.5*((2*t-1)*(2*t-3)-1)},scroll:function(t){return 1-(1-t)*(1-t)}},t.prototype.jump=function(t){return this.to=t,this.from=t,this.x=t,this.t=this.startTime=0},t.prototype.retarget=function(t,e){return e=void 0===e?(new Date).getTime():e,this.startSpeed=this.finished(this.t)?0:this._getSpeed(),this.from=this.get(e),this.to=t,this.startTime=e,this},t.prototype.retargetColor=function(t,e){return void 0===e&&(e=this.t?this.t:(new Date).getTime()),this.startSpeed=0,this.from=this.x,this.to=t,this.fromColor=null,this.toColor=null,this.startTime=e,this},t.prototype.switchCoordinates=function(t,e){return this.from=this.from*e+t,this.x=this.x*e+t,this.to=this.to*e+t,this.startSpeed=this.startSpeed*e},t.prototype.updateAndGet=function(t,e){var i;return i=this.x!==t,t!==this.to&&this.retarget(t,e),[this.get(e),i]},t.prototype.updateAndGetFixed=function(t,e){var i;return i=this.x!==t,t!==this.to&&(this.startSpeed=0,this.startTime=e,this.from=this.x,this.to=t,this.fromColor=null,this.toColor=null),[this.get(e),i]},t.prototype.updateColorAndGet=function(t,e){var i;return i=this.x!==t,t!==this.to&&this.retargetColor(t,e),[this.getColor(e),i]},t.prototype.get=function(t){var e,i,n,s;return this.duration<=0?(this.t=t,this.x=this.to,this.to):(i=Math.min(1,Math.max(t-this.startTime,0)/this.duration),i>=1?(this.t=0,this.x=this.to,this.to):(e=this.formula(i),s=e*(this.to-this.from),this.startSpeed&&1>i&&(n=this.startSpeed*i*this.duration,s=s*e+n*(1-e)),s=this.from+s,this.t=t,this.x=s,s))},t.prototype.getColor=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f;return this.t=t,this.duration<=0||this.from===this.to?this.to:(null==this.fromColor&&(this.fromColor=Base_CssColorParser.parseCSSColor(this.from)),null==this.toColor&&(this.toColor=Base_CssColorParser.parseCSSColor(this.to)),a=Math.min(1,Math.max(t-this.startTime,0)/this.duration),o=this.formula(a),r=1-o,d=this.fromColor,s=d[0],n=d[1],i=d[2],e=d[3],f=this.toColor,c=f[0],u=f[1],l=f[2],h=f[3],p="rgba("+Math.round(s*r+c*o)+","+Math.round(n*r+u*o)+","+Math.round(i*r+l*o)+","+(e*r+h*o).toFixed(3)+")",this.t=t,this.x=p,p)},t.prototype.finished=function(t){return t>=this.startTime+this.duration},t.prototype._getSpeed=function(){var t,e,i,n;return n=this.t,t=this.duration/1e3,e=this.get(n-t/2),i=this.get(n+t/2),this.t=n,(i-e)/t},t}();var Base_Graphics,Base_Graphics_DashedLineContext;Base_Graphics_DashedLineContext=function(){function t(t,e,i){this.g=t,this.lineDash=e,this.fill=i,this.beginPath()}return t.prototype.beginPath=function(){return this.remaining=this.lineDash[0],this.dashes=[],this.pos=0,this.x0=0,this.y0=0,this.x=0,this.y=0,this.hasPos=!1},t.prototype.moveTo=function(t,e){return this.x=t,this.y=e,this.fill&&this.dashes.push(0,t,e),this.g.moveTo(t,e),this.x0=t,this.y0=e,this.hasPos=!0},t.prototype.lineTo=function(t,e){var i,n,s,r,o,a,h,l,u,c;for(this.fill&&this.g.lineTo(t,e),o=t-this.x,a=e-this.y,u=this.x,c=this.y,this.x=t,this.y=e,l=Math.sqrt(o*o+a*a),h=1/l,o*=h,a*=h,i=this.lineDash.length,n=this.pos,s=this.remaining;;){if(r=Math.min(l,s),u+=o*r,c+=a*r,n%2===0?this.fill?this.dashes.push(1,u,c):this.g.lineTo(u,c):this.fill?this.dashes.push(0,u,c):this.g.moveTo(u,c),!(l>r)){s-=r;break}n=(n+1)%i,s=this.lineDash[n],l-=r}return this.pos=n,this.remaining=s,this.hasPos=!0},t.prototype.arc=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S;if(o=2*Math.PI,l=Math.min(.6,2/i),a=Math.cos(l),c=Math.sin(l),m=Math.sin(n)*i,p=Math.cos(n)*i,y=Math.sin(s)*i,f=Math.cos(s)*i,this.hasPos||(this.moveTo(t+p,e+m),this.hasPos=!0),r){for(s>n&&(n+=o),h=(n-s)/l,x=[],u=v=h;v>=0;u=v+=-1){if(0>=u-1){this.lineTo(t+f,e+y);break}this.lineTo(t+p,e+m),d=p*a+m*c,g=-p*c+m*a,p=d,x.push(m=g)}return x}for(n>s&&(n-=2*Math.PI),h=(s-n)/l,S=[],u=_=h;_>=0;u=_+=-1){if(0>=u-1){this.lineTo(t+f,e+y);break}this.lineTo(t+p,e+m),d=p*a-m*c,g=p*c+m*a,p=d,S.push(m=g)}return S},t.prototype.closePath=function(){return this.lineTo(this.x0,this.y0)},t.prototype.strokeDashes=function(){var t,e,i,n,s,r,o,a;for(t=this.dashes,a=[],e=r=0,o=t.length;o>r;e=r+=3)i=t[e],n=t[e+1],s=t[e+2],a.push(0===i?this.g.moveTo(n,s):this.g.lineTo(n,s));return a},t}(),Base_Graphics=function(){function t(){}return t.setLineDash=1,t.SQRT3D6=Math.sqrt(3)/6,t.stroke=function(t,e){return e.lineWidth&&(t.lineWidth=e.lineWidth),t.strokeStyle=e.lineColor,e.lineDash&&"undefined"!=typeof t.setLineDash?(t.setLineDash(e.lineDash),t.stroke(),t.setLineDash([])):t.stroke(),e.lineWidth?t.lineWidth=1:void 0},t.strokeWithShadow=function(t,e){return e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),e.lineWidth&&(t.lineWidth=e.lineWidth),t.strokeStyle=e.lineColor,t.stroke(),e.lineWidth&&(t.lineWidth=1),e.shadowColor?(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=null):void 0},t.beginStroke=function(t,e,i){return null==i&&(i=!1),t.beginPath(),e.lineColor&&e.lineDash&&e.lineDash.length>1&&"undefined"==typeof t.setLineDash?(i&&!e.fillColor&&(i=!1),new Base_Graphics_DashedLineContext(t,e.lineDash,i)):t},t.endStroke=function(e,i,n,s){return null==s&&(s=!1),e===i?s?t.paint(e,n):t.stroke(e,n):(i.fill&&(t.fill(e,n),e.beginPath(),i.strokeDashes()),t.strokeWithShadow(e,n))},t.beginStrokeAndFill=function(t,e){return this.beginStroke(t,e,!0)},t.endStrokeAndFill=function(t,e,i){return this.endStroke(t,e,i,!0)},t.fill=function(t,e){return e.fillColor?(t.fillStyle=e.fillColor,e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),t.fill(),e.shadowColor?(t.shadowBlur=0,t.shadowColor=null):void 0):void 0},t.fillGradient=function(t,e,i,n,s,r){var o,a,h,l,u,c;if(e.fillGradient){for(o=t.createLinearGradient(i,n,s,r),c=e.fillGradient,l=0,u=c.length;u>l;l++)h=c[l],o.addColorStop(h[0],h[1]);return a=e.fillColor,e.fillColor=o,this.fill(t,e),e.fillColor=a}return this.fill(t,e)},t.paint=function(t,e){return e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),e.fillColor&&(t.fillStyle=e.fillColor,t.fill()),e.lineColor&&(t.lineWidth=e.lineWidth?e.lineWidth:1,t.strokeStyle=e.lineColor,e.lineDash?(t.setLineDash(e.lineDash),t.stroke(),t.setLineDash([])):t.stroke()),e.shadowColor?(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=null):void 0},t.textStyle=function(t,e){return e.fillColor&&(t.fillStyle=e.fillColor),e.font&&(t.font=e.font),e.shadowColor?(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor):void 0},t.textStyleNoShadow=function(t,e){return e.fillColor&&(t.fillStyle=e.fillColor),e.font?t.font=e.font:void 0},t.rectStyle=function(t,e){return e.hasOwnProperty("lineColor")&&(t.strokeStyle=e.lineColor),e.hasOwnProperty("fillColor")?t.fillStyle=e.fillColor:void 0},t.pushClip=function(t,e,i,n,s){return t.save(),t.beginPath(),t.rect(e,i,n,s),t.clip()},t.popClip=function(t){return t.restore()},t.arcBetweenTwoPoints=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;return g=(s+o)/2,y=(r+a)/2,v=a-r,_=s-o,m=v*v+_*_,0!==m?(f=Math.sqrt(m),n=Math.min(Math.max(n,f/2),3*f),c=Math.sqrt(n*n/m-.25),x=g+v*c,b=y+_*c,S=g-v*c,w=y-_*c,p=(x-e)*(x-e)+(b-i)*(b-i),d=(S-e)*(S-e)+(w-i)*(w-i),p>d?(e=S,i=w):(e=x,i=b),h=Math.atan2(r-i,s-e),l=Math.atan2(a-i,o-e),h>l&&(l+=2*Math.PI),u=Math.abs(h-l)>Math.PI,t.arc(e,i,n,h,l,u)):void 0},t.strokeMarker=function(t,e,i,n,s){var r,o;if(o=1.41421356237*s,r=3*this.SQRT3D6*s,"rect"===e)return t.moveTo(i-s,n-s),t.lineTo(i+s,n-s),t.lineTo(i+s,n+s),t.lineTo(i-s,n+s),t.closePath();if("romb"===e)return o=.9*o,t.moveTo(i-o,n),t.lineTo(i,n-o),t.lineTo(i+o,n),t.lineTo(i,n+o),t.closePath(),t.fill();if("triangle"===e)return t.beginPath(),t.moveTo(i-s,n+r),t.lineTo(i+s,n+r),t.lineTo(i,n-r),t.closePath(),t.fill();if("triangle2"===e)return t.beginPath(),t.moveTo(i-o,n-o),t.lineTo(i+o,n-o),t.lineTo(i,n+o),t.closePath(),t.fill();if("circle"===e)return t.beginPath(),t.arc(i,n,s,0,2*Math.PI,!0),t.closePath();throw"unknown marker shape "+e},t.strokeBalloon=function(t,e,i,n,s){var r,o,a,h,l;return n=Math.max(n,2*s),r=5,a=4,o=(s+2*a)/2,h=e,l=i,t.moveTo(h,l),h+=r,l+=r,t.lineTo(h,l),h+=n/2-a-r,t.lineTo(h,l),t.arc(h,l+o,o,-Math.PI/2,Math.PI/2),l+=2*o,h-=n-2*a,t.lineTo(h,l),t.arc(h,l-o,o,.5*Math.PI,1.5*Math.PI),l-=2*o,h+=n/2-a-r,t.lineTo(h,l),h+=r,l-=r,t.closePath(),i+r+o},t.strokeBalloon2=function(t,e,i,n,s){var r,o,a,h;return o=4,r=(s+2*o)/2,n=Math.max(n,2*s)/2-o,a=e+n,h=i-r,t.moveTo(a,h),t.arc(a,h+r,r,-Math.PI/2,Math.PI/2,!1),h+=2*r,a-=2*n,t.lineTo(a,h),t.arc(a,h-r,r,.5*Math.PI,1.5*Math.PI,!1),t.closePath()},t.applyColorToImage=function(e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;if(null==n&&(n=!0),y=t.parseColor(i),d=y[0],l=y[1],r=y[2],s=y[3],o=document.createElement("canvas"),f=o.width=e.width,c=o.height=e.height,u=o.getContext("2d"),u.drawImage(e,0,0),a=u.getImageData(0,0,f,c),h=a.data,n)for(p=m=0,v=h.length;v>=m;p=m+=4)255===h[p+3]&&(h[p]=h[p]*d>>8,h[p+1]=h[p+1]*l>>8,h[p+2]=h[p+2]*r>>8);else for(p=g=0,_=h.length;_>=g;p=g+=4)h[p]=h[p]*d>>8,h[p+1]=h[p+1]*l>>8,h[p+2]=h[p+2]*r>>8;return u.putImageData(a,0,0),o},t.cropImageToCircle=function(t,e){var i,n,s,r,o,a,h,l,u,c;return o=Math.min(t.width,t.height),r=Math.max(t.width,t.height),u=Math.min(r,2*o),i=document.createElement("canvas"),i.width=u,i.height=u,n=i.getContext("2d"),c=t.width,s=t.height,n.fillStyle="rgba(0,0,0,1)",n.beginPath(),n.arc(u/2,u/2,u/2,0,2*-Math.PI,!1),n.fill(),a=n.globalCompositeOperation,n.globalCompositeOperation="source-in","crop"===e?(h=Math.min(c,s)/2,n.drawImage(t,c/2-h,s/2-h,2*h,2*h,0,0,u,u)):"letterbox"===e?(n.fillColor="black",n.fillRect(0,0,u,u),l=u/Math.max(c,s),n.drawImage(t,0,0,c,s,u/2-c/2*l,u/2-s/2*l,c*l,s*l)):"fit"===e?(n.fillColor="black",n.fillRect(0,0,u,u),l=u/Math.sqrt(c*c+s*s),n.drawImage(t,0,0,c,s,u/2-c/2*l,u/2-s/2*l,c*l,s*l)):n.drawImage(t,0,0,c,s,0,0,u,u),n.globalCompositeOperation=a,i},t.parseColor=function(t){return Base_CssColorParser.parseCSSColor(t)},t.normalizeColor=function(t){var e,i,n,s,r;return r=Base_CssColorParser.parseCSSColor(t),s=r[0],n=r[1],i=r[2],e=r[3],"rgba("+s+","+n+","+i+","+e.toFixed(3)+")"},t.deriveColor=function(e,i,n){var s,r,o,a,h;return h=t.parseColor(e),a=h[0],o=h[1],r=h[2],s=h[3],this.deriveColorRGBA(a,o,r,s,i,n)},t.deriveColorRGBA=function(t,e,i,n,s,r){var o;return o=255*(s-1),t=Math.round(Math.min(255,Math.max(0,t+o))),e=Math.round(Math.min(255,Math.max(0,e+o))),i=Math.round(Math.min(255,Math.max(0,i+o))),n=Math.min(1,n*r),"rgba("+t+","+e+","+i+","+n.toFixed(3)+")"},t.blendColors=function(e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y;return g=t.parseColor(e),f=g[0],c=g[1],h=g[2],r=g[3],y=t.parseColor(i),m=y[0],p=y[1],l=y[2],o=y[3],d=Math.round(m*n+f*(1-n)),u=Math.round(p*n+c*(1-n)),a=Math.round(l*n+h*(1-n)),s=o*n+r*(1-n),"rgba("+d+","+u+","+a+","+s.toFixed(3)+")"},t.copyHue=function(e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v;return y=t.parseColor(e),m=y[0],p=y[1],a=y[2],s=y[3],v=t.parseColor(i),g=v[0],d=v[1],h=v[2],r=v[3],l=(m+p+a)/765,u=(g+d+h)/765,f=Math.round(m/l*u),c=Math.round(p/l*u),o=Math.round(a/l*u),n=r,"rgba("+f+","+c+","+o+","+n.toFixed(3)+")"},t.inverseColor=function(e){var i,n,s,r,o;return o=t.parseColor(e),r=o[0],s=o[1],n=o[2],i=o[3],r=255-r,s=255-s,n=255-n,"rgba("+r+","+s+","+n+","+i.toFixed(3)+")"},t.applyShadow=function(t,e){return e.shadowColor?(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor):void 0},t.clearShadow=function(t){return t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=""},t.drawImageInSquare=function(t,e,i,n,s,r,o,a,h){var l,u,c;return c=h/Math.max(s,r),u=s*c,l=r*c,t.drawImage(e,i,n,s,r,o-u,a-l,2*u,2*l)},t.heightElem=null,t.getTextHeight=function(e,i){var n,s,r,o;return r=t.heightElem,r||(n=document.getElementsByTagName("body")[0],s=document.createElement("div"),s.setAttribute("style","position:absolute; visibility:hidden; top: -9999px; left: -9999px"),t.heightElem=r=document.createElement("div"),o=document.createTextNode("Mg"),r.appendChild(o),s.appendChild(r),n.appendChild(s)),r.setAttribute("style","font:"+i+"; line-height:1em"),r.offsetHeight},t}();var Base_Label,Base_LabelLayoutBase,Base_LabelRenderer;Base_Label=function(){function t(t){Base_Helpers.extendCopy(this,t)}return t.prototype.data=null,t.prototype.aspectRatio=3,t.prototype.maxWidth=null,t.prototype.lineSpacing=.2,t.prototype.align="left",t.prototype.padding=0,t.prototype.margin=0,t.prototype.angle=0,t.prototype.text=null,t.prototype.image=null,t.prototype.borderRadius=0,t.prototype.backgroundStyle=null,t.prototype.textStyle=null,t.prototype.imageSlicing=null,t.prototype.onClick=null,t.prototype.onHover=null,t.prototype.url=null,t.prototype.visible=!0,t.prototype.userPlaced=!1,t.prototype.measureDone=!1,t.prototype.loadedImage=null,t.prototype.lines=null,t.prototype.lineHeight=0,t.prototype.lineHeightM=0,t.prototype.hwidth=0,t.prototype.hheight=0,t.prototype.curX=0,t.prototype.curY=0,t.prototype.x=null,t.prototype.y=null,t}(),Base_LabelRenderer=function(){function t(t){this.chart=t,this.settings=this.chart.scene.settings,this.cache={},this.textLayout=null}return t.prototype.measure=function(t,e,i){var n,s,r,o,a,h,l,u,c;return null==i&&(i=e),e.measureDone?void 0:(n=!0,a=i.padding,l=0,s=0,e.text?(c=this.measureText(t,e,i),u=c[0],r=c[1],s=Math.max(s,r),l+=u):e.lines=[],e.image&&(e.imageSlicing?(l+=e.imageSlicing[2],s=Math.max(s,e.imageSlicing[3])):(o=this.settings.getAssetImage(e.image),o&&o.width?(l+=o.width,s=Math.max(s,o.height)):n=!1)),0===l&&(l=10,s=10),l+=2*a,s+=2*a,e.borderRadius>0&&e.text&&(h=Math.min(e.borderRadius,s/2),l+=.45*h,e.image||(l+=.45*h)),e.hwidth=l/2,e.hheight=s/2,e.measureDone=n)},t.prototype.measureText=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m;if(n=i.aspectRatio,l=i.maxWidth,(n>0||l>0)&&e.text.split(" ").length>1)o=i.lineSpacing,u=i.padding,h=i.margin,p=new Base_LabelLayoutBase(t,i),i.padding=u,i.margin=h,n||(n=1e9),l||(l=1e9),a=function(t){return[0,0,0,0,Math.min(l,t*(n+.2))]},p.fitLabelInRect(e,i.align,i.align,a,!1),d=2*e.hwidth,s=2*e.hheight;else for(c=Base_Helpers.decodeEntities(e.text),e.lineHeight=s=Base_Graphics.getTextHeight(t,i.textStyle.font),e.lines=c.split("<br>"),s*=e.lines.length,Base_Graphics.textStyleNoShadow(t,i.textStyle),d=0,r=f=0,m=e.lines.length-1;m>=f;r=f+=1)d=Math.max(t.measureText(e.lines[r]).width,d);return[d,s]},t.prototype.paint=function(t,e,i,n,s){return this.paintWithStyle(t,e,i,n,s,s)},t.prototype.paintWithStyle=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M;if(s.measureDone||this.measure(t,s,r),a=(r.angle||0)/180*Math.PI,s.curx=e,s.cury=i,(1!==n||0!==a)&&(t.save(),t.transform(n,0,0,n,e,i),0!==a&&t.rotate(a),e=0,i=0),f=s.image,v=s.lines,h=r.backgroundStyle,_=r.padding,p=s.hwidth,c=s.hheight,l=Math.min(s.borderRadius,c),h&&(u=Base_Graphics.beginStrokeAndFill(t,h),l>=c?(w=e+p-c,u.moveTo(w,i-c),u.arc(w,i,c,-Math.PI/2,Math.PI/2,!1),w=e-p+c,u.lineTo(w,i+c),u.arc(w,i,c,Math.PI/2,-Math.PI/2,!1),u.closePath()):l>0?(u.moveTo(e-p+l,i-c),u.lineTo(e+p-l,i-c),u.arc(e+p-l,i-c+l,l,-Math.PI/2,0,!1),u.lineTo(e+p,i+c-l),u.arc(e+p-l,i+c-l,l,0,+Math.PI/2,!1),u.lineTo(e-p+l,i+c),u.arc(e-p+l,i+c-l,l,+Math.PI/2,Math.PI,!1),u.lineTo(e-p,i-c+l),u.arc(e-p+l,i-c+l,l,Math.PI,Math.PI+Math.PI/2,!1)):(u.moveTo(e-p,i-c),u.lineTo(e+p,i-c),u.lineTo(e+p,i+c),u.lineTo(e-p,i+c),u.closePath()),Base_Graphics.endStrokeAndFill(t,u,h)),p-=_,c-=_,m=e-p,x=e+p,null!=f&&(d=this.settings.getAssetImage(f),d&&(S=s.imageSlicing,S?(t.drawImage(d,S[0],S[1],S[2],S[3],e-p,i-c,S[2],S[3]),m+=S[2]):(t.drawImage(d,e-p,i-c),m+=f.width))),v.length>0)for(y=s.lineHeight*(1+s.lineSpacing),o=r.align,t.textBaseline="middle",C=i-(v.length-1)*y/2,"left"===o?(b=m,null==f&&(b+=.45*l),t.textAlign="start"):"right"===o?(b=x-.45*l,t.textAlign="end"):(b=(m+x)/2,t.textAlign="center"),Base_Graphics.textStyle(t,r.textStyle),P=0,M=v.length;M>P;P++)g=v[P],t.fillText(g,b,C),C+=y;return 1!==n||0!==a?t.restore():void 0},t}(),Base_LabelLayoutBase=function(){function t(t,e){var i,n;this.g=t,this.textStyle=e.textStyle,Base_Graphics.textStyleNoShadow(t,this.textStyle),this.angle=(e.angle||0)/180*Math.PI,this.borderRadius=e.borderRadius||0,this.margin=e.margin||0,this.padding=e.padding||0,i=Base_Graphics.getTextHeight(t,this.textStyle.font),n=e.lineSpacing,this.lineHeight=i,this.lineHeightM=i*(n+1),this.lineHeightC=-i*n}return t.prototype.fitLabelInRect=function(t,e,i,n,s){var r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J,Q,K;for(null==s&&(s=!0),b=this.g,I=this.margin,N=this.padding,T=this.lineHeightC,k=this.lineHeightM,Base_Graphics.textStyleNoShadow(b,this.textStyle),R=Base_Helpers.decodeEntities(t.text),Y=b.measureText(R).width,z=[],v=[],F=0,X=R.split("<br>"),W=0,q=X.length;q>W;W++)l=X[W],r=l.split(" "),F+=r.length,z=z.concat(r),v.push(z.length);for(f=-1/0,d=null,g=0,y=0,m=0,u=0,M=Z=J=v.length;F>=Z;M=Z+=1){for(w=T+k*M,Q=n(w/2+I+N),G=Q[0],V=Q[1],x=Q[2],S=Q[3],h=Q[4],h-=2*(I+N),D=Y/M,U=100,C=z[0],o=0,B=b.measureText(C).width,A=[],H=1,O=0,E=v[O],a=M-v.length,H=j=1,K=z.length-1;K>=j;H=j+=1)P=C+" "+z[H],L=b.measureText(P).width,E!==H&&(D>=L||h>=L||0>=a)?(C=P,B=L):(A.push(C),o=Math.max(o,B),U=Math.min(U,h/B),C=z[H],B=b.measureText(C).width,E!==H?a-=1:(O+=1,E=v[O]));if(A.push(C),o=Math.max(o,B),U=Math.min(U,h/B),U>f&&(d=A,f=U,c=x,p=S,g=G,y=V,m=h,u=o),U>=1)break}return d?(t.userPlaced||(1>f&&(e=i),_="left"===e?(u-m)/2:"right"===e?(m-u)/2:0,g+=c*_,y+=p*_),s&&(t.x=g,t.y=y),t.lines=d,t.hheight=(T+k*d.length)/2+N,t.lineHeight=this.lineHeight,t.lineHeightM=k,t.hwidth=u/2+N,t.align=e,t.measureDone=!0,t.visible=!0,t.padding=N,t.borderRadius=this.borderRadius,this.borderRadius>0&&(t.hwidth+=.45*Math.min(this.borderRadius,t.hheight))):(t.lines=[],t.visible=!1),f},t.prototype.fitLabelInLines=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J,Q,K,$,te,ee,ie,ne,se,re,oe,ae,he,le,ue,ce,pe,de,fe,me,ge,ye,ve,_e,xe,Se,be,we;for(b=this.g,N=this.margin,W=this.padding,L=this.lineHeightC,B=this.lineHeightM,Base_Graphics.textStyleNoShadow(b,this.textStyle),Z=Base_Helpers.decodeEntities(t.text),K=b.measureText(Z).width,te=[],v=[],R=0,fe=Z.split("<br>"),ne=0,ae=fe.length;ae>ne;ne++)u=fe[ne],o=u.split(" "),R+=o.length,te=te.concat(o),v.push(te.length);for(f=-1/0,c=null,m=0,g=0,p=null,d=null,V=[],S=[],S.push(r(e,i)),D=se=1,me=v.length-1;me>=se;D=se+=1)h=D%2===1?V:S,o=r(e,i-w/2-N),h.unshift([o[0]-N,o[1]-N]),o=r(e,i+w/2+N),h.push([o[0]-N,o[1]-N]);for(D=re=ge=v.length;R>=re;D=re+=1){for(w=L+B*D,Q=K/D,h=D%2===1?V:S,o=r(e,i-w/2-N),h.unshift([o[0]-N,o[1]-N]),o=r(e,i+w/2+N),h.push([o[0]-N,o[1]-N]),q=100,T=te[0],F=b.measureText(T).width,E=[],O=[],j=1,A=0,l=Math.min(h[A][0]+h[A][1],h[A+1][0]+h[A+1][1]),z=0,G=v[z],a=D-v.length,j=oe=1,ye=te.length-1;ye>=oe;j=oe+=1)k=T+" "+te[j],I=b.measureText(k).width,G!==j&&(l>=I||0>=a)?(T=k,F=I):(O.push(T),E.push(F),q=Math.min(q,l/F),T=te[j],F=b.measureText(T).width,G!==j?a-=1:(z+=1,G=v[z])),j++;
if(O.push(T),E.push(F),q=Math.min(q,l/F),q>f&&(y=i-w/2,c=O,f=q,p=E,d=h.slice(0),O.length+1>h.length))throw"Internal error";if(q>=1)break}if(c){if(U=0,Y=0,"left"===n){for(P=1e30,C=he=0,ve=c.length;ve>=he;C=he+=1)P=Math.min(d[C][0]);for(M=-P,ee=M,ie=M,C=le=0,_e=c.length-1;_e>=le;C=le+=1)$=p[C],X=Math.min(d[C][1],d[C+1][1]),ie=Math.max(M+$),Y=Math.max(Y,$-(X-M))}else if("right"===n){for(X=1e30,C=ue=0,xe=c.length;xe>=ue;C=ue+=1)X=Math.min(d[C][1]);for(J=X,H=0,ee=J,ie=J,C=ce=0,Se=c.length-1;Se>=ce;C=ce+=1)$=p[C],P=Math.min(d[C][0],d[C+1][0]),ee=Math.min(J-$),U=Math.max(U,$-(X+J))}else if("center"===n){for(P=1e30,X=1e30,C=pe=0,be=c.length-1;be>=pe;C=pe+=1)$=p[C]/2,P=Math.min(d[C][0]-$,Math.min(d[C+1][0]-$,P)),X=Math.min(d[C][1]-$,Math.min(d[C+1][1]-$,X));for(_=P>0&&X>0?0:P>-X?X:X>-P?-P:(X-P)/2,H=0,ee=_,ie=_,C=de=0,we=c.length-1;we>=de;C=de+=1)$=p[C],P=Math.min(d[C][0],d[C+1][0]),X=Math.min(d[C][1],d[C+1][1]),ee=Math.min(ee,_-$/2),ie=Math.max(ie,_+$/2),U=Math.max(U,$/2-P-_),Y=Math.max(Y,$/2-X+_)}"left"===s&&U>0?(ee+=U,ie+=U):"right"===s&&Y>0?(ee-=Y,ie-=Y):"center"===s&&(x=(U-Y)/2,ee+=x,ie+=x),t.lines=c,t.hwidth=(ie-ee)/2+W,t.hheight=(L+B*c.length)/2+W,t.lineHeight=this.lineHeight,t.lineHeightM=B,t.visible=!0,t.align=n,t.measureDone=!0,t.padding=W,t.borderRadius=this.borderRadius,this.borderRadius>0&&(t.hwidth+=.45*Math.min(this.borderRadius,t.hheight)),t.userPlaced||(t.x=e+(ee+ie)/2,t.y=y+t.hheight)}else t.lines=[],t.visible=!1;return f},t.prototype.lineBreaking=function(t,e,i,n,s){var r,o,a,h,l,u,c,p,d;for(h=[],c=0,r=0;0!==i.length;)if(d=t.measureText(i[r]).width,s>=c+d){if(c+=d+n,r===i.length-1)return h.push(i.join(" ")),h;r++}else{if(p=e.reduce(function(t,e){return t+e})+(n*e.length-1),o=p-c-r*n,!(o/s>1)){if(a=i.splice(r).join(" "),e.splice(r),r=i.length-1,l=t.measureText(a).width,u=e.reduce(function(t,e){return t+e}),.5>=l/u)for(;l+t.measureText(i[r]).width+n<=u-t.measureText(i[r]).width;)a=i.pop()+" "+a,e.splice(-1),l+=t.measureText(i[r]).width,u-=t.measureText(i[r]).width,r=i.length-1;h.push(i.join(" ")),h.push(a);break}h.push(i.splice(0,r).join(" ")),e.splice(0,r),r=0,c=0}return h},t}();var Timechart_TimeSetup;Timechart_TimeSetup=function(){"use strict";function t(t){this.settings=t}return t.prototype.settigns=null,t.isSmallerOrEqualUnit=function(t,e){return Base_TimeStep.timeUnitDiffs[t]<=Base_TimeStep.timeUnitDiffs[e]},t.isSmallerUnit=function(t,e){return Base_TimeStep.timeUnitDiffs[t]<Base_TimeStep.timeUnitDiffs[e]},t.prototype.toBiggerDisplayPeriod=function(t){var e,i,n,s,r;for(e=null,r=this.settings.area.displayPeriodsParsed,n=0,s=r.length;s>n;n++)i=r[n],null!=i.displayPeriod&&i.displayPeriod.approxTime()>t.approxTime()&&(null===e||i.displayPeriod.approxTime()<e.approxTime())&&(e=i.displayPeriod);return e},t.prototype.getBiggerDisplayPeriod=function(t,e){var i,n,s,r,o,a,h,l,u;for(s=Math.abs(e-t),n=0,i=null,u=this.settings.area.displayPeriodsParsed,h=0,l=u.length;l>h;h++)r=u[h],null!=r.displayPeriod&&null!=r.displayPeriod.unit&&(a=r.displayPeriod.approxTime(),o=s/a,.9>o&&o>n&&(n=o,i=r));return i},t.prototype.getClosestDisplayPeriod=function(t,e,i){var n,s,r,o,a,h,l,u,c;for(r=null,o=0,n=null,s=1/0,c=this.settings.area.displayPeriodsParsed,l=0,u=c.length;u>l;l++)a=c[l],null!=a.displayPeriod&&null!=a.displayPeriod.unit&&(h=a.displayPeriod.approxTime(),t>=h&&(null==r||h>o)&&(r=a,o=h),h>=t&&(null==n||s>h)&&(n=a,s=h));return i?null!=e&&e.approxTime()<.8*t?{displayPeriod:e}:null!=n&&1.2*t>s||null==r?n:r:null!=r&&(o>.8*t||s>1.2*t)?r:n},t.prototype.isAllowedDisplayUnit=function(t){var e,i,n,s;for(s=this.settings.area.displayUnitsParsed,i=0,n=s.length;n>i;i++)if(e=s[i],e.step===t.step&&(e.count=t.count))return!0;return!1},t.prototype.computeDisplayUnit=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g,y,v,_,x;if(g=Math.max(r.width,10),u=Math.min(g/3,this.settings.timeAxis.maxUnitWidth),c=(s-n)/g*this.settings.timeAxis.minUnitWidth,l=(s-n)/g*u,null!=t&&null!=e&&null!=i){if(y=(e-t)/(s-n),p=i.approxTime(),1===y)return i;if(y>1){if(l>=p)return i}else if(p>=c)return i}for(d=this.settings.timeAxis.unitSizePolicy,o=null,a=0,x=this.settings.area.displayUnitsParsed,v=0,_=x.length;_>v;v++)f=x[v],f.approxTime()<this.settings.area._minUnit.approxTime()||(m=f.approxTime(),h=null===o?!0:"min"===d?m>=c&&a>m||c>a&&m>a:l>=m&&m>a||a>l&&a>m,h&&(o=f,a=m));if(!o)throw console.error(t,e,i,n,s,g),"Could not calculate displayUnit";return o},t.prototype.tryComputeDisplayPeriod=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m,g,y,v,_;return h=null,m=null,null!=t&&Base_Helpers.arrayContains(t,">")?(v=t.split(">"),l=v[0],g=v[1],h=parseInt(l),m=parseInt(g)):"max"===t&&null!=n&&null!=s?(h=n,m="now"===e?o:s):"max"!==t&&(f=Base_TimeStep.parse(t),"now"===e?a=o:"newestData"===e&&null!=s?a=s:Base_Helpers.isNumber(e)&&(a=parseFloat(e)),null!=f&&null!=a&&(h=f.sub(a),m=a)),null===h||null===m?[null,null,null]:(_=this.computeTimeScaleRange(r),p=_[0],u=_[1],d=_[2],c=_[3],y="auto"===i?null:Base_TimeStep.parse(i),m-h>u&&(y=c,h=m-u),p>m-h&&(y=d,h=m-p),[h,m,y])},t.prototype.resolveFromTo=function(t,e,i,n,s,r){return"oldestData"===t&&null!=n&&(t=i.roundTimeDown(n)),"newestData"===e&&null!=s&&(e=i.roundTimeUp(s)),"now"===e&&(e=i.roundTimeUp(r)),[t,e]},t.prototype.computeTimeScaleRange=function(t,e){var i,n,s,r,o,a,h,l,u,c,p;for(null==e&&(e=this.settings.area.displayUnitsParsed),h=null,o=0,r=null,n=1/0,c=0,p=e.length;p>c;c++)l=e[c],i=l.approxTime(),(null===h||o>i)&&(h=l,o=i),(null===r||i>n)&&(r=l,n=i);return u=Math.max(10,t.width),s=u/this.settings.timeAxis.minUnitWidth*n,a=u/this.settings.timeAxis.maxUnitWidth*o,[a,s,h,r]},t.prototype.preventOverscale=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d;return o>r&&s-n>o-r?(a=(r+o)/2,c=(o-r)*this.settings.advanced.maxZoomOutFactor/2,[a-c,a+c]):(d=this.computeTimeScaleRange(t,e),u=d[0],l=d[1],l*=.99,u*=1.01,p=s-n,p>l&&(p=Math.min(p,l)),p=Math.max(p,u),h=p/(s-n),null==i&&(i=(n+s)/2),n===s&&console.error("From = To, trouble",n,s),[i+(n-i)*h,i+(s-i)*h])},t.prototype.preventOverscroll=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f;return p=this.settings.interaction.scrolling,u=p.limitMode,a=o?null!=u:"block"===u,a&&(l=p.limitFrom,c=p.limitTo,d=this.resolveFromTo(l,c,t,n,s,r),l=d[0],c=d[1],f=this.resolveFromTo(l,c,t,n,s,r),l=f[0],c=f[1],Base_Helpers.isNumber(l)||(l=null),Base_Helpers.isNumber(c)||(c=null),h=i-e,null!=l&&null!=c&&(h=Math.min(h,c-l)),h*=p.overscrollProportion,null!=l&&(l-=h),null!=c&&(c+=h),null!=l&&null!=c&&i-e>c-l?(e=l,i=c):null!=c&&i>c?(h=i-c,e-=h,i-=h):null!=l&&l>e&&(h=l-e,e=l,i+=h)),[e,i]},t.prototype.scroll=function(t,e,i,n,s,r){var o;if("displayUnit"===r)o=i.clone();else if("page"===r)o=this.getTimeRangeStep(t,e);else{if(!Base_TimeStep.isGoodUnit(r))return void Base_Helpers.error("Incorrect scroll unit: "+r);o=Base_TimeStep.parse(r)}return o.count*=s,"<"===n?[o.sub(t),o.sub(e)]:[o.add(t),o.add(e)]},t.prototype.getTimeRangeStep=function(t,e){var i,n,s,r,o,a,h,l;for(t=Math.round(t),e=Math.round(e),i=null,l=Base_TimeStep.knownUnits,a=0,h=l.length;h>a;a++)o=l[a],s=new Base_TimeStep(o,1),n=s.roundTimeRound(t),r=s.roundTimeRound(e),t===n&&e===r&&(null===i||i.approxTime()<s.approxTime())&&(i=s);return i.count=Math.max(1,i.numberOfUnits(t,e)),i},t}();var Linearchart_ValueAxis,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Linearchart_ValueAxis=function(){"use strict";function t(t,e){this.options=e,this.computePanelSize=__bind(this.computePanelSize,this),this.events=t.events,this.scene=t.scene,this.isLogScale=this.options.logScale,this.isInside="inside"===this.options.position,this.locations=[],this.values=[],this.cachedUnits=[],this.panel=new Base_ChartPanel,this.panel.packingOrder=100,this.panel.computeSize=this.computePanelSize,this.lastMaxValue=0,this.lastMinValue=0,this.minValue=0,this.maxValue=0,this.scale=0,this.zeroY=0,this.logOffset=1,this.minValueAnimation=null,this.maxValueAnimation=null,this.axisChanged=!1,this.seriesDepth=0,this.seriesMinValue=null,this.seriesMaxValue=null,this.series=0}return t.prototype.getPanel=function(){return this.options.enabled?(this.panel.location=this.options.position,this.panel.side=this.options.side,this.panel):[]},t.prototype.computePanelSize=function(t,e,i){var n;return this.options.size?n=this.options.size:(n=0,Base_Graphics.textStyle(i,this.options.style.valueLabel),n+=2*this.options.style.valueLabel.margin+i.measureText("999.9 M").width,this.options.title&&(Base_Graphics.textStyle(i,this.options.style.title),n+=2*this.options.style.title.margin+Base_Graphics.getTextHeight(i,this.options.style.valueLabel.font))),[Math.round(n),e]},t.prototype.recieveSeriesGeometry=function(t,e,i){return null!==this.options.minValue?this.seriesMinValue=this.options.minValue:void 0!==t&&(this.seriesMinValue=null!==this.seriesMinValue?Math.min(t,this.seriesMinValue):t),null!==this.options.maxValue?this.seriesMaxValue=this.options.maxValue:void 0!==e&&(this.seriesMaxValue=null!==this.seriesMaxValue?Math.max(e,this.seriesMaxValue):e),this.seriesDepth=Math.max(i,this.seriesDepth)},t.prototype.process=function(t){var e,i,n;return e=t.changes.bounds,t.changes.settings&&(this.isLogScale=this.options.logScale,this.isInside="inside"===this.options.position,e=!0),this.shouldChangeScale()&&(this.seriesMinValue!==this.lastMinValue&&(e=!0,null==this.lastMinValue||t.changes.displayUnit||this.minValue===this.maxValue?this.minValueAnimation=null:null!=this.minValueAnimation?this.minValueAnimation.retarget(this.seriesMinValue):this.minValueAnimation=new Base_Animator(this.lastMinValue,this.seriesMinValue,this.options.scaleAdjustmentAnimationDelay,this.options.scaleAdjustmentAnimation,t.time),this.lastMinValue=this.seriesMinValue),this.seriesMaxValue!==this.lastMaxValue&&(e=!0,null==this.lastMaxValue||t.changes.displayUnit||this.minValue===this.maxValue?this.maxValueAnimation=null:null!=this.maxValueAnimation?this.maxValueAnimation.retarget(this.seriesMaxValue):this.maxValueAnimation=new Base_Animator(this.lastMaxValue,this.seriesMaxValue,this.options.scaleAdjustmentAnimationDelay,this.options.scaleAdjustmentAnimation,t.time),this.lastMaxValue=this.seriesMaxValue)),this.seriesMaxValue=this.options.minValue,this.seriesMinValue=this.options.maxValue,this.minValueAnimation?(e=!0,n=this.minValueAnimation.get(t.time),this.minValueAnimation.finished(t.time)&&(this.minValueAnimation=null)):n=this.lastMinValue,this.maxValueAnimation?(e=!0,i=this.maxValueAnimation.get(t.time),this.maxValueAnimation.finished(t.time)&&(this.maxValueAnimation=null)):i=this.lastMaxValue,this.axisChanged=e,e&&this.computeNewScale(n,i),this.minValueAnimation||this.maxValueAnimation?t.animating=!0:void 0},t.prototype.afterProcess=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C;if(this.axisChanged&&(this.axisChanged=!1,this.options.enabled)){if(this.locations=[],this.values=[],o=parseInt(this.options.style.valueLabel.font)/2*1.5,g=this.scene.y0,y=g+this.scene.height,this.scale>0){if(this.isLogScale){for(x=this.calcExpValuePerLine(),n=x[0],i=x[1],u=1/n;;){if(u*=i,d=this.zeroY-this.valueToRelativeY(u),g>d-o)break;this.locations.push((0|d)-.5),this.values.push(u)}for(u=-1/n;;){if(u*=i,d=this.zeroY-this.valueToRelativeY(u),d>=y)break;this.locations.push((0|d)-.5),this.values.push(u)}}else{for(p=this.calcLinearValuePerLine(),u=0;;){if(u+=p,d=this.zeroY-this.valueToRelativeY(u),g>=d-o)break;this.locations.push(0|d),this.values.push(u)}for(u=0;;){if(u-=p,d=this.zeroY-this.valueToRelativeY(u),d>=y)break;this.locations.push(0|d),this.values.push(u)}}for(this.minValue<0&&this.maxValue>0&&(this.locations.push(0|this.zeroY),this.values.push(0)),c=this.options.valueFormatterFunction,this.isLogScale||(S=this.getUnitAndName(this.values[0],this.scene.settings),a=S[0],t=S[1],h=S[2]),b=this.values,C=[],e=v=0,_=b.length;_>v;e=++v)u=b[e],this.isLogScale&&(w=this.getUnitAndName(u,this.scene.settings),a=w[0],t=w[1],h=w[2]),s=(u/a).toFixed(t),""!==a&&u&&(s=s+" "+h),c&&(s=c(u,h,a,s)),C.push(this.values[e]=s);return C}for(r=this.options.scaleStep?this.options.scaleStep:100,f=this.options.style.labelSpacing,m=y-f,l=100;m>g;)this.locations.push(0|m),this.values.push(l),this.options.logScale?l*=10:l+=r,m-=f}},t.prototype.paintUnder=function(t){var e;return this.options.enabled&&this.locations.length>0?(e=Base_Graphics.beginStrokeAndFill(t,this.options.style.baseLine),this.paintZeroLine(e),Base_Graphics.endStrokeAndFill(t,e,this.options.style.baseLine)):void 0},t.prototype.paint=function(t,e){var i;return this.options.enabled&&this.locations.length>0&&(this.paintGrid(e),this.paintLabels(t)),this.options.enabled&&this.options.axisLine?(i=Base_Graphics.beginStrokeAndFill(t,this.options.style.axisLine),this.paintAxisLine(i),Base_Graphics.endStrokeAndFill(t,i,this.options.style.axisLine)):void 0},t.prototype.shouldChangeScale=function(){var t,e,i;return e=this.seriesMinValue,t=this.seriesMaxValue,null===e||null===t?!1:null!==this.lastMinValue&&null!==this.lastMaxValue&&this.lastMinValue<this.lastMaxValue?("center"===this.options.zeroLine?(t=Math.max(t,-e),e=-t):"visible"===this.options.zeroLine&&(e=Math.min(e,0),t=Math.max(t,0)),e<this.minValue||t>this.maxValue?!0:(i=(this.lastMaxValue-this.lastMinValue)*this.options.scaleAdjustmentTolerance,e>this.lastMinValue+i||t<this.lastMaxValue-i?!0:!1)):!0},t.prototype.computeNewScale=function(t,e){var i,n,s,r,o,a,h,l;return n=this.scene.height,l=this.scene.y0,"center"===this.options.zeroLine?(e=Math.max(e,-t),t=-e):"visible"===this.options.zeroLine&&(t=Math.min(t,0),e=Math.max(e,0)),null!==this.options.minValue&&(t=this.options.minValue),null!==this.options.maxValue&&(e=this.options.maxValue),!n>0||!(e>t)?(this.minValue=0,this.maxValue=0,this.logOffset=1,this.scale=0,void(this.zeroY=l+n)):(this.options.scaleStep>0?o=this.options.scaleStep:this.options.scaleMinStep>0&&(o=this.options.scaleMinStep),o>0&&(0>t&&(t=Math.floor(t/o)*o),e>0&&(e=Math.ceil(e/o)*o)),i=e-t,0!==t&&-100!==t&&(this.isLogScale?t=Base_Helpers.sign(t)*Math.pow(Math.abs(t),1-Base_Helpers.sign(t)*this.options.scaleAdjustmentTolerance):(r=t-i*this.options.scaleAdjustmentTolerance,t>0?t=Math.max(0,r):0>t&&(t=Math.min(0,r)))),0!==e&&100!==e&&(this.isLogScale?e=Base_Helpers.sign(e)*Math.pow(Math.abs(e),1+Base_Helpers.sign(e)*this.options.scaleAdjustmentTolerance):(s=e+i*this.options.scaleAdjustmentTolerance,e>0?e=Math.max(0,s):0>e&&(e=Math.min(0,s)))),null!==this.options.minValue&&(t=this.options.minValue),null!==this.options.maxValue&&(e=this.options.maxValue),this.minValue=t,this.maxValue=e,this.isLogScale?0>=t||e>=0?(this.logOffset=1,a=Math.log(e+this.logOffset)+Math.log(-t+this.logOffset)):0>t?(this.logOffset=1-t,a=Math.log(e+this.logOffset)):e>0&&(this.logOffset=1+e,a=Math.log(-t+this.logOffset)):a=e-t,this.scale=n/a,h=this.valueToRelativeY(t),this.zeroY=l+n+h)},t.prototype.valueToRelativeY=function(t){return this.isLogScale?t>0?this.scale*Math.log(t+this.logOffset):0>t?-this.scale*Math.log(-t+this.logOffset):0:this.scale*t},t.prototype.calcLinearValuePerLine=function(){var t,e,i;if(this.options.scaleStep)return this.options.scaleStep;for(e=this.options.style.labelSpacing/this.scale,i=Math.log(e)/Math.log(10),t=Math.pow(10,Math.floor(i-1)),t=Math.max(t,this.options.scaleMinStep);e>t;){if(2*t>=e)return 2*t;if(t>10&&2.5*t>=e)return 2.5*t;if(5*t>=e)return 5*t;t*=10}return t},t.prototype.calcExpValuePerLine=function(){var t,e,i,n;if(t=this.valueToRelativeY(10)-this.valueToRelativeY(1),n=10,i=10,e=t,e>4*this.options.style.labelSpacing)return[2,2];for(;e<this.options.style.labelSpacing;)n*=10,e+=t;return[i,n]},t.prototype.getUnitAndName=function(t,e){var i,n,s,r,o,a,h,l,u;if(t=Math.abs(t),n=this.isLogScale?"log":"lin","undefined"==typeof this.cachedUnits[n]&&(this.cachedUnits[n]=[]),h=1,r="",this.cachedUnits[n][t])return this.cachedUnits[n][t];u=e.localization.valueUnits;for(a in u)if(s=u[a],o=Math.abs(t/s),"lin"===n){if(1e3>o&&o>=1){h=s,r=a;break}}else"log"===n&&t===Math.round(t/s)*s&&s>h&&(h=s,r=a);if(i=0,t>0)for(l=1;l>t;)i+=1,l/=10;return this.cachedUnits[n][t]=[h,i,r],[h,i,r]},t.prototype.paintGrid=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f;if(this.options.hgrid){for(n=this.options.style.hgrid.lineColor,this.options.style.hgrid.lineColor=n,this.options.style.hgrid.lineWidth=1,i=Base_Graphics.beginStrokeAndFill(t,this.options.style.hgrid),Base_Graphics.clearShadow(i),o=this.scene.x0,a=this.scene.x0+this.scene.width,d=this.locations,r=l=0,c=d.length;c>l;r=++l)h=d[r],0!==this.values[r]&&(i.moveTo(o,h+.5),i.lineTo(a,h+.5));if(Base_Graphics.endStrokeAndFill(t,i,this.options.style.hgrid),e=Base_Graphics.parseColor(n),e[3]<.3){for(s=Base_Graphics.deriveColor(n,.5,.5),this.options.style.hgrid.lineColor=s,i=Base_Graphics.beginStrokeAndFill(t,this.options.style.hgrid),f=this.locations,r=u=0,p=f.length;p>u;r=++u)h=f[r],0!==this.values[r]&&(i.moveTo(o,h-.5),i.lineTo(a,h-.5));return Base_Graphics.endStrokeAndFill(t,i,this.options.style.hgrid),this.options.style.hgrid.lineColor=n}}},t.prototype.paintAxisLine=function(t){var e,i,n,s;return e=this.panel.left,i=this.panel.right,s=this.scene.y0+this.scene.height,this.isInside?("right"===this.options.side&&(n=e),"left"===this.options.side&&(n=i),t.moveTo(n,this.scene.y0),t.lineTo(n,s)):"right"===this.options.side?(n=e-.5,t.moveTo(n,this.scene.y0),t.lineTo(n,s)):(n=i+.5,t.moveTo(n,this.scene.y0),t.lineTo(n,s))},t.prototype.paintZeroLine=function(t){var e,i,n,s;return e=Math.max(this.options.style.baseLine.lineDepth,this.seriesDepth),i=this.scene.x0,n=this.scene.x0+this.scene.width,s=this.zeroY,e>0?(t.beginPath(),t.fillStyle=this.options.style.baseLine.depthColor,t.moveTo(i,s),t.lineTo(i+e,s-e),t.lineTo(n,s-e),t.lineTo(n,s),t.closePath(),t.fill()):(t.moveTo(i,s),t.lineTo(n,s))},t.prototype.paintLabels=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b;if(f=this.panel.left,m=this.panel.right,o="right"===this.options.side,this.options.title&&(y=this.scene.y0,s=this.scene.height,Base_Graphics.textStyle(t,this.options.style.title),c=Base_Graphics.getTextHeight(t,this.options.style.title.font),l=this.options.style.title.reverseDirection,h=this.options.style.title.margin,e=this.options.style.title.alignment,n=y+.5*s,t.save(),o?(i=m-h-.5*c,l?t.transform(0,-1,1,0,i,n):t.transform(0,1,-1,0,i,n),m-=c+2*h):(i=f+h+.5*c,l?t.transform(0,1,-1,0,i,n):t.transform(0,-1,1,0,i,n),f+=c+2*h),t.textBaseline="middle","left"===e?(t.textAlign="left",t.fillText(this.options.title,-(s/2-h),0)):"right"===e?(t.textAlign="right",t.fillText(this.options.title,s/2-h,0)):(t.textAlign="center",t.fillText(this.options.title,0,0)),t.restore()),this.isInside?(t.textAlign="center",t.textBaseline="middle",a=(f+m)/2):o?(t.textAlign="start",t.textBaseline="middle",u=f,a=f+7):(t.textAlign="end",t.textBaseline="middle",u=m-4,a=m-7),!this.isInside){for(t.beginPath(),S=this.locations,v=0,x=S.length;x>v;v++)g=S[v],t.moveTo(u,g),t.lineTo(u+4,g);Base_Graphics.stroke(t,this.options.style.tick)}for(t.save(),t.lineWidth=0,t.strokeStyle="",t.shadowOffsetX=0,t.shadowOffsetY=0,Base_Graphics.textStyle(t,this.options.style.valueLabel),r=_=0,b=this.locations.length-1;b>=_;r=_+=1)p=this.values[r],d=this.locations[r],t.fillText(p,a,d);t.restore()},t}();var PieChart_Renderer_Flat,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Flat=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.paintSlices=function(t,e,i,n){var s,r,o,a;for(a=[],r=0,o=n.length;o>r;r++)s=n[r],a.push(this.strokeAndPaint(t,e,i,s));return a},e}(PieChart_Renderer_Base);var PieChart_Renderer_Can,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Can=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.paintPie=function(t,i,n,s,r,o,a,h){var l,u,c,p,d,f;if(e.__super__.paintPie.call(this,t,i,n,s,r,o,a,h),l=this.settings.pie.depth,l>0&&h.allSlices.length>0){for(t.fillStyle="rgba(0,0,0,0.05)",d=[5,10,18],f=[],c=0,p=d.length;p>c;c++)u=d[c],t.beginPath(),t.arc(i,n+u+l,r,o,a,!1),t.arc(i,n+u+l,s,a,o,!0),t.closePath(),f.push(t.fill());return f}},e.prototype.paintSlices=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;for(o=this.settings.pie.depth,r=2*this.settings.advanced.renderQuality,d=1/r,l=o*r,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=1.5*o,t.shadowColor="black",t.fillStyle="black",f=0,v=n.length;v>f;f++)p=n[f],this.strokeSlice(t,e,i+o,p),t.fill();for(t.shadowColor=null,t.shadowBlur=0,t.lineWidth=1,a=m=0;l>=m;a=m+=1)for(g=0,_=n.length;_>g;g++)p=n[g],this.strokeSlice(t,e,i+o-a*d,p),t.strokeStyle=a>=l-1?Base_Graphics.deriveColor(p.fillColor,1.35,1):Base_Graphics.deriveColor(p.fillColor,.5+a/l*.2,1),t.stroke();for(s=Math.PI,t.shadowBlur=o,t.shadowColor="rgba(0,0,0,0.1)",t.fillStyle="black",y=0,x=n.length;x>y;y++)if(p=n[y],u=p.renderParams,h=u[4],c=u[5],h!==c){for(;h>s;)h-=2*s,c-=2*s;0>h?c>0&&(c=Math.min(c,s),this.strokeInnerShadowSlice(t,e,i,p,0,c)&&t.fill()):s>c?this.strokeInnerShadowSlice(t,e,i,p,h,c)&&t.fill():(s>h&&this.strokeInnerShadowSlice(t,e,i,p,h,s)&&t.fill(),c>2*s&&this.strokeInnerShadowSlice(t,e,i,p,2*s,c)&&t.fill())}for(w=[],b=0,S=n.length;S>b;b++)p=n[b],w.push(this.strokeAndPaint(t,e,i,p));return w},e.prototype.strokeInnerShadowSlice=function(t,e,i,n,s,r){var o,a,h;return o=n.renderParams,a=o[0]+1,h=Math.min(o[1]-1,a+10),a>=o[1]||h<=o[0]?!1:(s+=1/a,r-=1/a,s>=r?void 0:(t.beginPath(),t.arc(e,i,h,s,r,!1),t.arc(e,i,a,r,s,!0),t.closePath(),!0))},e}(PieChart_Renderer_Base);var PieChart_Renderer_Smoothy,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Smoothy=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.gradients={},e.prototype.paintSlices=function(t,e,i,n){var s,r,o,a;for(this.g=t,a=[],r=0,o=n.length;o>r;r++)s=n[r],this.strokeAndPaint(t,e,i,s),a.push(this.elegantGradient(e,i,s));return a},e.prototype.getRadialGradient=function(t,e,i,n,s,r,o){var a,h;return a=Math.abs(Math.sin(o)),h=this.g.createRadialGradient(t,e,i,n,s,r),this.addColorStops(h,a,o),h},e.prototype.getLinearGradient=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g;return u=o-n,g=Math.sin(a),l=Math.cos(a),p=e+l*n,f=i+g*n,d=p+l*u,m=f+g*u,h=Math.abs(g),c=this.g.createLinearGradient(p,f,d,m),this.addColorStops(c,h,a),c},e.prototype.addColorStops=function(t,e,i){var n,s,r,o,a,h,l,u,c;return n="0,0,0",c="255,255,255",0>=i||i>Math.PI?(l=n,u=c):(l=c,u=n),s=.4*e,r=.2*e,o=.1*e,a=.3*e,h=.5*e,t.addColorStop(0,"rgba("+l+","+s.toFixed(3)+")"),t.addColorStop(.1,"rgba("+l+","+r.toFixed(3)+")"),t.addColorStop(.1,"rgba("+l+","+o.toFixed(3)+")"),t.addColorStop(.4,"rgba("+n+",0.1)"),t.addColorStop(.9,"rgba("+u+","+o.toFixed(3)+")"),t.addColorStop(.95,"rgba("+u+","+a.toFixed(3)+")"),t.addColorStop(1,"rgba("+u+","+h.toFixed(3)+")")},e.prototype.elegantGradient=function(t,e,i){var n,s,r,o,a,h,l,u,c,p;for(c=i.renderParams,l=c[0],u=c[1],n=c[2],s=c[3],h=this.settings.advanced.renderQuality,a=Math.PI/Math.max(1,180*h),r=n,p=[];s>r;)o=Math.min(r+a,s),this.g.beginPath(),this.g.arc(t,e,u,r,o),this.g.arc(t,e,l,o,r,!0),this.g.closePath(),Base_Graphics.paint(this.g,{fillColor:this.getRadialGradient(t,e,l,t,e,u,r)}),p.push(r=o);return p},e}(PieChart_Renderer_Base);var PieChart_Renderer_Bevel,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Bevel=function(t){function e(){return this.getSmartGradient=__bind(this.getSmartGradient,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.gradients={},e.prototype.paintSlices=function(t,e,i,n){var s,r,o,a;for(this.g=t,a=[],r=0,o=n.length;o>r;r++)s=n[r],this.strokeAndPaint(t,e,i,s),a.push(this.smartGradient(e,i,s));return a},e.prototype.getSmartGradient=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f;u="g"+s+r+i+n,"inside"===s?"top"===r?(d=c=p=f=0,d=n-i,f=e,o="rgba(0,0,0,0.3)",a="rgba(0,0,0,0)"):(d=c=p=f=0,d=e,f=e+i,o="rgba(255,255,255,0)",a="rgba(255,255,255,0.3)"):"top"===r?(d=c=p=f=0,f=e,o="rgba(255,255,255,0.3)",a="rgba(255,255,255,0)"):(d=c=p=f=0,d=e,f=e+n,o="rgba(0,0,0,0)",a="rgba(0,0,0,0.3)");try{return l=this.g.createLinearGradient(c,d,p,f),l.addColorStop(0,o),l.addColorStop(1,a),this.gradients[u]=l,l}catch(m){throw h=m,"Could not create linear gradient: "+h}},e.prototype.smartOuterShineTop=function(t,e,i,n,s,r,o,a){var h;if(!(s>0&&r<Math.PI))return r>0&&0>s&&(r=0,a=0),s>0&&s<Math.PI&&(s=Math.PI,o=Math.PI),h={renderParams:[n-.1*(n-i),n,s,r,o,a],x:0,y:0},h.fillColor=this.getSmartGradient(t,e,i,n,"outside","top"),this.strokeAndPaint(this.g,t,e,h)},e.prototype.smartOuterShineBottom=function(t,e,i,n,s,r,o,a){var h;if(!(0>r||s>Math.PI))return 0>s&&(s=0,o=0),r>Math.PI&&(r=Math.PI,a=Math.PI),h={renderParams:[n-.1*(n-i),n,s,r,o,a],x:0,y:0},h.fillColor=this.getSmartGradient(t,e,i,n,"outside","bottom"),this.strokeAndPaint(this.g,t,e,h)},e.prototype.smartInnerShineTop=function(t,e,i,n,s,r,o,a){var h;if(!(s>0&&r<Math.PI))return r>0&&0>s&&(r=0,a=0),s>0&&s<Math.PI&&(s=Math.PI,o=Math.PI),h={renderParams:[i,i+.1*(n-i),s,r,o,a],x:0,y:0},h.fillColor=this.getSmartGradient(t,e,i,n,"inside","top"),this.strokeAndPaint(this.g,t,e,h)},e.prototype.smartInnerShineBottom=function(t,e,i,n,s,r,o,a){var h;if(!(0>r||s>Math.PI))return 0>s&&(s=0,o=0),r>Math.PI&&(r=Math.PI,a=Math.PI),h={renderParams:[i,i+.1*(n-i),s,r,o,a],x:0,y:0},h.fillColor=this.getSmartGradient(t,e,i,n,"inside","bottom"),this.strokeAndPaint(this.g,t,e,h)},e.prototype.smartGradient=function(t,e,i){var n,s,r,o,a,h;t+=i.x,e+=i.y,a=i.renderParams[0],h=i.renderParams[1],n=i.renderParams[2],s=i.renderParams[3],r=i.renderParams[4],o=i.renderParams[5],this.smartOuterShineTop(t,e,a,h,n,s,r,o),this.smartOuterShineBottom(t,e,a,h,n,s,r,o),this.smartInnerShineTop(t,e,a,h,n,s,r,o),this.smartInnerShineBottom(t,e,a,h,n,s,r,o)},e}(PieChart_Renderer_Base);var Linearchart_Renderer_Columns;Linearchart_Renderer_Columns=function(){"use strict";function t(t,e){this.scene=t,this.series=e,this.prevy=[]}return t.prototype.paintStack=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g;if(this.zeroY=r,e.length>0){for(u=this.series,h=this.prevy,h.length<e.length&&(h=this.prevy=new Array(e.length)),a=p=0,m=e.length-1;m>=p;a=p+=1)h[a]=r;for(o=i[0]+i[i.length-1],g=[],a=d=0,f=u.length;f>d;a=++d)l=u[a],c=s[a],g.push(o>=2||c?this.plainColumns(t,l.style,e,i,h,n,c,a):this.outline(t,l.style,e,i,h,n[a]));return g}},t.prototype.hitTest=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P;if(u=t.length,!(u>1))return[null,1/0];for(d=this.series,v=Base_Helpers.binSearch(t,r),f=t[v]-e[v],g=t[v]+e[v],f>r&&v>0&&(m=t[v-1]-e[v-1],y=t[v-1]+e[v-1],(y>r||Math.abs(y-r)<Math.abs(f-r))&&(v-=1,f=m,g=y)),c=null,h=1/0,_=s,l=C=0,P=d.length;P>C;l=++C)p=d[l],w=i[l][v],null!==w&&(S=_-w,x=Math.min(_,S),b=Math.max(_,S),a=Base_Geometry.distanceToRect(r,o,f,x,g,b),h>a&&(h=a,c={x0:f,y0:x,x1:g,y1:b,seriesIndex:l,isMarker:!1}),_=S);return[c,h]},t.prototype.outline=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g;if(a=i.length,a>1){for(t.fillStyle=e.strokeStyle?e.lineColor:e.fillColor,d=this.zeroY,g=[],o=f=0,m=a-1;m>=f;o=f+=1)l=i[o]-n[o],u=i[o]+n[o],c=r[o],null!==c&&(p=s[o],c=d-c,t.fillRect(l,p,u-l+.5,c-p),s[o]=c),g.push(h=u);return g}},t.prototype.plainColumns=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W;for(G=[this.scene.y0,this.scene.height],A=G[0],S=G[1],M=e.minHeight,h=A+S,R=this.zeroY,N=r[a],d=null,g=e.depth,L=e.shadowColor,W=[],b=H=0,Y=i.length;Y>H;b=++H)if(l=i[b],F=N[b],null!==F){if(D=n[b],O=s[b],E=O-F,s[b]=E,c=l-D,f=D+D,E>O){for(u=Math.max(E-O,M),p=O,w=!0,P=a-1;P>0;){if(null!==r[P][b]){w=!1;break}P--}k=w}else{if(!(O>E))continue;for(u=Math.max(O-E,M),p=O-u,C=!0,P=a+1;P<r.length;){if(null!==r[P][b]){C=!1;break}P++}k=C}if(T=o?o[b]:e,T||(T=e),d!==T&&(d=T,B=d.lineColor?d.lineWidth:0,d.currentFillGradient?_=d.currentFillGradient:(_=d.fillColor,null!=d.gradient&&1!==d.gradient&&_&&(_=t.createLinearGradient(0,h,0,h-2*S/3),_.addColorStop(0,Base_Graphics.deriveColor(d.fillColor,d.gradient,1)),_.addColorStop(1,d.fillColor))),t.fillStyle=_,d.fillColor&&g?(y=d.fillColor,null!=d.depthBrightness&&(y=Base_Graphics.deriveColor(y,d.depthBrightness,1))):y=null),y&&(t.beginPath(),Base_Graphics.applyShadow(t,d),k?(t.moveTo(c+g,p-g),t.lineTo(c+f+g,p-g),t.lineTo(c+f+g,p+u-g),t.lineTo(c+f,p+u),t.lineTo(c+f,p),t.lineTo(c,p)):(t.moveTo(c+f,p),t.lineTo(c+f+g,p-g),t.lineTo(c+f+g,p+u-g),t.lineTo(c+f,p+u),t.lineTo(c+f,p)),t.closePath(),t.fillStyle=y,t.fill(),Base_Graphics.clearShadow(t),t.fillStyle=_),!y&&L&&Base_Graphics.applyShadow(t,d),_&&(t.fillRect(c,p,f,u),!y&&L&&Base_Graphics.clearShadow(t)),B>0&&(p+=B/2,c+=B/2,f-=B,u-=B,m=Base_Graphics.beginStroke(t,d),f>0?u>0?(m.moveTo(c,p),m.lineTo(c+f,p),m.lineTo(c+f,p+u),m.lineTo(c,p+u),m.lineTo(c,p)):B>0&&(t.moveTo(c,O),t.lineTo(c+f,O)):B>0&&(t.moveTo(l,p),t.lineTo(l,p+u)),Base_Graphics.endStroke(t,m,d)),_||y||!L||Base_Graphics.clearShadow(t),d.previewData){for(t.beginPath(),x=0,v=E-O,V=d.previewData,U=0,z=V.length;z>U;U++)I=V[U],x+=I,F=O+x*v,t.moveTo(c,F),t.lineTo(c+f,F);t.lineWidth=1,t.strokeStyle=d.previewLineColor,W.push(t.stroke())}else W.push(void 0)}return W},t}();var Linearchart_Renderer_Line;Linearchart_Renderer_Line=function(){"use strict";function t(t){var e,i,n;for(this.series=t,this.centers=[],this.seriesData=[],i=0,n=t.length;n>i;i++)e=t[i],this.seriesData.push({markerY:[],segments:[]});this.prevyL=[],this.prevyR=[]}return t.prototype.paintStack=function(t,e,i,n,s,r){var o,a,h,l,u,c;if(this.centers=e,this.styles=s,this.zeroY=r,e.length>0){for(this.paintLines(t,this.series,this.seriesData,i,n,r),u=this.series,c=[],o=h=0,l=u.length;l>h;o=++h)a=u[o],c.push(this.paintMarkers(t,a,this.centers,n[o],this.seriesData[o].markerY));return c}},t.prototype.paintLines=function(t,e,i,n,s,r){var o,a,h,l,u,c;for(this.zeroY=r,this.computeLineSegments(n,this.zeroY,s),a=[],c=[],o=l=0,u=e.length;u>l;o=++l)h=e[o],this.paintLine(t,h.style,a,i[o].segments),c.push(a=this.seriesData[o].segments);return c},t.prototype.paintMarkers=function(t,e,i,n,s){var r,o,a,h,l,u,c,p,d;if(e.style.marker&&e.style.marker.shape&&e.style.marker.width){for(a=e.style.marker,r=a.fillColor,r||(r=e.style.lineColor),r||(r=e.style.fillColor),t.fillStyle=r,h=a.width/2,l=a.shape,d=[],o=c=0,p=n.length;p>c;o=++c)u=n[o],null!==u&&(t.beginPath(),Base_Graphics.strokeMarker(t,l,i[o],s[o],h),d.push(t.fill()));return d}},t.prototype.hitTest=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W;if(P=this.series,t=this.centers,_=t.length,!(_>0))return[null,1/0];for(L=Math.min(Base_Helpers.binSearch(t,r),_-2),l=null,h=1/0,d=s-o,C=N=0,Y=P.length;Y>N;C=++N){for(w=P[C],M=n[y]?n[y][L]:P[C].style,u=this.seriesData[C],y=R=z=Math.max(0,L-2),G=Math.min(_,L+3);G>R;y=R+=1)T=i[C][y],null!==T&&M.marker&&(A=t[y],E=u.markerY[y],S=M.marker.width/2,m=r-A,g=o-E,x=Math.sqrt(m*m+g*g),S+a>x&&h>x-S&&(h=x-S,l={x0:A,y0:E,x1:A,y1:E,seriesIndex:C,isMarker:!0}));for(f=null,b=u.segments,y=H=0,V=b.length;V>H;y=H+=2)for(B=b[y],O=b[y+1],k=B[0],v=U=1,W=B.length;W>U;v=U+=1)D=B[v],r+a>=k&&D>=r-a&&(I=O[v-1],F=O[v],p=Math.sqrt(Base_Geometry.distanceToLineSq(k,I,D,F,r,o)),a>p&&h>=p&&(h=p,l={x0:k,y0:I,x1:D,y1:F,seriesIndex:C,isMarker:!1})),r>=k&&D>=r&&(I=O[v-1],F=O[v],c=Base_Geometry.rayIntersectsLineBidir(r,o,0,1,k,I,D,F),1/0!==c&&(f=c)),k=D;null!==f&&(Base_Helpers.sign(f)!==Base_Helpers.sign(d)&&(M.fillColor||M.fillGradient)&&h>=0&&(h=0,l={x0:0,y0:0,x1:1,y1:1,seriesIndex:C,isMarker:!1}),d=f)
}return[l,Math.max(h,0)]},t.prototype.computeLineSegments=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x;for(o=this.centers.length,h=this.prevyL,l=this.prevyR,h.length<o&&(h.length=o,l.length=o),s=c=0;o>c;s=c+=1)h[s]=e,l[s]=e;for(a=h,m=this.series,x=[],s=p=0,f=m.length;f>p;s=++p){if(u=m[s],n=this.seriesData[s],n.segments.length=0,n.markerY.length<o&&(n.markerY.length=o),u.style.steps)g=this.buildStepSegments(this.centers,t,e,h,l,a,i[s],u.data.noDataPolicy),n.segments=g[0],n.markerY=g[1];else if(y=this.buildLineSegments(this.centers,e,h,l,a,i[s],u.data.noDataPolicy),n.segments=y[0],n.markerY=y[1],u.style.smoothing)for(r=d=0,v=n.segments.length;v>d;r=d+=2)_=this.smoothLine(n.segments[r],n.segments[r+1],u.style.smoothing),n.segments[r]=_[0],n.segments[r+1]=_[1];x.push(a=n.markerY)}return x},t.prototype.buildLineSegments=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I;if(p=[],x=[],b=[],"zero"===o){for(l=M=0,L=t.length;L>M;l=M+=1)v=t[l],w=r[l],m=i[l],g=n[l],null!==w?(p.push(s[l]-w),x.push(v),b.push(m-w),m!==g&&(x.push(v),b.push(g-w)),i[l]-=w,n[l]-=w):(p.push(s[l]),m!==g?(b.push(m),b.push(g),x.push(v),x.push(v)):(b.push(m),x.push(v)));return[[x,b],p]}if("join"===o){for(c=null,l=T=0,B=t.length;B>T;l=T+=1)if(v=t[l],w=r[l],m=i[l],g=n[l],null!==w){if(null===c)p.push(s[l]-w),x.push(v),b.push(g-w),n[l]-=w;else{if(l-1>c)for(C=r[c],_=t[c],a=(w-C)/(v-_),u=k=A=c+1;l>k;u=k+=1)S=t[u],P=C+a*(S-_),p.push(s[u]-P),d=i[u],f=n[u],x.push(S),b.push(d-P),d!==f&&(x.push(S),b.push(f-P)),i[u]-=P,n[u]-=P;p.push(s[l]-w),x.push(v),b.push(m-w),m!==g&&(x.push(v),b.push(g-w)),i[l]-=w,n[l]-=w}c=l}else null===c&&p.push(s[l]);return x.length>2&&x[x.length-1]===x[x.length-2]&&(x.pop(),b.pop()),[[x,b],p]}for(h=!1,y=[],l=D=0,I=t.length;I>D;l=D+=1)v=t[l],w=r[l],m=i[l],g=n[l],null!==w?(p.push(s[l]-w),h?(x.length>1&&i[l-1]!==n[l-1]&&(x.push(t[l-1]),b.push(n[l-1])),x.push(v),b.push(m-w),i[l]-=w,n[l]-=w):(x.push(v),b.push(g-w),n[l]-=w),h=!0):(p.push(s[l]),h&&(x.length>0&&(1===x.length&&(x.push(x[0]),b.push(b[0])),y.push(x,b),x=[],b=[]),n[l-1]+=r[l-1]),h=!1);return x.length>0&&(1===x.length&&(x.push(x[0]),b.push(b[0])),y.push(x,b)),[y,p]},t.prototype.buildStepSegments=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y,v,_;for(c=[],l=[],f=[],y=[],g=null,d=0,h=v=0,_=t.length;_>v;h=v+=1)p=t[h]-e[h],m=o[h],null!==m?(null!==g&&(f.push(p),y.push(g)),u=r[h]-m,f.push(p),y.push(u),g=u,d=p+2*e[h],l.push(u),n[h]=s[h]=u):"zero"===a?(u=r[h],l.push(u),s[h]=n[h]=u,null!==g&&(f.push(d),y.push(g)),f.push(p),y.push(u),g=u,d=p+2*e[h]):"join"===a?(u=null!==g?g:r[h],l.push(u),s[h]=n[h]=u):(u=r[h],l.push(u),s[h]=n[h]=u,f.length>0&&(null!==g&&(f.push(d),y.push(g)),g=null,c.push(f,y),f=[],y=[]));return f.length>0&&(null!==g&&(f.push(d),y.push(g)),c.push(f,y)),[c,l]},t.prototype.smoothLine=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g;if(p=t[0],d=t[t.length-1],c=(d-p)/t.length,2>c)return[t,e];for(l=[],u=[],l.push(p),u.push(e[0]),r=0;r+1<t.length;){if(o=r+1,t[r]!==t[o])for(;o+1<t.length&&t[o]!==t[o+1];)o+=1;if(o-r===1)l.push(t[o]),u.push(e[o]);else{for(i=new Base_MonotoneCurve(t,e,r,o+1),d=t[r],s=m=g=r+1;o>=m;s=m+=1){for(p=d,d=t[s],f=e[s],c=d-p,a=Math.ceil(Math.min(50,Math.max(2,c/3))),n=c/a,h=l.length;(p+=n)<d;)l.push(p);i.interpolateArray(s-1,l,h,l.length,u),l.push(d),u.push(f)}i.clear()}r=o}return t.length=0,e.length=0,[l,u]},t.prototype.paintLine=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d;if(e.fillColor||e.currentFillGradient){for(e.shadowColor&&Base_Graphics.applyShadow(t,e),t.fillStyle=e.currentFillGradient?e.currentFillGradient:e.fillColor,t.beginPath(),s=h=0,c=n.length-1;c>=h;s=h+=2)this.paintArea(t,n[s],n[s+1],i);t.fill(),e.shadowColor&&Base_Graphics.clearShadow(t)}if(e.lineColor){for(!e.fillColor&&e.shadowColor&&Base_Graphics.applyShadow(t,e),r=Base_Graphics.beginStroke(t,e),s=l=0,p=n.length-1;p>=l;s=l+=2)for(o=n[s],a=n[s+1],r.moveTo(o[0],a[0]),s=u=1,d=o.length;d>u;s=u+=1)r.lineTo(o[s],a[s]);if(Base_Graphics.endStroke(t,r,e),!e.fillColor&&e.shadowColor)return Base_Graphics.clearShadow(t)}},t.prototype.paintArea=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;for(t.moveTo(e[0],i[0]),o=_=1,b=e.length-1;b>=_;o=_+=1)t.lineTo(e[o],i[o]);for(d=e[0],f=e[e.length-1],v=this.zeroY,p=f,a=x=w=n.length-2;x>=0;a=x+=-2)if(m=n[a],y=n[a+1],!(m.length<2||m[0]>p||m[m.length-1]<d)){for(h=m.length-1,u=m[h],p>u&&(t.lineTo(p,v),t.lineTo(u,v),p=u),o=S=h;S>=0;o=S+=-1){if(r=m[o],p===u?(t.lineTo(u,y[o+1]),p=r):u>p&&p>r&&(s=y[o],l=y[o+1],c=(p-r)/(u-r),g=s+c*(l-s),t.lineTo(p,g),p=r),d>=p){p=d,s=y[o],l=y[o+1],c=(p-r)/(u-r),g=s+c*(l-s),t.lineTo(p,g);break}u=r}-1===o&&p===r&&t.lineTo(p,y[0])}return p!==d&&(t.lineTo(p,v),t.lineTo(d,v)),t.closePath()},t}();var Base_Helpers,lastTime,requestAnimationFrame,__hasProp={}.hasOwnProperty;"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),window.requestAnimationFrame||(requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,requestAnimationFrame||(lastTime=0,requestAnimationFrame=function(t){var e,i,n;return e=(new Date).getTime(),n=Math.max(0,16-(e-lastTime)),i=window.setTimeout(function(){return t(e+n)},n),lastTime=e+n,i}),window.requestAnimationFrame=requestAnimationFrame),Base_Helpers=function(){"use strict";function t(){}var e;return t.extend=function(t,e){var i,n;if(null==t)return{};for(i in e)__hasProp.call(e,i)&&(n=e[i],t[i]=n);return t},t.extendDataItem=function(e,i){var n,s;for(n in i)__hasProp.call(i,n)&&(s=i[n],"style"===n&&e.style?t.extendDeep(e.style,s):e[n]=s);return e},t.extendDeep=function(e,i){var n,s,r;if(null==e)return i;for(n in i)__hasProp.call(i,n)&&(s=i[n],r=e[n],t.isObject(r)&&t.isObject(s)?this.extendDeep(r,s):e[n]=s);return e},t.extendCopy=function(t,e){var i,n,s;if(null==e)return t;for(i in e)__hasProp.call(e,i)&&(n=e[i],s=t[i],this.isObject(s)&&this.isObject(n)?this.extendCopy(s,n):t[i]=this.isObject(n)&&!this.isArray(n)?this.extendCopy({},n):n);return t},t.configure=function(t,e){var i;for(i in e)"undefined"==typeof t[i]&&e[i]&&(t[i]=e[i]);return t},t.clone=function(t){var e,i,n;i={};for(e in t)__hasProp.call(t,e)&&(n=t[e],i[e]=n);return i},t.isArray=function(t){return t instanceof Array},t.isObject=function(t){return null!==t&&"object"==typeof t},t.isFunction=function(t){return"function"==typeof t},t.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},t.hasProperties=function(t){var e,i;if(!t)return!1;for(e in t)if(__hasProp.call(t,e))return i=t[e],!0;return!1},t.removeProperty=function(t){var e,i;for(e in t)if(__hasProp.call(t,e))return i=t[e],delete t[e],e;return null},t.removePropertyValue=function(t){var e,i;for(e in t)if(__hasProp.call(t,e))return i=t[e],delete t[e],[e,i];return null},t.countProperties=function(t){var e,i,n;e=0;for(i in t)__hasProp.call(t,i)&&(n=t[i],e+=1);return e},t.realClone=function(t){var e,i,n,s,r,o,a;if(s=this.isObject(t),e=this.isArray(t))for(i=[],n=o=0,a=t.length;a>o;n=++o)r=t[n],i[n]="function"!=typeof r?this.realClone(r):r;else if(s){i={};for(n in t)r=t[n],i[n]="function"!=typeof r?this.realClone(r):r}else i=t;return i},t.arrayContains=function(t,e){var i,n,s;for(n=0,s=t.length;s>n;n++)if(i=t[n],i===e)return!0;return!1},t.indexOf=function(t,e){var i,n,s,r;for(i=s=0,r=t.length;r>s;i=++s)if(n=t[i],n===e)return i;return-1},t.removeFromArray=function(t,e){var i,n,s;n=!1;for(i in t)s=t[i],s===e&&(t.splice(i,1),n=!0);return n},t.arraysEqual=function(t,e){var i,n,s;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(i=n=0,s=t.length-1;s>=n;i=n+=1)if(t[i]!==e[i])return!1;return!0},t.arrayToMap=function(t,e){var i,n,s,r,o;for(n={},s=r=0,o=t.length;o>r;s=++r)i=t[s],i.index=s,n[i[e]]=i;return n},t.log=function(t,e){return"undefined"!=typeof console&&null!==console?null!=e?console.info(t,e):console.info(t):void 0},t.error=function(t,e){return"undefined"!=typeof console&&null!==console?null!=e?console.error(t,e):console.error(t):void 0},t.getExtension=function(t){var e;return e=/(?:\.([^.]+))?$/,e.exec(t)[1]},t.createDom=function(t,e,i,n){var s;return s=document.createElement(t),null!=e&&(s.className=e),null!=i&&(s.innerHTML=i),null!=n&&n.appendChild(s),s},t.createStyledDom=function(t,e,i,n){var s,r,o;if(s=document.createElement(t),null!=e)for(r in e)__hasProp.call(e,r)&&(o=e[r],s.style[r]=o);return null!=i&&(s.innerHTML=i),null!=n&&n.appendChild(s),s},t.hasClass=function(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},t.addClass=function(e,i){return t.hasClass(e,i)?void 0:e.className=0===e.className.length?i:e.className+" "+i},t.toggleClass=function(e,i,n){var s;return s=t.hasClass(e,i),!n&&s?t.removeClass(e,i):n&&!s?t.addClass(e,i):void 0},t.removeClass=function(t,e){var i;return i=function(t,i){return i===e?"":t},t.className=t.className.replace(/(\S+)\s*/g,i).replace(/(^\s+|\s+$)/,"")},t.setClass=function(t,e){return t.className=e},t.listen=function(t,e,i){return t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,i)},t.unlisten=function(t,e,i){return t.removeEventListener?t.removeEventListener(e,i):t.detachEvent("on"+e,i)},t.stopPropagation=function(t){return t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1},t.createEvent=function(t){var e;return document.createEvent?(e=document.createEvent("Event"),e.initEvent(t,!0,!0)):e=document.createEventObject(),e},t.canvasScaling=function(){var t;return t=1,window.devicePixelRatio?t=window.devicePixelRatio:window.screen.systemXDPI&&(t=window.screen.systemXDPI/window.screen.logicalXDPI),[t,t]},t.elementPos=function(t){var e,i,n;return e=t.getBoundingClientRect(),n=e.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),i=e.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),[i,n]},t.isParentOf=function(t,e){for(;null!=e;){if(e===t)return!0;e=e.parentElement}return!1},t.fadeIn=function(t){return t.style.display="block"},t.fadeOut=function(t){return t.style.display="none"},t.hide=function(t){return t.style.display="none"},t.show=function(t){return t.style.display="block"},t.getProp=function(t,e){var i,n,s,r;for(r=e.split("."),n=0,s=r.length;s>n;n++){if(i=r[n],!t.hasOwnProperty(i))return void 0;t=t[i]}return t},t.wrapValue=function(t,e){var i,n,s,r,o,a;for(n=t,a=e.split(".").reverse(),r=0,o=a.length;o>r;r++)i=a[r],s={},s[i]=n,n=s;return n},t.hasProp=function(t,e){var i,n,s,r;for(r=e.split("."),n=0,s=r.length;s>n;n++){if(i=r[n],!t.hasOwnProperty(i))return!1;t=t[i]}return void 0!==t},t.getScroll=function(){var t,e,i,n;return e=document.documentElement,t=document.body,i=e&&e.scrollLeft||t&&t.scrollLeft||0,n=e&&e.scrollTop||t&&t.scrollTop||0,[i,n]},t.sign=function(t){return t?0>t?-1:1:0},t.detectBrowser=function(){var t,e,i,n;return e=navigator.appName,n=navigator.userAgent,t=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),t&&null!==(i=n.match(/version\/([\.\d]+)/i))&&(t[2]=i[1]),t=t?[t[1],t[2]]:[e,navigator.appVersion,"-?"],t[0].toLowerCase()},t.nextIdentifier=0,t.getIdentifier=function(){return t.nextIdentifier++},t.doRequest=function(t,e,i,n){var s,r,o,a,h;for(s=[],a=0,h=e.length;h>a;a++)r=e[a],s.push(""+encodeURIComponent(r[0])+"="+encodeURIComponent(r[1]));return s=s.join("&"),t+=-1!==t.indexOf("?")?"&"+s:"?"+s,window.XMLHttpRequest?o=new XMLHttpRequest:window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLHTTP")),o?(o.onreadystatechange=function(){return function(){return 4===o.readyState?200===o.status?i(o.responseText):n():void 0}}(this),o.open("GET",t,!0),o.send("")):void 0},t.openUrl=function(e){return t.isString(e)?window.open(e):window.open(e.url,e.name,e.specs,e.replace)},t.parseData=function(t,e,i){var n,s;if(n=null,e=e.toLowerCase(),"json"===e||"geojson"===e)if("string"==typeof t||t instanceof String)try{n=JSON.parse(t)}catch(r){s=r,i.error("Error: failed to parse JSON response: "+s+": "+t),n={error:"Error: failed to parse JSON response"}}else n=t;else i.error("Unsupported data format: "+e);return n},t.numberFormat=function(t,e,i,n){var s,r,o;return null==e&&(e=2),null==i&&(i="."),null==n&&(n="&nbsp;"),t=parseFloat(t),o=0>t?"-":"",s=parseInt(t=Math.abs(+t||0).toFixed(e))+"",r=(r=s.length)>3?r%3:0,o+(r?s.substr(0,r)+n:"")+s.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?i+Math.abs(t-s).toFixed(e).slice(2):"")},t.buildImage=function(t,e,i){var n;return n=new Image,n.onload=function(){return e(n)},n.onerror=function(){return i(n)},n.src=t,n.complete&&e(n),n},t.sort=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C;for(e||(e=function(t,e){return t-e}),i=t,l=0|i.length,s=g=0,x=l-2;x>=g;s=g+=2)f=i[s],m=i[s+1],e(f,m)>0&&(i[s]=m,i[s+1]=f);for(n=i.slice(0),p=2;l>p;){for(d=p<<1,u=y=0,S=l-1;d>0?S>=y:y>=S;u=y+=d)if(r=u,o=u+p,o>=l)for(s=v=r,b=l-1;b>=v;s=v+=1)n[s]=i[s];else for(a=o,h=Math.min(o+p,l),c=u,f=i[r],m=i[o];;)if(e(f,m)<=0){if(n[c]=f,c=c+1|0,r=r+1|0,r===a){for(n[c]=m,c=c+1|0,o=o+1|0;h>o;)n[c]=i[o],c=c+1|0,o=o+1|0;break}f=i[r]}else{if(n[c]=m,c=c+1|0,o=o+1|0,o===h){for(n[c]=f,c=c+1|0,r=r+1|0;a>r;)n[c]=i[r],c=c+1|0,r=r+1|0;break}m=i[o]}p=d,w=[i,n],n=w[0],i=w[1]}if(t!==i){for(s=_=0,C=l-1;C>=_;s=_+=1)t[s]=i[s];i.length=0}else n.length=0;return t},t.binSearch=function(t,e){var i,n,s;for(i=0,n=t.length-1;n>i;)if(s=(n+i)/2|0,t[s]<e)i=s+1;else{if(!(t[s]>e)){for(;s>0&&t[s-1]===e;)s-=1;return s}n=s}return i<t.length&&t[i]<e?i+1:i},t.listenResize=function(e,i){var n;return"undefined"!=typeof getComputedStyle&&null!==getComputedStyle&&(n=function(){return i(),t.updateResize(this)},"static"===getComputedStyle(e).position&&(e.style.position="relative"),(e.__resizeTriggers__=document.createElement("div")).className="DVSL-resize-triggers",e.__resizeTriggers__.innerHTML='<div class="DVSL-expand-trigger"><div></div></div><div class="DVSL-contract-trigger"></div>',e.insertBefore(e.__resizeTriggers__,e.firstChild),t.updateResize(e),e.__resizeListener__=n,e.addEventListener("scroll",n,!0)),e.onresize=i},t.updateResize=function(t){var e,i,n,s;return(s=t.__resizeTriggers__)?(i=s.firstElementChild,e=s.lastElementChild,n=i.firstElementChild,e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight,n.style.width=i.offsetWidth+1+"px",n.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight):void 0},t.unlistenResize=function(t){return t.removeEventListener("scroll",t.__resizeListener__),t.__resizeListener__=void 0,t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__),t.onresize=void 0},e=null,t.decodeEntities=function(t){return-1===t.indexOf("&")?t:(e||(e=document.createElement("textarea")),e.innerHTML=t,e.value)},t}();var Timechart_Data;Timechart_Data=function(){function t(t,i){this.chart=t,this.settings=i,this.scene=this.chart.scene,this.cache={},this.requests={},this.updataDataLimit(null,null,this.settings.limitStart,this.settings.limitEnd,new Base_TimeStep("ms",1)),null!=this.settings.preloaded&&this.addData(new e(this.settings.preloaded.unit,null,null,null,0),this.settings.preloaded)}var e,i;return t.settings={id:"default",units:["s","m","h","d","M","y"],urlByUnit:{},limitStart:null,limitEnd:null,requestMaxUnits:1e4,prefetchRatio:1,minimizeRequests:!1,cacheSize:1e6,timestampInSeconds:!1},i=function(){function t(t,e,i,n){this.unit=t,this.from=e,this.to=i,this.values=n,this.updateLastTimestamp()}return t.prototype.unit="m",t.prototype.from=0,t.prototype.to=1e3,t.prototype.lastTimestamp=0,t.prototype.values=null,t.prototype.updateLastTimestamp=function(){return this.lastTimestamp=this.values.length>0?this.values[this.values.length-1][0]:this.from},t.prototype.merge=function(t,e,i,n){var s,r,o,a,h;if(!n&&(this.from>t.to||this.to<t.from))return this.values=t.values,this.from=t.from,void(this.to=t.to);for(t.values.length>0&&t.from>t.values[0][0]&&i.error("Data merge - oldest data before from"),t.values.length>0&&t.to<t.values[t.values.length-1][0]&&i.error("Data merge - newest data after to"),r=0;r<this.values.length&&this.values[r][0]<t.from;)r+=1;for(s=this.values.length;s>0&&this.values[s-1][0]>=t.to;)s-=1;return h=t.values,this.from=Math.min(this.from,t.from),this.to=Math.max(this.to,t.to),r>0&&(o=Math.max(0,h.length+r-e),h=this.values.slice(o,+(r-1)+1||9e9).concat(h),o>0&&(this.from=this.values[o-1][0]+1)),s<this.values.length&&(a=this.values.length-s,a=Math.min(a,e-h.length),h=h.concat(this.values.slice(s,+(s+a)+1||9e9)),a<this.values.length-s&&(this.to=this.values[s+a][0])),this.values=h,this.updateLastTimestamp()},t}(),e=function(){function t(t,e,i,n,s){this.unit=t,this.from=e,this.to=i,this.callback=n,this.time=s}return t.prototype.from=null,t.prototype.to=null,t.prototype.time=0,t.prototype.unit="y",t.prototype.callback=null,t}(),t.prototype.chart=null,t.prototype.scene=null,t.prototype.settings=null,t.prototype.noData=!1,t.prototype.dataLimitFrom=null,t.prototype.dataLimitTo=null,t.prototype.dataFrom=null,t.prototype.dataTo=null,t.prototype.dataLimitFromUnit=null,t.prototype.dataLimitToUnit=null,t.prototype.cache=null,t.prototype.requests={},t.prototype.remove=function(){var t,e,i,n;this.scene.setMessage(this,null),i=this.requests,n=[];for(e in i)t=i[e],n.push(t?t.callback=null:void 0);return n},t.prototype.determineDataLimits=function(t,e,i,n){var s,r,o,a,h,l;for(null==t&&(t="y");null!=t&&!Base_Helpers.arrayContains(this.settings.units,t);)t=Base_TimeStep.toSmallerUnit[t];return null==t&&this.chart.error("Cannot load data - no suitable data unit configured"),o=new Base_TimeStep(t,1),s=null,h=null,a=o.approxTime(),null!=this.dataLimitFromUnit&&this.dataLimitFromUnit.approxTime()<=a&&(s=this.dataLimitFrom),null!=this.dataLimitToUnit&&this.dataLimitToUnit.approxTime()<=a&&(h=this.dataLimitTo),e&&null==s||i&&null==h?(this.scene.setMessage(this,"Determining data bounds",999),l=function(t){return function(e,n,s,o,a){if(!a)return void t.scene.setMessage(t,null);if(null==t.dataLimitTo&&i){if(n!==o)return void t.scheduleDataLoading(a,o,null,!1,function(t,i,n){return l(e,o,t,i,n)});t.dataLimitTo=o}return r(e+1,e,o,a)}}(this),r=function(t){return function(i,s,o,a){if(!a)return void t.scene.setMessage(t,null);if(null==t.dataLimitFrom&&e){if(i!==s)return void t.scheduleDataLoading(a,null,s,!1,function(t,e,i){return r(s,t,e,i)});t.dataLimitFrom=s}return t.scene.setMessage(t,null),n(t.dataLimitFrom,t.dataLimitTo,a)}}(this),this.scheduleDataLoading(t,null,null,!1,function(){return function(t,e,i){return l(t,e-1,t,e,i)}}(this))):void n(this.dataLimitFrom,this.dataLimitTo,t)},t.prototype.getDataForRange=function(e,i,n,s){var r,o,a,h,l,u,c,p,d,f,m,g,y;for(m=n.unit,d=null,f=null;m;){if(this.cache.hasOwnProperty(m)&&(r=this.cache[m],null!==r&&r.from<i&&r.to>e)){d=r.from,f=r.to,r=r.values,c=d>e||i>f;break}m=Base_TimeStep.toSmallerUnit[m]}if(null===m&&(c=!0),p=!1,c&&(c&=null!=this.settings.dataFunction||null!=this.settings.url||null!=this.settings.urlByUnit,h=e,l=i,null!=this.dataLimitFrom&&(h=Math.max(this.dataLimitFrom,h)),null!=this.dataLimitTo&&(l=Math.min(this.dataLimitTo,l)),a=!1,h>=d&&(a=!0,h=Math.max(h,f)),f>=l&&(l=Math.min(l,d)),c&=l>h,c&&(!this.settings.minimizeRequests||!this.chart.scrolling.isActive())))for(u=n.unit;null!=u;){if(Base_Helpers.arrayContains(this.settings.units,u)&&null!==this.cache[u]){p=this.scheduleDataLoading(u,h,l,a,s);break}u=Base_TimeStep.toSmallerUnit[u]}return m?(y=t.findSubrange(r,e,i),g=y[0],o=y[1],{unit:n.unit,count:n.count,from:d,to:f,values:r,startIndex:g,endIndex:o,loading:p}):p?{unit:n.unit,count:n.count,from:d,to:f,values:[],startIndex:0,endIndex:0,loading:!0}:{unit:null,count:null,from:null,to:null,values:[],startIndex:0,endIndex:0,loading:!1}},t.prototype.updateData=function(t,e,i){for(var n,s,r;null!=t&&!Base_Helpers.arrayContains(this.settings.units,t);)t=Base_TimeStep.toSmallerUnit[t];return this.cache.hasOwnProperty(t)&&!this.requests[t]?(r=new Base_TimeStep(t,1),s=r.roundTimeUp(e),n=r.roundTimeDown(this.cache[t].lastTimestamp),s>=n?this.scheduleDataLoading(t,n,s,!0,i):void 0):void 0},t.prototype.scheduleDataLoading=function(t,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g,y,v;if(!t)throw"No unit";if(this.chart.log("Scheduling data loading"+t+","+i+","+n),m=(new Date).getTime(),this.requests.hasOwnProperty(t)&&null!=this.requests[t]){if(p=this.requests[t],!(p.time+this.settings.requestTimeout<m))return this.chart.log("Already loading for selected period"),!0;p.callback=null,this.requests[t]=null}return c=i,y=n,v=new Base_TimeStep(t,1),null!=c&&(c=v.roundTimeDown(c)),null!=y&&(y=v.roundTimeUp(y)),null!=c&&null!=y&&(g=(y-c)/v.approxTime(),g>this.settings.requestMaxUnits&&(s?y=v.add(c,this.settings.requestMaxUnits):c=v.sub(y,this.settings.requestMaxUnits))),h=this.getBiggerDataUnit(t),null!=h&&(v=new Base_TimeStep(h,1),null!=c&&(o=v.roundTimeDown(c),null!=this.dataLimitFrom&&o<=this.dataLimitFrom&&(c=this.dataLimitFrom)),null!=y&&(a=v.roundTimeUp(y),null!=this.dataLimitTo&&a>=this.dataLimitTo&&(y=this.dataLimitTo))),p=new e(t,c,y,r,m),(l=this.getDataFunction())?(f=function(t){return function(e){return t.dataRecievedRaw(p,e)}}(this),u=function(t){return function(){return t.dataFailed(p)}}(this),this.requests[t]=p,this.settings.timestampInSeconds&&(null!=c&&(c/=1e3),null!=y&&(y/=1e3)),d=l(c,y,t,f,u),this.chart.log("Data requested "+t+", "+c+", "+y),null!=d&&(Base_Helpers.isObject(d)||Base_Helpers.isString(d))&&this.dataRecievedRaw(p,d),!0):(this.chart.log("No data function. Cannot load data?"),!1)},t.prototype.dataRecievedRaw=function(t,e){return this.scene.setMessage("data",null),this.requests[t.unit]=null,this.dataArrived(t,e)},t.prototype.dataArrived=function(t,e){var i;return this.chart.log("Data arrived"),i=Base_Helpers.parseData(e,this.settings.format,this.chart),this.addData(t,i)},t.prototype.addData=function(t,e,i){var n,s;if(null==i&&(i=!1),null!==e){if(this.cleanupData(e),e.error)return"no-unit"===e.error&&t&&(this.cache[t.unit]=null),void this.chart.error(e.errormessage?e.errormessage:e.error);if(s=t?this.analyzeData(e,t):this.analyzeDataNoRequest(e),t&&Base_TimeStep.timeUnitDiffs[s.unit]>Base_TimeStep.timeUnitDiffs[t.unit]){if(this.chart.error("Incorrect data - requested unit "+t.unit+", got bigger unit - "+s.unit),this.cache[t.unit]=null,null!=t.callback)return t.callback(null,null,null)}else if(t&&s.unit!==t.unit&&(this.cache[t.unit]=null),s.unit&&null!=s.from&&null!=s.to&&(n=this.cache[s.unit],null!=n?this.cache[s.unit].merge(s,this.settings.cacheSize,this.chart,i):this.cache[s.unit]=s),t&&null!=t.callback)return t.callback(s.from,s.to,s.unit)}},t.prototype.dataFailed=function(t){return null==this.cache[t.unit]&&(this.cache[t.unit]=null),this.scene.setMessage("data","Data request failed",1e3),this.chart.error("Failed data loading request"),null!=t.callback?t.callback(null,null,null):void 0},t.prototype.updataDataLimit=function(t,e,i,n,s){return null!=t&&(null===this.dataFrom||this.dataFrom>t)&&(this.dataFrom=t),null!=e&&(null===this.dataTo||this.dataTo<e)&&(this.dataTo=e),null!=i&&(this.dataLimitFrom=i,this.dataLimitFromUnit=s,this.dataFrom=Math.max(this.dataFrom,i)),null!=n?(this.dataLimitTo=n,this.dataLimitToUnit=s,this.dataTo=Math.min(this.dataTo,n)):void 0},t.prototype.cleanupData=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P;if(!t.error){for(t.error="bad-response",null!=t.data&&null==t.values&&(t.values=t.data),b=["unit","values"],f=0,v=b.length;v>f;f++)if(l=b[f],!t.hasOwnProperty(l))return void(t.errormessage="Required field '"+l+"' not set in data");if(u=Base_TimeStep.parse(t.unit),null===u)return void(t.errormessage="Data error: unrecognized data unit: "+t.unit);for(w=["form","to","dataLimitForm","dataLimitTo"],m=0,_=w.length;_>m;m++)if(h=w[m],t.hasOwnProperty(h))if(p=t[h],null===p)delete t[h];else if(d=t[h]=parseInt(p),!Base_Helpers.isNumber(d))return void(t.errormessage="Field "+h+" needs to be an integer");if(t.error=null,null!=t.from&&null!=t.to&&t.from>=t.to&&(this.chart.error("Data logic error. from >= to: "+t.from+", "+t.to),delete t.from,delete t.to),null!=t.dataLimitFrom&&null!=t.dataLimitTo&&t.dataLimitFrom>=t.dataLimitTo&&(this.chart.error("Data logic error. dataLimitFrom >= dataLimitTo: "+t.dataLimitFrom+", "+t.dataLimitTo),delete t.dataLimitFrom,delete t.dataLimitTo),n=t.dataLimitFrom,s=t.dataLimitTo,t.values.length>0){for(o=[],C=t.values,g=0,x=C.length;x>g;g++)if(p=C[g],c=p[0]=parseFloat(p[0]),Base_Helpers.isNumber(p[0])){(n>c||c>s)&&this.chart.error("Data error: value timestamp outside data limits. Limits: "+n+"..."+s+", timestamp: "+c);for(a in p)e=p[a],null!==e&&(p[a]=parseFloat(e),Base_Helpers.isNumber(p[a])||(this.chart.error("Data error: series value not a number or null: "+p[a]),p[a]=null));o.push(p)}else this.chart.error("Data error: time value not a number: "+p[0]);if(t.values=o,this.settings.timestampInSeconds)for(P=t.values,y=0,S=P.length;S>y;y++)p=P[y],p[0]*=1e3;t.values.sort(function(t,e){return t[0]-e[0]}),i=t.values[0][0],r=t.values[t.values.length-1][0]}this.settings.timestampInSeconds&&(t.from&&(t.from*=1e3),t.to&&(t.to*=1e3),t.dataLimitFrom&&(t.dataLimitFrom*=1e3),t.dataLimitTo&&(t.dataLimitTo*=1e3)),null!=t.from&&i<t.from&&(this.chart.error("Data logic error. Data time "+i+" outside [from, to) range: "+t.from+", "+t.to),t.from=i),null!=t.to&&r>=t.to&&(this.chart.error("Data logic error. Data time "+r+" outside [from, to) range: "+t.from+", "+t.to),t.to=r+1)}},t.prototype.analyzeDataNoRequest=function(t){var e,n,s,r,o,a;return null==t.from&&null!=t.dataLimitFrom&&(t.from=t.dataLimitFrom),null==t.to&&null!=t.dataLimitTo&&(t.to=t.dataLimitTo),s=t.from,a=t.to,o=Base_TimeStep.parse(t.unit),t.values.length>0&&(e=t.values[0][0],n=t.values[t.values.length-1][0],e=o.roundTimeDown(e),n=o.roundTimeUp(n+1),null==s&&(s=e),null==a&&(a=n)),this.updataDataLimit(e,n,t.dataLimitFrom,t.dataLimitTo,o),r=new i(t.unit,s,a,t.values),null!=t.error&&(r.error=t.error),r},t.prototype.analyzeData=function(t,e){var n,s,r,o,a,h,l,u;return null==e.from&&null==t.from&&null!=t.dataLimitFrom&&(t.from=t.dataLimitFrom),null==e.to&&null==t.to&&null!=t.dataLimitTo&&(t.to=t.dataLimitTo),r=t.from,u=t.to,n=null,s=null,null!=r&&null!=u&&r>=u&&this.chart.error("Data logic error. from >= to: "+r+", "+u),l=Base_TimeStep.parse(t.unit),t.values.length>0?(n=t.values[0][0],s=t.values[t.values.length-1][0],n=l.roundTimeDown(n),s=l.roundTimeUp(s+1),null==r&&(r=null!=e.from?Math.min(e.from,n):n),null==u&&(u=null!=e.to?Math.max(e.to,s):s)):(null==r&&(r=e.from),null==u&&(u=e.to),null!=t.from&&null!=t.to?(n=t.from,s=t.to):(n=e.from,s=e.to,null===e.from&&null===e.to&&null==r&&null==u&&null==t.dataLimitFrom&&null==t.dataLimitTo&&(this.noData=!0,t.dataLimitFrom=0,t.dataLimitTo=0,t.from=0,t.to=0))),this.updataDataLimit(n,s,t.dataLimitFrom,t.dataLimitTo,l),null!=e.from&&null!=t.to&&(h=l.roundTimeDown(t.to),h<=e.from&&this.updataDataLimit(null,null,null,t.to,l)),null!=e.to&&null!=t.from&&(a=l.roundTimeUp(t.from),a>=e.to&&this.updataDataLimit(null,null,t.from,null,l)),null==t.from&&null==t.dataLimitFrom&&(null!=this.dataLimitFrom&&(null===e.from||e.from<=this.dataLimitFrom&&n>this.dataLimitFrom)||null==this.dataLimitFrom&&null==e.from)&&(this.updataDataLimit(null,null,n,null,l),r=n),null==t.to&&null==t.dataLimitTo&&(null!=this.dataLimitTo&&(null===e.to||e.to>=this.dataLimitTo&&s<this.dataLimitTo)||null==this.dataLimitTo&&null==e.to)&&(this.updataDataLimit(null,null,null,s,l),u=s),o=new i(t.unit,r,u,t.values),null!=t.error&&(o.error=t.error),o},t.prototype.getBiggerDataUnit=function(t){for(var e;null!=t;)if(t=Base_TimeStep.toBiggerUnit[t],e=this.settings.units,Base_Helpers.arrayContains(e,t))return t;return null},t.binSearch=function(t,e){var i,n,s;if(i=0,!t)throw"no data";for(n=t.length-1;n>i;)if(s=(n+i)/2|0,t[s][0]<e)i=s+1;else{if(!(t[s][0]>e)){for(;s>0&&t[s-1][0]===e;)s-=1;return s}n=s}return i<t.length&&t[i][0]<e?i+1:i},t.linSearchUp=function(t,e,i,n){var s,r,o,a,h,l,u;if(n){for(s=r=a=e+1,h=t.length-1;h>=r;s=r+=1)if(null!==n(t[s]))return s}else for(s=o=l=e+1,u=t.length-1;u>=o;s=o+=1)if(null!==t[s][i])return s;return-1},t.linSearchDown=function(t,e,i,n){var s,r,o,a,h;if(n){for(s=r=a=e-1;r>=0;s=r+=-1)if(null!==n(t[s]))return s}else for(s=o=h=e-1;o>=0;s=o+=-1)if(null!==t[s][i])return s;return-1},t.findSubrange=function(e,i,n){var s,r;return s=t.binSearch(e,i),r=t.binSearch(e,n),[s,r]},t.prototype.getDataFunction=function(){var e;return e=this.settings,e.dataFunction?e.dataFunction:e.url||Base_Helpers.hasProperties(e.urlByUnit)?function(i,n,s,r,o){var a;if(Base_Helpers.hasProperties(e.urlByUnit)){if(a=e.urlByUnit[s],!a)return'{"error":"no-unit", "errormessage":"no data url for this time unit: '+s+'"}'}else a=e.url;return t.defaultDataFunction(i,n,s,r,o,a)}:null},t.defaultDataFunction=function(t,e,i,n,s,r){var o;if(!r)throw"No data URL";if(!i)throw"No step";return o=[],null!=t&&o.push(["from",t]),null!=e&&o.push(["to",e]),o.push(["unit",i]),Base_Helpers.doRequest(r,o,n,s)},t}();var Base_Scene;Base_Scene=function(){"use strict";function t(){this.settings=null,this.chartWidth=1,this.chartHeight=1,this.x0=0,this.y0=0,this.height=0,this.width=0,this.leftMargin=0,this.rightMargin=0,this.topMargin=0,this.bottomMargin=0,this.canvasScaleX=1,this.canvasScaleY=1,this.loading=!0,this.messages={},this.backStack=[]}return t.prototype.setMessage=function(t,e,i){var n;return null!=e?(n=null==this.messages[t]||this.messages[t].msg!==e||this.messages[t].pri!==i,this.messages[t]={msg:e,pri:i}):(n=null!=this.messages[t],delete this.messages[t]),n},t.prototype.getMessage=function(){var t,e,i,n,s;e=null,n=0,s=this.messages;for(t in s)i=s[t],i.pri>n&&(e=i.msg,n=i.pri);return e},t.prototype.pushBack=function(t){return this.backStack.push(t),this.backStack.length>1e3?this.backStack=this.backStack.slice(200):void 0},t}();var Base_MouseEvent,Base_MouseEvents,Base_MousePointer,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty;Base_MouseEvent=function(){function t(t,e,i,n){this.x=t,this.y=e,this.time=i,this.identifier=n}return t.prototype.time=0,t.prototype.changes={},t.prototype.consumed=!1,t.prototype.defaultPrevented=!1,t.prototype.preventDefault=function(){return this.defaultPrevented=!0},t.prototype.x=0,t.prototype.y=0,t.prototype.dx=0,t.prototype.dy=0,t.prototype.vx=0,t.prototype.vy=0,t.prototype.wheely=0,t.prototype.wheelx=0,t.prototype.identifier=0,t.prototype.pressed=!1,t.prototype.consumed=!1,t.prototype.touch=!1,t.prototype._leaving=!1,t.prototype.swipeUp=!1,t.prototype.swipeDown=!1,t.prototype.swipeLeft=!1,t.prototype.swipeRight=!1,t.prototype.distance=function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},t.prototype.isWithinDistance=function(t,e,i){var n,s;return t?(n=this.pageX-t.pageX,s=this.pageY-t.pageY,e*e>n*n+s*s&&t.time+i>this.time):!1},t}(),Base_MousePointer=function(){function t(t,e){this.settings=e,this.identifier=t.identifier,this.x=t.x,this.y=t.y,this.pageX=t.pageX,this.pageY=t.pageY,this.time=t.time,this.pts=[[this.x,this.y,this.time]]}return t.prototype.moveTo=function(t){return t.time===this.time&&this.pts.pop(),this.time=t.time,(t.x||t.y)&&(this.x=t.x,this.y=t.y),this.pts.push([this.x,this.y,this.time]),this.pts.length>6?this.pts.unshift():void 0},t.prototype.getPosAndSpeed=function(t){var e,i,n,s,r,o,a,h,l,u,c;for(t.x=this.x,t.y=this.y,t.touch=this.touch,r=this.pts.length-2,r>=0?(t.dx=this.pts[r+1][0]-this.pts[r][0],t.dy=this.pts[r+1][1]-this.pts[r][1]):(t.dx=0,t.dy=0),o=1/0,s=l=0;r>=l;s=l+=1)e=this.pts[s+1][2]-this.pts[s][2],o=Math.min(o,this.pts[s+1][2]-this.pts[s][2]);for(o=Math.max(o,20),n=-1,s=u=r;u>=0&&(e=this.pts[s+1][2]-this.pts[s][2],!(e>2*o));s=u+=-1)n=s;if(-1===n)return t.vx=0,void(t.vy=0);for(a=0,h=0,i=1,s=c=n;r>=c;s=c+=1)e=this.pts[s+1][2]-this.pts[s][2],a=a*(1-i)+(this.pts[s+1][0]-this.pts[s][0])/e*i,h=a*(1-i)+(this.pts[s+1][1]-this.pts[s][1])/e*i,i=.6;return t.vx=1e3*a,t.vy=1e3*h},t}(),Base_MouseEvents=function(){"use strict";function t(t,e){var i,n,s,r;
this.container=t,this.settings=e,this.fireClick=__bind(this.fireClick,this),this.handleTouchMove=__bind(this.handleTouchMove,this),this.handleTouchCancel=__bind(this.handleTouchCancel,this),this.handleTouchEnd=__bind(this.handleTouchEnd,this),this.handleTouchStart=__bind(this.handleTouchStart,this),this.handleMouseOut=__bind(this.handleMouseOut,this),this.handleMouseMove=__bind(this.handleMouseMove,this),this.handleMouseUp=__bind(this.handleMouseUp,this),this.handleMouseWheel=__bind(this.handleMouseWheel,this),this.handleCMenu=__bind(this.handleCMenu,this),this.handleMouseDown=__bind(this.handleMouseDown,this),this.handlePointerLeave=__bind(this.handlePointerLeave,this),this.handlePointerCancel=__bind(this.handlePointerCancel,this),this.handlePointerUp=__bind(this.handlePointerUp,this),this.handlePointerMove=__bind(this.handlePointerMove,this),this.handlePointerDown=__bind(this.handlePointerDown,this),this.filterEvent=__bind(this.filterEvent,this),this.handleKeyDown=__bind(this.handleKeyDown,this),this.scaleX=1,this.scaleY=1,this.mm=1,this.lastEvent=null,this.lastTouchEvent=null,this.clickEvent=null,this.clickTimeout=null,this.longPressTimeout=null,this.listeners={},this.downPointers={},this.inPointers={},this.containerList=[],window.PointerEvent?(this.container.style["touch-action"]="none",this.containerEvents={keydown:function(t){return function(e){return t.filterEvent(e,t.handleKeyDown)}}(this),pointerdown:function(t){return function(e){return t.filterEvent(e,t.handlePointerDown)}}(this),contextmenu:function(t){return function(e){return t.filterEvent(e,t.handleCMenu)}}(this),mousewheel:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)}}(this)},this.windowEvents={pointermove:function(t){return function(e){return t.filterEvent(e,t.handlePointerMove)}}(this),pointerup:function(t){return function(e){return t.filterEvent(e,t.handlePointerUp)}}(this),pointercancel:function(t){return function(e){return t.filterEvent(e,t.handlePointerCancel)}}(this),pointerleave:function(t){return function(e){return t.filterEvent(e,t.handlePointerLeave)}}(this)}):window.MSPointerEvent?(this.container.style["-ms-touch-action"]="none",this.containerEvents={keydown:function(t){return function(e){return t.filterEvent(e,t.handleKeyDown)}}(this),MSPointerDown:function(t){return function(e){return t.filterEvent(e,t.handlePointerDown)}}(this),contextmenu:function(t){return function(e){return t.filterEvent(e,t.handleCMenu)}}(this),mousewheel:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)}}(this)},this.windowEvents={MSPointerMove:function(t){return function(e){return t.filterEvent(e,t.handlePointerMove)}}(this),MSPointerUp:function(t){return function(e){return t.filterEvent(e,t.handlePointerUp)}}(this),MSPointerCancel:function(t){return function(e){return t.filterEvent(e,t.handlePointerCancel)}}(this),MSPointerLeave:function(t){return function(e){return t.filterEvent(e,t.handlePointerLeave)}}(this)}):(this.containerEvents={keydown:function(t){return function(e){return t.filterEvent(e,t.handleKeyDown)}}(this),mousedown:function(t){return function(e){return t.filterEvent(e,t.handleMouseDown)}}(this),contextmenu:function(t){return function(e){return t.filterEvent(e,t.handleCMenu)}}(this),mousewheel:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)}}(this),DOMMouseScroll:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)}}(this),touchstart:function(t){return function(e){return t.filterEvent(e,t.handleTouchStart)}}(this)},this.windowEvents={mouseup:function(t){return function(e){return t.filterEvent(e,t.handleMouseUp)}}(this),mousemove:function(t){return function(e){return t.filterEvent(e,t.handleMouseMove)}}(this),touchend:function(t){return function(e){return t.filterEvent(e,t.handleTouchEnd)}}(this),touchcancel:function(t){return function(e){return t.filterEvent(e,t.handleTouchCancel)}}(this),touchmove:function(t){return function(e){return t.filterEvent(e,t.handleTouchMove)}}(this),mouseout:function(t){return function(e){return t.filterEvent(e,t.handleMouseOut)}}(this)}),s=this.containerEvents;for(i in s)n=s[i],Base_Helpers.listen(window,i,n);r=this.windowEvents;for(i in r)n=r[i],Base_Helpers.listen(window,i,n);this.addContainer(t)}return t.prototype.ID_MOUSE="mouse",t.EVENT_MOVE="move",t.EVENT_DOWN="down",t.EVENT_GLOBAL_DOWN="gdown",t.EVENT_DRAG="drag",t.EVENT_CANCEL="cancel",t.EVENT_UP="up",t.EVENT_LEAVE="leave",t.EVENT_CLICK="click",t.EVENT_RCLICK="rclick",t.EVENT_DBLCLICK="dblclick",t.EVENT_WHEEL="mwheel",t.EVENT_KEY="key",t.prototype.addContainer=function(t){var e,i,n,s,r;this.containerList.push(t),n=this.windowEvents;for(e in n)i=n[e],Base_Helpers.listen(t,e,i);s=this.containerEvents,r=[];for(e in s)i=s[e],r.push(Base_Helpers.listen(t,e,i));return r},t.prototype.remove=function(){var t,e,i,n,s,r,o,a,h;r=this.windowEvents;for(e in r)for(i=r[e],Base_Helpers.unlisten(window,e,i),o=this.containerList,n=0,s=o.length;s>n;n++)t=o[n],Base_Helpers.unlisten(t,e,i);a=this.containerEvents,h=[];for(e in a)i=a[e],Base_Helpers.unlisten(window,e,i),h.push(function(){var n,s,r,o;for(r=this.containerList,o=[],n=0,s=r.length;s>n;n++)t=r[n],o.push(Base_Helpers.unlisten(t,e,i));return o}.call(this));return h},t.prototype.listen=function(t,e){return this.listeners[t]=e},t.prototype.processConsumed=function(t,e){return e.consumed?Base_Helpers.stopPropagation(t):void 0},t.prototype.handleKeyDown=function(e){return e.keyCode||(e.keyCode=e.which),this.fireEvent(t.EVENT_KEY,e),this.processConsumed(e,e)},t.prototype.filterEvent=function(t,e){return t!==this.lastEvent?(this.lastEvent=t,e(t)):void 0},t.prototype.handlePointerDown=function(t){var e,i,n;return e=!1,i=this.buildEvent(t,t.pointerId,t.timeStamp,t.buttons>0),n="touch"===t.pointerType||2===t.pointerType,this.downHappened(i,n),this.processConsumed(t,i)},t.prototype.handlePointerMove=function(t){var e;return e=this.buildEvent(t,t.pointerId,t.timeStamp,t.buttons>0),this.moveHappened(e),this.processConsumed(t,e)},t.prototype.handlePointerUp=function(t){var e;if(0===t.buttons)return e=this.buildEvent(t,t.pointerId,t.timeStamp,!1),e.isRightMB=2===t.button,this.upHappened(e),this.processConsumed(t,e)},t.prototype.handlePointerCancel=function(t){var e;return e=this.buildEvent(t,t.pointerId,t.timeStamp,!1),this.cancelHappened(e)},t.prototype.handlePointerLeave=function(t){var e;return e=this.buildEvent(t,t.pointerId,t.timeStamp,!1),this.cancelHappened(e)},t.prototype.handleMouseDown=function(t){var e;return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0),e.isWithinDistance(this.lastTouchEvent,this.settings.doubleClickSensitivity,this.settings.longPressTimeout)?void 0:(this.downHappened(e,!1),this.processConsumed(t,e))},t.prototype.handleCMenu=function(t){var e,i,n,s,r;if(i=t.which?3===t.which:2===t.button){e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0),r=this.downPointers;for(n in r)__hasProp.call(r,n)&&(s=r[n],e=this.rebuildEvent(t,s,!1),this.cancelHappened(e));return this.rclickHappened(e),this.processConsumed(t,e)}},t.prototype.handleMouseWheel=function(t){var e;if(this.isTargetOkay(t.target))return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0),e.wheely=t.wheelDelta|-40*t.detail,this.wheelHappened(e),this.processConsumed(t,e)},t.prototype.handleMouseUp=function(t){var e,i;return t.shiftKey&&t.ctrlKey?(this.ID_MOUSE="mouse"+this.mm,void(this.mm+=1)):(i=!0,e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1),e.isRightMB=t.witch?3===t.which:2===t.button,this.upHappened(e),this.processConsumed(t,e),i?this.removeLostTouches(t,[],[]):void 0)},t.prototype.handleMouseMove=function(t){var e;return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1),e.isWithinDistance(this.lastTouchEvent,this.settings.doubleClickSensitivity,this.settings.longPressTimeout)?void 0:(this.moveHappened(e),this.processConsumed(t,e))},t.prototype.handleMouseOut=function(t){var e;return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1),e.target=t.relatedTarget,this.moveHappened(e)},t.prototype.handleTouchStart=function(t){var e,i,n,s,r,o;for(this.removeLostTouches(t,t.touches,t.changedTouches),e=!1,n=t.changedTouches||t.touches,r=0,o=n.length;o>r;r++)s=n[r],i=this.buildEvent(s,s.identifier,t.timeStamp,!0),this.lastTouchEvent=i,this.downHappened(i,!0),e||(e=i.consumed);return this.processConsumed(t,i)},t.prototype.handleTouchEnd=function(t){var e,i,n,s,r,o;for(n=t.changedTouches||t.touches,e=!1,r=0,o=n.length;o>r;r++)s=n[r],i=this.buildEvent(s,s.identifier,t.timeStamp,!1),this.lastTouchEvent=i,this.upHappened(i),this.pointerLeave(i),e||(e=i.consumed),this.removeLostTouches(t,t.touches);return this.processConsumed(t,i)},t.prototype.handleTouchCancel=function(t){var e,i,n,s,r;for(i=t.changedTouches||t.touches,s=0,r=i.length;r>s;s++)n=i[s],e=this.buildEvent(n,n.identifier,t.timeStamp,!1),this.lastTouchEvent=e,this.cancelHappened(e);return this.removeLostTouches(t,t.touches)},t.prototype.handleTouchMove=function(t){var e,i,n,s,r,o;for(e=!1,this.removeLostTouches(t,t.touches),n=t.changedTouches||t.touches,r=0,o=n.length;o>r;r++)s=n[r],i=this.buildEvent(s,s.identifier,t.timeStamp,!0),this.lastTouchEvent=i,this.moveHappened(i),e||(e=i.consumed);return this.processConsumed(t,i)},t.prototype.removeLostTouches=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d;for(o=[],h=0,u=e.length;u>h;h++)a=e[h],o[a.identifier]=!0;p=this.downPointers;for(s in p)__hasProp.call(p,s)&&(r=p[s],o[s]||(n=this.rebuildEvent(t,r,!1),this.upHappened(n)));if(null!=i){for(d=[],l=0,c=i.length;c>l;l++)a=i[l],r=this.downPointers[a.identifier],null!=r?(n=this.rebuildEvent(t,r,!1),d.push(this.upHappened(n))):d.push(void 0);return d}},t.prototype.rebuildEvent=function(t,e,i){var n;return n=new Base_MouseEvent(e.x,e.y,t.timeStamp,e.identifier),n.pageX=e.pageX,n.pageY=e.pageY,n.pressed=i,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,n},t.prototype.buildEvent=function(t,e,i,n){var s,r,o,a,h,l,u,c;return c=Base_Helpers.elementPos(this.container),s=c[0],r=c[1],"undefined"!=typeof t.pageX?(a=t.pageX,h=t.pageY):(a=t.clientX+document.documentElement.scrollLeft,h=t.clientY+document.documentElement.scrollTop),l=a-s,u=h-r,o=new Base_MouseEvent(Math.round(l*this.scaleX),Math.round(u*this.scaleY),i,""+e),o.target=t.target||t.srcElement,o.pageX=a,o.pageY=h,o.shiftKey=t.shiftKey,o.altKey=t.altKey,o.ctrlKey=t.ctrlKey,o.pressed=n,o},t.prototype.downHappened=function(e,i){var n;return e.pressed=!0,this.fireEvent(t.EVENT_GLOBAL_DOWN,e),this.isTargetOkay(e.target)&&null==this.downPointers[e.identifier]?(null!=this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.downPointers[e.identifier]=n=new Base_MousePointer(e,this.settings),n.touch=i,this.inPointers[e.identifier]=!0,this.fireEvent(t.EVENT_DOWN,e),this.startLongPress(e)):void 0},t.prototype.upHappened=function(e){var i;return null==this.downPointers[e.identifier]?!1:(i=this.downPointers[e.identifier],this.cancelLongPress(e),i.moveTo(e),i.getPosAndSpeed(e,!0),delete this.downPointers[e.identifier],Math.abs(e.vx)>2*Math.abs(e.vy)?(e.swipeSpeed=Math.abs(e.vx),e.vx>0&&(e.swipeLeft=!0),e.vx<0&&(e.swipeRight=!0)):Math.abs(e.vy)>2*Math.abs(e.vx)&&(e.swipeSpeed=Math.abs(e.vy),e.vy<0&&(e.swipeUp=!0),e.vy>0&&(e.swipeDown=!0)),this.fireEvent(t.EVENT_UP,e),i.scrolling||e.isRightMB||e.consumed||i.noClick?void 0:null!=this.clickEvent&&this.clickEvent.time+this.settings.doubleClickTimeout>=e.time&&this.clickEvent.distance(e)<this.settings.doubleClickSensitivity?(this.settings.noClickOnDoubleClick||this.fireEvent(t.EVENT_CLICK,e),this.clickEvent=null,this.fireEvent(t.EVENT_DBLCLICK,e)):this.settings.noClickOnDoubleClick?(this.clickEvent=e,this.clickTimeout=setTimeout(this.fireClick,this.settings.doubleClickTimeout)):(this.fireEvent(t.EVENT_CLICK,e),this.clickEvent=e,setTimeout(function(t){return function(){return t.clickEvent=null}}(this),this.settings.doubleClickTimeout)))},t.prototype.cancelHappened=function(e){var i;if(null!=this.downPointers[e.identifier])return this.cancelLongPress(e),i=this.downPointers[e.identifier],delete this.downPointers[e.identifier],this.fireEvent(t.EVENT_CANCEL,e)},t.prototype.moveHappened=function(e){var i;if(i=this.downPointers[e.identifier],e.pressed=null!=i,null!=i){if(e.distance(i)>=this.settings.dragSensitivity||i.scrolling)return this.cancelLongPress(e),i.scrolling=!0,i.moveTo(e),i.getPosAndSpeed(e,!1),this.fireEvent(t.EVENT_DRAG,e),this.clickEvent=null}else{if(!this.clickEvent||!this.settings.noClickOnDoubleClick)return this.isTargetOkay(e.target)?(this.inPointers[e.identifier]=!0,this.fireEvent(t.EVENT_MOVE,e)):this.pointerLeave(e);if(this.clickEvent.distance(e)>this.settings.doubleClickSensitivity)return this.fireEvent(t.EVENT_CLICK,this.clickEvent),this.clickEvent=null}},t.prototype.pointerLeave=function(e){return this.inPointers.hasOwnProperty(e.identifier)?this.clickEvent&&this.clickEvent.identifier===e.identifier?this.clickEvent._leaving=!0:(delete this.inPointers[e.identifier],this.fireEvent(t.EVENT_LEAVE,e)):void 0},t.prototype.fireClick=function(){return this.clickEvent?(this.fireEvent(t.EVENT_CLICK,this.clickEvent),this.clickEvent._leaving&&this.fireEvent(t.EVENT_LEAVE,this.clickEvent),this.clickEvent=null):void 0},t.prototype.startLongPress=function(e){var i;return i=function(i){return function(){return e.consumed=!1,i.fireEvent(t.EVENT_RCLICK,e),e.consumed?i.downPointers[e.identifier].noClick=!0:void 0}}(this),this.cancelLongPress(),this.longPressTimeout=setTimeout(i,this.settings.longPressTimeout)},t.prototype.cancelLongPress=function(){return null!==this.longPressTimeout?(clearTimeout(this.longPressTimeout),this.longPressTimeout=null):void 0},t.prototype.wheelHappened=function(e){return this.fireEvent(t.EVENT_WHEEL,e)},t.prototype.rclickHappened=function(e){return this.fireEvent(t.EVENT_RCLICK,e)},t.prototype.fireEvent=function(t,e){return this.listeners[t]?this.listeners[t].call(this,e):void 0},t.prototype.isTargetOkay=function(t){var e,i,n,s,r;for(r=this.containerList,e=n=0,s=r.length;s>n;e=++n)if(i=r[e],i===t||Base_Helpers.isParentOf(i,t))return!0;return!1},t}();var Base_Bar_Button,Base_Bar_Item,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_Item=function(){function t(t){this.chart=t,this.domElement=null}return t.prototype.remove=function(){return 1},t.prototype.onSceneChange=function(){return 1},t.prototype.doAnimations=function(){return 1},t}(),Base_Bar_Button=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.createButton=function(t){var e,i,n;return this.li=Base_Helpers.createDom("li",null,null,null),this.a=Base_Helpers.createDom("a",null,null,this.li),t.title&&this.a.setAttribute("title",t.title),e="DVSL-bar-btn "+(t.cssClass?t.cssClass:t.image?"DVSL-bar-btn-image":"DVSL-bar-btn-none"),this.a.className=e,i=t.showLabels!==!1?t.label:null,this.p=Base_Helpers.createDom("p",null,i,this.a),t.image&&(this.p.style.backgroundImage="url('"+t.image+"')"),n=this,this.onClickProxy=function(t){return n.onClick(t)},this.domElement=this.li,Base_Helpers.listen(this.a,"click",this.onClickProxy)},e.prototype.remove=function(){return Base_Helpers.unlisten(this.a,"click",this.onClickProxy)},e.prototype.onClick=function(){return 1},e}(Base_Bar_Item);var Linearchart_Series_Stack;Linearchart_Series_Stack=function(){function t(t,e,i,n){this.scene=t,this.cluster=e,this.options=i,this.va=n,this.va.series++,this.series=[],this.seriesId=[],this.min=0,this.max=0,this.renderingType=null,this.needsAfterProcess=!1,this.paddingLeft=0,this.paddingRight=0,this.centers=[],this.radii=[],this.vstack=[],this.ystack=[],this.xes=[],this.times=[],this.styles=[],this.calculatedDepth=0}return t.prototype.addSeries=function(t,e){return this.renderingType||(this.renderingType=e.type),this.series.push(e),this.seriesId.push(t),this.calculatedDepth=Math.max(this.calculatedDepth,e.style.depth),"line"!==this.renderingType?(this.paddingLeft=Math.max(this.paddingLeft,e.style.padding[0]),this.paddingRight=Math.max(this.paddingRight,e.style.padding[1])):void 0},t.prototype.afterInit=function(){return this.renderer="line"===this.renderingType?new Linearchart_Renderer_Line(this.series):new Linearchart_Renderer_Columns(this.scene,this.series)},t.prototype.process=function(t){return this.processData(t),this.computeMinMax(),this.addLeads(t),this.needsAfterProcess=!0},t.prototype.afterProcess=function(){return this.needsAfterProcess||this.va.axisChanged?(this.needsAfterProcess=!1,this.computeY()):void 0},t.prototype.paint=function(t){var e,i,n,s;for(s=this.series,i=0,n=s.length;n>i;i++)e=s[i],e.style.fillGradient&&(e.style.currentFillGradient=this.computeFillGradient(t,e.style.fillGradient));return this.ystack.length>0?(this.ystackNegative&&this.renderer.paintStack(t,this.centers,this.radii,this.ystackNegative,this.styles,this.va.zeroY),this.renderer.paintStack(t,this.centers,this.radii,this.ystack,this.styles,this.va.zeroY)):void 0},t.prototype.hitTestStack=function(t){var e,i,n,s,r;return r=Base_Helpers.binSearch(this.centers,t),e=this.centers[r]-this.radii[r],n=this.centers[r]+this.radii[r],e>t&&r>0&&(i=this.centers[r-1]-this.radii[r-1],s=this.centers[r-1]+this.radii[r-1],(s>t||Math.abs(s-t)<Math.abs(e-t))&&(r-=1,e=i,n=s)),[{x0:e,y0:0,x1:n,y1:0,series:null,stack:this},Base_Geometry.distanceToRect(t,0,e,0,n,0)]},t.prototype.hitTest=function(t,e,i){var n,s,r,o,a,h;return a=this.renderer.hitTest(this.centers,this.radii,this.ystack,this.styles,this.va.zeroY,t,e,i),o=a[0],s=a[1],this.ystackNegative&&(h=this.renderer.hitTest(this.centers,this.radii,this.ystackNegative,this.styles,this.va.zeroY,t,e,i),r=h[0],n=h[1],s>n&&(o=r)),null!==o&&(o.seriesIndex=this.seriesId[o.seriesIndex],o.stack=this),[o,s]},t.prototype.computeFillGradient=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v;for(u=this.va,f=u.zeroY,p=this.scene.y0,c=this.scene.x0,r=this.scene.height,l=[],m=0,y=e.length;y>m;m++)h=e[m],d=f-u.valueToRelativeY(h[0]),n=(d-p)/r,l.push([n,h[1]]);for(l.sort(function(t,e){return t[0]-e[0]}),s=t.createLinearGradient(c,p,c,p+r),a=null,g=0,v=l.length;v>g;g++){if(h=l[g],o=h[0],i=h[1],o>0){if(a&&a[0]<0&&s.addColorStop(0,Base_Graphics.blendColors(a[1],i,(0-a[0])/(o-a[0]))),o>1){a&&s.addColorStop(1,Base_Graphics.blendColors(a[1],i,(1-a[0])/(o-a[0])));break}s.addColorStop(o,i)}a=h}return s},t.prototype.processData=function(t){var e,i,n,s,r,o,a;if(this.vstack=[],this.styles=[],n=t[this.seriesId[0]],0!==n.times.length){for(this.xes=n.xes.slice(n.fromIndex,n.toIndex),this.times=n.times.slice(n.fromIndex,n.toIndex),this.centers=new Array(this.xes.length-1),this.radii=new Array(this.xes.length-1),this.cluster.computeStackCenterRadius(this,this.xes,this.centers,this.radii),o=this.seriesId,a=[],e=s=0,r=o.length;r>s;e=++s)i=o[e],n=t[i],this.vstack.push(n.values.slice(n.fromIndex,n.toIndex-1)),a.push(n.style?this.styles.push(n.style.slice(n.fromIndex,n.toIndex-1)):this.styles.push(null));return a}},t.prototype.addLeads=function(t){var e,i,n,s,r,o,a;for(o=this.seriesId,a=[],e=s=0,r=o.length;r>s;e=++s)i=o[e],n=t[i],n.leadIn&&this.injectLead(n.leadIn,e),a.push(n.leadOut?this.injectLead(n.leadOut,e):void 0);return a},t.prototype.injectLead=function(t,e){var i,n,s,r,o,a,h,l,u;for(n=this.series.length,h=t.values[0],a=t.times[0],i=[0],o=[0],this.cluster.computeStackCenterRadius(this,t.xes,i,o),i=i[0],o=o[0],s=0;s<this.centers.length&&this.centers[s]<i;)s++;if(s===this.centers.length||this.centers[s]>i)for(this.centers.splice(s,0,i),this.radii.splice(s,0,o),this.times.splice(s,0,a),r=l=0,u=n-1;u>=l;r=l+=1)this.vstack[r].splice(s,0,null),this.styles[r]&&this.styles[r].splice(s,0,null);return this.vstack[e][s]=h},t.prototype.getSeparateNegative=function(){var t;return t=this.options.separateNegativeValues,null===t&&(t="line"!==this.renderingType),t},t.prototype.computeMinMax=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T;if(a=1/0,r=-1/0,this.vstack.length>0){for(y=this.vstack,s=y[0].length,p=y.length,f=this.options.type,c=this.getSeparateNegative(),n=this.scene.x0,l=n+this.scene.width,t=0,d=s-1;s>t&&this.centers[t]+this.radii[t]<n;)t+=1;for(;d>=t&&this.centers[d]-this.radii[d]>l;)d-=1;if("proportional"===f)a=0,r=100;else if(1===p)for(g=y[0],e=v=t;d>=t?d>=v:v>=d;e=d>=t?++v:--v)m=g[e],null!==m&&(a=Math.min(a,m),r=Math.max(r,m));else if("based"===f)for(e=_=t;d>=_;e=_+=1)for(i=x=0,P=p-1;P>=x;i=x+=1)m=y[i][e],null!==m&&(a=Math.min(a,m),r=Math.max(r,m));else if("normal"!==f||c){if("normal"!==f)throw"stack.type unknown value: "+f;for(e=w=t;d>=w;e=w+=1)for(h=0,o=0,i=C=0,T=p-1;T>=C;i=C+=1)m=y[i][e],m>0?o+=m:0>m&&(h+=m),a=Math.min(a,h),r=Math.max(r,o)}else for(e=S=t;d>=S;e=S+=1)for(u=0,i=b=0,M=p-1;M>=b;i=b+=1)m=y[i][e],null!==m&&(u+=m),a=Math.min(a,u),r=Math.max(r,u)}return this.min=a,this.max=r,r>=a?this.va.recieveSeriesGeometry(a,r,this.calculatedDepth):this.va.recieveSeriesGeometry(void 0,void 0,this.calculatedDepth)},t.prototype.computeY=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O;if(0!==this.vstack.length){if(a=this.options.type,s=this.getSeparateNegative(),c=this.vstack,r=c.length,t=c[0].length,l=this.va,m=null,"proportional"===a)for(f=function(){var t,i,n;for(n=[],t=0,i=c.length;i>t;t++)e=c[t],n.push([]);return n}(),e=g=0,k=t-1;k>=g;e=g+=1){for(o=0,i=y=0,D=r-1;D>=y;i=y+=1)h=c[i][e],null!==h&&(o+=Math.abs(h));if(o>0)for(o*=.01,i=v=0,L=r-1;L>=v;i=v+=1)h=c[i][e],f[i].push(null!==h?l.valueToRelativeY(Math.abs(h)/o):null);else for(i=_=0,B=r-1;B>=_;i=_+=1)f[i].push(null)}else if("based"===a||1===r)for(f=[],n=function(){var t,i,n,s;for(n=c[0],s=[],i=0,t=n.length;t>i;i++)e=n[i],s.push(0);return s}(),i=b=0,x=c.length;x>b;i=++b){for(u=c[i],d=new Array(t),e=w=0,S=u.length;S>w;e=++w)h=u[e],null!==h?(p=l.valueToRelativeY(h),d[e]=p-n[e],n[e]=p):d[e]=null;f.push(d)}else if("normal"===a&&s&&this.min<0&&this.max>0)for(f=function(){var t,i,n;for(n=[],i=0,t=c.length;t>i;i++)e=c[i],n.push([]);return n}(),m=function(){var t,i,n;for(n=[],i=0,t=c.length;t>i;i++)e=c[i],n.push([]);return n}(),e=C=0,A=t-1;A>=C;e=C+=1)for(i=P=0,I=r-1;I>=P;i=P+=1)h=c[i][e],h>0?(f[i].push(l.valueToRelativeY(h)),m[i].push(null)):0>h?(f[i].push(null),m[i].push(l.valueToRelativeY(h))):(f[i].push(null),m[i].push(null));else{if("normal"!==a)throw"stack.type unknown value: "+a;for(f=function(){var t,i,n;for(n=[],i=0,t=c.length;t>i;i++)e=c[i],n.push([]);return n}(),e=M=0,F=t-1;F>=M;e=M+=1)for(i=T=0,O=r-1;O>=T;i=T+=1)h=c[i][e],f[i].push(null!==h?l.valueToRelativeY(h):null)}return this.ystackNegative=m,this.ystack=f}},t.prototype.exportData=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T;if(this.times&&this.vstack){for(g=this.times,r=this.centers.length,l=0;r>l&&g[l+1]<=t;)l++;for(h=l;r>l&&g[l+1]<e;)l++;for(y=l,f=[],M=this.vstack,S=0,C=M.length;C>S;S++){for(_=M[S],m=0,p=-1/0,d=1/0,a=null,c=null,r=0,l=b=h;y>=b;l=b+=1)v=_[l],null===v||isNaN(v)||(m+=v,p=Math.max(p,v),d=Math.min(d,v),null===a&&(a=v),c=v,r+=1);r>0?(r>0&&(i=Math.round(m/r*100)/100),n=c-a,f.push({sum:m,max:p,min:d,first:a,last:c,count:r,avg:i,change:n})):f.push(null)}}else f=function(){var t,e,i,n;for(i=this.series,n=[],t=0,e=i.length;e>t;t++)x=i[t],n.push(null);return n}.call(this);for(o=[],T=this.series,u=w=0,P=T.length;P>w;u=++w)s=T[u],o.push({name:null!=s.name?s.name:"",values:f[u],config:s});return{name:this.options.name,stack:this,config:this.options,data:o}},t}();var Linearchart_Series_Cluster;Linearchart_Series_Cluster=function(){function t(t){this.scene=t,this.stacks=[],this.idToStack={},this.paddingSum=0}return t.prototype.addSeries=function(t,e,i,n){var s,r;return e.stack?(r=e.stack+"#"+e.type,s=this.idToStack[r],s||(s=this.idToStack[r]=new Linearchart_Series_Stack(this.scene,this,i,n),this.stacks.push(s))):(s=new Linearchart_Series_Stack(this.scene,this,i,n),this.stacks.push(s)),s.addSeries(t,e)},t.prototype.afterInit=function(){var t,e,i,n,s;for(n=this.stacks,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.afterInit());return s},t.prototype.process=function(t){var e,i,n,s,r;for(s=this.stacks,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.process(t));return r},t.prototype.afterProcess=function(){var t,e,i,n,s;for(n=this.stacks,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.afterProcess());return s},t.prototype.paint=function(t){var e,i,n,s,r;for(s=this.stacks,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.paint(t));return r},t.prototype.hitTestStack=function(t,e){var i,n,s,r,o,a,h,l;for(r=null,n=1/0,h=this.stacks,a=h.length-1;a>=0;a+=-1)o=h[a],l=o.hitTestStack(t,e),s=l[0],i=l[1],n>i&&(n=i,r=s);return[r,n]},t.prototype.hitTest=function(t,e,i){var n,s,r,o,a,h,l,u;for(o=null,s=1/0,l=this.stacks,h=l.length-1;h>=0;h+=-1)a=l[h],u=a.hitTest(t,e,i),r=u[0],n=u[1],s>n&&(s=n,o=r);return[o,s]},t.prototype.exportData=function(t,e,i){var n,s,r,o,a;for(o=this.stacks,a=[],s=0,r=o.length;r>s;s++)n=o[s],a.push(i.push(n.exportData(t,e)));return a},t.prototype.computeStackCenterRadius=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;if(!(e.length<2)){for(p=this.stacks.length,a=Base_Helpers.indexOf(this.stacks,t),r=(a+.5)/p,u=.5/p,l=0,h=0,x=this.stacks,o=m=0,v=x.length;v>m;o=++m)c=x[o],l+=c.paddingLeft+c.paddingRight;for(S=this.stacks,o=g=0,_=S.length;_>g&&(c=S[o],h+=c.paddingLeft,c!==t);o=++g)h+=c.paddingRight;for(s=e[1]-e[0],l>s/2&&(l=s/2,h=h/s*(s-l)),w=[],o=y=0,b=e.length-2;b>=y;o=y+=1)f=e[o],d=e[o+1]-f-l,i[o]=f+d*r+h,w.push(n[o]=d*u);return w}},t}();var Base_Bar_DropdownBase,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_DropdownBase=function(t){"use strict";function e(t,e){this.options=e,this.hideDropdown=__bind(this.hideDropdown,this),this.createButton(e),Base_Helpers.createDom("span",null,null,this.a),Base_Helpers.addClass(this.a,"DVSL-bar-show-more")}return __extends(e,t),e.prototype.buildDropdownList=function(){return 1},e.prototype.onHideDropdown=function(){return 1},e.prototype.onClick=function(t){return this.dropdown?this.hideDropdown():this.showDropdown(),Base_Helpers.stopPropagation(t)},e.prototype.showDropdown=function(){var t,e,i,n,s,r;for(this.dropdown=Base_Helpers.createDom("div","DVSL-bar-dropdown",null,this.li),this.dropdown.style.display="block",e=Base_Helpers.createDom("ul",null,null,this.dropdown),s=this.buildDropdownList(),r=[],i=0,n=s.length;n>i;i++)t=s[i],r.push(e.appendChild(t));return r},e.prototype.hideDropdown=function(){return this.onHideDropdown(),this.dropdown.parentNode.removeChild(this.dropdown),this.dropdown=null},e.prototype.previewPointerDown=function(t){var e,i,n,s,r,o,a,h,l;return s=Base_Helpers.isParentOf(this.li,t.target),this.dropdown&&!s&&(h=Base_Helpers.elementPos(this.chart.layers.container),i=h[0],n=h[1],l=Base_Helpers.elementPos(this.dropdown),r=l[0],a=l[1],r-=i,a-=n,o=r+this.dropdown.offsetWidth,e=a+this.dropdown.offsetHeight,r>t.x||a>t.y||e<t.y||o<t.x)?this.hideDropdown():void 0},e}(Base_Bar_Button);var Piechart_Icon,Piechart_Pie,Piechart_Scene,Piechart_Slice,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Icon=function(){function t(){}return t.prototype.hwidth=0,t.prototype.hheight=0,t.prototype.x=null,t.prototype.y=null,t.prototype.userPlaced=!1,t.prototype.inside=!0,t}(),Piechart_Slice=function(){function t(t,e){this.pie=t,this.index=e}return t.prototype.id=null,t.prototype.pie=null,t.prototype.data=null,t.prototype.index=0,t.prototype.value=0,t.prototype.fraction=0,t.prototype.cutoutDistance=0,t.prototype.brightness=1,t.prototype.expandable=!0,t.prototype.selected=!1,t.prototype.active=!1,t.prototype.icon=null,t.prototype.iconOffset=null,t.prototype.url=null,t.prototype.userPlaced=!1,t.prototype.inside=!0,t.prototype.x=0,t.prototype.y=0,t.prototype.currentCutoutDistance=null,t.prototype.currentFraction=null,t.prototype.currentInsideLabel=null,t.prototype.currentLabel=null,t.prototype.currentIcon=null,t.prototype.currentLineColor=null,t.prototype.currentFillColor=null,t.prototype.label=null,t.prototype.insideLabel=null,t.prototype.lineColor=null,t.prototype.fillColor=null,t.prototype.lineWidth=1,t.prototype.labelStyle=null,t}(),Piechart_Pie=function(){function t(){}return t.prototype.id=null,t.prototype.data=null,t.prototype.total=1,t.prototype.parentSlice=null,t.prototype.othersSlice=null,t.prototype.previousSlice=null,t.prototype.slices=[],t.prototype.allSlices=[],t.prototype.offset=0,t.prototype.count=0,t.prototype.background=!1,t.prototype.activeSliceId=null,t.prototype.brightness=1,t.prototype.loading=!1,t.prototype.scrollOffset=0,t.prototype.getActiveSlice=function(){var t,e,i,n;if(!this.activeSliceId)return null;for(n=this.slices,e=0,i=n.length;i>e;e++)if(t=n[e],t.id===this.activeSliceId)return t;return null},t.prototype.fillColor=null,t.prototype.x=0,t.prototype.y=0,t.prototype.startAngle=0,t.prototype.endAngle=0,t.prototype.currentStartAngle=null,t.prototype.currentEndAngle=null,t.prototype.currentRadius=0,t.prototype.currentInnerRadius=0,t}(),Piechart_Scene=function(t){function e(){e.__super__.constructor.call(this),this.radius=100,this.innerRadius=0,this.pies=[],this.stack=[],this.selection=[],this.selectionIds=[],this.hoverSlice=null,this.hoverLabel=null,this.hoverPie=null,this.view=null,this.pendingAction=null,this.pendingOffset=null}return __extends(e,t),e.prototype.addPie=function(t){return this.pies.push(t),this.stack.push(t),t},e.prototype.removePie=function(t){var e,i,n;for(t.removed=!0,Base_Helpers.removeFromArray(this.stack,t),e=0,n=[];e<this.selection.length;)i=this.selection[e],n.push(i.pie===t?Base_Helpers.removeFromArray(this.selection,i):e++);return n},e.prototype.deletePie=function(t){return Base_Helpers.removeFromArray(this.pies,t),Base_Helpers.removeFromArray(this.stack,t)},e.prototype.length=function(){return this.stack.length},e.prototype.peek=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1]},e.prototype.push=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d;if(r=this.peek(),r&&!e)for(c=r.slices,a=0,l=c.length;l>a;a++)if(o=c[a],o.id===t.id){e=o;break}if(e)for(t.parentSlice=e,s=e.pie,p=this.getSliceAngles(e),i=p[0],n=p[1],t.currentStartAngle=i,t.currentEndAngle=n,t.currentRadius=s.currentRadius,t.currentInnerRadius=s.currentInnerRadius,r.activeSliceId=e.id,d=t.allSlices,h=0,u=d.length;u>h;h++)o=d[h],e&&(o.currentFillColor=e.currentFillColor,o.currentLineColor=e.currentLineColor);else r&&(r.activeSliceId=null);return r&&(r.background=!0),this.addPie(t)},e.prototype.pop=function(){var t;if(this.stack.length>0)return this.removePie(this.peek()),t=this.peek(),t.background=!1,t.brightness=1},e.prototype.getParent=function(t){var e,i,n,s,r;for(i=null,r=this.stack,n=0,s=r.length;s>n;n++){if(e=r[n],e===t)return i;i=e}return null},e.prototype.getChild=function(t){var e,i,n,s,r;for(i=null,r=this.stack,n=0,s=r.length;s>n;n++){if(e=r[n],i===t)return e;i=e}return null},e.prototype.updateOnPieChanged=function(t){var e,i,n,s,r,o,a,h,l,u;if(i=this.getParent(t),e=this.getChild(t),i&&!t.parentSlice)for(h=i.slices,s=0,o=h.length;o>s;s++)if(n=h[s],n.id===t.id){t.parentSlice=n,i.activeSliceId=n.id;break}if(e&&!e.parentSlice){for(l=t.slices,u=[],r=0,a=l.length;a>r;r++){if(n=l[r],n.id===e.id){e.parentSlice=n,t.activeSliceId=n.id;break}u.push(void 0)}return u}},e.prototype.findPieAt=function(t,e,i){return this.view.findPieAt(t,e,i)},e.prototype.findSliceAt=function(t,e,i){return this.view.findSliceAt(t,e,i)},e.prototype.findLabelAt=function(t,e,i){return this.view.findLabelAt(t,e,i)},e.prototype.getSliceAngles=function(t){var e,i,n,s,r,o,a,h,l;for(s=0,r=t.pie,l=r.allSlices,a=0,h=l.length;h>a&&(o=l[a],n=s,s+=o.currentFraction,o.id!==t.id);a++);return i=r.currentEndAngle-r.currentStartAngle,e=r.currentStartAngle+i*r.scrollOffset,[e+i*n,e+i*s]
},e.prototype.getSliceTargetAngles=function(t){var e,i,n,s,r,o,a,h,l;for(s=0,r=t.pie,l=r.allSlices,a=0,h=l.length;h>a&&(o=l[a],n=s,s+=o.currentFraction,o.id!==t.id);a++);return i=r.currentEndAngle-r.currentStartAngle,e=r.currentStartAngle+i*r.scrollOffset,[e+i*n,e+i*s]},e}(Base_Scene);var Base_ChartElement,Base_ChartEvents,Base_ChartPanel,Base_SceneEvent,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Base_SceneEvent=function(){function t(){}return t.prototype.time=0,t.prototype.animating=!1,t.prototype.changes={},t}(),Base_ChartPanel=function(){function t(){}return t.prototype.packingOrder=0,t.prototype.location="outside",t.prototype.side="top",t.prototype.align="fill",t.prototype.floating=!1,t.prototype.desiredWidth=0,t.prototype.desiredHeight=0,t.prototype.margin=0,t.prototype.left=0,t.prototype.top=0,t.prototype.right=0,t.prototype.bottom=0,t.prototype.computeSize=function(){return[this.desiredWidth,this.desiredHeight]},t.prototype.placePanel=function(t,e,i,n){return this.left=t,this.top=e,this.right=i,this.bottom=n,1},t}(),Base_ChartElement=function(){function t(){}return t.prototype.animationOrder=0,t.prototype.remove=function(){return!1},t.prototype.onSceneChange=function(){return!1},t.prototype.getPanels=function(){return[]},t.prototype.doAnimations=function(){return!1},t.prototype.paintScene=function(){return!1},t.prototype.onClick=function(){return!1},t.prototype.onRClick=function(){return!1},t.prototype.onDoubleClick=function(){return!1},t.prototype.onPointerDown=function(){return!1},t.prototype.onPointerUp=function(){return!1},t.prototype.onPointerDrag=function(){return!1},t.prototype.onPointerMove=function(){return!1},t.prototype.onPointerOut=function(){return!1},t.prototype.onPointerCancel=function(){return!1},t.prototype.onWheel=function(){return!1},t.prototype.onKeyDown=function(){return!1},t.prototype.previewWheel=function(){return!1},t.prototype.previewGlobalPointerDown=function(){return!1},t.prototype.previewPointerDown=function(){return!1},t.prototype.previewPointerUp=function(){return!1},t.prototype.previewPointerDrag=function(){return!1},t.prototype.previewPointerMove=function(){return!1},t.prototype.previewPointerOut=function(){return!1},t}(),Base_ChartEvents=function(){"use strict";function t(t,e,i){var n,s,r,o,a;for(this.container=t,this.canvas=e,this.chart=i,this._paintScene=__bind(this._paintScene,this),this.kd=__bind(this.kd,this),this.scene=this.chart.scene,this.settings=this.chart.settings,this.pointerToElement={},this.sceneChanges={},this.paintRequested=null,this.paintNowInProgreess=!1,this.animationOrder=[],this.updateOrder=[],this.paintOrder=[],this.measureFpsIters=0,this.measureFpsT0=0,this.measureFpsIter=0,this.measureFpsCallback=null,this.prevTime=(new Date).getTime(),this.animationInProgress=!1,this.mouseEvents=new Base_MouseEvents(this.container,this.settings.advanced.pointer,this.chart,this.whiteList),a=this.mouseEventConfig,s=function(t){return function(){var e;return e=n,t.mouseEvents.listen(e.ev,function(i){return t._notifyMouseEvent(i,e)})}}(this),r=0,o=a.length;o>r;r++)n=a[r],s();this.mouseEvents.listen(this.mouseEvents.EVENT_KEY,this.kd)}return t.prototype.verbose=!1,t.prototype.mouseEventConfig=[{ev:Base_MouseEvents.EVENT_GLOBAL_DOWN,name:"GlobalPointerDown"},{ev:Base_MouseEvents.EVENT_DOWN,name:"PointerDown",captures:!0},{ev:Base_MouseEvents.EVENT_UP,name:"PointerUp",needsCapture:!0,releasesCapture:!0},{ev:Base_MouseEvents.EVENT_DRAG,name:"PointerDrag",needsCapture:!1,captures:!0},{ev:Base_MouseEvents.EVENT_MOVE,name:"PointerMove",captures:!0},{ev:Base_MouseEvents.EVENT_LEAVE,name:"PointerOut"},{ev:Base_MouseEvents.EVENT_CANCEL,name:"PointerCancel",needsCapture:!0},{ev:Base_MouseEvents.EVENT_CLICK,name:"Click"},{ev:Base_MouseEvents.EVENT_RCLICK,name:"RightClick"},{ev:Base_MouseEvents.EVENT_DBLCLICK,name:"DoubleClick"},{ev:Base_MouseEvents.EVENT_WHEEL,name:"Wheel"}],t.prototype.addContainer=function(t){return this.mouseEvents.addContainer(t)},t.prototype.remove=function(){return this.mouseEvents.remove()},t.prototype.setScaling=function(t,e){return this.mouseEvents.scaleX=t,this.mouseEvents.scaleY=e},t.prototype.addElement=function(t){return this.paintOrder.push(t),this.updateOrder.push(t),this.animationOrder.push(t),this.animationOrder.sort(function(t,e){return t.animationOrder-e.animationOrder}),this.paintOrder.sort(function(t,e){return t.paintOrder-e.paintOrder}),this.updateOrder.sort(function(t,e){return e.paintOrder-t.paintOrder}),t},t.prototype.removeElement=function(t){return Base_Helpers.removeFromArray(this.paintOrder,t),Base_Helpers.removeFromArray(this.animationOrder,t),Base_Helpers.removeFromArray(this.updateOrder,t)},t.prototype.notifySceneChanges=function(t){Base_Helpers.hasProperties(t)&&(Base_Helpers.extendDeep(this.sceneChanges,t),this._requestPaint())},t.prototype.clearSceneChanges=function(t){var e,i,n;n=[];for(e in t)i=t[e],n.push(delete this.sceneChanges[e]);return n},t.prototype.kd=function(t){return this._notifyKeyEvent(t,"KeyDown"),this.notifySceneChanges(t.changes)},t.prototype._notifyMouseEvent=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f;for(o=e.name,t.changes={},t.consumed=!1,t.capture=!1,t.noDefault=!1,t.cursor=null,i=null,s=null,r="preview"+o,d=this.updateOrder,l=0,c=d.length;c>l;l++)n=d[l],null!=n[r]&&n[r].call(n,t);if(r="on"+o,a=n=this.pointerToElement[t.identifier],n&&null!=n[r]&&(n[r].call(n,t),(t.consumed||t.capture||e.captures&&e.needsCapture)&&!e.releasesCapture&&(i=n,t.capture=!0,s=t.cursor)),!t.capture&&!e.needsCapture)for(f=this.updateOrder,u=0,p=f.length;p>u;u++)if(n=f[u],null!=n[r]&&n!==a&&(n[r].call(n,t),t.consumed||t.capture)){s=t.cursor,i=n,t.capture=!0;break}return t.target&&t.target.style&&(t.target.style.cursor=s),t.consumed||(t.consumed=t.noDefault),this.verbose&&(h=""+this.chart.constructor.name.toString()+" "+o+": "+t.identifier,i&&(h+=" captured By "+i.constructor.name),console.log(h)),this.pointerToElement[t.identifier]=e.captures?i:null,this.notifySceneChanges(t.changes)},t.prototype._notifyKeyEvent=function(t,e){var i,n,s,r,o;for(t.changes={},t.consumed=!1,t.cursor=null,n="on"+e,o=this.updateOrder,s=0,r=o.length;r>s&&(i=o[s],null==i[n]||(i[n].call(i,t),!t.consumed));s++);return null},t.prototype._requestPaint=function(){return null===this.paintRequested?this.paintRequested=window.requestAnimationFrame(this._paintScene):void 0},t.prototype.updateSize=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g;for(null==i&&(i=!1),s=this.canvas.getContext("2d"),h=[],g=this.paintOrder,l=0,d=g.length;d>l;l++)r=g[l],h=h.concat(r.getPanels(i));for(Base_Helpers.sort(h,function(t,e){return t.packingOrder-e.packingOrder}),this.scene.chartHeight=e,this.scene.chartWidth=t,o=new Base_Rect(0,0,t,e),n=new Base_Rect(0,0,t,e),u=h.length-1;u>=0;u+=-1)a=h[u],"external"===a.location&&this._placePanel(a,o,!0,s);for(c=0,f=h.length;f>c;c++)a=h[c],"outside"===a.location&&this._placePanel(a,n,!1,s);for(this.scene.x0=n.x0,this.scene.width=n.x1-n.x0,this.scene.y0=n.y0,this.scene.height=n.y1-n.y0,this.scene.leftMargin=n.x0,this.scene.rightMargin=t-n.x1,this.scene.topMargin=n.y0,this.scene.bottomMargin=e-n.y1,p=0,m=h.length;m>p;p++)a=h[p],"inside"===a.location&&this._placePanel(a,n,!1,s);return o},t.prototype._placePanel=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d;return a=e.x0,u=e.y0,l=e.x1,s=e.y1,h=t.margin,d=t.computeSize(e.x1-e.x0,e.y1-e.y0,n),o=d[0],r=d[1],o+=2*h,r+=2*h,i?"top"===t.side?(s=u,u=s-r,t.floating||(e.y0=u)):"bottom"===t.side?(u=s,s=u+r,t.floating||(e.y1=s)):"left"===t.side?(l=a,a=l-o,t.floating||(e.x0=a)):"right"===t.side&&(a=l,l=a+o,t.floating||(e.x1=l)):"top"===t.side?(s=Math.min(s,u+r),t.floating||(e.y0=s)):"bottom"===t.side?(u=Math.max(u,s-r),t.floating||(e.y1=u)):"left"===t.side?(l=Math.min(l,a+o),t.floating||(e.x0=l)):"right"===t.side&&(a=Math.max(a,l-o),t.floating||(e.x1=a)),"left"===t.align?l=Math.min(l,a+o):"right"===t.align?a=Math.max(a,l-o):"top"===t.align?s=Math.min(s,u+r):"bottom"===t.align?u=Math.max(u,s-r):"center"===t.align&&(c=Math.max(0,l-a-o)/2,p=Math.max(0,s-u-r)/2,a+=c,l-=c,u+=p,s-=p),t.placePanel(a+h,u+h,l-h,s-h)},t.prototype.measureFps=function(t,e){return this.measureFpsIters=t,this.measureFpsCallback=e,this.measureFpsIter=0,this.measureFpsT0=(new Date).getTime(),this.notifySceneChanges({animation:!0})},t.prototype.paintNow=function(t){return null==t&&(t=!1),this.paintNowInProgreess?void this.chart.erorr("painNow called from within paintNow call"):(this.paintNowInProgreess=!0,(null!==this.paintRequested||t)&&(window.cancelRequestAnimationFrame&&cancelAnimationFrame(this.paintRequested),this._paintScene()),this.paintNowInProgreess=!1)},t.prototype._paintScene=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d;if(!this.chart.removed){for(this.paintRequested=null,i=new Base_SceneEvent,i.time=(new Date).getTime(),i.changes=this.sceneChanges,i["export"]=!1,i.context=this.canvas.getContext("2d"),i.dtime=this.prevTime&&this.animationInProgress?Math.min(1e3,i.time-this.prevTime):30,this.prevTime=i.time,this.sceneChanges={},c=this.updateOrder,r=0,h=c.length;h>r;r++)e=c[r],null!=e.onSceneChange&&e.onSceneChange(i);for(i.changes.bounds&&this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!1),i.context=this.prepareContext(i),p=this.animationOrder,o=0,l=p.length;l>o;o++)t=p[o],null!=t.doAnimations&&t.doAnimations(i);for(d=this.paintOrder,a=0,u=d.length;u>a;a++)t=d[a],null!=t.paintScene&&t.paintScene(i);return i.animating?(this.animationInProgress=!0,this._requestPaint()):this.animationInProgress=!1,this.finalizeContext(i),this.measureFpsIters?(this.measureFpsIter+=1,s=(new Date).getTime()-this.measureFpsT0,this.measureFpsIter>=this.measureFpsIters||s>2e3&&this.measureFpsIter>=5?(n=1e3*this.measureFpsIter/Math.max(.1,s),this.measureFpsCallback(n,this.measureFpsIter,s),this.measureFpsCallback=0,this.measureFpsIters=0):this.notifySceneChanges({animation:!0})):void 0}},t.prototype.prepareContext=function(t){var e,i,n,s,r,o,a,h;return t.changes.bounds&&(s=this.chart.scene,e=Base_Helpers.detectBrowser(),h=Base_Helpers.canvasScaling(),r=h[0],o=h[1],this.settings.advanced.highDpi.hasOwnProperty(e)&&this.settings.advanced.highDpi[e]||this.settings.advanced.highDpi["default"]?(s.canvasScaleX=r,s.canvasScaleY=o):(s.canvasScaleX=1,s.canvasScaleY=1),this.scaleX=Math.min(s.canvasScaleX,s.settings.advanced.maxCanvasWidth/s.chartWidth),this.scaleY=Math.min(s.canvasScaleY,s.settings.advanced.maxCanvasHeight/s.chartHeight),a=Math.round(s.chartWidth*this.scaleX),n=Math.round(s.chartHeight*this.scaleY),this.canvas.width=a,this.canvas.height=n,this.canvas.style.width=""+s.chartWidth+"px",this.canvas.style.height=""+s.chartHeight+"px"),i=this.canvas.getContext("2d"),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this.canvas.width,this.canvas.height),Base_Graphics.rectStyle(i,this.settings.area.style),i.fillRect(0,0,this.canvas.width,this.canvas.height),i.setTransform(this.scaleX,0,0,this.scaleY,0,0),i},t.prototype.finalizeContext=function(t){var e;return this.settings.area.style.overlayColor?(e=t.context,e.fillStyle=this.settings.area.style.overlayColor,e.setTransform(1,0,0,1,0,0),e.fillRect(0,0,this.canvas.width,this.canvas.height)):void 0},t.prototype.exportToImageGetDimensions=function(){return this.exportBounds=this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!0),this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!1),[this.exportBounds.w(),this.exportBounds.h()]},t.prototype.exportToContext=function(t,e,i,n){var s,r,o,a,h;for(this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!0),e=i=0,t.save(),t.setTransform(n,0,0,n,e-this.exportBounds.x0*n,i-this.exportBounds.y0*n),r=new Base_SceneEvent,r["export"]=!0,r.time=(new Date).getTime(),r.changes={},r.context=t,h=this.paintOrder,o=0,a=h.length;a>o;o++)s=h[o],null!=s.paintScene&&s.paintScene(r);return this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!1),t.restore()},t}();var Base_TouchMarkers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_TouchMarkers=function(t){"use strict";function e(t){this.scene=t,this.scene.frameCount=0,this.touches={}}return __extends(e,t),e.prototype.animationOrder=0,e.prototype.scene=null,e.prototype.touches={},e.prototype.text=null,e.prototype.fps=0,e.prototype.fpsAveragingPeriod=1e3,e.prototype.prevFrame=null,e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c,p;this.scene.frameCount+=1,this.prevFrame&&(i=Math.max(t.time-this.prevFrame,1)/1e3,n=1/i,a=Math.min(1,3*i),this.fps=this.fps*(1-a)+n*a),this.prevFrame=t.time,s=t.context,e=0,c=this.touches;for(r in c)if(__hasProp.call(c,r)){for(h=c[r],s.beginPath(),s.moveTo(h.dx+10,h.dy),s.arc(h.dx,h.dy,10,0,2*Math.PI),s.moveTo(h.dx,h.dy),p=h.trace,l=0,u=p.length;u>l;l++)o=p[l],s.lineTo(o.x,o.y),s.arc(o.x,o.y,3,0,2*Math.PI);s.strokeStyle=h.cancelled?"red":h.up?"gray":"#000",s.moveTo(h.x+30,h.y),s.arc(h.x,h.y,30,0,2*Math.PI),s.stroke(),h.up||(e+=1)}return s.fillStyle="#000",s.textAlign="start",s.textBaseline="middle",s.fillText("FPS: "+Math.round(this.fps)+", touches: "+e,this.scene.x0+this.scene.width/3,20)},e.prototype.previewPointerDown=function(t){var e,i,n;n=this.touches;for(e in n)__hasProp.call(n,e)&&(i=n[e],i.up&&delete this.touches[e]);return this.touches[t.identifier]={dx:t.x,dy:t.y,up:!1,cancelled:!1,trace:[]},t.changes.pointers=!0},e.prototype.previewPointerDrag=function(t){var e;return e=this.touches[t.identifier],e.x=t.x,e.y=t.y,e.trace.push({x:e.x,y:e.y}),t.changes.pointers=!0},e.prototype.previewPointerUp=function(t){return this.touches[t.identifier].up=!0,this.previewPointerDrag(t)},e.prototype.previewPointerCancel=function(t){return this.touches[t.identifier].up=!0,this.touches[t.identifier].cancelled=!0,this.previewPointerDrag(t),t.changes.pointers=!0},e}(Base_ChartElement);var Itemschart_Link,Itemschart_Node,Itemschart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Node=function(){function t(t){this.id=t,this.links=[],this.dataLinksFiltered=[],this.dataLinks=[]}return t.prototype.id="",t.prototype.zindex=0,t.prototype.isNode=!0,t.prototype.isLink=!1,t.prototype.removed=!1,t.prototype.added=!1,t.prototype.data=null,t.prototype.loading=!1,t.prototype.links=null,t.prototype.dataLinks=null,t.prototype.userLock=!1,t.prototype.expanded=!1,t.prototype.focused=!1,t.prototype.background=!1,t.prototype.cursor=null,t.prototype.relevance=1,t.prototype.opacity=1,t.prototype.imageCropping=!1,t.prototype.selectable=!0,t.prototype.movable=!0,t.prototype.type="point",t.prototype.display="image",t.prototype.coordinates=null,t.prototype.coordinatesCache=null,t.prototype.coordinatesCacheZoom=1/0,t.prototype.radius=10,t.prototype.hwidth=null,t.prototype.fillColor=null,t.prototype.lineColor=null,t.prototype.lineWidth=1,t.prototype.image=null,t.prototype.imageSlicing=null,t.prototype.tintImage=!1,t.prototype.label=null,t.prototype.labelStyle=null,t.prototype.items=[],t.prototype.x=null,t.prototype.y=null,t.prototype.locks=0,t.prototype.currentRadius=0,t.prototype.currentHwidth=0,t.prototype.currentLabel=null,t.prototype.currentItems=null,t.prototype.renderRadius=0,t.prototype.renderHwidth=0,t}(),Itemschart_Link=function(){function t(){}return t.prototype.from=null,t.prototype.to=null,t.prototype.removed=!1,t.prototype.isNode=!1,t.prototype.isLink=!0,t.prototype.data=null,t.prototype.multiId=null,t.prototype.radius=1,t.prototype.length=1,t.prototype.cursor=null,t.prototype.strength=1,t.prototype.label=null,t.prototype.labelStyle=null,t.prototype.dashed=!1,t.prototype.currentRadius=0,t.prototype.direction=null,t.prototype.fromDecoration=null,t.prototype.toDecoration=null,t.prototype.relevance=1,t.prototype.items=[],t.prototype.toPieValue=0,t.prototype.toPieColor=null,t.prototype.toPie0=null,t.prototype.toPie1=null,t.prototype.currentItems=null,t.prototype.currentCenterOffset=0,t.prototype.otherEnd=function(t){return t===this.from?this.to:t===this.to?this.from:null},t.prototype.commonNode=function(t){return this.from===t.from||this.from===t.to?this.from:this.to===t.from||this.to===t.to?this.to:null},t}(),Itemschart_Scene=function(t){function e(){e.__super__.constructor.call(this),this.centerX=0,this.centerY=0,this.zoom=1,this._nodes=[],this._links=[],this._nodesDel=null,this._linksDel=null,this.idToNode={},this.idToLink={},this.selection=[],this.hoverNode=null,this.hoverLink=null,this.hoverItem=null,this.lastClickedNode=null,this.multilinks=null,this.clearModified()}return __extends(e,t),e.prototype.nodes=function(){var t,e,i,n,s;if(null===this._nodesDel)return this._nodes;for(t=[],s=this._nodes,i=0,n=s.length;n>i;i++)e=s[i],this._nodesDel[e.id]||t.push(e);return this._nodes=t,this._nodesDel=null,t},e.prototype.links=function(){var t,e,i,n,s;if(null===this._linksDel)return this._links;for(t=[],s=this._links,i=0,n=s.length;n>i;i++)e=s[i],this._linksDel[e.id]||t.push(e);return this._links=t,this._linksDel=null,t},e.prototype.addNode=function(t){var e;return this.nodes(),this.idToNode.hasOwnProperty(t)?(e=this.idToNode[t],e.removed=!1,e.added||(e.added=!0)):this.deletedNodes.hasOwnProperty(t)?(e=this.deletedNodes[t],e.removed=!1,e.added||(e.added=!0),this.idToNode[t]=e,this._nodes.push(e),delete this.deletedNodes[t]):(e=new Itemschart_Node(t),e.added=!0,this.idToNode[t]=e,this._nodes.push(e),this.newNodes[t]=e),this.modifiedNodes[t]=e,e},e.prototype.touchNode=function(t){return this.modifiedNodes[t.id]=t},e.prototype.removeNode=function(t){var e;return e=t.id,this.idToNode.hasOwnProperty(e)?(t===this.lastClickedNode&&(this.lastClickedNode=null),Base_Helpers.removeFromArray(this.selection,t),this.newNodes.hasOwnProperty(t.id)?this.deleteNode(t):(t.removed||(t.removed=!0),t.added=!1,this.modifiedNodes[e]=t)):void 0},e.prototype.deleteNode=function(t){return null===this._nodesDel&&(this._nodesDel={}),this._nodesDel[t.id]=!0,Base_Helpers.removeFromArray(this.selection,t),delete this.newNodes[t.id],delete this.modifiedNodes[t.id],delete this.idToNode[t.id],this.deletedNodes[t.id]=t},e.prototype.addLink=function(t,e,i){var n;if(!this.idToNode.hasOwnProperty(e)||!this.idToNode.hasOwnProperty(i))throw"Cannot add link - missing nodes";return this.links(),this.idToLink.hasOwnProperty(t)?(n=this.idToLink[t],n.removed=!1,n.added||(n.added=!0)):this.deletedLinks.hasOwnProperty(t)?(n=this.deletedLinks[t],delete this.deletedLinks[t],this.idToLink[t]=n,this._links.push(n),n.removed=!1,n.added||(n.added=!0)):(n=new Itemschart_Link,n.added=!0,n.id=t,this._links.push(n),this.idToLink[t]=n,this.newLinks[t]=n),n.from=null,n.to=null,n.multiId=i>e?e+"#"+i:i+"#"+e,this.modifiedLinks[t]=n,n},e.prototype.removeLink=function(t){var e;return e=t.id,this.idToLink.hasOwnProperty(e)?(Base_Helpers.removeFromArray(this.selection,t),this.newLinks.hasOwnProperty(e)?this.deleteLink(t):(t.added=!1,t.removed||(t.removed=!0),this.modifiedLinks[e]=t)):void 0},e.prototype.deleteLink=function(t){return null===this._linksDel&&(this._linksDel={}),this._linksDel[t.id]=!0,Base_Helpers.removeFromArray(this.selection,t),this.newLinks.hasOwnProperty(t.id)?delete this.newLinks[t.id]:this.deletedLinks[t.id]=t,delete this.modifiedLinks[t.id],delete this.idToLink[t.id]},e.prototype.touchLink=function(t){return this.modifiedLinks[t.id]=t},e.prototype.getModified=function(){return[this.newNodes,this.newLinks,this.modifiedNodes,this.modifiedLinks,this.deletedNodes,this.deletedLinks]},e.prototype.hasTopologyChanges=function(){return Base_Helpers.hasProperties(this.newNodes)||Base_Helpers.hasProperties(this.newLinks)||Base_Helpers.hasProperties(this.deletedNodes)||Base_Helpers.hasProperties(this.deletedLinks)},e.prototype.hasStyleChanges=function(){return this.hasTopologyChanges()||Base_Helpers.hasProperties(this.modifiedLinks)||Base_Helpers.hasProperties(this.modifiedNodes)},e.prototype.clearModified=function(){return this.newNodes={},this.newLinks={},this.modifiedNodes={},this.modifiedLinks={},this.deletedNodes={},this.deletedLinks={}},e.prototype.xyInChart=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height},e.prototype.toDisplay=function(t,e){return[(t-this.centerX)*this.zoom+this.x0+.5*this.width,(e-this.centerY)*this.zoom+this.y0+.5*this.height]},e.prototype.fromDisplay=function(t,e){return[(t-this.x0-.5*this.width)/this.zoom+this.centerX,(e-this.y0-.5*this.height)/this.zoom+this.centerY]},e.prototype.toDisplayTransform=function(){return[this.zoom,this.x0+.5*this.width-this.centerX*this.zoom,this.zoom,this.y0+.5*this.height-this.centerY*this.zoom]},e.prototype.setActiveObject=function(t,e){var i,n,s,r,o,a,h,l;if(null!=this.hoverNode){for(this.touchNode(this.hoverNode),a=this.hoverNode.links,n=0,r=a.length;r>n;n++)i=a[n],this.touchLink(i);this.hoverNode.hovered=!1}if(null!=this.hoverLink&&(this.touchLink(this.hoverLink),this.touchNode(this.hoverLink.from),this.touchNode(this.hoverLink.to),this.hoverLink.hovered=!1),this.hoverNode=null,this.hoverLink=null,this.hoverItem=e,t instanceof Itemschart_Node){for(this.hoverNode=t,t.hovered=!0,this.touchNode(this.hoverNode),h=this.hoverNode.links,l=[],s=0,o=h.length;o>s;s++)i=h[s],l.push(this.touchLink(i));return l}if(t instanceof Itemschart_Link)return this.hoverLink=t,t.hovered=!0,this.touchLink(this.hoverLink),this.touchNode(this.hoverLink.from),this.touchNode(this.hoverLink.to);if(null!==t)throw"scene.setActiveObject invalid active object type "+t},e.prototype.getVisibleBounds=function(){var t,e,i,n,s,r;return s=this.fromDisplay(this.x0,this.y0),t=s[0],i=s[1],r=this.fromDisplay(this.x0+this.width,this.y0+this.height),e=r[0],n=r[1],new Base_Rect(t,i,e,n)},e.prototype.findLinkOrNodeAt=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y;for(b=this.nodes(),R=this.fromDisplay(t,e),D=R[0],A=R[1],y=1/this.zoom,x=i*y,n=null,f=O=H=b.length-1;O>=0;f=O+=-1)if(S=b[f],!(S.removed||(M=S.renderRadius*y,k=S.renderHwidth*y,w=S.x,C=S.y,w-k-x>D||D>w+k+x||C-M-x>A||A>C+M+x)))if("polygon"===S.display){if(o=Base_Geometry.distanceToPolygonSq(D,A,S.coordinatesCache),T=x*x,0>=o)return S;T>o&&(a=Math.sqrt(o),x>a&&(x=a,n=S))}else if("line"===S.display){if(o=Base_Geometry.distanceToLinesSq(D,A,S.coordinatesCache),T=x*x,0>=o)return S;T>o&&(a=Math.sqrt(o),x>a&&(x=a,n=S))}else if(k>M&&(l=k-M,U=Base_Geometry.closestPointToLine(w-l,C,w+l,C,D,A),w=U[0],C=U[1]),h=(D-w)*(D-w)+(A-C)*(A-C),T=(M+x)*(M+x),T>h){if(m=M*M,m>h)return S;x=Math.sqrt(h)-M,n=S}for(_=this.links(),E=0,N=_.length;N>E;E++)v=_[E],v.removed||(M=v.targetRadius,L=v.from.x,I=v.from.y,B=v.to.x,F=v.to.y,P=v.currentCenterOffset,0!==P&&(c=B-L,d=F-I,g=1/Math.sqrt(c*c+d*d),u=-d*P*g,p=c*P*g,L+=u,I+=p,B+=u,F+=p),Y=Base_Geometry.closestPointToLine(L,I,B,F,D,A),s=Y[0],r=Y[1],h=(D-s)*(D-s)+(A-r)*(A-r),T=(M+x)*(M+x),T>h&&(x=Math.sqrt(h)-M,n=v));return n},e.prototype.findItem=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m;if(!i)return null;for(r=this.hoverItem,f=i.currentItems,u=0,p=f.length;p>u;u++)if(o=f[u],o.data===r&&o.hwidth&&(h=o.curx,l=o.cury,a=o.hwidth,s=o.hheight,t>h-a-n&&h+a+n>t&&e>l-s-n&&l+s+n>e))return o;for(m=i.currentItems,c=0,d=m.length;d>c;c++)if(o=m[c],o.hwidth&&(h=o.curx,l=o.cury,a=o.hwidth,s=o.hheight,t>h-a-n&&h+a+n>t&&e>l-s-n&&l+s+n>e))return o.data;return null},e.prototype.updateMultilinks=function(){var t,e,i,n,s,r,o;if(this.hasTopologyChanges()){for(i=this.links(),s={},r=0,o=i.length;o>r;r++)e=i[r],n=e.multiId,s.hasOwnProperty(n)?(t=s[n],Base_Helpers.isArray(t)?t.push(e):s[n]=[s[n],e]):s[n]=e;return this.multilinks=s}},e}(Base_Scene);var Base_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_InfoPopup=function(t){"use strict";function e(t){this.chart=t,this.container=t.layers.container,this.scene=t.scene,this.events=t.events,this.popup=Base_Helpers.createDom("div","DVSL-info-center",null,this.container),Base_Helpers.createDom("em",null,null,this.popup),this.events.addContainer(this.popup),this.popup.style.position="absolute",this.popup.style.display="none",this.contents=null,this.visible=!1,this.x0=null,this.x1=null,this.y=null,this.contentsChanged=!1,this.chart.events.addContainer(this.popup)}return __extends(e,t),e.prototype.hide=function(){return this.visible?(this.visible=!1,this.popup.style.display="none",!0):!1},e.prototype.show=function(t,e,i,n){return this.visible=!0,n?(-1===n.indexOf("<")&&-1===n.indexOf(">")&&(n="<b>"+n+"</b>"),this.popup.style.display="block",n!==this.popup.innerHTML&&(this.popup.innerHTML=n,this.contentsChanged=!0),this.updateXY(t,e,i)):this.popup.style.display="none"},e.prototype.updateContents=function(t){return this.visible?void 0:null===t?this.hide():this.show(this.x0,this.x1,this.y,t)},e.prototype.updateXY=function(t,e,i){var n,s,r,o,a,h;if(this.visible||this.contentsChanged||this.x0!==t||this.x1!==e||this.y!==i)return this.contentsChanged&&(this.contentsChanged=!1,this.width=this.popup.offsetWidth,this.height=this.popup.offsetHeight),this.x0=t,this.x1=e,this.y=i,o=12,n=10,a=this.width,r=this.height,this.scene.x0<=t-a-n?(h=t-a-n,s="DVSL-info-left"):this.scene.x0+this.scene.width>=e+a+n?(h=e+n,s="DVSL-info-right"):(h=(Math.max(t,this.scene.x0)+Math.min(e,this.scene.x0+this.scene.width)-a)/2,s="DVSL-info-center"),i=Math.min(Math.max(this.scene.y0+o,i-r/2),this.scene.y0+this.scene.height-r),this.popupX=h,this.popupY=i,this.popup.style.left=h+"px",this.popup.style.top=i+"px",this.popupClass!==s?(this.popupClass=s,Base_Helpers.setClass(this.popup,s)):void 0},e}(Base_ChartElement);var Linearchart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Scrolling=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene,this.events=this.chart.events}return __extends(e,t),e.prototype.animationOrder=1e3,e.prototype.chart=null,e.prototype.scene=null,e.prototype.events=null,e.prototype._minDisplayRange=0,e.prototype.currentFrom=0,e.prototype.currentTo=0,e.prototype.pointer1=null,e.prototype.pointer2=null,e.prototype.t1=0,e.prototype.t2=0,e.prototype.x1=0,e.prototype.x2=0,e.prototype.scaleOrigin=null,e.prototype.initialZoom=null,e.prototype.dragStartFrom=null,e.prototype.dragStartTo=null,e.prototype.active=!1,e.prototype.lastScrollingY=0,e.prototype.scrollingActive=!1,e.prototype.scalingActive=!1,e.prototype.scrollingSpeed=null,e.prototype.scrollingDuration=null,e.prototype.from=null,e.prototype.to=null,e.prototype.highlight=null,e.prototype.highlightRemoveWhenDone=!1,e.prototype.xyInArea=function(){return!1},e.prototype.xyToPosition=function(){return 0},e.prototype.onStartDragging=function(){return null},e.prototype.onSnapWhileDragging=function(t,e){return[t,e]},e.prototype.onSnapAfterDragging=function(t,e){return[t,e]},e.prototype.onCancelDragging=function(){return null},e.prototype.onZoomOut=function(t,e,i,n){return null==n&&(n=2),[i-(i-t)*n,i+(e-i)*n,i]},e.prototype.onZoomIn=function(t,e,i,n){return null==n&&(n=.5),[i-(i-t)*n,i+(e-i)*n,i]},e.prototype.onScroll=function(t,e,i){return"<"===i?[2*t-e,t]:[e,2*e-t]},e.prototype.onGoHome=function(t,e){return[t,e,e]},e.prototype.onPositionChanged=function(){return 1},e.prototype.onAnimationDone=function(){return 1},e.prototype.getFrom=function(){return null!=this.panAnimF?this.panAnimF.to:this.currentFrom},e.prototype.getTo=function(){return null!=this.panAnimT?this.panAnimT.to:this.currentTo},e.prototype.onWheel=function(t){var e,i,n,s,r;if(this.currentFrom<this.currentTo&&this.xyInArea(t.x,t.y)&&this.scene.settings.interaction.zooming.wheel&&this.scene.settings.interaction.zooming.enabled)return this.active=!0,n=null!=this.scaleOrigin?this.scaleOrigin:this.scene.xyToPosition(t.x,t.y),e=Math.pow(1+this.scene.settings.interaction.zooming.sensitivity,.004*t.wheely),i=this.getFrom(),r=this.getTo(),i=(i-n)*e+n,r=(r-n)*e+n,s=this.onSnapAfterDragging(i,r,n,!1,!0),s&&(this.goToPosition(s[0],s[1],!0),null!=this.pointer1&&(this.scalingActive=!0)),t.consumed=!0,this.active=!1},e.prototype.onPointerDown=function(t){var e;if(this.currentFrom<this.currentTo&&this.xyInArea(t.x,t.y)&&(this.scene.settings.interaction.scrolling.enabled||this.scene.settings.interaction.zooming.enabled))return e=this.xyToPosition(t.x,t.y),null===this.pointer1?(this.pointer1=t.identifier,this.x1=t.x,this.t1=e,this.scaleOrigin=e,this.onStartDragging(this.getFrom(),this.getTo(),e),this.lastScrollingY=t.y,this.dragStartFrom=this.currentFrom,this.dragStartTo=this.currentTo,this.dragCurFrom=this.currentFrom,this.dragCurTo=this.currentTo,t.consumed=!0,(null!=this.panAnimF||null!=this.panAnimT)&&(this.stopAnimations(),this.scrollingActive=!0),this.scene.anchor=null,this.chart.cancelChartUpdateNotify(),t.noDefault=!0):null===this.pointer2?(this.pointer2=t.identifier,this.x2=t.x,this.t2=e,this.initialZoom=this.currentTo-this.currentFrom,this.scaleOrigin=(this.t1+this.t2)/2,t.consumed=!0):this.scalingActive||this.scrollingActive?t.consumed=!0:void 0},e.prototype.xyToDragPosition=function(t){var e;return e=this.dragCurFrom+(t-this.scene.x0)/this.scene.width*(this.dragCurTo-this.dragCurFrom)},e.prototype.onPointerDrag=function(t){var e,i,n,s,r,o,a,h;if(n=this.dragCurFrom,r=this.dragCurTo,s=this.xyToDragPosition(t.x,t.y),t.identifier===this.pointer1&&null==this.pointer2)this.scaleOrigin=this.t1,this.x1=t.x,Math.abs(t.dx)>Math.abs(t.dy)?(this.lastScrollingY=t.y,Math.abs(t.dx)>4*Math.abs(t.dy)&&this.scene.settings.interaction.scrolling.enabled&&(this.scrollingActive=!0)):this.scene.settings.interaction.zooming.enabled&&this.scene.settings.interaction.zooming.swipe&&Math.abs(this.lastScrollingY-t.y)>this.scene.settings.interaction.zooming.upDownTreshold&&(this.scalingActive=!0),this.scalingActive&&(this.clearZoomHighlight(),e=Math.pow(1+this.scene.settings.interaction.zooming.sensitivity,-t.dy/this.scene.height),n=(n-this.scaleOrigin)*e+this.scaleOrigin,r=(r-this.scaleOrigin)*e+this.scaleOrigin,t.consumed=!0),this.scrollingActive&&(i=this.t1-s,n+=i,r+=i);else if(t.identifier===this.pointer1&&this.scene.settings.interaction.scrolling.enabled)this.x1=t.x,this.clearZoomHighlight(),o=this.twoPointerDrag(),n=o[0],r=o[1];else{if(t.identifier!==this.pointer2||!this.scene.settings.interaction.scrolling.enabled)return void((this.scalingActive||this.scrollingActive)&&(t.consumed=!0));this.x2=t.x,this.clearZoomHighlight(),a=this.twoPointerDrag(),n=a[0],r=a[1]}return this.dragCurFrom=n,this.dragCurTo=r,h=this.onSnapWhileDragging(n,r,this.scaleOrigin,this.scrollingActive,this.scalingActive),n=h[0],r=h[1],this.goToPositionDragging(n,r),t.consumed=!0},e.prototype.twoPointerDrag=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f;return a=this.scene.settings.interaction.zooming.fingersMaxZoom,this.scaleOrigin=(this.t1+this.t2)/2,s=this.t2-this.t1,r=this.dragCurFrom,p=this.dragCurTo,d=this.xyToDragPosition(this.x1,0),f=this.xyToDragPosition(this.x2,0),this.scene.settings.interaction.scrolling.enabled&&this.scene.settings.interaction.zooming.enabled&&this.scene.settings.interaction.zooming.fingers&&0!==s?(e=(this.t1+this.t2)/2,t=((d+f)/2-this.currentFrom)/(this.currentTo-this.currentFrom),i=(f-d)/(this.currentTo-this.currentFrom),u=s*i>0?s/i:1/0,o=this.initialZoom*a,h=Math.max(this.initialZoom/a,this._minDisplayRange),u=Math.max(h,Math.min(o,u)),r=e-t*u,p=e+(1-t)*u,this.scalingActive=!0,this.scrollingActive=!0):this.scene.settings.interaction.scrolling.enabled&&(l=(this.t1+this.t2)/2,c=(d+f)/2,n=l-c,r+=n,p+=n,this.scrollingActive=!0),[r,p]},e.prototype.onPointerUp=function(t){var e,i,n,s,r,o,a,h,l,u,c;return t.identifier===this.pointer2?(this.pointer2=null,t.consumed=!0,this.scaleOrigin=this.t1):t.identifier===this.pointer1&&null!=this.pointer2?(this.pointer1=this.pointer2,this.pointer2=null,this.t1=this.t2,this.scaleOrigin=this.t1,t.consumed=!0):t.identifier===this.pointer1?(this.pointer1=null,this.active=!0,this.scene.settings.interaction.scrolling.swipePageFlipping&&t.swipeUp&&this.scalingActive&&t.swipeSpeed>this.scene.height/this.scene.settings.interaction.swipeSensitivity?(l=this.onZoomOut(this.dragStartFrom,this.dragStartTo,this.scaleOrigin),s=l[0],a=l[1]):this.scene.settings.interaction.scrolling.swipePageFlipping&&t.swipeDown&&this.scalingActive&&t.swipeSpeed>this.scene.height/this.scene.settings.interaction.swipeSensitivity?(u=this.onZoomIn(this.dragStartFrom,this.dragStartTo,this.scaleOrigin),s=u[0],a=u[1]):(this.scrollingActive||this.scalingActive)&&(this.scrollingActive&&!this.scalingActive&&this.scene.settings.interaction.scrolling.swipePageFlipping&&(t.swipeLeft||t.swipeRight)&&t.swipeSpeed>this.scene.width/this.scene.settings.interaction.swipeSensitivity*.7?(e=t.swipeLeft?"<":">",c=this.onScroll(this.dragStartFrom,this.dragStartTo,e),s=c[0],a=c[1]):(s=this.currentFrom,a=this.currentTo,this.scrollingActive&&!this.scalingActive&&(h=-t.vx,h=h>0?Math.min(h,2*this.scene.width):Math.max(h,2*-this.scene.width),o=1e3*(this.xyToPosition(t.x,t.y)-this.xyToPosition(t.x-h/1e3,t.y)),n=Math.abs(t.vx/this.scene.width)/this.scene.settings.interaction.scrolling.kineticFriction,n=Math.min(n,1),i=n*o/2,this.scrollingSpeed=o,this.scrollingDuration=1e3*n,s+=i,a+=i)),this.scaleOrigin=(s+a)/2),(s||a)&&(r=this.onSnapAfterDragging(s,a,this.scaleOrigin,this.scrollingActive,this.scalingActive),r&&this.goToPosition(r[0],r[1],!0),t.consumed=!0,this.scaleOrigin=null),this.active=!1,this.dragStartFrom=null,this.dragStartTo=null,this.dragStartUnit=null,this.scalingActive=!1,this.scrollingActive=!1):this.scalingActive||this.scrollingActive?t.consumed=!0:void 0
},e.prototype.onPointerCancel=function(t){var e;return t.identifier===this.pointer2?(this.pointer2=null,this.scaleOrigin=this.t1):t.identifier===this.pointer1&&null!=this.pointer2?(this.pointer1=this.pointer2,this.t1=this.t2,this.scaleOrigin=this.t1,this.pointer2=null,this.t2=null):t.identifier===this.pointer1?(this.active=!0,e=this.onCancelDragging(this.dragStartFrom,this.dragStartTo),e&&this.goToPosition(e[0],e[1],!1),this.pointer1=null,this.t1=null,this.scaleOrigin=null,this.dragStartFrom=null,this.dragStartTo=null,this.scalingActive=!1,this.scrollingActive=!1,this.active=!1):void 0},e.prototype.onKeyDown=function(t){var e,i,n,s,r,o,a,h,l,u,c,p;return this.active=!0,e=this.getFrom(),o=this.getTo(),o>e?(i=(e+o)/2,r=!1,s=!1,37===t.keyCode?(r=!0,h=this.onScroll(e,o,"<"),e=h[0],o=h[1],i=(e+o)/2):39===t.keyCode?(r=!0,l=this.onScroll(e,o,">"),e=l[0],o=l[1],i=(e+o)/2):36===t.keyCode?(s=!0,r=!0,u=this.onGoHome(e,o),e=u[0],o=u[1],i=u[2]):38===t.keyCode?(a=this.scene.settings.interaction.zooming.keyboardFactor,s=!0,c=this.onZoomOut(e,o,i,a),e=c[0],o=c[1],i=c[2]):40===t.keyCode&&(a=1/this.scene.settings.interaction.zooming.keyboardFactor,s=!0,p=this.onZoomIn(e,o,i,a),e=p[0],o=p[1]),(s||r)&&(n=this.onSnapAfterDragging(e,o,i,r,s),n&&this.goToPosition(n[0],n[1],!0),t.consumed=!0),this.active=!1):void 0},e.prototype.goToPositionDragging=function(t,e){var i,n,s;return s=this.stopAnimations(),i=s[0],n=s[1],this.currentFrom=t,this.currentTo=e,this.clearZoomHighlight(),this.onPositionChanged(t,e)},e.prototype.goToPosition=function(t,e,i){var n,s,r,o,a,h;if(e>t)return this.currentFrom<this.currentTo||(i=!1),h=this.stopAnimations(),r=h[0],o=h[1],i?(this.scrollingDuration>0?(this.panAnimF=new Base_Animator(this.currentFrom,t,this.scrollingDuration,"scroll"),this.panAnimT=new Base_Animator(this.currentTo,e,this.scrollingDuration,"scroll"),this.scrollingDuration=null):r||o?(this.panAnimF=r.retarget(t),this.panAnimT=o.retarget(e)):(this.panAnimF=new Base_Animator(this.currentFrom,t,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.panAnimT=new Base_Animator(this.currentTo,e,this.scene.settings.interaction.animation.scrollDuration,"<>")),n=Math.abs((t-e)/(this.currentFrom-this.currentTo+1)),n<1/this.scene.settings.interaction.zooming.zoomHighlightThreshold?this.setZoomHighlight(t,e,!0):n>this.scene.settings.interaction.zooming.zoomHighlightThreshold&&(s=null!=this.dragStartFrom?this.dragStartFrom:this.currentFrom,a=null!=this.dragStartTo?this.dragStartTo:this.currentTo,this.setZoomHighlight(s,a,!1)),this.events.notifySceneChanges({animation:!0})):(this.currentFrom=t,this.currentTo=e,this.clearZoomHighlight(),this.onPositionChanged(t,e),this.onAnimationDone(t,e))},e.prototype.switchCoordinates=function(t,e){var i,n,s,r;return i=this.getFrom(),n=this.getTo(),n>i?(r=(t-i)/(e-n),s=t-i*r,this.currentFrom=this.currentFrom*r+s,this.currentTo=this.currentTo*r+s,this.panAnimF&&this.panAnimF.switchCoordinates(s,r),this.panAnimT?this.panAnimT.switchCoordinates(s,r):void 0):(this.stopAnimations(),this.currentFrom=t,this.currentTo=e)},e.prototype.doAnimations=function(t){var e,i,n;n=t.time,(null!=this.panAnimF||this.panAnimT)&&(e=this.currentFrom,i=this.currentTo,null!=this.panAnimF&&(e=this.currentFrom=this.panAnimF.get(n),this.panAnimF.finished(n)&&(this.panAnimF=null)),null!=this.panAnimT&&(i=this.currentTo=this.panAnimT.get(n),this.panAnimT.finished(n)&&(this.panAnimT=null)),null!=this.panAnimF||this.panAnimT?(this.onPositionChanged(e,i),t.animating=!0):(this.stopAnimations(),this.onPositionChanged(e,i),this.onAnimationDone(e,i)))},e.prototype.stopAnimations=function(){var t,e;return t=this.panAnimF,e=this.panAnimT,this.panAnimF=null,this.panAnimT=null,null!=this.highlight&&(this.highlightRemoveWhenDone?this.clearZoomHighlight():(this.highlight.style.fillColor=this.scene.settings.area.style.zoomHighlightInactive.fillColor,this.events.notifySceneChanges({highlight:!0}))),[t,e]},e.prototype.isActive=function(){return this.active||this.panAnimF||this.pointer1},e.prototype.clearZoomHighlight=function(){return null!=this.highlight?(this.scene.removeHighlight("zoomTrace"),this.highlight=null,this.events.notifySceneChanges({highlight:!0})):void 0},e.prototype.setZoomHighlight=function(t,e,i){return this.highlight=this.scene.setHighlight("zoomTrace",t,e,this.scene.settings.area.style.zoomHighlight),this.highlightRemoveWhenDone=i,this.events.notifySceneChanges({highlight:!0})},e}(Base_ChartElement);var Linearchart_Markers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Markers=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=40,e.prototype.updateOrder=800,e.prototype.scene=null,e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g;if(this.scene.markers.length>0&&null!=this.scene.displayUnit){for(l=this.scene.x0,u=l+this.scene.width,c=Math.round(this.scene.y0),s=this.scene.height,d=Math.round(c+s+.5*this.scene.bottomAxisSize),p=Math.round(c+s+this.scene.bottomAxisSize),i=t.context,Base_Graphics.pushClip(i,l,c,this.scene.width,this.scene.height+this.scene.bottomAxisSize),i.textBaseline="middle",e=this.scene.settings.localization.markerDates.timeFormats[this.scene.displayUnit.unit],Base_Graphics.textStyle(i,this.scene.settings.area.style.markerText),g=this.scene.markers,f=0,m=g.length;m>f;f++)r=g[f],h=this.scene.timeToX(r.time),h+200>=l-1&&u+1>=h-200&&(n=Base_Graphics.beginStrokeAndFill(i,r.style),n.moveTo(h,c),n.lineTo(h,p),Base_Graphics.endStrokeAndFill(i,n,r.style),Base_Graphics.textStyle(n,r.style),o=moment(r.time).utc().format(e),a=i.measureText(o).width,h+a>=u?(i.textAlign="end",h-=2):(i.textAlign="start",h+=2),i.fillText(o,h,d));return Base_Graphics.popClip(i)}},e}(Base_ChartElement);var Linearchart_Highlights,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Highlights=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.highlights={}}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=45,e.prototype.updateOrder=700,e.prototype.scene=null,e.prototype.customId=0,e.prototype.animating=!1,e.prototype.highlights={},e.prototype.doAnimations=function(t){var e,i,n,s,r,o,a,h,l,u,c,p;if(t.changes.highlight){e=[],l=this.highlights;for(i in l)n=l[i],n.mode="exiting",n.origin.keepTrack===!1&&(delete this.highlights[i],e.push(n));for(a=0,h=e.length;h>a;a++)n=e[a],this.highlights["__"+this.customId]=n,this.customId+=1;u=this.scene.highlights;for(i in u)s=u[i],null!=this.highlights[i]?(n=this.highlights[i],n.mode=null,n.from=s.from,n.to=s.to,n.style.fillColor!==s.style.fillColor&&s.style.fadeCross>0?(this.animating=!0,n.animator=new Base_Animator(n.style.fillColor,s.style.fillColor,s.style.fadeCross,"=",t.time)):n.style=Base_Helpers.clone(s.style)):(n={from:s.from,to:s.to,style:Base_Helpers.clone(s.style),origin:s},this.highlights[i]=n,s.style.fadeIn>0&&(this.animating=!0,n.animator=new Base_Animator(Base_Graphics.deriveColor(n.style.fillColor,1,0),n.style.fillColor,n.style.fadeIn,"=",t.time)));c=this.highlights;for(i in c)n=c[i],"exiting"!==n.mode||n.animator||(s=n.origin,s.style.fadeOut>0?(this.animating=!0,n.animator=new Base_Animator(n.style.fillColor,Base_Graphics.deriveColor(n.style.fillColor,1,0),n.style.fadeOut,"=",t.time)):delete this.highlights[i])}if(this.animating){r=!1,o=t.time,p=this.highlights;for(i in p)n=p[i],null!=n.animator&&(n.style.fillColor=n.animator.getColor(o),n.animator.finished(o)?(n.animator=null,"exiting"===n.mode&&delete this.highlights[i]):r=!0);return this.animating=r,t.animating|=r}},e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c;a=this.scene.x0,h=a+this.scene.width,l=Math.round(this.scene.y0),i=this.scene.height,e=t.context,u=this.highlights,c=[];for(o in u)n=u[o],s=Math.max(this.scene.timeToX(n.from),a),r=Math.min(this.scene.timeToX(n.to),h),r>=a&&h>=s&&(Base_Graphics.rectStyle(e,n.style),c.push(e.fillRect(s,l,r-s,i)));return c},e}(Base_ChartElement);var Linearchart_Layers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Layers=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.container=Base_Helpers.createDom("div","DVSL-container"),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="300px",this.background=Base_Helpers.createDom("div","DVSL-background",null,this.container),this.setContainerStyle(this.background),this.backgroundImage=Base_Helpers.createDom("div","DVSL-background-image",null,this.container),this.setContainerStyle(this.backgroundImage),this.timeAxisPanel=Base_Helpers.createDom("div","DVSL-TC-timeAxis",null,this.container),this.setContainerStyle(this.timeAxisPanel),this.canvas=Base_Helpers.createDom("canvas","DVSL-canvas",null,this.container),this.setContainerStyle(this.canvas),this.valueAxisPanel=Base_Helpers.createDom("div","DVSL-valueAxis",null,this.container),this.setContainerStyle(this.valueAxisPanel),this.secondaryValueAxisPanel=Base_Helpers.createDom("div","DVSL-valueAxis",null,this.container),this.setContainerStyle(this.secondaryValueAxisPanel),this.resizerBar=Base_Helpers.createDom("div","DVSL-resizer",null,this.container),this.outerBorder=Base_Helpers.createDom("div","DVSL-border",null,this.container),this.setContainerStyle(this.outerBorder),this.mouseTrackLayer=Base_Helpers.createDom("div",null,null,this.container),this.mouseTrackLayer.tabIndex=0,this.mouseTrackLayer.style.outline="none",this.setContainerStyle(this.mouseTrackLayer),this.updateSettings(this.scene.settings,"init")}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=50,e.prototype.updateOrder=600,e.prototype.chart=null,e.prototype.scene=null,e.prototype.container=null,e.prototype.background=null,e.prototype.backgroundImage=null,e.prototype.canvas=null,e.prototype.valueAxisPanel=null,e.prototype.timeAxisPanel=null,e.prototype.outerBorder=null,e.prototype.mouseTrackLayer=null,e.prototype.curTheme=null,e.prototype.updateSettings=function(t){return Base_Helpers.hasProp(t,"area.style.image")&&(this.backgroundImage.style.backgroundImage=t.area.style.image?"url("+t.area.style.image+")":""),Base_Helpers.hasProp(t,"advanced.themeCSSClass")?(null!=this.curTheme&&Base_Helpers.removeClass(this.container,this.curTheme),this.curTheme=this.scene.settings.advanced.themeCSSClass,Base_Helpers.addClass(this.container,this.curTheme)):void 0},e.prototype.doAnimations=function(t){var e,i;if(t.changes.bounds)return i=this.scene.settings.width,e=this.scene.settings.height,this.scene.chartWidth>10+this.container.clientWidth&&this.container&&""!==this.container.style.display&&(i=this.scene.chartWidth),this.scene.chartHeight>10+this.container.clientHeight&&this.container&&""!==this.container.style.display&&(e=this.scene.chartHeight),i&&(this.container.style.width=""+i+"px"),e&&(this.container.style.height=""+e+"px"),this.background.style.left=""+this.scene.x0+"px",this.background.style.right=""+(this.scene.chartWidth-(this.scene.x0+this.scene.width))+"px",this.backgroundImage.style.left=""+this.scene.x0+"px",this.backgroundImage.style.right=""+(this.scene.chartWidth-(this.scene.x0+this.scene.width))+"px",this.backgroundImage.style.bottom=""+this.scene.bottomMargin+"px",this.valueAxisPanel.style.width=""+this.scene.leftMargin+"px",this.valueAxisPanel.style.bottom=""+this.scene.bottomMargin+"px",this.secondaryValueAxisPanel.style.width=""+this.scene.rightMargin+"px",this.secondaryValueAxisPanel.style.bottom=""+this.scene.bottomMargin+"px",this.timeAxisPanel.style.top=""+(this.scene.y0+this.scene.height)+"px",this.timeAxisPanel.style.left=""+this.scene.x0+"px",this.timeAxisPanel.style.width=""+this.scene.width+"px",this.outerBorder.style.left=""+this.scene.x0+"px",this.outerBorder.style.width=""+this.scene.width+"px",this.resizerBar.style.width=""+this.scene.width+"px",this.resizerBar.style.left=""+this.scene.x0+"px"},e.prototype.setContainerStyle=function(t){return t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px"},e}(Base_ChartElement);var Linearchart_Highlight,Linearchart_Marker,Linearchart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Marker=function(){function t(){}return t.prototype.time=0,t.prototype.label=0,t.prototype.style=null,t}(),Linearchart_Highlight=function(){function t(){}return t.prototype.from=0,t.prototype.to=0,t.prototype.style=null,t}(),Linearchart_Scene=function(t){"use strict";function e(){e.__super__.constructor.call(this),this.highlights={},this.markers=[]}return __extends(e,t),e.prototype.settings=null,e.prototype.bottomAxisSize=0,e.prototype.hoverSeriesItem=null,e.prototype.xyInChart=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height},e.prototype.xyInChartOrBottom=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height+this.bottomAxisSize},e.prototype.xyInBottom=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0+this.height&&e<this.y0+this.height+this.bottomAxisSize},e.prototype.timeToX=function(){throw"Need to implement timeToX"},e.prototype.xToTime=function(){throw"Need to implement xToTime"},e.prototype.setHighlight=function(t,e,i,n){var s;return s=this.highlights[t],null==s&&(s={},this.highlights[t]=s),s.from=e,s.to=i,s.style=n,s},e.prototype.removeHighlight=function(t,e){return null==e&&(e=!1),null!=this.highlights[t]?(this.highlights[t].keepTrack=e,delete this.highlights[t]):void 0},e}(Base_Scene);var Linearchart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_InfoPopup=function(t){"use strict";function e(t){this.chart=t,this.container=t.layers.container,this.scene=t.scene,this.events=t.events,this.popup=new Base_InfoPopup(this.chart)}return __extends(e,t),e.prototype.animationOrder=10,e.prototype.t0=0,e.prototype.t1=0,e.prototype.object=null,e.prototype.popup=null,e.prototype.visible=!1,e.prototype.activePointer=null,e.prototype.pointerX=0,e.prototype.pointerY=0,e.prototype.getPopupAreaMouseMoved=function(){return null},e.prototype.buildHeader=function(){return""},e.prototype.popupHidden=function(){return null},e.prototype.show=function(t){return this.scene.settings.info.enabled?(this.pointerX=t.x,this.pointerY=t.y,this.updatePopup(t)):void 0},e.prototype.previewPointerMove=function(t){return this.scene.settings.info.enabled&&(null===this.activePointer||(this.activePointer=t.identifier))?(this.pointerX=t.x,this.pointerY=t.y,this.updatePopup(t)):void 0},e.prototype.previewPointerDrag=function(t){return!this.scene.settings.info.enabled||null!==this.activePointer&&this.activePointer!==t.identifier?void 0:(this.activePointer=t.identifier,this.pointerX=t.x,this.pointerY=t.y)},e.prototype.previewPointerCancel=function(t){return null!==this.activePointer&&this.activePointer===t.identifier?this.activePointer=null:void 0},e.prototype.previewPointerUp=function(t){return null!==this.activePointer&&this.activePointer===t.identifier?this.activePointer=null:void 0},e.prototype.previewPointerOut=function(t){return null!==this.activePointer&&this.activePointer!==t.identifier||t.touch?void 0:(this.activePointer=null,this.pointerX=null,this.pointerY=null,Base_Helpers.isParentOf(this.popup,t.target)?void 0:this.hideInfoPopup(t))},e.prototype.previewPointerDown=function(t){return null===this.activePointer?(this.activePointer=t.identifier,t.touch?this.previewPointerMove(t):this.hideInfoPopup(t)):void 0},e.prototype.updatePopup=function(t){var e,i,n,s,r;return this.pointerX||this.pointerY?(i=this.getPopupMouseMoved(this.pointerX,this.pointerY,this.t0,this.t1,this.object,this.contents),i?(s=i[0],r=i[1],n=i[2],e=i[3],this.showInfoPopup(s,r,n,e,t)):this.hideInfoPopup(t)):void this.hideInfoPopup(t)},e.prototype.showInfoPopup=function(t,e,i,n,s){var r;if(!this.popup.visible||t!==this.t0||e!==this.t1||i!==this.object)return this.t0=t,this.t1=e,this.object=i,this.contents=n,this.scene.setHighlight("infoRange",t,e,this.scene.settings.info.style.highlight),r=this.scene.y0,this.popup.show(this.scene.timeToX(this.t0),this.scene.timeToX(this.t1),r,n),s.changes.infoLabel=!0,s.changes.highlight=!0},e.prototype.hideInfoPopup=function(t){return this.popup.visible?(this.popupHidden(t),this.popup.hide(),this.t0=0,this.t1=0,this.scene.removeHighlight("infoRange"),t.changes.infoLabel=!0,t.changes.highlight=!0):void 0},e.prototype.paintScene=function(){return this.popup.visible?this.updateXY():void 0},e.prototype.updateXY=function(){var t;return t=this.scene.y0,this.popup.updateXY(this.scene.timeToX(this.t0),this.scene.timeToX(this.t1),t)},e.prototype.getPopupMouseMoved=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m;return this.scene.displayUnit&&!this.scene.xyInChartOrBottom(t,e)?null:(a=this.getPopupAreaMouseMoved(t,e))?(f=a[0],m=a[1],d=null,c=null,p=this.scene.hoverSeriesItem,h=this.scene.settings.info.advanced.scope,l=f,u=m,null!=p&&(c=p.seriesIndex,("stack"===h||"value"===h||"auto"===h&&null!=c)&&(l=this.scene.xToTime(p.x0),u=this.scene.xToTime(p.x1)),d=p.stack),null==l?null:l===i&&u===n&&c===s?[i,n,s,r]:(o=this.buildContent(f,m,c,d),[l,u,c,o])):null},e.prototype.buildContent=function(t,e,i,n){var s,r,o,a;return s=this.buildHeader(t,e),r=this.chart.renderer.exportData(t,e),this.scene.settings.info.advanced.contentsFunction?(o=null,null!==i&&this.scene.settings.series.length>i&&(o=this.scene.settings.series[i]),a=this.scene.settings.info.advanced.contentsFunction.call(this.chart.api,r,o)):a=this.buildValues(r,i,n),s+a},e.prototype.buildValues=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;for(a=this.scene.settings.localization.noDataLabel,f=this.scene.settings.info.valueFormatterFunction,u=this.scene.settings.info.advanced.showOnlyHoveredSeries?this.scene.settings.info.advanced.scope:null,d=i&&("stack"===u||"value"===u)||"auto"===u&&null!=e,o="value"===u,h="",m=0,_=t.length;_>m;m++){if(s=t[m],d){for(r=!1,S=s.data,g=S.length-1;g>=0;g+=-1)p=S[g],p.config.showInLegend&&(p.values||this.chart.scene.settings.info.showNoData)&&(r|=null!==e&&p.config===this.scene.settings.computedSeries[e]||i===s.stack);if(!r)continue}for(s.name&&s.data.length>1&&(h+="<h3>"+s.name+"</h3>"),h+='<table cellspacing="0">',b=s.data,y=b.length-1;y>=0;y+=-1)if(p=b[y],c=null!==e&&p.config===this.scene.settings.computedSeries[e],p.config.showInLegend&&(p.values||this.chart.scene.settings.info.showNoData)&&(!o||c)){if(h+="<tr><td",n=p.config.style.lineColor||p.config.style.fillColor,n&&(h+=' style="color: '+n+'"'),h+=">",c&&(h+="<div class='DVSL-info-selected' style='background-color: "+n+"'></div>"),h+=""+(p.name||s.name),h+="</td><td>",f)h+=f.call(this.chart.api,p.values,p.config);else if(p.values)if(p.values.count>1&&this.scene.settings.info.aggregations&&this.scene.settings.info.aggregations.length>0)for(w=this.scene.settings.info.aggregations,v=0,x=w.length;x>v;v++)l=w[v],h+=""+Base_Helpers.numberFormat(p.values[l])+("&nbsp;("+l+")");else h+=Base_Helpers.numberFormat(p.values.sum);else h+=a;h+="</td></tr>"}h+="</table>"}return h},e}(Base_ChartElement);var Piechart_View,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_View=function(t){function e(t){this.chart=t,this.animationOrder=1007}return __extends(e,t),e.prototype.updatePie=function(){return!0},e.prototype.scrollForward=function(){return!0},e.prototype.scrollBackward=function(){return!1},e.prototype.onSceneChange=function(){},e.prototype.doAnimations=function(){},e.prototype.paintScene=function(){},e.prototype.getMovement=function(){return[0,0]},e.prototype.findSliceAt=function(){},e.prototype.findPieAt=function(){},e.prototype.findLabelAt=function(){},e}(Base_ChartElement);var Piechart_Animations;Piechart_Animations=function(){function t(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.prevTime=0,this.radiusAnimator=null,this.innerRadiusAnimator=null}return t.prototype.doAnimations=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J;for(p=this.prevTime?Math.min(30,t.time-this.prevTime):0,T=this.scene.settings.interaction.animation.scrollDuration,f=this.scene.settings.interaction.animation.hoverDuration,M=t.time,_=[],l=[],b=!1,this.scene.settings.pie.adaptiveRadius?(this.innerRadiusAnimator||(this.innerRadiusAnimator=new Base_Animator(0,this.scene.innerRadius,T,"<>",M),this.radiusAnimator=new Base_Animator(0,this.scene.radius,T,"<>",M)),R=this.radiusAnimator.updateAndGet(this.scene.radius,M),this.scene.currentRadius=R[0],s=R[1],H=this.innerRadiusAnimator.updateAndGet(this.scene.innerRadius,M),this.scene.currentInnerRadius=H[0],r=H[1],b||(b=s||r),t.animating||(t.animating=b)):(this.scene.currentRadius!==this.scene.radius||this.scene.currentInnerRadius!==this.scene.innerRadius)&&(b=!0,this.scene.currentRadius=this.scene.radius,this.scene.currentInnerRadius=this.scene.innerRadius),c=this.scene.currentRadius-this.scene.currentInnerRadius,g=c>0?-this.scene.currentInnerRadius/c:0,G=this.scene.pies,k=0,A=G.length;A>k;k++)if(y=G[k],v=!1,(t.changes.pie||t.changes.bounds)&&(v=!0),w=!1,y.removed===!0&&(y.removed=M+T),y.removed&&(t.animating=!0,w=y.removed<M),w)_.push(y);else{for(y.animatorA0||(v=!0,y.animatorA0=new Base_Animator(y.currentStartAngle,y.startAngle,T,"<>",M),y.animatorA1=new Base_Animator(y.currentEndAngle,y.endAngle,T,"<>",M),y.animatorR0=new Base_Animator(y.currentInnerRadius,y.innerRadius,T,"<>",M),y.animatorR1=new Base_Animator(y.currentRadius,y.radius,T,"<>",M),this.scene.settings.advanced.initialAnimation||(y.animatorA0.jump(y.startAngle),y.animatorA1.jump(y.endAngle),y.animatorR0.jump(y.innerRadius),y.animatorR1.jump(y.radius))),e=y.animatorA0,i=y.animatorA1,x=y.animatorR0,S=y.animatorR1,V=e.updateAndGet(y.startAngle,M),y.currentStartAngle=V[0],s=V[1],W=i.updateAndGet(y.endAngle,M),y.currentEndAngle=W[0],r=W[1],Z=S.updateAndGet(y.radius,M),y.currentRadius=Z[0],o=Z[1],j=x.updateAndGet(y.innerRadius,M),y.currentInnerRadius=j[0],a=j[1],y.currentInnerRadius=Math.min(y.currentInnerRadius,y.currentRadius),v||(v=s||r||o||a),P=[],h=!1,q=y.allSlices,D=0,I=q.length;I>D;D++)C=q[D],C.animatorF||(v=!0,C.animatorF=new Base_Animator(C.currentFraction,C.fraction,T,"<>",M)),X=C.animatorF.updateAndGetFixed(C.fraction,M),C.currentFraction=X[0],n=X[1],h||(h=n),C.removed&&0===C.currentFraction&&P.push(C);if(v||(v=h),P.length>0)for(v=!0,L=0,F=P.length;F>L;L++)C=P[L],Base_Helpers.removeFromArray(y.slices,C),Base_Helpers.removeFromArray(y.allSlices,C),C===y.othersSlice&&(y.othersSlice=null),C===y.previousSlice&&(y.previousSlice=null);for(J=y.allSlices,B=0,O=J.length;O>B;B++)C=J[B],C.animatorLineColor||(v=!0,C.animatorLineColor=new Base_Animator(C.currentLineColor,C.targetLineColor,f,"<>",M),C.animatorFillColor=new Base_Animator(C.currentFillColor,C.targetFillColor,f,"<>",M),C.animatorCutout=new Base_Animator(C.currentCutoutDistance,C.cutoutDistance,f,"<>",M)),m=C.animatorLineColor,d=C.animatorFillColor,u=C.animatorCutout,U=m.updateColorAndGet(C.targetLineColor,M),C.currentLineColor=U[0],s=U[1],Y=d.updateColorAndGet(C.targetFillColor,M),C.currentFillColor=Y[0],r=Y[1],C.userPlaced||(z=u.updateAndGet(C.cutoutDistance,M),C.currentCutoutDistance=z[0],o=z[1]),v||(v=s||r||o);(v||b)&&l.push(y),t.animating||(t.animating=v)}for(N=0,E=_.length;E>N;N++)y=_[N],this.scene.deletePie(y);return this.prevTime=M,l},t}();var Piechart_LabelLayout,Piechart_PieLayout,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_PieLayout=function(){"use strict";function t(t,e){this.chart=t,this.view=e,this.scene=t.scene,this.events=t.events}return t.prototype.placeStack=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T;if(v=this.scene.settings,s=v.pie.depth,p=!1,o=this.scene.height-2*s,o=Math.max(2,o),x=v.pie.x,S=v.pie.y,null===x?x=this.scene.x0+this.scene.width/2:x>=0&&1>=x&&(x=this.scene.x0+this.scene.width*x),null===S?S=this.scene.y0+o/2:S>=0&&1>=S&&(S=this.scene.y0+this.scene.height*S),u=Math.min(o/2,this.scene.width/2),u-=v.pie.outerMargin,m=v.pie.radius,m?1>=m&&(m=u*m):v.labels.enabled&&v.pie.adaptiveRadius?(n=this.computeDesiredRadiusFromLabels(t,e),n=Math.min(u,n),n-=v.labels.connectorLength,n=Math.max(n,u/3),m=n):m=u,l=v.pie.innerRadius,1>l&&(l=m*l),this.scene.stack.length>1&&(h=v.pie.innerRadiusWhenDrilldown,1>h&&(h=m*h),l=Math.max(l,h)),_=v.pie.startAngle,r=v.pie.endAngle,m===l?(c=0,i=0):(c=1/(m-l),i=-l*c),(t.x!==x||t.y!==S||this.scene.radius!==m||this.scene.innerRadius!==l||_!==t.startAngle||r!==t.endAngle)&&(p=!0),this.scene.radius=m,this.scene.innerRadius=l,t.x=x,t.y=S,t.radius=1,t.innerRadius=l*c+i,t.startAngle=_,t.endAngle=r,f=this.scene.stack,d=f.length-1,d>0)for(l-=v.pie.margin,y=d,g=Math.max(0,Math.min(m-l,(l-v.pie.centerMargin)/y)),a=b=P=d-1;b>=0;a=b+=-1)m=l,l-=g,t=f[a],S+=s,t.x=x,t.y=S,t.radius=m*c+i,t.innerRadius=(l+v.pie.margin)*c+i,t.brightness=.8-.8*(y-a-1)/y,t.startAngle=v.pie.startAngle,t.endAngle=v.pie.endAngle;for(M=this.scene.pies,w=0,C=M.length;C>w;w++)t=M[w],t.removed&&t.parentSlice&&(T=this.scene.getSliceTargetAngles(t.parentSlice),t.startAngle=T[0],t.endAngle=T[1]);return p},t.prototype.computeDesiredRadiusFromLabels=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O;for(m=new Piechart_LabelLayout(e,1,0,100,0,100,this.scene.settings.slice.labelStyle,this.scene.settings.labels),f=m.lineHeightC+m.lineHeightM,y=0,w=0,g=0,b=0,p=0,T=t.startAngle,c=t.endAngle,l=c-T,o=t.startAngle+t.scrollOffset*l,M=o,F=t.slices,L=0,A=F.length;A>L;L++)if(C=F[L],P=M,p=Math.min(1,p+C.fraction),M=o+p*l,n=Math.max(P,T),s=Math.min(M,c),!(n>=c||T>=s)&&(r=(n+s)/2,C.label)){for(v="",O=C.label.split(" "),B=0,I=O.length;I>B;B++)k=O[B],k.length>v.length&&(v=k);d=e.measureText(v).width,k=e.measureText(C.label).width,i=f*k*1.2,D=Math.cos(r),D>0?(b+=i,w=Math.max(w,d)):(g+=i,y=Math.max(y,d))}return u=Math.min(this.scene.width,this.scene.height),a=this.scene.width*u,h=Math.max(1,a-2*Math.max(g,b)*1.2),x=Math.sqrt(h/Math.PI),_=Math.max(y,w),S=this.scene.width/2-1.1*_,Math.min(x,S)},t.prototype.placeLabels=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W;for(h=this.scene.settings.labels,S=h.enabled,G=this.scene.settings.icons.sizeExtent,m=G[0],f=G[1],g=this.scene.settings.icons.placement,d=this.scene.settings.icons.autohideWhenTooSmall,this.scene.settings.advanced.iconMinSize&&(m=this.scene.settings.advanced.iconMinSize),C=this.scene.settings.slice.margin,H=t.x,U=t.y,s=this.scene.currentInnerRadius,P=this.scene.currentRadius-s,T=t.currentInnerRadius*P+s,k=t.currentRadius*P+s,c=0,E=t.currentStartAngle,u=t.currentEndAngle,l=u-E,o=t.currentStartAngle+t.scrollOffset*l,b=this.scene.x0-H,B=b+this.scene.width,R=this.scene.y0-U,a=R+this.scene.height,v=new Piechart_LabelLayout(e,k,b,B,R,a,this.scene.settings.slice.insideLabelStyle,this.scene.settings.labels),M=new Piechart_LabelLayout(e,k,b,B,R,a,this.scene.settings.slice.labelStyle,this.scene.settings.labels),w=[],A=[],O=o,V=t.allSlices,Y=0,z=V.length;z>Y;Y++)I=V[Y],F=O,c=Math.min(1,c+I.currentFraction),O=o+c*l,i=Math.max(F,E),n=Math.min(O,u),D=T+I.currentCutoutDistance,L=k+I.currentCutoutDistance,i>=u||E>=n?(I.currentLabel=null,I.currentInsideLabel=null,I.currentIcon=null):(r=(i+n)/2,I.removed||t.background?(I.currentLabel=null,I.currentInsideLabel=null):(I.insideLabel&&S?(N=I.insideLabel,I.currentInsideLabel?x=I.currentInsideLabel:(x=I.currentInsideLabel=new Base_Label,x.align="center"),I.currentInsideLabel.text!==N&&(x.text=N,x.measureDone=!1),_=v.fitLabelInSlice(x,D,L,i,n),x.shouldBeVisible="always"===h.insideLabel||_>=h.insideLabelVisibilityFraction,x.shouldBeVisible||I===this.scene.hoverSlice||x.userPlaced||(x.visible=!1)):I.currentInsideLabel=null,N=I.label&&S?I.label:"","append"===h.insideLabel&&I.insideLabel&&S&&!I.currentInsideLabel.userPlaced&&!I.currentInsideLabel.shouldBeVisible&&(N?(H=Math.cos(r),N=H>0?I.insideLabel+", "+N:N+", "+I.insideLabel):N=I.insideLabel),N?(x=null,x=I.currentLabel?I.currentLabel:I.currentLabel=new Base_Label,I.currentLabel.text!==N&&(x.text=N),x.userPlaced||M.placeOutsideLabelInitial(x,r),x.x>0?(x.align="left",A.push(x)):(x.align="right",w.push(x))):I.currentLabel=null),p=null,!I.icon||t.background&&I.id!==t.activeSliceId||(W=v.fitBoxInSlice(1,1,D,L,i,n),H=W[0],U=W[1],y=W[2],y-=C,(!d||2*y>=m)&&(y=Math.max(Math.min(y,f/2),m/2),p=new Piechart_Icon,p.hwidth=y,p.hheight=y,p.inside=!0,I.iconOffset?(p.x=0,p.y=0,this.applyOffset(p,I.iconOffset,D,L,i,n)):"center"===g?(p.x=0,p.y=0,this.applyOffset(p,[0,0,0,0],D,L,i,n)):(p.x=H,p.y=U))),I.currentIcon=p);return M.computeOutsideLabelLocations(w,A)},t.prototype.applyOffset=function(t,e,i,n,s,r){var o,a,h,l,u,c;return e.length>=2&&(o=e[0],a=e[1]),e.length>=4?(l=e[2],h=e[3]):(l=0,h=0),c=i+(n-i)*(l+1)/2,u=s+(r-s)*(h+1)/2,o+=Math.cos(u)*c,a+=Math.sin(u)*c,t.x+=o,t.y+=a},t}(),Piechart_LabelLayout=function(t){function e(t,i,n,s,r,o,a,h){this.left=n,this.right=s,this.top=r,this.bottom=o,this.config=h,e.__super__.constructor.call(this,t,a),this.rr=i+h.connectorLength,this.interLabelSpacing=Math.max(h.interLabelSpacing*this.lineHeight,this.margin)}return __extends(e,t),e.prototype.placeOutsideLabelInitial=function(t,e){var i,n,s;return n=this.rr*Math.cos(e),s=this.rr*Math.sin(e),i=1,s<this.top&&(i=Math.min(i,this.top/s)),s>this.bottom&&(i=Math.min(i,this.bottom/s)),n<this.left&&(i=Math.min(i,this.left/n)),n>this.right&&(i=Math.min(i,this.right/n)),t.x=n*i,t.y=s*i},e.prototype.computeOutsideLabelLocations=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I;for(s=this.bottom-this.margin,m=this.top+this.margin,u=this.interLabelSpacing,t.sort(function(t,e){return e.y-t.y}),e.sort(function(t,e){return t.y-e.y}),v=0,b=t.length;b>v;v++)h=t[v],h.originX=h.x;for(_=0,w=e.length;w>_;_++)h=e[_],h.originX=h.x;for(i="wrap"===this.config.placement?[!1]:[!0,!1],I=[],x=0,C=i.length;C>x;x++){for(n=i[x],y=100,o=!1,A=[t,e],S=0,P=A.length;P>S;S++){for(p=A[S],D=0,M=p.length;M>D;D++)h=p[D],h.prop=this.fitLabelOutside(h,n);for(d=s-m,g=[],a=0,L=0,T=p.length;T>L;L++)h=p[L],h.visible&&(r=2*h.hheight+u,d>a+r?(g.push(h),a+=r):h.visible=h.userPlaced);for(l=s,c=m,p===t?c+=a:l-=a,B=0,k=g.length;k>B;B++)h=g[B],p===t?c-=2*h.hheight+u:l+=2*h.hheight+u,!h.userPlaced&&(h.y+h.hheight>l||h.y-h.hheight<c)?(h.y=Math.min(Math.max(h.y,c+h.hheight),l-h.hheight),f=this.fitLabelOutside(h,n),y=Math.min(f,y),o||(o=h.lines&&h.lines.length>1)):y=Math.min(y,h.prop),p===t?l=h.y-h.hheight-u:c=h.y+h.hheight+u}if(y>=1||!o)break;I.push(void 0)}return I},e.prototype.fitLabelOutside=function(t,e){var i;return null==e&&(e=!1),i=function(i){return function(n){return t.userPlaced?i.getOutsideMaxWidth(t.x,t.y,n,!1):i.placeOutsideMaxWidth(t.originX,t.y,n,e)}}(this),this.fitLabelInRect(t,t.align,t.align,i)},e.prototype.fitLabelInSlice=function(t,e,i,n,s){var r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;return r=Math.cos(n),a=Math.cos(s),u=Math.min(r,a),p=Math.max(r,a),c=0>u&&0>p||-u>2*p?"right":u>0&&p>0||p>2*-u?"left":"center",t.userPlaced?(v=t.x,_=t.y):(f=2*e>=i?.5:.5+(i-2*e)/i/4,d=e+(i-e)*f,o=(n+s)/2,l=Math.cos(o),m=Math.sin(o),v=d*l,_=d*m),y=_-this.rayIntersectsSlice(v,_,0,-1,e,i,n,s),h=_+this.rayIntersectsSlice(v,_,0,1,e,i,n,s),g=function(t){return function(r,o){var a,l;
return!(i>0)||y>=o||o>=h?[1e-5,1e-5]:(a=t.rayIntersectsSlice(r,o,-1,0,e,i,n,s),l=t.rayIntersectsSlice(r,o,1,0,e,i,n,s),[a,l])}}(this),this.fitLabelInLines(t,v,_,"center",c,g)},e.prototype.placeOutsideMaxWidth=function(t,e,i,n){var s,r,o,a,h,l,u;return u=this.rr,l=e-i/2,o=l+i,l<this.top&&(s=this.top-l,l+=s,o+=s),o>this.bottom&&(s=this.bottom-o,l+=s,o+=s),a=this.left,h=this.right,r=n?u:l>u||-u>o?0:l>0?Math.sqrt(u*u-l*l):0>o?Math.sqrt(u*u-o*o):u,t>0?a=Math.max(r,t):h=Math.min(t,-r),[(a+h)/2,(l+o)/2,1,0,h-a]},e.prototype.getOutsideMaxWidth=function(t,e,i,n){var s,r,o,a,h,l,u;return l=e-i/2,o=l+i,a=this.left,h=this.right,u=this.rr,r=n?u:l>u||-u>o?0:l>0?Math.sqrt(u*u-l*l):0>o?Math.sqrt(u*u-o*o):u,t>0?a=r:h=-r,s=Math.min(Math.abs(t-a),Math.abs(t-h)),[t,e,1,0,2*s]},e.prototype.fitBoxInSlice=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g,y,v,_;return g=.5+(n-i)/n/4,m=i+(n-i)*g,o=(s+r)/2,a=Math.cos(o),y=Math.sin(o),v=m*a,_=m*y,p=t,d=e,h=this.rayIntersectsSlice(v,_,p,d,i,n,s,r),l=this.rayIntersectsSlice(v,_,-p,d,i,n,s,r),u=this.rayIntersectsSlice(v,_,-p,-d,i,n,s,r),c=this.rayIntersectsSlice(v,_,p,-d,i,n,s,r),f=Math.min(h,l,u,c),[v,_,f]},e.prototype.rayIntersectsSlice=function(t,e,i,n,s,r,o,a){var h,l,u;return l=Base_Geometry.rayIntersectsCircle(t,e,i,n,s),l=Math.min(l,Base_Geometry.rayIntersectsCircle(t,e,i,n,r)),h=Math.cos(o),u=Math.sin(o),l=Math.min(l,Base_Geometry.rayIntersectsLine(t,e,i,n,s*h,s*u,r*h,r*u)),h=Math.cos(a),u=Math.sin(a),l=Math.min(l,Base_Geometry.rayIntersectsLine(t,e,i,n,s*h,s*u,r*h,r*u))},e}(Base_LabelLayoutBase);var Piechart_PieRenderer;Piechart_PieRenderer=function(){"use strict";function Piechart_PieRenderer(t){this.chart=t,this.settings=t.settings,this.scene=t.scene,this.events=t.events,this.itemRenderer=new Base_LabelRenderer(t)}return Piechart_PieRenderer.prototype.onSceneChange=function(t){return t.changes.settings?this.buildSeries():void 0},Piechart_PieRenderer.prototype.buildSeries=function(){var c,e,theme;theme=this.settings.pie.theme,c="PieChart_Renderer_"+theme.charAt(0).toUpperCase()+theme.slice(1);try{return eval("this.renderer = new "+c+"(this);")}catch(_error){throw e=_error,"Renderer "+theme+" is not available: "+e}},Piechart_PieRenderer.prototype.paintScene=function(t){var e,i,n,s,r,o,a;for(e=t.context,i=t["export"]?this.settings.pie.showInnerPiesExport:this.settings.pie.showInnerPies,a=this.scene.pies,s=r=0,o=a.length;o>r;s=++r)n=a[s],(i||!n.background)&&this.paintPie(e,n);(Base_Helpers.arrayContains(this.scene.pies,this.scene.hoverPie)||this.scene.settings.advanced.backAlwaysVisible)&&this.paintBackArrow(t)},Piechart_PieRenderer.prototype.paintBackArrow=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d;if(!t["export"]&&this.scene.pies.length>1&&(o=this.scene.settings.getAssetImage(this.scene.settings.advanced.backImage),o&&o.width))return l=this.scene.pies[this.scene.pies.length-1],a=.707106781186547,c=l.x,p=l.y,e=this.settings.pie.depth,p+=(this.scene.pies.length-1)*e,r=o.width/2,s=o.height/2,h=l.innerRadius*a,u=Math.min(r,Math.max(h,r/2))/r,n=Math.min(s,Math.max(h,s/2))/s,d=Math.min(u,n),i=t.context,i.globalAlpha=.5,i.drawImage(o,c-r*d,p-s*d,2*r*d,2*s*d),i.globalAlpha=1},Piechart_PieRenderer.prototype.paintPie=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J,Q,K,$,te;if(B=this.settings.slice.margin,H=e.x,Y=e.y,r=this.scene.currentInnerRadius,x=this.scene.currentRadius-r,P=Math.max(e.currentInnerRadius*x+r,B/2),M=e.currentRadius*x+r,E=e.currentStartAngle,c=e.currentEndAngle,l=c-E,h=E+e.scrollOffset*l,M>0&&l>0){for(w=P>0?1/P:0,C=1/M,A=B/2*w,I=B/2*C,L=[],Q=e.allSlices,G=0,j=Q.length;j>G;G++)k=Q[G],D=k.currentFraction*l,D>0&&(a=h,h+=D,F=P+k.currentCutoutDistance,O=M+k.currentCutoutDistance,4*I>=D?(_=(a+h)/2,s=D/4,S=_-s,b=_+s):(S=a+I,b=h-I),m=a+A,g=h-A,m>g&&(m=g=(m+g)/2),E>b||S>c||(S=Math.max(S,E),b=Math.min(b,c),m=Math.max(m,E),g=Math.min(g,c),m>g&&(m=g=(m+g)/2),k.renderParams=[F,O,S,b,m,g],k.fillColor_b=k.fillColor,k.lineColor_b=k.lineColor,k.fillColor=k.currentFillColor,k.lineColor=k.currentLineColor,L.push(k)));for(H=e.x,Y=e.y,this.renderer.paintPie(t,H,Y,P,M,e.currentStartAngle,e.currentEndAngle,e),this.renderer.paintSlices(t,H,Y,L),e===this.scene.peek()&&this.renderer.paintExpandableHilights(t,H,Y,L),V=0,q=L.length;q>V;V++)k=L[V],k.fillColor=k.fillColor_b,k.lineColor=k.lineColor_b;if(!e.removed){for(Base_Graphics.clearShadow(t),K=e.allSlices,W=0,X=K.length;X>W;W++)k=K[W],k.currentIcon&&(f=this.scene.settings.getAssetImage(k.icon),f&&(d=k.currentIcon,U=H+d.x,z=Y+d.y,R=Math.min(f.width/2,d.hwidth),p=Math.min(f.height/2,d.hheight),t.drawImage(f,U-R,z-p,2*R,2*p)));for(N=this.settings.labels.textStyle,y=this.settings.labels.insideTextStyle,u=this.settings.labels.backgroundStyle,h=E+e.scrollOffset*l,$=e.allSlices,te=[],Z=0,J=$.length;J>Z;Z++)k=$[Z],D=k.currentFraction*l,a=h,h=a+D,i=Math.max(a,E),n=Math.min(h,c),o=(i+n)/2,v=k===this.scene.hoverSlice,T=M+k.currentCutoutDistance,k.currentInsideLabel&&k.currentInsideLabel.visible&&this.paintLabel(t,H,Y,T,o,k.currentInsideLabel,k.insideLabelStyle,v),te.push(k.currentLabel&&k.currentLabel.visible?this.paintLabel(t,H,Y,T,o,k.currentLabel,k.labelStyle,v):void 0);return te}}},Piechart_PieRenderer.prototype.paintLabel=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F;if(_=this.scene.y0,l=_+this.scene.height,f=this.settings.labels,k=r.x,F=r.y,b=r.hwidth,d=r.hheight,g=n+f.connectorLength,0>k+b?(M=k+b,A=F):k+b>=0?(M=k-b,A=F):(M=k,A=F>0?F-d:F+d),f.connectors&&M*M+A*A>n*n){if(y=Math.sin(s),c=Math.cos(s),t.beginPath(),w=e+n*c,D=i+n*y,t.moveTo(w,D),C=e+g*c,L=i+g*y,L=Math.min(Math.max(L,_),l),M+=e,A+=i,m=(n+g)/2,v=Base_Geometry.rayIntersectsCircle(M-e,A-i,w-M,D-A,n),h=Base_Geometry.lineTouchingCircle(M-e,A-i,C-e,L-i,g),.9>v&&h){for(T=h[0],I=h[1],x=Math.atan2(I,T);x-s>Math.PI;)x-=2*Math.PI;for(;x-s<-Math.PI;)x+=2*Math.PI;p=x-s,T+=e,I+=i,C=e+m*c,L=i+m*y,L=Math.min(Math.max(L,_),l),P=e+m*Math.cos(s+.2*p),B=i+m*Math.sin(s+.2*p),B=Math.min(Math.max(B,_),l),t.quadraticCurveTo(C,L,P,B),Base_Graphics.arcBetweenTwoPoints(t,e,i,m,P,B,e+g*Math.cos(x),i+g*Math.sin(x)),t.lineTo(M,A)}else t.quadraticCurveTo(C,L,M,A);u=this.settings.slice.connectorStyle,S=u.lineWidth,a&&(u.lineWidth+=2),Base_Graphics.stroke(t,u),u.lineWidth=S}return this.itemRenderer.paintWithStyle(t,e+r.x,i+r.y,1,r,o),Base_Graphics.clearShadow(t)},Piechart_PieRenderer}();var Piechart_PieBuilder;Piechart_PieBuilder=function(){"use strict";function t(t){this.chart=t,this.scene=t.scene,this.loading=!1}return t.prototype.updatePie=function(t){var e,i,n,s,r,o,a,h;return e=this.getPieData(t),a=this.getForwardCount(t.id,e,t.offset),n=a[0],o=a[1],t.data=e,t.loading=!o,o&&(h=this.buildSlices(t,t.offset,n),i=h[0],s=h[1],r=h[2],this.applyNewSlices(t,i,s,r)),o},t.prototype.scrollForward=function(t,e){var i,n,s,r,o,a,h,l,u,c;return i=this.getPieData(t),t.data=i,h=!0,null==e&&(l=this.getForwardCount(t.id,i,t.offset),a=l[0],h=l[1],e=t.offset+a),h&&(u=this.getForwardCount(t.id,i,e),a=u[0],h=u[1]),h?(c=this.buildSlices(t,e,a),r=c[0],n=c[1],s=c[2],t.othersSlice&&(o=Math.min(r.length,Math.max(0,t.offset+t.count-e)),this.fitSlicesInOrigin(t.othersSlice,r.slice(o),n),n||(n=t.othersSlice,n.fraction=0,n.currentFraction=0,n.removed=!0)),t.offset=e,this.applyNewSlices(t,r,n,s),t.loading=!1,!0):(t.loading=!0,!1)},t.prototype.scrollBackward=function(t,e){var i,n,s,r,o,a,h,l,u,c;return i=this.getPieData(t),t.data=i,h=!0,null==e&&(l=this.getBackOffset(t.id,i,t.offset),e=l[0],h=l[1]),h&&(u=this.getForwardCount(t.id,i,e),a=u[0],h=u[1]),h?(c=this.buildSlices(t,e,a),r=c[0],n=c[1],s=c[2],t.previousSlice&&(o=Math.min(r.length,Math.max(0,t.offset-e)),this.fitSlicesInOrigin(t.previousSlice,r.slice(0,o),s),s||(s=t.previousSlice,s.fraction=0,s.currentFraction=0,s.removed=!0)),t.offset=e,this.applyNewSlices(t,r,n,s),t.loading=!1,!0):(t.loading=!0,!1)},t.prototype.fitSlicesInOrigin=function(t,e,i){var n,s,r,o,a,h,l,u;for(s=Math.max(1e-6,t.currentFraction),o=0,a=0,l=e.length;l>a;a++)r=e[a],o+=r.fraction;for(i&&(o+=i.fraction),n=s/o,h=0,u=e.length;u>h;h++)r=e[h],r.currentFraction=r.fraction*n,r.currentFillColor=t.currentFillColor,r.currentLineColor=t.currentLineColor;i&&(i.currentFraction=i.fraction*n,i.currentFillColor=t.currentFillColor,i.currentLineColor=t.currentLineColor)},t.prototype.getForwardCount=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;if(!e||e.offset>i||e.offset+e.values.length<=i)return!e||!e.done||e.offset>i?(this.scene.data.requestPieData(t,i),[0,!1]):[0,!0];if(r=e.offset,s=r+e.values.length,p=this.scene.settings.interaction.others,!p.enabled)return e.done||this.scene.data.requestMorePieData(t),[Math.max(s-i,0),e.done];for(d=e.afterFraction,a=v=i,_=s-1;_>=v;a=v+=1)d+=e.values[a-r].fraction;for(u=p.minSliceFraction,h=p.maxOthersFraction,l=p.maxSlicesVisible,n=0,g=0,o=e.done;s>n+i;)if(n++,y=e.values[i+n-r-1].fraction,g+=y,d-=y,c=d/(d+g),f=Math.min(c,h),m=y/g*(1-f),n>l||u>m){e.done&&n+i!==s&&n--,o=!0;break}return o||this.scene.data.requestMorePieData(t),[n,o]},t.prototype.getBackOffset=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x;if(!e||e.offset>=i||!e.done&&e.offset+e.values.length<i)return this.scene.data.requestPieData(t,Math.max(0,i-this.scene.settings.data.itemsToLoad),this.scene.settings.data.itemsToLoad),[0,!1];if(e.done&&i>e.offset+e.values.length&&(i=e.offset+e.values.length),0===i)return[0,!0];for(p=this.scene.settings.interaction.others,r=e.offset,s=r+e.values.length,d=e.afterFraction,a=_=i,x=s-1;x>=_;a=_+=1)d+=e.values[a-r].fraction;for(u=p.minSliceFraction,h=p.maxOthersFraction,l=p.maxSlicesVisible,f=i,y=e.values[i-r-1].fraction,m=0,o=0===e.offset;f>e.offset;)if(f--,n=i-f,v=e.values[f-r].fraction,m+=v,c=Math.min(d/(d+m),h),g=y/m*(1-c),0===f||n>l||u>g){0!==f&&f++,o=!0;break}return o||this.scene.data.requestLessPieData(t),[f,o]},t.prototype.buildSlices=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N;if(n=t.data,!n)throw"Internal error";for(x=0,_=[],a=b=e,I=e+i-1;I>=b;a=b+=1)y=new Piechart_Slice(t,a),y.data=n.values[a-n.offset],y.id=y.data.__id,x+=y.data.fraction,_.push(y);for(u=this.scene.settings.interaction.others,l=n.afterFraction,p=n.afterSum,a=w=F=e+i,O=n.offset+n.values.length-1;O>=w;a=w+=1)p+=n.values[a-n.offset].value,l+=n.values[a-n.offset].fraction;if(l>0?(c=new Piechart_Slice(t,1/0),c.data={value:p,fraction:l,name:this.scene.settings.localization.othersLabel}):c=null,g=null,m=0,e>0){for(f=n.beforeSum,a=C=E=n.offset,N=Math.min(e,n.offset+n.values.length)-1;N>=C;a=C+=1)f+=Math.abs(n.values[a-n.offset].value);g=new Piechart_Slice(t,-1),m=u.navigationFraction,g.data={value:f,name:this.scene.settings.localization.previousLabel},g.fraction=m}for(r=(1-m)/(x+l),l*=r,(e>0||l>u.maxOthersFraction)&&(l=Math.min(l,u.navigationFraction)),c&&(c.fraction=l),r=(1-m-l)/x,x=1-m-l,P=0,M=_.length;M>P;P++)v=_[P],v.fraction=v.data.fraction*r;if(h=this.scene.settings.slice.minFraction,h>0)for(d=0;;){for(S=0,o=0,L=0,T=_.length;T>L;L++)v=_[L],v.fraction<=h&&(S+=1,o+=v.fraction);if(S===_.length){for(s=x/_.length,B=0,k=_.length;k>B;B++)v=_[B],v.fraction=s;break}for(r=(x-S*h)/(x-o),A=0,D=_.length;D>A;A++)v=_[A],v.fraction=v.fraction<=h?h:v.fraction*r;if(S===d)break;d=S}return[_,c,g]},t.prototype.applyNewSlices=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m;for(a=t.slices,p=0===a.length,c=[],s=[],r=0,o=0;r<a.length||o<e.length;)h=a[r],l=e[o],null!=h&&null!=l&&h.id===l.id?(h.removed=!1,h.fraction=l.fraction,h.data=l.data,l.currentFraction&&(h.currentFraction=l.currentFraction,h.animatorF=null),c.push(h),s.push(h),r++,o++):!l||h&&h.index<l.index?(h.removed=!0,h.fraction=0,s.push(h),r++):(l.currentFraction||p||(l.currentFraction=0),c.push(l),s.push(l),o++);for(t.total=t.data?t.data.total:0,t.count=e.length,t.slices=c,t.allSlices=s,i?(t.othersSlice?(t.othersSlice.removed=i.removed,t.othersSlice.data=i.data,t.othersSlice.fraction=i.fraction,t.othersSlice.value=i.value,null!=i.currentFraction&&(t.othersSlice.currentFraction=i.currentFraction,t.othersSlice.animatorF=null)):(p||(i.currentFraction=0),t.othersSlice=i),t.allSlices.push(t.othersSlice)):t.othersSlice&&(t.allSlices.push(t.othersSlice),t.othersSlice.removed=!0,t.othersSlice.fraction=0),n?(t.previousSlice?(t.previousSlice.removed=n.removed,t.previousSlice.data=n.data,t.previousSlice.fraction=n.fraction,t.previousSlice.value=n.value,null!=n.currentFraction&&(t.previousSlice.currentFraction=n.currentFraction,t.previousSlice.animatorF=null)):(p||(n.currentFraction=0),t.previousSlice=n),t.allSlices.unshift(t.previousSlice)):t.previousSlice&&(t.previousSlice.removed=!0,t.previousSlice.fraction=0,t.allSlices.unshift(t.previousSlice)),m=t.allSlices,d=0,f=m.length;f>d;d++)u=m[d],u.value=u.data.value;return this.scene.updateOnPieChanged(t)},t.prototype.getPieData=function(t){var e,i,n,s,r,o,a,h,l;if(e=this.scene.data.getPieData(t.id),!e)return null;if(i=e.total,i>0)for(h=e.values,s=0,o=h.length;o>s;s++)n=h[s],n.fraction=n.value/i;else for(i=e.values.length,l=e.values,r=0,a=l.length;a>r;r++)n=l[r],n.fraction=1/i;return e.afterFraction=e.afterSum>0?e.afterSum/i:0,e.beforeFraction=e.beforeSum>0?e.beforeSum/i:0,e},t}();var Base_Bar_UserButton,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_UserButton=function(t){function e(t,i){this.chart=t,this.options=i,e.__super__.constructor.call(this,t),this.createButton(i)}return __extends(e,t),e.prototype.onClick=function(t){return this.options.onClick&&this.options.onClick(t,this.chart.api),Base_Helpers.stopPropagation(t)},e}(Base_Bar_Button);var Base_Bar_Dropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_Dropdown=function(t){"use strict";function e(t,i){this.options=i,e.__super__.constructor.call(this,t,i),this.items=[],this.listeners=[]}return __extends(e,t),e.prototype.buildDropdownList=function(){var t,e,i,n;for(this.items=[],this.listeners=[],n=this.options.items,e=0,i=n.length;i>e;e++)t=n[e],Base_Helpers.listen(t.domElement,"click",this.hideDropdown),this.items.push(t.domElement);return this.items},e.prototype.onHideDropdown=function(){var t,e,i,n;for(n=this.items,e=0,i=n.length;i>e;e++)t=n[e],t.parentNode.removeChild(t),Base_Helpers.unlisten(t,"click",this.hideDropdown);return this.items=[],this.listeners=[]},e}(Base_Bar_DropdownBase);var Base_Bar_Combobox,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_Combobox=function(t){"use strict";function e(t,i){this.options=i,e.__super__.constructor.call(this,t,i),this.selectedItem=null}return __extends(e,t),e.prototype.onSelectionChange=function(t){return t},e.prototype.buildDropdownList=function(){var t,e,i,n,s,r,o;for(i=[],o=this.options.items,n=function(i){return function(){var n;return n=e,Base_Helpers.listen(t,"click",function(){return i.setSelectedItem(n,!0)})}}(this),s=0,r=o.length;r>s;s++)e=o[s],t=Base_Helpers.createDom("a",null,e.name,null),e===this.selectedItem&&(t.className="DVSL-bar-dropdown-active"),n(),i.push(t);return i},e.prototype.setItems=function(t){return this.options.items=t},e.prototype.setSelectedItem=function(t,e){var i,n,s,r,o;if(null==e&&(e=!1),Base_Helpers.isString(t)){for(i=!1,o=this.options.items,s=0,r=o.length;r>s;s++)if(n=o[s],n.id===t){t=n;break}if(!i)throw"No item with id: "+t}return this.selectedItem!==t&&(this.selectedItem=t,this.options.showLabels!==!1&&(this.p.innerHTML=t.name),e)?(this.hideDropdown(),this.onSelectionChange(t)):void 0},e}(Base_Bar_DropdownBase);var Base_Bar_ToggleButton,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_ToggleButton=function(t){function e(t,e){this.chart=t,this.options=e,this.createButton(e),this.curState=!1}return __extends(e,t),e.prototype.onSceneChange=function(){var t;return t=this.options.getChartState(),t!==this.curState&&(this.curState=t,this.a.className=this.curState&&this.options.cssClassEnabled?this.options.cssClassEnabled:this.options.cssClass,this.options.showLabels!==!1)?this.p.innerHTML=this.curState&&this.options.labelEnabled?this.options.labelEnabled:this.options.label:void 0},e.prototype.onClick=function(t){return this.curState?this.options.onDisable():this.options.onEnable(),this.onSceneChange(),Base_Helpers.stopPropagation(t)},e}(Base_Bar_Button);var Netchart_Navigator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Navigator=function(t){function e(t){this.chart=t,this.graph=this.chart.graph,this.scene=this.chart.scene,this.nodes={},this.lastExpandTime=0,this.nextId=0,this.hasData=!1}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=5,e.prototype.updateOrder=1500,e.settings={mode:"showall",initialNodes:null,focusNodeExpansionRadius:2,focusNodeTailExpansionRadius:.3,focusAutoFadeout:!0,numberOfFocusNodes:3,expandDelay:400,expandOnClick:!0,autoZoomOnFocus:!1,nodeAutoExpandFilter:null},e.prototype.FocusNode=function(){function t(){this.id=null,this.relevance=-1,this.initial=!1,this.stopped=!1,this.hidden=!1,this.expanded=!1,this.collapsed=!1,this.actionId=0}return t}(),e.prototype.otherEnd=Netchart_Data.otherEnd,e.prototype.clear=function(t){return this.chart.events.notifySceneChanges({navigation:!0}),this.nodes={},this.chart.notifyChartUpdate(t)},e.prototype.addAction=function(t,e,i){var n;return this.chart.events.notifySceneChanges({navigation:!0}),n=new this.FocusNode,n.id=t,n.actionId=this.nextId,this.nextId+=1,Base_Helpers.extend(n,e),this.nodes[t]=n,this.chart.notifyChartUpdate(i),n},e.prototype.updateAction=function(t,e,i){var n;return this.chart.events.notifySceneChanges({navigation:!0}),n=this.nodes[t],n.actionId=this.nextId,this.nextId+=1,Base_Helpers.extend(n,e),this.chart.notifyChartUpdate(i),n},e.prototype.hideNode=function(t,e){return this.addAction(t,{hidden:!0},e)},e.prototype.collapseNode=function(t,e){return this.addAction(t,{collapsed:!0,expanded:!1},e)},e.prototype.addFocusNode=function(t,e,i){return this.addAction(t,{relevance:e,initial:!0},i)},e.prototype.expandNode=function(t,e){return this.nodes[t]&&this.nodes[t].initial?this.updateAction(t,{expanded:!0},e):this.addAction(t,{expanded:!0},e)},e.prototype.unexpandNode=function(t,e){return this.nodes[t]?this.updateAction(t,{initial:!1},e):void 0},e.prototype.removeNode=function(t){return delete this.nodes[t]},e.prototype.save=function(){return this.nodes},e.prototype.restore=function(t){var e,i,n;this.nodes={};for(e in t)n=t[e],i=new this.FocusNode,Base_Helpers.extend(i,n),this.nodes[e]=i,this.nextId=Math.max(i.actionId,this.nextId);return this.chart.events.notifySceneChanges({navigation:!0}),this.chart.notifyChartUpdate("restore")},e.prototype.getInitialNodes=function(){var t;return t=this.scene.settings.navigation.initialNodes,Base_Helpers.isString(t)?t=[t]:Base_Helpers.isArray(t)||(t=[]),t},e.prototype.onNewDataObject=function(){var t,e,i,n,s;if(this.hasData=!1,"showall"===this.scene.settings.navigation.mode){if(e=this.getInitialNodes(),0===e.length)return this.scene.loading=this.scene.data.requestAllNodes();for(s=[],i=0,n=e.length;n>i;i++)t=e[i],s.push(this.scene.data.getNodeData(t));return s}return this.scene.loading=!1},e.prototype.showInitialNodes=function(){var t,e,i,n,s,r,o;if(this.clear(),i=this.scene.settings.navigation,e=this.getInitialNodes(),"focusnodes"===i.mode)for(n=0,r=e.length;r>n;n++)t=e[n],this.addFocusNode(t,-1);else if("manual"===i.mode)for(s=0,o=e.length;o>s;s++)t=e[s],this.addFocusNode(t,1);return this.chart.notifyChartUpdate("init")},e.prototype.commitChanges=function(t){return this.onSceneChange({changes:t})},e.prototype.onSceneChange=function(t){var e,i,n,s,r,o,a,h,l,u;if(t.changes.navigation||t.changes.dataArrived||this.scene.hasTopologyChanges()||t.changes.settings||t.changes.filters||t.changes.data){if(this.scene.settings.navigation.expandDelay&&this.lastExpandTime>t.time-this.scene.settings.navigation.expandDelay&&!t.changes.filters&&this.hasData&&!this.dataArrived)return void this.chart.events.notifySceneChanges({navigation:!0});if(t.changes.dataArrived&&(this.hasData=!0,this.scene.loading=!1),this.resolveConflicts(),u=this.computeRelevances(),h=u[0],i=u[1],s=u[2],n=u[3],o=u[4],l=h,this.hasData)return e=!0,n&&this.scene.settings.navigation.expandDelay&&(e=!1,this.lastExpandTime=t.time,this.chart.events.notifySceneChanges({navigation:!0})),t.changes.dataArrived?(a=t.changes.dataNodesIds,r=t.changes.dataLinksIds):(a={},r={}),t.changes.newGraph=this.updateGraph(l,s,a,r),this.applyRelevances(h,i,o),e?this.cleanupInivisibleNodes():void 0}},e.prototype.resolveConflicts=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f;p=this.nodes,f=[];for(a in p){if(t=p[a],t.expanded)for(r=this.scene.data.getNodeCollectedLinks(a),u=0,c=r.length;c>u;u++)s=r[u],l=this.otherEnd(s,a),h=this.nodes[l],h&&h.actionId<t.actionId&&h.hidden&&delete this.nodes[l];if("focusnodes"===this.scene.settings.navigation.mode){o=this.scene.settings.navigation.numberOfFocusNodes,e=[],d=this.nodes;for(n in d)t=d[n],t.initial&&e.push(t);e.sort(function(t,e){return t.actionId-e.actionId}),i=0,f.push(function(){var t;for(t=[];e.length-i>o;)e[i].initial=!1,t.push(i++);return t}())}else f.push(void 0)}return f},e.prototype.cleanupInivisibleNodes=function(){var t,e,i,n;i=this.nodes,n=[];for(e in i)t=i[e],"focusnodes"!==this.scene.settings.navigation.mode&&this.scene.data.isFilteredNode(e)?delete this.nodes[e]:t.initial||t.hidden||this.graph.idToNode.hasOwnProperty(e)?n.push(void 0):delete this.nodes[e];return n},e.prototype.computeRelevances=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E;if(this.changes=!1,d=this.graph.idToNode,r=this.scene.data.nodes,w=this.scene.settings.data.preloadNodeLinks,c={},u={},l={},y={},P={},a=!!this.scene.settings.navigation.expandDelay&&"focusnodes"===x,h=!1,e=this.scene.settings.navigation.nodeAutoExpandFilter,x=this.scene.settings.navigation.mode,"focusnodes"===x){p=[],I=this.nodes;for(f in I)t=I[f],t.initial&&p.push(t);for(p.sort(function(t,e){return e.actionId-t.actionId}),v=1+parseFloat(this.scene.settings.navigation.focusNodeExpansionRadius),_=1+parseFloat(this.scene.settings.navigation.focusNodeTailExpansionRadius),n=(v-_)/Math.max(1,this.scene.settings.navigation.numberOfFocusNodes-1),i=0,D=0,B=p.length;B>D;D++)t=p[D],f=t.id,M=t.relevance,0>M&&(M=v),M=Math.max(0,M-i),i+=n,c[f]=M,P[f]=!0}else if("manual"===x){p=[],F=this.nodes;for(f in F)t=F[f],p.push(t);p.sort(function(t,e){return e.actionId-t.actionId}),O=this.nodes;for(f in O)t=O[f],t.collapsed||(P[f]=!0,c[f]=t.relevance);!Base_Helpers.hasProperties(P)&&p.length>0&&(P[p[0].id]=!0,c[p[0].id]=1)}else{E=this.scene.data.getNodes();for(f in E)s=E[f],P[f]=!0,c[f]=1.01}for(;Base_Helpers.hasProperties(P);){C={};for(f in P){if(k=P[f],T=c[f],t=this.nodes[f]){if(t.hidden){delete c[f];continue}t.expanded&&2>T&&(T=2,c[f]=Math.max(1,c[f])),o=t.expanded||T>1&&!t.collapsed&&!u.hasOwnProperty(f)}else o=T>1;if(this.scene.data.getNodeData(f)){if(o&&a&&!d.hasOwnProperty(f)&&(r.hasOwnProperty(f)&&(h=!0),o=!1),!u.hasOwnProperty(f))if(o)for(u[f]=!0,g=this.scene.data.getNodeLinks(f),g||(y[f]=!0,g=this.scene.data.getNodeCollectedLinks(f)),l[f]=g,b=T-1,L=0,A=g.length;A>L;L++)m=g[L],S=this.otherEnd(m,f),(!c.hasOwnProperty(S)||b>c[S])&&(c[S]=b,C[S]=!0);else w?(g=this.scene.data.getNodeLinks(f),g||(y[f]=!0,g=this.scene.data.getNodeCollectedLinks(f)),l[f]=g):l[f]=this.scene.data.getNodeCollectedLinks(f)}else this.scene.loading=!0,delete c[f]}P=C}return[c,u,l,h,y]},e.prototype.updateGraph=function(t,e,i,n){var s;return s=this.graph.replaceGraph(t,e),this.graph.updateGraphWithNewData(i,n),s},e.prototype.applyRelevances=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m;c=this.scene.data.nodes,r="focusnodes"===this.scene.settings.navigation.mode;for(u in t)p=t[u],l=this.graph.idToNode[u],l&&(n=e.hasOwnProperty(u),s=r&&this.nodes[u]&&this.nodes[u].initial,o=i.hasOwnProperty(u),(n!==l.expanded||s!==l.focused||l.relevance!==p||l.loading!==o)&&(l.expanded=n,l.focused=s,l.relevance=p,l.loading=o,this.scene.touchNode(l)));Base_Helpers.hasProperties(i)&&(this.scene.loading=!0),f=this.graph.idToLink,m=[];for(h in f)a=f[h],d=Math.min(a.from.relevance,a.to.relevance),d!==a.relevance?(a.relevance=d,m.push(this.scene.touchLink(a))):m.push(void 0);return m},e}(Base_ChartElement);var Netchart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Scene=function(t){function e(){e.__super__.constructor.call(this),this.autoZoomMode=!1,this.layoutActive=!0}return __extends(e,t),e.prototype.getGraphBounds=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p;if(e=this.nodes(),0===e.length)return[0,0,0,0];for(r=1/0,o=-1/0,h=1/0,l=-1/0,u=this.zoom,c=0,p=e.length;p>c;c++)t=e[c],t.removed||(s=t.x,a=t.y,i=t.currentRadius,t.renderRadius&&(i=t.renderRadius/u),n=t.currentHwidth,t.renderHwidth&&(n=t.renderHwidth/u),n+=.2*i,i=1.2*i,r=Math.min(r,s-n),o=Math.max(o,s+n),h=Math.min(h,a-i),l=Math.max(l,a+i));return[r,h,o,l]},e.prototype.getNodeNeighborsBounds=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m;if(n=this.nodes(),0===n.length)return[0,0,0,0];for(a=1/0,h=-1/0,u=1/0,c=-1/0,p=this.zoom,i=t,o=i.x,l=i.y,s=i.currentRadius,i.renderRadius&&(s=i.renderRadius/p),r=i.currentHwidth,i.renderHwidth&&(r=i.renderHwidth/p),r+=.2*s,s=1.2*s,a=Math.min(a,o-r),h=Math.max(h,o+r),u=Math.min(u,l-s),c=Math.max(c,l+s),m=t.links,d=0,f=m.length;f>d;d++)e=m[d],i=e.otherEnd(t),i.removed||(o=i.x,l=i.y,s=i.currentRadius,i.renderRadius&&(s=i.renderRadius/p),r=i.currentHwidth,i.renderHwidth&&(r=i.renderHwidth/p),r+=.2*s,s=1.2*s,a=Math.min(a,o-r),h=Math.max(h,o+r),u=Math.min(u,l-s),c=Math.max(c,l+s));return[a,u,h,c]},e}(Itemschart_Scene);var Netchart_Layout,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Layout=function(t){function e(t){this.chart=t,this.scene=t.scene,this.idleSince=null,this.nodeMap=null,this.random=new Base_Random(1),this.springs=new Netchart_Layout_TimedSpringEmbedder(this.random),this.animationInProgress=!1}return __extends(e,t),e.prototype.animationOrder=400,e.prototype.paintOrder=10,e.prototype.updateOrder=1400,e.prototype.doAnimations=function(t){var e,i,n,s,r,o,a,h,l,u,c;return this.settings=this.scene.settings.layout,r=this.settings.layoutFreezeTimeout,u=this.scene.hasTopologyChanges(),h=this.scene.hasStyleChanges(),i=t.dtime,(t.animating||u||t.changes.coordinates||t.changes.layout||null===this.idleSince||t.changes.bounds)&&(this.idleSince=t.time),a={},o=!1,u&&(this.random=new Base_Random(1),c=this.placeNewNodes(),a=c[0],o=c[1]),n="dynamic"===this.settings.mode,n&&(this.idleSince+r>t.time||this.springs.stability>this.settings.advanced.adaptiveFreezeTreshold&&this.scene.nodes().length>1)?(this.springs.stability>this.settings.advanced.adaptiveFreezeTreshold?e=1:(s=(t.time-this.idleSince)/r,e=1-Math.pow(Math.max(0,2*(s-.5)),2)),l=o?this.settings.initialLayoutMaxTime:this.settings.incrementalLayoutMaxTime,this.doLayout(t.time,i*e,u|t.changes.layout,h,a,l,o,n),this.placePies(),t.changes.position=!0,t.animating=!0):void 0},e.prototype.resetLayout=function(){var t,e,i,n,s;for(this.random=new Base_Random(1),this.springs.random=this.random,e={},s=this.scene.nodes(),i=0,n=s.length;n>i;i++)t=s[i],e[t.id]=t,t.x=0,t.y=0,t.userLock=!1;return this.doLayout((new Date).getTime(),1,!0,!0,e,1e4,!0),this.idleSince=null},e.prototype.placeNewNodes=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D;for(p={},h=!1,M=this.scene.nodes(),v=0,b=M.length;b>v;v++)l=M[v],(null===l.x||null===l.y)&&(p[l.id]=!0);for(T=this.scene.nodes(),_=0,w=T.length;w>_;_++)if(l=T[_],y=1,p.hasOwnProperty(l.id)){for(c=0,e=0,i=0,y=1,k=l.links,x=0,C=k.length;C>x;x++)a=k[x],d=a.otherEnd(l),p.hasOwnProperty(d.id)||(u=d,e+=d.x,i+=d.y,c+=1);if(c>1)m=e/c,g=i/c,y=.5;else if(1===c){for(t=0,n=0,s=0,D=u.links,S=0,P=D.length;P>S;S++)a=D[S],f=a.otherEnd(u),f===l||p.hasOwnProperty(f.id)||(n+=f.x-u.x,s+=f.y-u.y,t+=1);t>0?(o=Math.sqrt(n*n+s*s),o>0?(r=1/(o*t),n*=r,s*=r,m=u.x-n*u.currentRadius*1.2,g=u.y-s*u.currentRadius*1.2,y=.2):(m=u.x,g=u.y)):(h=!0,m=u.x,g=u.y)}else h=!0,m=0,g=0;l.x=m+(this.random.get()-.5)*y*(l.currentRadius+1),l.y=g+(this.random.get()-.5)*y*(l.currentRadius+1)}return[p,h]},e.prototype.placePies=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;for(t=2*Math.PI,a=[],y=this.scene.nodes(),_=[],l=0,d=y.length;d>l;l++){for(s=y[l],h=0,v=s.links,u=0,f=v.length;f>u;u++)i=v[u],i.to===s&&i.toPieValue>0&&(h+=i.toPieValue,a.push(i),i._angle=Math.atan2(i.to.y-i.from.y,i.to.x-i.from.x));if(h>0){for(a.sort(function(t,e){return t._angle-e._angle}),n=t/h,e=0,o=0,c=0,m=a.length;m>c;c++)i=a[c],i.toPie0=e,e+=i.toPieValue*n,i.toPie1=e,r=i._angle-(i.toPie0+i.toPie1)/2,0>r&&(r+=2*Math.PI),o+=r;for(o/=a.length,o-=Math.PI,p=0,g=a.length;g>p;p++)i=a[p],i.toPie0+=o,i.toPie1+=o;_.push(a=[])}else _.push(void 0)}return _},e.prototype.doLayout=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O;for(null==o&&(o=!1),null==a&&(a=!0),p=this.scene.settings.style.fadeTime,l=(this.scene.width+1)/(this.scene.height+1),l>0||(l=null),c=this.scene.settings.layout.aspectRatio?l:null,S=this.settings.nodeSpacing,u=1,b=this.scene.nodes(),h=!1,d=!1,T=0,B=b.length;B>T;T++)x=b[T],x.locked=x.userLock||x.locks>0,d||(d=x.locked),h||(h=x.added||x.removed),x.visibility=x.added?1-.8*(t-x.added)/p:x.removed?.2+.8*(t-x.removed)/p:1;for(_={},w=[],O=this.scene.links(),k=0,A=O.length;A>k;k++)m=O[k],v=m.multiId,P=m.targetStrength,g=m.targetLength,M=1,(m.removed||m.added)&&(f=m.from.links.length>1&&m.to.links.length>1,C=f||m.removed?.2:P,m.removed&&(M=1-(t-m.removed)/p),m.added&&(M=(t-m.added)/p,g=.2+(g-.2)*M),P=P*M+C*(1-M)),_.hasOwnProperty(v)?(y=_[v],y.strength=Math.max(P,y.strength),y.length=Math.max(g,y.length),y.visibility=Math.max(M,y.visibility)):(y={from:m.from,to:m.to,strength:P,length:g,visibility:M,direction:m.direction},_[v]=y,w.push(y));if(this.springs.updateParams(S,u,c),o||Base_Helpers.hasProperties(s)){for(D=0,I=b.length;I>D;D++)x=b[D],x.locked||(x.locked=!s.hasOwnProperty(x.id));this.springs.updateGraph(b,w,i),o||this.scene.settings.layout.globalLayoutOnChanges?(this.springs.updateParams(S,u,l),this.springs.globalLayout(b,r,o&&!d),this.springs.updateParams(S,u,c)):this.springs.timedLayout(b,.001*e)}if(a||h){if(!a)for(L=0,F=b.length;F>L;L++)x=b[L],x.locked||(x.locked=!x.removed&&!x.added);return this.springs.updateGraph(b,w,i),this.springs.timedLayout(b,.001*e)}},e}(Base_ChartElement);var Netchart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Scrolling=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.settings=this.scene.settings,this.pointer1=null,this.pointer2=null,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.centerX=0,this.centerY=0,this.centerDistance=1,this.numPointers=0}return __extends(e,t),e.prototype.animationOrder=800,e.prototype.paintOrder=15,e.prototype.updateOrder=1300,e.prototype.onWheel=function(t){var e;if(this.scene.xyInChart(t.x,t.y)&&this.scene.settings.interaction.zooming.wheel)return e=Math.pow(1+this.scene.settings.interaction.zooming.sensitivity,.004*t.wheely),this.chart.autoZoom.manualZoom(e,t.x,t.y),t.consumed=!0,t.changes.position=!0
},e.prototype.previewPointerDown=function(){return this.numPointers+=1},e.prototype.previewPointerUp=function(){return this.numPointers-=1},e.prototype.previewPointerCancel=function(){return this.numPointers-=1},e.prototype.onPointerDown=function(t){var e,i,n,s,r,o;if(null===this.pointer1){if(this.pointer1=t.identifier,s=[t.x,t.y],this.x1=s[0],this.y1=s[1],this.settings.interaction.panning.enabled)return t.consumed=!0;if(this.settings.interaction.zooming.fingers)return t.capture=!0}else if(null===this.pointer2&&this.settings.interaction.zooming.fingers)return this.pointer2=t.identifier,r=[t.x,t.y],this.x2=r[0],this.y2=r[1],o=this.scene.fromDisplay((this.x1+this.x2)/2,(this.y1+this.y2)/2),this.centerX=o[0],this.centerY=o[1],e=this.x1-this.x2,i=this.y1-this.y2,n=Math.sqrt(e*e+i*i),this.centerDistance=n/this.scene.zoom,t.consumed=!0},e.prototype.onPointerDrag=function(t){return t.identifier===this.pointer1&&null===this.pointer2?this.settings.interaction.panning.enabled?(this.scene.centerX-=t.dx/this.scene.zoom,this.scene.centerY-=t.dy/this.scene.zoom,this.scene.autoZoomMode=!1,t.changes.position=!0,t.consumed=!0):t.capture=!0:t.identifier===this.pointer1&&this.settings.interaction.zooming.fingers?(this.twoFingerDrag(t.x,t.y,this.x2,this.y2),t.changes.position=!0,t.consumed=!0):t.identifier===this.pointer2&&this.settings.interaction.zooming.fingers?(this.twoFingerDrag(this.x1,this.y1,t.x,t.y),t.changes.position=!0,t.consumed=!0):void 0},e.prototype.onPointerUp=function(t){return this.pointer2===t.identifier?this.pointer2=null:this.pointer1===t.identifier?null!==this.pointer2?(this.pointer1=this.pointer2,this.pointer2=null,this.x1=this.x2,this.y1=this.y2):this.pointer1=null:void 0},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.onDoubleClick=function(t){var e;return e=this.settings.interaction.zooming.doubleClickZoom,e&&this.settings.interaction.zooming.zoomInOnDoubleClick?(this.chart.autoZoom.manualZoom(e,t.x,t.y),t.changes.position=!0,t.consumed=!0):void 0},e.prototype.twoFingerDrag=function(t,e,i,n){var s,r,o,a,h,l,u,c,p;return u=i-t,c=n-e,a=Math.sqrt(u*u+c*c)/this.scene.zoom,s=(i+t)/2,r=(n+e)/2,p=this.scene.fromDisplay(s,r),h=p[0],l=p[1],this.scene.centerX+=this.centerX-h,this.scene.centerY+=this.centerY-l,o=a/this.centerDistance,this.chart.autoZoom.manualZoom(o,s,r),this.x1=t,this.y1=e,this.x2=i,this.y2=n},e}(Base_ChartElement);var Itemschart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Selection=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.navigator=t.navigator,this.dragPointers={}}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=25,e.prototype.updateOrder=1100,e.prototype.scene=null,e.prototype.events=null,e.prototype.currentObject=null,e.prototype.currentSlice=null,e.prototype.onPointerMove=function(t){return this.updateCurrentObject(t),this.currentObject?(this.updateCursor(t),t.consumed=!0):void 0},e.prototype.onPointerOut=function(t){return this.switchCurrentObject(null,null,t)},e.prototype.onPointerDown=function(t){return this.updateCurrentObject(t),this.currentObject instanceof Itemschart_Node&&(this.updateSelection(t,this.currentObject,!0),this.updateCursor(t),this.scene.settings.interaction.selection.nodesMovable)?(this.setPointerNode(t,this.currentObject),t.consumed=!0):void 0},e.prototype.onPointerUp=function(t){return this.dragPointers[t.identifier]?(this.dragPointers[t.identifier].dragging&&(t.consumed=!0,this.updateLastNode(t,this.dragPointers[t.identifier].node)),this.updateCursor(t),this.setPointerNode(t,null)):void 0},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.onPointerDrag=function(t){var e,i,n,s;return(n=this.dragPointers[t.identifier])?(s=this.scene.fromDisplay(t.x,t.y),e=s[0],i=s[1],n.mouseX=t.x,n.mouseY=t.y,n.dragging=!0,this.dragNodes(n,e,i,this.scene.settings.interaction.selection.lockNodesOnMove),this.updateCursor(t),t.consumed=!0):void 0},e.prototype.onClick=function(t){var e;if(this.scene.xyInChart(t.x,t.y))return this.updateSelection(t,this.currentObject,!1),this.buildClickEvent(t),e=this.chart.notifyClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.onRightClick=function(t){var e;if(this.scene.xyInChart(t.x,t.y))return this.buildClickEvent(t),this.updateSelection(t,this.currentObject,!1),e=this.chart.notifyRightClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){var e;if(this.scene.xyInChart(t.x,t.y))return this.buildClickEvent(t),e=this.chart.notifyDoubleClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.doAnimations=function(t){var e,i,n,s,r,o,a;r=this.dragPointers,a=[];for(e in r)s=r[e],o=this.scene.fromDisplay(s.mouseX,s.mouseY),i=o[0],n=o[1],this.dragNodes(s,i,n,!1),a.push(t.changes.coordinates=!0);return a},e.prototype.updateSelection=function(t,e,i){if(this.scene.settings.interaction.selection.enabled){if(!t.shiftKey&&(!e||!this.scene.settings.interaction.selection.nodesSelectable&&e.isNode||!this.scene.settings.interaction.selection.linksSelectable&&e.isLink))return this.chart.setSelection([]);if(e&&t.shiftKey||i&&Base_Helpers.arrayContains(this.scene.selection,e)){if(!Base_Helpers.arrayContains(this.scene.selection,e))return this.scene.selection.push(e),this.chart.setSelection(this.scene.selection,!0)}else if(e)return this.chart.setSelection([e])}},e.prototype.dragNodes=function(t,e,i,n){var s,r,o,a,h,l;if(s=e+t.x-t.node.x,r=i+t.y-t.node.y,0!==s||0!==r){if(1===Base_Helpers.countProperties(this.dragPointers)&&this.scene.selection.length>0)for(l=this.scene.selection,a=0,h=l.length;h>a;a++)o=l[a],o.isNode&&this.moveNode(o,s,r,n);else this.moveNode(t.node,s,r,n);return this.events.notifySceneChanges({coordinates:!0})}},e.prototype.moveNode=function(t,e,i,n){var s,r,o;return t.x+=e,t.y+=i,n&&(t.userLock=!0),this.scene.settings.interaction.selection.allowMoveNodesOffscreen?void 0:(s=this.scene.getVisibleBounds(),r=1.2*t.renderHwidth/this.scene.zoom,o=1.2*t.renderRadius/this.scene.zoom,t.x=Math.min(Math.max(t.x,s.x0+r),s.x1-r),t.y=Math.min(Math.max(t.y,s.y0+o),s.y1-o))},e.prototype.setPointerNode=function(t,e){var i,n,s,r,o;return i=t.identifier,n=this.dragPointers[i],n&&(n.node.locks-=1,delete this.dragPointers[i]),e?(o=this.scene.fromDisplay(t.x,t.y),s=o[0],r=o[1],this.dragPointers[t.identifier]={x:e.x-s,y:e.y-r,node:e,mouseX:t.x,mouseY:t.y},e.locks+=1):void 0},e.prototype.updateCurrentObject=function(t){var e,i;if(this.scene.xyInChart(t.x,t.y))return i=this.scene.findLinkOrNodeAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),e=i?this.scene.findItem(t.x,t.y,i,this.scene.settings.interaction.selection.tolerance):null,this.switchCurrentObject(i,e,t)},e.prototype.updateCursor=function(t){return t.cursor=this.currentObject&&this.currentObject.cursor?this.currentObject.cursor:"default"},e.prototype.switchCurrentObject=function(t,e,i){return t!==this.currentObject||e!==this.currentItem?(i.changes.current=!0,this.scene.setActiveObject(t,e),this.currentObject instanceof Itemschart_Node&&(this.currentObject.locks-=1),this.currentObject=t,this.currentItem=e,this.currentObject instanceof Itemschart_Node&&(this.currentObject.locks+=1),this.chart.notifyHoverChanged(i)):void 0},e.prototype.buildClickEvent=function(t){return t.clickItem=this.currentItem,this.currentObject instanceof Itemschart_Node?(t.clickNode=this.currentObject,this.updateLastNode(t,this.currentObject)):t.clickLink=this.currentObject},e.prototype.updateLastNode=function(t,e){return this.scene.lastClickedNode=e,this.scene.settings.interaction.zooming.autoZoomAfterClick?(this.scene.autoZoomMode=!0,t.changes.zoom=!0):void 0},e}(Base_ChartElement);var Itemschart_Renderer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Renderer=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.imageCache={},this.imageLoading={},this.multilinks={},this.itemRenderer=new Base_LabelRenderer(this.chart)}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=35,e.prototype.updateOrder=900,e.prototype.scene=null,e.prototype.events=null,e.prototype.doAnimations=function(t){return t.changes.position?this.chart.notifyPositionChange(t):void 0},e.prototype.getNodeImage=function(t){var e,i,n,s,r;return t.image?(r=t.tintImage&&t.fillColor,e=t.imageCropping,n=t.image,s=n,r&&(n+="##"+t.fillColor),null!=this.imageCache[n]?this.imageCache[n]:this.imageLoading[n]?!1:(i=function(i){return function(s){return e&&(s=Base_Graphics.cropImageToCircle(s,e)),r&&(s=Base_Graphics.applyColorToImage(s,t.fillColor,!1)),i.imageCache[n]=s,delete i.imageLoading[n],i.chart.removed?void 0:i.events.notifySceneChanges({repaint:!0})}}(this),this.imageLoading[n]=!0,this.scene.settings.getAssetImage(s,i),!1)):null},e.prototype.paintScene=function(t){var e,i,n,s,r,o,a;return o=this.scene.nodes(),r=this.scene.links(),i=this.getGeometry(),a={geometry:i,paintDetails:i[4]>this.scene.settings.style.nodeDetailMinZoom},s=this.makeHoveredLast(o,this.scene.hoverNode),n=this.makeHoveredLast(r,this.scene.hoverLink),this.scene.updateMultilinks(),this.scene.clearModified(),this.computeNodeRenderRadii(),e=t.context,this.paintSelection(e),this.paintLinks(e,r,this.scene.multilinks,a),t.animating|=this.paintNodes(e,o,a,t.time),this.restoreHovered(this.scene.nodes(),s),this.restoreHovered(this.scene.links(),n)},e.prototype.getGeometry=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d;return d=this.scene.toDisplayTransform(),e=d[0],t=d[1],n=d[2],i=d[3],s=this.scene.x0,o=this.scene.x0+this.scene.width,h=this.scene.y0,u=this.scene.y0+this.scene.height,r=(s-t)/e,a=(o-t)/e,l=(h-i)/n,c=(u-i)/n,p=this.scene.settings.style.scaleObjectsWithZoom?this.scene.zoom:1,[e,t,n,i,p,s,o,h,u,r,l,a,c]},e.prototype.makeHoveredLast=function(t,e){var i,n,s,r,o,a;if(n=t.length,2>n||!e||e===t[n-1])return n-1;for(i=o=0,a=t.length;a>o;i=++o)if(r=t[i],r===e)return s=t[n-1],t[n-1]=e,t[i]=s,i;return n-1},e.prototype.restoreHovered=function(t,e){var i,n;return i=t.length,e!==i-1?(n=t[e],t[e]=t[i-1],t[i-1]=n):void 0},e.prototype.computeNodeRenderRadii=function(){var t,e,i,n,s,r,o,a,h;for(n=this.getGeometry()[4],s=this.scene.zoom,a=this.scene.nodes(),h=[],r=0,o=a.length;o>r;r++)t=a[r],"shape"!==t.type?(e=t.currentRadius*n,i=t.currentHwidth*n):(e=t.currentRadius*s,i=t.currentHwidth*s),t.lineWidth&&(e+=t.lineWidth/2,i+=t.lineWidth/2),t.renderRadius=e,h.push(t.renderHwidth=i);return h},e.prototype.getNodeCoords=function(t,e){var i,n,s,r,o,a;if(r=t.coordinatesCacheZoom,r&&e>=r&&4*r>e)return t.coordinatesCache;for(i=[],s=e>r?t.coordinatesCache:t.coordinates,o=0,a=s.length;a>o;o++)n=s[o],n.length>14&&(n=Base_Geometry.simplify(n,e)),i.push(n);return t.coordinatesCacheZoom=e/2,t.coordinatesCache=i,i},e.prototype.paintLinks=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J,Q,K,$,te,ee,ie,ne,se,re,oe,ae,he,le,ue,ce,pe,de,fe,me,ge,ye,ve,_e,xe,Se,be,we,Ce,Pe,Me;for(be=n.geometry,j=be[0],Z=be[1],X=be[2],q=be[3],me=be[4],ie=be[5],re=be[6],ue=be[7],de=be[8],ne=be[9],ce=be[10],oe=be[11],fe=be[12],_=1/me,t.textAlign="center",t.textBaseline="middle",P=this.scene.settings.style.linkLabelMinZoom,F=n.paintDetails,I=me>this.scene.settings.style.itemsMinZoom,T=this.scene.settings.style.multilinkSpacing*me,c=this.scene.settings.style.linkDecorationScale,u=this.scene.settings.style.linkDecorationMinSize,M=this.scene.settings.style.linkLabelScaleBase,H=2,N=5,R=.1,ge=0,xe=e.length;xe>ge;ge++)if(C=e[ge],$=C.from.x,ae=C.from.y,se=C.to.x,pe=C.to.y,!(Math.max($,se)<ne||Math.min($,se)>oe||Math.max(ae,pe)<ce||Math.min(ae,pe)>fe))if($=$*j+Z,ae=ae*X+q,se=se*j+Z,pe=pe*X+q,U=Math.max(.25,C.currentRadius*me*.5),s=C===this.scene.hoverLink||C.from===this.scene.hoverNode||C.to===this.scene.hoverNode,A=s||F){if(Y=C.from.renderRadius,z=C.to.renderRadius,J=C.from.renderHwidth,Q=C.to.renderHwidth,m=se-$,g=pe-ae,w=Math.sqrt(m*m+g*g),C.toPieValue>0&&(O=z+H,E=O+N+R*z,this.paintLinkPie(t,se,pe,O,E,C.toPie0,C.toPie1,C.toPieColor),z=E),Y+z>w)continue;if(v=1/w,h=m*v,l=g*v,G=Base_Geometry.distanceToBalloon(Y,J,h,l),V=Base_Geometry.distanceToBalloon(z,Q,h,l),G+V>=w)continue;if(p=Math.min((w-G-V)/4,Math.max(u,U*c)),C.fromDecoration&&(G+=p),C.toDecoration&&(V+=p),$+=h*G,ae+=l*G,se-=h*V,pe-=l*V,m=se-$,g=pe-ae,w=w-G-V,v=1/w,D=C.multiId,k=i[D],Base_Helpers.isArray(k)?(r=k.length,K=Math.min(T*(r-1),1.5*Y,1.5*z),B=K*(Base_Helpers.indexOf(k,C)-(r-1)/2)/(r-1),C.from.id>C.to.id&&(B=-B),C.currentCenterOffset=B*_,$-=l*B,se-=l*B,ae+=h*B,pe+=h*B):C.currentCenterOffset=0,t.beginPath(),C.fromDecoration&&this.paintLinkDecoration(t,$,ae,h,l,p,C.fromDecoration,C.fillColor),C.toDecoration&&this.paintLinkDecoration(t,se,pe,-h,-l,p,C.toDecoration,C.fillColor),C.lineDash)if(te=$+l*U,he=ae-h*U,ee=$-l*U,le=ae+h*U,C.lineDash.length>0)for(o=C.lineDash,d=o.length,f=o.reduce(function(t,e){return t+e})*me,L=0,y=ye=0,we=w/f;we>=ye;y=ye+=1){for(x=ve=0,Ce=d-1;Ce>=ve&&(S=y*f+L,!(S>w-U));x=ve+=2)W=S+o[x]*me,b=W>=w-U?w-U:W,t.moveTo(te+S*h,he+S*l),t.lineTo(ee+S*h,le+S*l),t.lineTo(ee+b*h,le+b*l),t.lineTo(te+b*h,he+b*l),t.closePath(),L+=me*(o[x]+o[x+1]);L=0}else for(a=Math.max(5,3*U),y=_e=0,Pe=w/a;Pe>=_e;y=_e+=2)S=y*a,b=Math.min((y+1)*a,w),t.moveTo(te+S*h,he+S*l),t.lineTo(ee+S*h,le+S*l),t.lineTo(ee+b*h,le+b*l),t.lineTo(te+b*h,he+b*l),t.closePath();else t.moveTo($+l*U,ae-h*U),t.lineTo($-l*U,ae+h*U),t.lineTo(se-l*U,pe+h*U),t.lineTo(se+l*U,pe-h*U),t.closePath();Base_Graphics.fill(t,C),(I||C.hovered)&&C.currentItems&&!C.removed&&this.paintLinkItems(t,me,U/M,$,ae,h,l,w,U,C.currentItems)}else if(C.fillColor){if(t.beginPath(),t.lineWidth=Math.max(.1,2*U),t.strokeStyle=C.fillColor,C.dashed)for(m=se-$,g=pe-ae,w=Math.sqrt(m*m+g*g),v=1/w,h=m*v,l=g*v,a=Math.max(5,3*U),y=Se=0,Me=w/a;Me>=Se;y=Se+=2)S=y*a,b=Math.min((y+1)*a,w),t.moveTo($+S*h,ae+S*l),t.lineTo($+b*h,ae+b*l);else t.moveTo($,ae),t.lineTo(se,pe);t.stroke()}return!1},e.prototype.paintNodes=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J,Q,K,$,te,ee,ie,ne,se,re,oe,ae,he,le,ue,ce,pe,de,fe,me,ge,ye,ve,_e,xe,Se,be,we,Ce,Pe,Me,Te,ke,De,Le,Be,Ae,Ie,Fe;for(s=2*Math.PI,a=!1,De=i.geometry,J=De[0],X=De[1],$=De[2],K=De[3],me=De[4],se=De[5],oe=De[6],ce=De[7],de=De[8],re=De[9],pe=De[10],ae=De[11],fe=De[12],R=i.paintDetails,N=me>this.scene.settings.style.itemsMinZoom,B=this.scene.settings.style.nodeLabelMinSize/2,u=this.scene.settings.style.hiddenLinks,A=this.scene.settings.style.nodeLabelScaleBase,g=1/J,t.textAlign="center",t.textBaseline="middle",Base_Graphics.textStyle(t,this.scene.settings.style.nodeLabel),Y=this.scene.settings.style.removedColor,ge=0,xe=e.length;xe>ge;ge++)if(L=e[ge],L.data&&(ie=L.x,le=L.y,G=L.renderRadius,ee=L.renderHwidth,H=L.currentRadius,te=L.currentHwidth,!(re>ie+G||ie-G>ae||pe>le+G||le-G>fe))){if(ie=ie*J+X,le=le*$+K,H*=me,te*=me,h=L.display,O=L.opacity,1>O&&(t.globalAlpha=O),(!L.removed&&R||L.hovered)&&(c=L.dataLinksFiltered.length-L.links.length,c>0&&(L.relevance<1?(F=u.lineColor,u.lineColor=Base_Graphics.blendColors(Y,F,L.relevance),this.paintHiddenLinks(t,L,ie,le,G,ee,c,u,u.size*me),u.lineColor=F):this.paintHiddenLinks(t,L,ie,le,G,ee,c,u,u.size*me))),Z=Base_Graphics.beginStrokeAndFill(t,L),"polygon"===h)for(Le=this.getNodeCoords(L,g),ye=0,Se=Le.length;Se>ye;ye++){for(C=Le[ye],k=C[0]*J+X,D=C[1]*$+K,Z.moveTo(k,D),p=ve=2,Be=C.length-2;Be>=ve;p=ve+=2)Z.lineTo(C[p]*J+X,C[p+1]*$+K);Z.closePath()}else if("line"===h)for(Ae=this.getNodeCoords(L,g),_e=0,be=Ae.length;be>_e;_e++)for(C=Ae[_e],k=C[0]*J+X,D=C[1]*$+K,Z.moveTo(k,D),p=Pe=2,Ie=C.length-2;Ie>=Pe;p=Pe+=2)Z.lineTo(C[p]*J+X,C[p+1]*$+K);else H!==te?(he=ie+te-H,Z.moveTo(he,le-H),Z.arc(he,le,H,-Math.PI/2,Math.PI/2,!1),he=ie-te+H,Z.lineTo(he,le+H),Z.arc(he,le,H,.5*Math.PI,1.5*Math.PI,!1),Z.closePath()):(Z.moveTo(ie+H,le),Z.arc(ie,le,H,0,s));if(Base_Graphics.endStrokeAndFill(t,Z,L),R||L.hovered){if(f=this.getNodeImage(L),x=L.currentLabel,z="roundtext"===h,l=z||"text"===h,l&&x){if(l&&null!=x&&H>2){for(this.itemRenderer.measure(t,x),b=x.hwidth,S=x.hheight,P=x.lineHeight,w=0,z?(U=Math.sqrt(b*b+S*S),null!=f&&(he=P+2*b,E=(he*he+S*S)/2/he,E>U&&(w=E-U,U=E)),W=H/U,w*=W):W=H/S,f&&(z?m=P*W:(w=H,m=2*H),ne=ie-te,ue=le-m/2,L.imageSlicing?(V=L.imageSlicing,t.drawImage(f,V[0],V[1],V[2],V[3],ne,ue,m,m)):t.drawImage(f,0,0,f.width,f.height,ne,ue,m,m)),t.save(),Base_Graphics.textStyle(t,L.labelStyle.textStyle),t.transform(W,0,0,W,ie+w,le),T=x.lines,I=T.length,Q=-(I-1)*P*.5,M=Me=0,Fe=I-1;Fe>=Me;M=Me+=1)q=T[M],t.fillText(q,0,Q),Q+=P;Base_Graphics.clearShadow(t),t.restore()}}else f&&(L.imageSlicing?(V=L.imageSlicing,v=V[0],_=V[1],y=V[2],d=V[3]):(v=0,_=0,y=f.width,d=f.height),Base_Graphics.drawImageInSquare(t,f,v,_,y,d,ie-te+H,le,H));!L.removed&&N&&L.currentItems&&this.paintNodeItems(t,me,H/A,ie,le,te,H,L.currentItems)}1>O&&(t.globalAlpha=1)}for(Te=0,we=e.length;we>Te;Te++)L=e[Te],null!=L.currentLabel&&"text"!==L.display&&"roundtext"!==L.display&&!L.removed&&(L.renderRadius>B||L.hovered)&&(O=L.opacity,ie=L.x*J+X,le=L.y*$+K,x=L.currentLabel,G=L.renderRadius,this.itemRenderer.measure(t,x),1>O&&(t.globalAlpha=O),W=x.scaleWithSize?H/A:x.scaleWithZoom?me:1,le+=G+x.hheight*W*.8,this.itemRenderer.paint(t,ie,le,W,x),1>O&&(t.globalAlpha=1));if(this.scene.settings.advanced.perNodeLoadingIndicator){for(j=this.scene.settings.advanced.style.loadingArcStyle,t.save(),t.lineCap="round",t.lineWidth=j.lineWidth,t.strokeStyle=j.lineColor,r=n/1400,r=2*(r-Math.floor(r))*Math.PI,o=r+Math.PI/2,ke=0,Ce=e.length;Ce>ke;ke++)if(L=e[ke],L.loading||this.getNodeImage(L)===!1){if(a=!0,ie=L.x*J+X,le=L.y*$+K,H=L.currentRadius*me,se>ie-H||ie+H>oe||ce>le-H||le+H>de)continue;t.beginPath(),t.arc(ie,le,H,r,o),t.stroke()}t.restore()}return a},e.prototype.paintSelection=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U;if(this.scene.selection.length>0){for(H=this.getGeometry(),y=H[0],g=H[1],_=H[2],v=H[3],E=H[4],w=H[5],M=H[6],B=H[7],F=H[8],C=H[9],A=H[10],T=H[11],O=H[12],e=2*Math.PI,m=this.scene.settings.style.selection,d=m.sizeProportional,i=m.sizeConstant,t.beginPath(),U=this.scene.selection,N=0,R=U.length;R>N;N++)u=U[N],f=(u.currentRadius*(1+d)+i)*E,u.isNode?(x=(u.currentHwidth-u.currentRadius)*E+f,S=u.x*y+g,D=u.y*_+v,k=S+x-f,t.moveTo(k,D-f),t.arc(k,D,f,-Math.PI/2,Math.PI/2,!1),k=S-x+f,t.lineTo(k,D+f),t.arc(k,D,f,Math.PI/2,-Math.PI/2,!1),t.closePath()):u.isLink&&(h=u.from,l=u.to,b=h.x*y+g,L=h.y*_+v,P=l.x*y+g,I=l.y*_+v,r=b-P,o=L-I,a=1/Math.sqrt(r*r+o*o),n=r*a,s=o*a,0!==u.currentCenterOffset&&(c=s*u.currentCenterOffset*E,p=-n*u.currentCenterOffset*E,b+=c,L+=p,P+=c,I+=p),n*=f,s*=f,t.moveTo(b+s,L-n),t.lineTo(b-s,L+n),t.lineTo(P-s,I+n),t.lineTo(P+s,I-n),t.closePath());return Base_Graphics.paint(t,m)}},e.prototype.paintLinkDecoration=function(t,e,i,n,s,r,o,a){return t.fillStyle=a,"circle"===o?(t.moveTo(e+r,i),t.arc(e,i,r,0,2*Math.PI,!0)):"arrow"===o?(t.moveTo(e-n*r,i-s*r),t.lineTo(e+n*r-s*r,i+s*r+n*r),t.lineTo(e+n*r+s*r,i+s*r-n*r)):void 0},e.prototype.paintLinkPie=function(t,e,i,n,s,r,o,a){var h,l;return h=(n+s)/2,l=s-n,t.beginPath(),t.arc(e,i,h,r,o),Base_Graphics.paint(t,{lineColor:a,lineWidth:l})},e.prototype.paintLinkItems=function(t,e,i,n,s,r,o,a,h,l){var u,c,p,d,f,m,g,y,v,_,x,S;for(x=0,S=l.length;S>x;x++)p=l[x],u=p.x||0,c=p.y||0,d=p.px||0,f=p.py||0,m=p.lx||0,g=p.ly||0,d=a*(d+1)*.5+m,f=f*h+g,v=n+r*d-o*f+u,_=s+o*d+r*f+c,y=0,y=p.scaleWithSize?i:p.scaleWithZoom?e:1,this.itemRenderer.paint(t,v,_,y,p)},e.prototype.paintNodeItems=function(t,e,i,n,s,r,o,a){var h,l,u,c,p,d,f,m,g,y;for(g=0,y=a.length;y>g;g++)u=a[g],h=u.x||0,l=u.y||0,c=u.px||0,p=u.py||0,f=n+r*c+h,m=s+o*p+l,d=0,d=u.scaleWithSize?i:u.scaleWithZoom?e:1,this.itemRenderer.paint(t,f,m,d,u)},e.prototype.paintHiddenLinks=function(t,e,i,n,s,r,o,a,h){var l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D;if(l=2*Math.PI,y=.73*h/s,v=(s-.1*h)/s,e.links.length>0){for(b=0,P=0,D=e.links,M=0,k=D.length;k>M;M++)g=D[M],b+=g.otherEnd(e).x,P+=g.otherEnd(e).y;b=e.x-b/e.links.length,P=e.y-P/e.links.length,m=1/Math.sqrt(b*b+P*P),c=b*m,d=P*m}else c=1,d=0;for(u=l/o/3,S=Math.cos(-u*(o-1)/2),C=Math.sin(-u*(o-1)/2),p=c*S-d*C,w=c*C+d*S,x=p,S=Math.cos(u),C=Math.sin(u),t.beginPath(),f=T=1;o>=T;f=T+=1)_=Base_Geometry.distanceToBalloon(s,r,x,w),t.moveTo(i+x*_,n+w*_),t.lineTo(i+x*(_+h),n+w*(_+h)),p=x*S-w*C,w=x*C+w*S,x=p;return t.strokeStyle=a.lineColor,t.lineWidth=a.lineWidth,t.stroke()},e}(Base_ChartElement);var Netchart_Layers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Layers=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.container=Base_Helpers.createDom("div","DVSL-container"),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="100%",this.background=Base_Helpers.createDom("div","DVSL-background",null,this.container),this.setContainerStyle(this.background),this.canvas=Base_Helpers.createDom("canvas","DVSL-canvas",null,this.container),this.setContainerStyle(this.canvas),this.outerBorder=Base_Helpers.createDom("div","DVSL-border",null,this.container),this.setContainerStyle(this.outerBorder),this.resizerBar=Base_Helpers.createDom("div","DVSL-resizer",null,this.container),this.mouseTrackLayer=Base_Helpers.createDom("div",null,null,this.container),this.setContainerStyle(this.mouseTrackLayer),this.updateSettings(this.scene.settings,"init")}return __extends(e,t),e.prototype.animationOrder=900,e.prototype.paintOrder=50,e.prototype.updateOrder=600,e.prototype.scene=null,e.prototype.container=null,e.prototype.background=null,e.prototype.canvas=null,e.prototype.outerBorder=null,e.prototype.mouseTrackLayer=null,e.prototype.updateSettings=function(t){return Base_Helpers.hasProp(t,"advanced.themeCSSClass")?(null!=this.curTheme&&Base_Helpers.removeClass(this.container,this.curTheme),this.curTheme=this.scene.settings.advanced.themeCSSClass,Base_Helpers.addClass(this.container,this.curTheme)):void 0},e.prototype.doAnimations=function(t){var e,i;if(t.changes.bounds)return i=this.scene.settings.width,e=this.scene.settings.height,this.scene.chartWidth>this.scene.settings.container.clientWidth&&(i=this.scene.chartWidth),this.scene.chartHeight>this.scene.settings.container.clientHeight&&(e=this.scene.chartHeight),i&&(this.container.style.width=""+i+"px"),e&&(this.container.style.height=""+e+"px"),this.resizerBar.style.width=""+this.scene.width+"px",this.resizerBar.style.left=""+this.scene.x0+"px"},e.prototype.setContainerStyle=function(t){return t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px"},e}(Base_ChartElement);var Itemschart_Styles,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Styles=function(t){function e(t){this.chart=t,this.scene=t.scene,this.time=null,this.nodeClasses=Base_Helpers.arrayToMap(this.scene.settings.style.nodeClasses,"className"),this.linkClasses=Base_Helpers.arrayToMap(this.scene.settings.style.linkClasses,"className")}return __extends(e,t),e.prototype.animationOrder=200,e.prototype.paintOrder=30,e.prototype.updateOrder=1e3,e.prototype.sortRules=function(t){var e,i,n;return i=function(){var i;i=[];for(e in t)n=t[e],i.push(e);return i}(),i.sort(),function(){var n,s,r;for(r=[],n=0,s=i.length;s>n;n++)e=i[n],r.push(t[e]);return r}()},e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&(e.settingsChanges.nodeClasses||e.settingsChanges.linkClasses)?(this.nodeClasses=Base_Helpers.arrayToMap(this.scene.settings.style.nodeClasses,"className"),this.linkClasses=Base_Helpers.arrayToMap(this.scene.settings.style.linkClasses,"className")):void 0},e.prototype.doAnimations=function(t){return(t.changes.style||t.changes.settings||Base_Helpers.hasProperties(this.scene.modifiedNodes)||Base_Helpers.hasProperties(this.scene.modifiedLinks))&&this.updateItems(t),this.animateChanges(t)},e.prototype.updateItems=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b;if(this.nodeRules=this.sortRules(this.scene.settings.style.nodeRules),this.linkRules=this.sortRules(this.scene.settings.style.linkRules),this.nodeRadiusChanged=Base_Helpers.hasProperties(this.scene.newNodes)|Base_Helpers.hasProperties(this.scene.deletedNodes),this.linkRadiusChanged=Base_Helpers.hasProperties(this.scene.newLinks)|Base_Helpers.hasProperties(this.scene.deletedLinks),e=this.scene.settings.navigation&&"focusnodes"===this.scene.settings.navigation.mode&&this.scene.settings.navigation.focusAutoFadeout,i=t.context,this.itemBase=this.scene.settings.style.item,this.nodeLabelBase=this.scene.settings.style.nodeLabel,this.linkLabelBase=this.scene.settings.style.linkLabel,this.itemRenderer=new Base_LabelRenderer(this.chart),t.changes.style||t.changes.settings){for(this.nodeRadiusChanged=!0,this.linkRadiusChanged=!0,v=this.scene.nodes(),p=0,m=v.length;m>p;p++)l=v[p],this.updateNode(l,e);for(_=this.scene.links(),d=0,g=_.length;g>d;d++)r=_[d],this.updateLink(r,e),this.postprocessLink(r,i)}else{x=this.scene.modifiedNodes;for(n in x)u=x[n],this.updateNode(u,e);S=this.scene.modifiedLinks;for(s in S)o=S[s],this.updateLink(o,e),this.postprocessLink(o,i)}if(c=this.scene.nodes(),this.nodeRadiusChanged||e&&t.changes.navigation)for(this.computeRadii(c,this.scene.settings.style.nodeAutoScaling,this.scene.settings.style.nodeRadiusExtent,e),f=0,y=c.length;y>f;f++)h=c[f],this.postprocessNode(h,i);else{b=this.scene.modifiedNodes;for(n in b)u=b[n],this.postprocessNode(u,i)}return(this.linkRadiusChanged||e&&t.changes.navigation)&&(a=this.scene.links(),this.computeRadii(a,this.scene.settings.style.linkAutoScaling,this.scene.settings.style.linkRadiusExtent,e),this.computeStrengths(a,this.scene.settings.style.linkStrengthAutoScaling,this.scene.settings.style.linkStrengthExtent),this.computeLengths(a,this.scene.settings.style.linkLengthAutoScaling,this.scene.settings.style.linkLengthExtent),Base_Helpers.sort(a,function(t,e){return t.targetRadius===e.targetRadius?0:t.targetRadius>e.targetRadius?1:-1})),Base_Helpers.sort(c,function(t,e){return t.zindex-e.zindex})},e.prototype.updateNode=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d;if(h=this.scene.settings.style,i=t===this.scene.hoverNode,r=t.radius,Base_Helpers.extend(t,h.node),t.radius||(t.radius=10),t.label="point"===t.type?t.id:null,t.labelStyle=this.nodeLabelBase,t.userLock&&Base_Helpers.extend(t,h.nodeLocked),t.expanded&&Base_Helpers.extend(t,h.nodeExpanded),t.focused&&Base_Helpers.extend(t,h.nodeFocused),t.background&&Base_Helpers.extend(t,h.nodeBackground),t.data.loaded||Base_Helpers.extend(t,h.nodeNotLoaded),t.data){if(null!=t.data.error&&(t.label=t.data.error,t.fillColor="red"),t.data.type&&(t.display=t.data.type),t.data.style&&Base_Helpers.extend(t,t.data.style),this.applyStyleRules(t,this.nodeRules),t.data.className)for(a=this.getClassSequence(t.data.className,this.nodeClasses),l=0,c=a.length;c>l;l++)n=a[l],Base_Helpers.extend(t,this.scene.settings.style.nodeClasses[n].style);t.labelStyle!==this.nodeLabelBase&&(s=Base_Helpers.realClone(this.nodeLabelBase),Base_Helpers.extendDeep(s,t.labelStyle),t.labelStyle=s)}for(t.removed&&(t.fillColor=this.scene.settings.style.removedColor),i&&Base_Helpers.extend(t,this.scene.settings.style.nodeHovered),d=t.links,u=0,p=d.length;p>u;u++)s=d[u],this.updateLink(s,e);return r!==t.radius&&(this.nodeRadiusChanged=!0),e&&t.relevance<1&&(o=this.scene.settings.style.removedColor,t.fillColor&&(t.fillColor=Base_Graphics.blendColors(o,t.fillColor,t.relevance)),t.lineColor&&(t.lineColor=Base_Graphics.blendColors(o,t.lineColor,t.relevance))),!0},e.prototype.updateLink=function(t,e){var i,n,s,r,o,a,h,l;if(r=t.radius,Base_Helpers.extend(t,this.scene.settings.style.link),t.label=null,t.labelStyle=this.linkLabelBase,t.radius=1,i=t===this.scene.hoverLink||t.from===this.scene.hoverNode||t.to===this.scene.hoverNode,t.data.style&&Base_Helpers.extend(t,t.data.style),this.applyStyleRules(t,this.linkRules),t.data.className)for(a=this.getClassSequence(t.data.className,this.linkClasses),h=0,l=a.length;l>h;h++)n=a[h],Base_Helpers.extend(t,this.scene.settings.style.linkClasses[n].style);return t.labelStyle!==this.linkLabelBase&&(s=Base_Helpers.realClone(this.linkLabelBase),Base_Helpers.extendDeep(s,t.labelStyle),t.labelStyle=s),i&&(Base_Helpers.extend(t,this.scene.settings.style.linkHovered),t.from===this.scene.hoverNode&&(t.toPieColor=t.fillColor)),t.removed&&(t.fillColor=this.scene.settings.style.removedColor),r!==t.radius&&(this.linkRadiusChanged=!0),e&&t.relevance<1?(o=this.scene.settings.style.removedColor,t.fillColor&&(t.fillColor=Base_Graphics.blendColors(o,t.fillColor,t.relevance)),t.lineColor&&(t.lineColor=Base_Graphics.blendColors(o,t.lineColor,t.relevance)),t.length=.2+(t.length-.2)*t.relevance):void 0},e.prototype.applyStyleRules=function(t,e){var i,n,s,r;for(r=[],n=0,s=e.length;s>n;n++)i=e[n],r.push(i(t));return r},e.prototype.getClassSequence=function(t,e){var i,n,s,r,o;for(t=t.replace(/^\s+|\s+$/g,"").split(/\s+/g),n=[],r=0,o=t.length;o>r;r++)i=t[r],s=e[i],null!=s?n.push(s.index):this.chart.error("class "+i+" undefined");return n.sort(function(t,e){return t-e})},e.prototype.computeRadii=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P;if(a=i[0],r=i[1],"linear"===e||"logarithmic"===e||"square"===e){for(o=1/0,s=-1/0,c=0,m=t.length;m>c;c++)l=t[c],l.removed||"shape"===l.type||(u=l.radius,Base_Helpers.isNumber(u)?(o=Math.min(o,u),s=Math.max(s,u)):l.targetRadius=a);if(o>=s)for(p=0,g=t.length;g>p;p++)l=t[p],l.removed||"shape"===l.type||(l.targetRadius=a);else if("linear"===e)for(h=r/s,d=0,y=t.length;y>d;d++)l=t[d],l.removed||(u=l.radius,Base_Helpers.isNumber(u)&&(l.targetRadius=Math.max(a,u*h)));else if("square"===e)for(h=r/Math.sqrt(s),f=0,v=t.length;v>f;f++)l=t[f],l.removed||(u=l.radius,Base_Helpers.isNumber(u)&&(l.targetRadius=Math.max(a,Math.sqrt(u)*h)));else for(o=Math.max(1e-4,o),s=Math.max(o+1e-4,s),h=r/Math.log(s),b=0,_=t.length;_>b;b++)l=t[b],!l.removed&&"shape"!==l.type&&Base_Helpers.isNumber(l.radius)&&(l.targetRadius=Math.max(a,Math.log(Math.max(1e-4,l.radius))*h))}else for(w=0,x=t.length;x>w;w++)l=t[w],l.removed||"shape"===l.type||(l.targetRadius=Base_Helpers.isNumber(l.radius)?Math.min(Math.max(1e-6,l.radius),1e30):a);if(n){for(P=[],C=0,S=t.length;S>C;C++)l=t[C],P.push(l.relevance<1&&"shape"!==l.type?l.targetRadius=l.targetRadius*l.relevance:void 0);return P}},e.prototype.computeStrengths=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M;if(o=i[0],s=i[1],"linear"===e||"logarithmic"===e||"square"===e){for(r=1/0,n=-1/0,u=0,f=t.length;f>u;u++)h=t[u],h.removed||(r=Math.min(r,h.strength),n=Math.max(n,h.strength));if(r>=n){for(b=[],c=0,m=t.length;m>c;c++)h=t[c],b.push(h.removed?void 0:h.targetStrength=o);return b}if("linear"===e){for(a=s/n,w=[],p=0,g=t.length;g>p;p++)h=t[p],w.push(h.removed?void 0:h.targetStrength=Math.min(o,h.strength*a));return w}if("square"===e){for(a=s/Math.sqrt(n),C=[],d=0,y=t.length;y>d;d++)h=t[d],h.removed?C.push(void 0):(l=h.strength,C.push(Base_Helpers.isNumber(l)?h.targetStrength=Math.max(o,Math.sqrt(l)*a):void 0));return C}for(r=Math.max(1e-4,r),n=Math.max(r+1e-4,n),a=s/Math.log(n),P=[],x=0,v=t.length;v>x;x++)h=t[x],P.push(h.removed?void 0:h.targetStrength=Math.max(o,Math.log(Math.max(1e-4,h.strength))*a));return P}for(M=[],S=0,_=t.length;_>S;S++)h=t[S],M.push(h.removed?void 0:h.targetStrength=Math.min(Math.max(o,h.strength),s));return M},e.prototype.computeLengths=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T;
if(a=i[0],r=i[1],"linear"===e||"logarithmic"===e||"square"===e){for(o=1/0,s=-1/0,c=0,m=t.length;m>c;c++)l=t[c],l.removed||(o=Math.min(o,l.length),s=Math.max(s,l.length));if(o>=s){for(w=[],p=0,g=t.length;g>p;p++)l=t[p],w.push(l.removed?void 0:l.targetLength=a);return w}if("linear"===e){for(h=(r-a)/(s-o),n=r-s*h,C=[],d=0,y=t.length;y>d;d++)l=t[d],C.push(l.removed?void 0:l.targetLength=l.length*h+n);return C}if("square"===e){for(h=r/Math.sqrt(s),P=[],f=0,v=t.length;v>f;f++)l=t[f],l.removed?P.push(void 0):(u=l.length,P.push(Base_Helpers.isNumber(u)?l.targetLength=Math.max(a,Math.sqrt(u)*h):void 0));return P}for(o=Math.max(1e-4,o),s=Math.max(o+1e-4,s),h=(r-a)/Math.log(s/o),n=r-h*Math.log(s),M=[],S=0,_=t.length;_>S;S++)l=t[S],M.push(l.removed?void 0:l.targetLength=Math.log(Math.max(1e-4,l.length))*h+n);return M}for(T=[],b=0,x=t.length;x>b;b++)l=t[b],T.push(l.removed?void 0:l.targetLength=Math.min(Math.max(a,l.length),r));return T},e.prototype.postprocessNode=function(t,e){var i,n,s,r,o,a;return i=t.display,s=null,"shape"===t.type?(this.computeShapeBounds(t),t.targetRadius=t.radius):t.hwidth=t.targetRadius,t.label&&("text"===i?(r=t.targetRadius,s=new Base_Label(t.labelStyle),s.text=t.label.toString(),s.backgroundStyle=null,s.image=null,this.itemRenderer.measure(e,s),a=s.hwidth,n=s.hheight,o=a/n*r,t.image&&(o+=r),t.hwidth=Math.max(o,r)):"roundtext"===i?(s=new Base_Label(t.labelStyle),s.text=t.label.toString(),s.aspectRatio=1,s.image=null):(s=new Base_Label(t.labelStyle),s.text=t.label.toString())),t.currentLabel=s,t.currentItems=[],this.postprocessItems(t)},e.prototype.computeShapeBounds=function(t){var e,i,n,s,r,o,a,h,l,u,c;for(n=1/0,s=-1/0,r=1/0,o=-1/0,u=t.coordinates,a=0,l=u.length;l>a;a++)for(i=u[a],e=h=0,c=i.length-1;c>=h;e=h+=2)n=Math.min(n,i[e]),s=Math.max(s,i[e]),r=Math.min(r,i[e+1]),o=Math.max(o,i[e+1]);return t.x=(n+s)/2,t.y=(r+o)/2,t.radius=(o-r)/2,t.hwidth=(s-n)/2},e.prototype.postprocessLink=function(t){var e,i;return i=[],t.label&&(e=new Base_Label(t.labelStyle),e.text=t.label.toString(),e.px=0,e.py=0,i.push(e)),t.currentItems=i,this.postprocessItems(t)},e.prototype.postprocessItems=function(t){var e,i,n,s,r,o,a;for(e=t.currentItems,o=t.items,a=[],s=0,r=o.length;r>s;s++)n=o[s],i=new Base_Label(this.itemBase),Base_Helpers.extendCopy(i,n),i.data=n,null!=i.text&&(i.text=i.text.toString()),a.push(e.push(i));return a},e.prototype.animateChanges=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D;if(d=t.time,o=t.changes.newGraph,i=t.dtime,e=!1,s=this.scene.settings.style.fadeTime,o||(o=!(s>0)||i>s),p=[],l=[],o){for(M=this.scene.nodes(),f=0,v=M.length;v>f;f++)c=M[f],c.removed?p.push(c):c.hwidth!==c.currentHwidth&&(c.added=!1,c.currentRadius=c.targetRadius,c.currentHwidth=c.hwidth);for(T=this.scene.links(),m=0,_=T.length;_>m;m++)h=T[m],h.removed?l.push(h):h.targetRadius!==h.currentRadius&&(h.added=!1,h.currentRadius=h.targetRadius)}else{for(n=!o&&s>0?Math.max(0,Math.pow(.2,i/s)):0,r=.01,k=this.scene.nodes(),g=0,x=k.length;x>g;g++)c=k[g],c.added===!0&&(c.added=d),c.added+s<d&&(c.added=!1),c.removed===!0&&(c.removed=d),c.removed?(e=!0,c.currentRadius=c.currentRadius*n,c.currentHwidth=c.currentHwidth*n,c.removed+s<d&&p.push(c)):c.hwidth!==c.currentHwidth&&(e=!0,c.currentRadius=c.currentRadius*n+c.targetRadius*(1-n),c.currentHwidth=c.currentHwidth*n+c.hwidth*(1-n),Math.abs(c.currentRadius-c.targetRadius)<r*c.targetRadius&&(c.currentRadius=c.targetRadius,c.currentHwidth=c.hwidth));for(D=this.scene.links(),y=0,S=D.length;S>y;y++)h=D[y],h.added===!0&&(h.added=d),h.added+s<d&&(h.added=!1),h.removed===!0&&(h.removed=d),h.removed?(e=!0,h.currentRadius=h.currentRadius*n,h.removed+s<d&&l.push(h)):h.targetRadius!==h.currentRadius&&(e=!0,h.currentRadius=h.currentRadius*n+h.targetRadius*(1-n),Math.abs(h.currentRadius-h.targetRadius)<r*h.targetRadius&&(h.currentRadius=h.targetRadius))}for(C=0,b=l.length;b>C;C++)a=l[C],this.scene.deleteLink(a);for(P=0,w=p.length;w>P;P++)u=p[P],this.scene.deleteNode(u);return e?(t.changes.position=!0,t.animating=!0):void 0},e}(Base_ChartElement);var Itemschart_Menu,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Menu=function(t){"use strict";function e(t){var e;this.chart=t,this.container=t.layers.container,this.scene=t.scene,this.events=t.events,this.buttons=[],this.popup=Base_Helpers.createDom("div","DVSL-Menu",null,this.container),e=Base_Helpers.createDom("a","DVSL-Menu-close","X",this.popup),this.popupValue=Base_Helpers.createDom("div","DVSL-Menu-title",null,this.popup),this.detailsDiv=Base_Helpers.createDom("div","DVSL-Menu-details",null,this.popup),this.popupActions=Base_Helpers.createDom("nav",null,null,this.popup),this.buildDetailsPanel(this.detailsDiv),this.buildCloseButton(e),this.popup.style.position="absolute",this.popup.style.display="none"}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=40,e.prototype.updateOrder=800,e.prototype.node=null,e.prototype.link=null,e.prototype.contents=null,e.prototype.x=0,e.prototype.y=0,e.prototype.doAnimations=function(){return null!=this.node?null!=this.node&&this.node.removed||null!=this.link&&this.link.removed?this.hideMenu():null!=this.node&&this.scene.modifiedNodes.hasOwnProperty(this.node.id)?this.updateMenu():void 0:void 0},e.prototype.previewPointerDown=function(){return this.hideMenu()},e.prototype.previewWheel=function(){return this.hideMenu()},e.prototype.toggleNodeMenu=function(t){return this.node===t?this.hideMenu():this.showNodeMenu(t)},e.prototype.toggleLinkMenu=function(t,e,i){return this.link===i?this.hideMenu():this.showLinkMenu(t,e,i)},e.prototype.showNodeMenu=function(t){return this.scene.settings.nodeMenu.enabled?this.node===t?this.updateMenu():(this.hideMenu(),this.showPopup(t,null)):void 0},e.prototype.showLinkMenu=function(t,e,i){return this.scene.settings.linkMenu.enabled?(this.x=t,this.y=e,this.link===i?this.updateMenu():(this.hideMenu(),this.showPopup(null,i))):void 0},e.prototype.showPopup=function(t,e){this.node=t,this.link=e,this.node&&(this.node.locks+=1),this.buildButtons(),this.contents=null,this.updateMenu(),this.popup.style.display="block",this.updateXY()},e.prototype.hideMenu=function(){return this.node||this.link?(this.node&&(this.node.locks-=1),this.node=null,this.link=null,this.popup.style.display="none",!1):!1},e.prototype.updateMenu=function(){var t,e,i,n,s,r,o;return null!=this.node?(r=this.scene.settings.nodeMenu,s=this.node):(r=this.scene.settings.linkMenu,s=this.link),r.contentsFunction?(n=this.node,i=this.link,t=function(t){return this.node===n&&this.link===i?(this.contents=t,this.popupValue.innerHTML=t):void 0},o=r.contentsFunction.call(this.chart.api,s.data,s,t),e=Base_Helpers.isString(o)?o:null===this.contents?"<small>"+this.scene.settings.localization.loadingLabel+"</small>":this.contents):e=s.label,e!==this.contents&&(this.contents=e,this.popupValue.innerHTML=e),this.updateButtons(),r.showData?(this.details.innerHTML=JSON.stringify(s.data,null,"  "),this.detailsDiv.style.display="block"):this.detailsDiv.style.display="none"},e.prototype.updateXY=function(){var t,e,i,n,s,r,o,a,h,l,u,c;return e=12,null!=this.node?(c=this.scene.toDisplay(this.node.x,this.node.y),i=c[0],r=c[1],o=r-this.node.renderRadius-e,a=r+this.node.renderRadius+e,n=i-this.node.renderRadius-e,s=i+this.node.renderRadius+e):(o=a=r=this.y,n=this.x-e,s=this.x+e),l=this.scene.x0,u=this.scene.x0+this.scene.width,h=this.popup.offsetWidth,t=this.popup.offsetHeight,r=Math.max(Math.min(r,this.scene.y0+this.scene.height-t),this.scene.y0),u>=s+h?i=s:n-h>=l?i=n-h:(i=Math.max(n-h/2,l),r=a),this.popup.style.left=i+"px",this.popup.style.top=r+"px"},e.prototype.buildButtons=function(){var t,e,i,n,s,r,o;if(this.popupActions.innerHTML="",this.buttons=[],null!=this.node){for(r=this.scene.settings.nodeMenu.buttons,o=[],n=0,s=r.length;s>n;n++)e=r[n],"expand"===e?(i=Base_Helpers.createDom("a","DVSL-NC-button-expand",null,this.popupActions),t=this.updateExpandButton):"focus"===e?(i=Base_Helpers.createDom("a","DVSL-NC-button-focus",null,this.popupActions),t=this.updateFocusButton):"lock"===e?(i=Base_Helpers.createDom("a","DVSL-NC-button-lock",null,this.popupActions),t=this.updateLockButton):"hide"===e&&(i=Base_Helpers.createDom("a","DVSL-NC-button-hide",null,this.popupActions),t=this.updateHideButton),i.href="#",o.push(this.buttons.push({e:i,a:t}));return o}},e.prototype.updateButtons=function(){var t,e,i,n;for(n=this.buttons,e=0,i=n.length;i>e;e++)t=n[e],t.a.call(this,t.e)},e.prototype.updateExpandButton=function(t){var e;return!this.node.expanded||this.node.dataLinksFiltered.length>this.node.links.length?(e=this.scene.settings.localization.menu.expand,t.className="DVSL-NC-button-expand",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.expandNode(t.node.id,1),e.preventDefault()}}(this)):(e=this.scene.settings.localization.menu.collapse,t.className="DVSL-NC-button-collapse",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.collapseNode(t.node.id),e.preventDefault()}}(this))},e.prototype.updateFocusButton=function(t){var e;return this.node.focused?(e=this.scene.settings.localization.menu.unfocus,t.className="DVSL-NC-button-unfocus",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.removeFocusNode(t.node.id),e.preventDefault()}}(this)):(e=this.scene.settings.localization.menu.focus,t.className="DVSL-NC-button-focus",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.addFocusNode(t.node.id),e.preventDefault()}}(this))},e.prototype.updateLockButton=function(t){var e;return this.node.userLock?(e=this.scene.settings.localization.menu.fixed,t.className="DVSL-NC-button-lock",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.unlockNode(t.node.id),e.preventDefault()}}(this)):(e=this.scene.settings.localization.menu.dynaminc,t.className="DVSL-NC-button-unlock",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.lockNode(t.node.id),e.preventDefault()}}(this))},e.prototype.updateHideButton=function(t){var e;return e=this.scene.settings.localization.menu.hide,t.className="DVSL-NC-button-hide",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.hideNode(t.node.id),e.preventDefault()}}(this)},e.prototype.buildCloseButton=function(t){return t.title=this.scene.settings.localization.closeButton,t.href="#",t.onclick=function(t){return function(e){return t.hideMenu(),e.preventDefault()}}(this)},e.prototype.buildDetailsPanel=function(t){var e,i;return e=Base_Helpers.createDom("small",null,"Technical data",t),this.details=i=Base_Helpers.createDom("pre",null,"",t),i.style.display="none",e.onclick=function(){return i.style.display="none"===i.style.display?"block":"none"}},e}(Base_ChartElement);var Itemschart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_InfoPopup=function(t){function e(t){this.chart=t,this.scene=t.scene,this.options=this.scene.settings,this.item=null,this.x=null,this.y=null,this.popup=new Base_InfoPopup(t)}return __extends(e,t),e.prototype.animationOrder=800,e.prototype.paintOrder=45,e.prototype.updateOrder=700,e.prototype.previewPointerMove=function(t){return this.onMove(t.x,t.y)},e.prototype.doAnimations=function(){return null!==this.x&&null!==this.y?this.onMove(this.x,this.y):void 0},e.prototype.previewPointerDown=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.previewPointerDrag=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onPointerOut=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onMove=function(t,e){var i;return this.x=t,this.y=e,this.options.info.enabled?(i=this.scene.hoverNode?this.scene.hoverNode:this.scene.hoverLink,this.setCurrentObject(t,e,i)):void 0},e.prototype.setCurrentObject=function(t,e,i){var n;return i?(i!==this.item?(n=this.buildContents(i),this.popup.show(t,t,e,n)):this.popup.updateXY(t,t,e),this.item=i):(this.item=null,this.popup.hide())},e.prototype.buildContents=function(t){var e,i;return i=null,t instanceof Itemschart_Node?i=this.options.info.nodeContentsFunction:t instanceof Itemschart_Link&&(i=this.options.info.linkContentsFunction),i?(e=function(e){return function(i){return t===e.item?e.popup.updateContents(i):void 0}}(this),i.call(this.scene.api,t.data,t,e)):t.label},e}(Base_ChartElement);var Netchart_AutoZoom,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_AutoZoom=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.settings=this.scene.settings,this.animatorX=new Base_Animator(0,0,this.settings.interaction.animation.scrollDuration,"="),this.animatorY=new Base_Animator(0,0,this.settings.interaction.animation.scrollDuration,"="),this.animatorZ=new Base_Animator(0,0,this.settings.interaction.animation.scrollDuration,"="),this.numPointers=0,this.resetZoom=!1}return __extends(e,t),e.prototype.animationOrder=400,e.prototype.paintOrder=20,e.prototype.updateOrder=1200,e.prototype.setZoom=function(t,e){var i,n;return null==e&&(e=!0),n=1+this.scene.settings.interaction.zooming.sensitivity,"auto"===t?(this.scene.autoZoomMode=!0,this.autoZoom(e)):"overview"===t?(this.scene.autoZoomMode="overview",this.autoZoom(e)):("in"===t?i=this.animatorZ.to*n:"out"===t?i=this.animatorZ.to/n:Base_Helpers.isNumber(t)?i=parseFloat(t):(this.chart.error("Invalid zoom value: "+t),i=this.animatorZ.to),this.manualZoom(i/this.scene.zoom,void 0,void 0,e)),this.chart.events.notifySceneChanges({position:!0})},e.prototype.previewPointerDown=function(){return this.numPointers+=1},e.prototype.previewPointerUp=function(){return this.numPointers-=1},e.prototype.previewPointerCancel=function(){return this.numPointers-=1},e.prototype.doAnimations=function(t){var e,i,n,s;return Base_Helpers.hasProp(t,"changes.settingsChanges.interaction.zooming")&&(this.scene.autoZoomMode=this.scene.settings.interaction.zooming.initialAutoZoom),this.resetZoom||t.changes.newGraph?(this.resetZoom=!1,this.setZoom("overview",!1)):0===this.numPointers&&this.scene.nodes().length>0?(this.scene.autoZoomMode&&this.autoZoom(!0)&&(t.changes.position=!0),n=t.time,e=this.animatorX.get(n),i=this.animatorY.get(n),s=this.animatorZ.get(n),(e!==this.scene.centerX||i!==this.scene.centerY||s!==this.scene.zoom)&&(this.scene.centerX=e,this.scene.centerY=i,this.scene.zoom=s,t.changes.position=!0),this.animatorX.finished(n)&&this.animatorY.finished(n)&&this.animatorZ.finished(n)?void 0:t.animating=!0):(this.animatorX.jump(this.scene.centerX),this.animatorY.jump(this.scene.centerY),this.animatorZ.jump(this.scene.zoom))},e.prototype.autoZoom=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d;return s=!1,d=this.computeAutoZoom("overview"===this.scene.autoZoomMode),r=d[0],o=d[1],c=d[2],i=.01,n=1+i,e=1-i,p=this.animatorZ.to/c,(p>n||e>p)&&(t?this.animatorZ.retargetColor(c):(this.animatorZ.jump(c),this.scene.zoom=c),s=!0),h=this.scene.width,l=(this.animatorX.to-r)*c/h,(l>i||-i>l)&&(t?this.animatorX.retargetColor(r):(this.animatorX.jump(r),this.scene.centerX=r),s=!0),a=this.scene.height,u=(this.animatorY.to-o)*c/a,(u>i||-i>u)&&(t?this.animatorY.retargetColor(o):(this.animatorY.jump(o),this.scene.centerY=o),s=!0),s},e.prototype.getOnscreenBounds=function(t){var e,i,n,s,r,o;return null==t&&(t=1),o=this.scene.width*t,e=this.scene.height*t,i=this.scene.settings.area.paddingLeft,n=this.scene.settings.area.paddingRight,s=this.scene.settings.area.paddingTop,r=this.scene.settings.area.paddingBottom,1>=i&&(i=o*i),n=1>=n?o*(1-n):o-n,1>=s&&(s=e*s),r=1>=r?e*(1-r):e-r,[i,s,n,r]},e.prototype.computeAutoZoom=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D;return T=this.scene.getGraphBounds(),b=T[0],C=T[1],w=T[2],P=T[3],b===w&&C===P&&(b=0,w=1,C=0,P=1),S=this.scene.width*this.scene.settings.interaction.zooming.autoZoomSize,h=this.scene.height*this.scene.settings.interaction.zooming.autoZoomSize,k=this.getOnscreenBounds(this.scene.settings.interaction.zooming.autoZoomSize),y=k[0],_=k[1],v=k[2],x=k[3],M=Math.min((v-y)/(w-b),(x-_)/(P-C)),a=this.scene.settings.interaction.zooming.autoZoomExtent,l=this.scene.lastClickedNode,M=Math.min(a[1],M),t?(u=(b+w)/2-S*(this.scene.settings.area.centerX-.5)/M,c=(C+P)/2-h*(this.scene.settings.area.centerY-.5)/M):(M=Math.max(M,a[0]),l?l.expanded&&l.links.length>1?(D=this.scene.getNodeNeighborsBounds(l),p=D[0],f=D[1],d=D[2],m=D[3],g=Math.min((v-y)/(d-p),(x-_)/(m-f)),u=(p+d)/2,c=(f+m)/2,M=Math.min(g,M)):(u=l.x,c=l.y):(u=this.scene.centerX,c=this.scene.centerY)),i=b-(y-S/2)/M,e=w-(v-S/2)/M,s=C-(_-h/2)/M,n=P-(x-h/2)/M,r=this.scene.centerX,o=this.scene.centerY,t?(r=Math.min(i,Math.max(e,u)),o=Math.min(s,Math.max(n,c))):(e>r&&u>r?r=Math.min(e,u):r>i&&r>u&&(r=Math.max(i,u)),n>o&&c>o?o=Math.min(n,c):o>s&&o>c&&(o=Math.max(s,c))),[r,o,M*this.scene.settings.interaction.zooming.autoZoomSize]},e.prototype.manualZoom=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A;if(null==n&&(n=!1),l=this.settings.interaction.zooming.zoomExtent,D=this.scene.getGraphBounds(),x=D[0],w=D[1],S=D[2],C=D[3],t>1?p=Math.max(this.scene.zoom,Math.min(l[1],this.scene.zoom*t)):1>t?(L=this.getOnscreenBounds(),g=L[0],v=L[1],y=L[2],_=L[3],u=Math.min((y-g)/(S-x),(_-v)/(C-w)),p=Math.min(this.scene.zoom,Math.max(Math.min(l[0],u),this.scene.zoom*t))):p=this.scene.zoom,t=p/this.scene.zoom,void 0!==e&&void 0!==i)B=this.scene.fromDisplay(e,i),f=B[0],m=B[1];else if(this.scene.selection.length>0){for(b=0,P=0,c=0,A=this.scene.selection,T=0,k=A.length;k>T;T++)d=A[T],d.isNode&&(b+=d.x,P+=d.y,c+=1);c>0&&(f=b/c,m=P/c)}return f&&m?(r=(this.scene.centerX-f)/t+f,o=(this.scene.centerY-m)/t+m):(r=f=this.scene.centerX,o=m=this.scene.centerY),M=this.scene.zoom*t,s=this.scene.getVisibleBounds(),(x>f||f>S)&&(a=s.x0>x&&s.x1>S?Math.max(S-s.x1,x-s.x0):s.x1<S&&s.x0<x?Math.min(S-s.x1,x-s.x0):0,r+=a),(w>m||m>C)&&(h=s.y0>w&&s.y1>C?Math.max(C-s.y1,w-s.y0):s.y1<C&&s.y0<x?Math.min(C-s.y1,w-s.y0):0,o+=h),n&&M!==this.scene.zoom?this.animatorZ.retargetColor(M):(this.animatorZ.jump(M),this.scene.zoom=M),!n||r===this.scene.centerX&&o===this.scene.centerY?(this.scene.centerX=r,this.scene.centerY=o,this.animatorX.jump(r),this.animatorY.jump(o)):(this.animatorX.retargetColor(r),this.animatorY.retargetColor(o)),this.scene.autoZoomMode=!1},e}(Base_ChartElement);var Base_Export;Base_Export=function(){function t(){}return t.exportToImage=function(e,i,n,s){var r,o,a,h,l,u,c,p,d,f;return null==i&&(i="png"),void 0===s&&(s="png"===i),p={png:"image/png",jpeg:"image/jpeg"},c=p[i],f=t.exportToImageGetDimensions(e,n),a=f[0],o=f[1],d=f[2],l=f[3],h=f[4],r=document.createElement("canvas"),r.width=a,r.height=o,u=r.getContext("2d"),s||(u.fillStyle="#fff",u.fillRect(0,0,r.width,r.height)),e.events.exportToContext(u,(a-l*d)/2,(o-h*d)/2,d),r.toDataURL(c)},t.exportToPdf=function(e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y;return m=e.events.exportToImageGetDimensions(),p=[10,10,10,10],s=[],f=d=0,h=r=0,a=72,g=1,y=l=0,m[0]>=m[1]?(s=[297,210],u="l"):(s=[210,297],u="p"),f=s[0]/25.4*a,d=s[1]/25.4*a,g=Math.min(d/m[1],f/m[0]),"l"===u?(y=m[0]*g/f*s[0]-p[1]-p[3],h=(s[0]-y-p[1]-p[3])/2,l=m[1]/m[0]*y,r=(s[1]-p[0]-p[2]-l)/2):(l=m[1]*g/d*s[1]-p[0]-p[2],r=(s[1]-l-p[0]-p[2])/2,y=m[0]/m[1]*l,h=(s[0]-p[1]-p[3]-y)/2),c=t.exportToImage(e,"jpeg",{scaling:3*g},n),o=new jsPDF(u,"mm","a4"),o.addImage(c,"JPEG",p[3]+h,p[0]+r,y,l),o.output("datauristring")},t.exportAndStartDownload=function(e,i,n,s){var r,o,a,h,l;return null==i&&(i="png"),null==n&&(n={}),a={png:"image/png",jpeg:"image/jpeg",csv:"text/csv",xls:"application/vnd.ms-excel"},o=a[i],("csv"===i||"xls"===i)&&(l=JSON.stringify(e.exportVisibleData()),this.proxyExport(e,o,l,"json",{})),"png"===i||"jpeg"===i?(h=t.exportToImage(e,i,n,s),this.proxyExport(e,o,h,"base64",n)):"pdf"!==i?e.error("Unrecognized export type: "+i):(r=function(i){return function(){var r;return r=t.exportToPdf(e,n,s),i.proxyExport(e,"application/pdf",r,"base64",{})}}(this),e.assetsLoader.load(e.settings.advanced.pdfExportAssets,r)?void 0:r())},t.exportToImageGetDimensions=function(t,e){var i,n,s,r,o,a,h;if(h=t.events.exportToImageGetDimensions(),n=h[0],i=h[1],a=parseFloat(e.width),s=parseFloat(e.height),a>0&&s>0?o=Math.min(a/n,s/i):a>0?(o=a/n,s=i*o):s>0?(o=s/i,a=n*o):(o=e.scaling>0?parseFloat(e.scaling):1,o*=Math.min(t.scene.canvasScaleX,t.scene.canvasScaleY),a=n*o,s=i*o),"mm"===e.unit){if(!(e.dpi>0&&e.width>0&&e.height>0))throw"Invalid export configuration. If unit = mm, dpi, width and height must be supplied";r=parseFloat(e.dpi)/25.4,o*=r,a*=r,s*=r}return[a,s,o,n,i]},t.proxyExport=function(t,e,i,n,s){var r,o,a,h,l,u,c;return a=Base_Helpers.createDom("form"),a.setAttribute("action",t.settings.advanced.exportProxyURL),a.setAttribute("method","POST"),a.setAttribute("style","display:none"),h=Base_Helpers.createDom("input",null,null,a),h.setAttribute("type","hidden"),h.setAttribute("name","type"),h.setAttribute("value",e),l=Base_Helpers.createDom("input",null,null,a),l.setAttribute("type","hidden"),l.setAttribute("name","encoding"),l.setAttribute("value",n),u=Base_Helpers.createDom("input",null,null,a),u.setAttribute("type","hidden"),u.setAttribute("name","data"),u.setAttribute("value",i),o=parseInt(s.dpi),o>0&&(c=Base_Helpers.createDom("input",null,null,a),c.setAttribute("type","hidden"),c.setAttribute("name","setdpi"),c.setAttribute("value",o)),r=document.getElementsByTagName("body")[0],r.appendChild(a),a.submit(),r.removeChild(a)},t}();var Timechart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Scrolling=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t),this.s=new Timechart_TimeSetup(this.scene.settings)}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=10,e.prototype.updateOrder=1400,e.settings={limitMode:"snapBack",limitFrom:"oldestData",limitTo:"newestData",overscrollProportion:0},e.prototype.animationUnit=null,e.prototype.targetUnit=null,e.prototype.dragStartBar0=null,e.prototype.dragStartBar1=null,e.prototype.dragStartUnit=null,e.prototype.setTimeRangeSnap=function(t,e,i,n,s,r,o,a){var h,l,u,c;return c=this.snap(t,e,i,n,o,a),t=c[0],e=c[1],u=c[2],l=c[3],h=c[4],this.setTimeRange(t,e,u,s,r,h,l)},e.prototype.computeDisplayPeriod=function(t,e,i,n,s){var r,o,a,h;return h=this.s.tryComputeDisplayPeriod(t,e,i,n,s,this.scene,this.scene.getCurTime()),r=h[0],o=h[1],a=h[2],null===r||null===o?[null,null,null]:this.computeTimeRangeExtend(r,o,a)},e.prototype.computeTimeRangeExtend=function(t,e,i){var n;return null==i&&(i=this.s.computeDisplayUnit(this.scene.timeStart,this.scene.timeEnd,this.scene.displayUnit,t,e,this.scene)),t=i.roundTimeDown(t),e=i.roundTimeUp(e),e===t&&(e=i.add(e,1)),n=this._preventOverscroll(t,e,i,!0),t=n[0],e=n[1],[t,e,i]},e.prototype.computeDisplayUnit=function(t,e){var i,n,s;return n=null!==this.dragStartFrom?this.dragStartFrom:this.scene.timeStart,i=null!==this.dragStartTo?this.dragStartTo:this.scene.timeEnd,s=this.dragStartUnit?this.dragStartUnit:this.scene.displayUnit,this.s.computeDisplayUnit(n,i,s,t,e,this.scene)},e.prototype.setTimeRange=function(t,e,i,n,s,r,o){return null==r&&(r=null),null==o&&(o=null),e>t||i?(t=Math.round(t),e=Math.round(e),null==i&&e>t&&(i=this.computeDisplayUnit(t,e)),t===this.getFrom()&&e===this.getTo()&&i.isEqual(this.scene.displayUnit)||(this.scene.anchor=r,this.scene.period=o,this.targetUnit=i,this.animationUnit=null==i||this.scene.displayUnit&&i.toString()!==this.scene.displayUnit.toString()?null:i,this.goToPosition(t,e,n),this.events.notifySceneChanges({time:!0}),!s)?void 0:this.chart.notifyTimeChanged(t,e,i,s)):void 0},e.prototype.zoomOut=function(t,e,i,n,s){var r,o;return r=(e+i)/2,o=this.computeZoomOut(e,i,t),e=o[0],i=o[1],this.setTimeRangeSnap(e,i,r,null,n,s,!1,!0)},e.prototype.zoomIn=function(t,e,i,n,s,r){var o;return null===e&&(e=(i+n)/2),o=this.onZoomIn(i,n,e,.5),i=o[0],n=o[1],this.setTimeRangeSnap(i,n,e,t,s,r,!1,!0)},e.prototype.xyInArea=function(t,e){return this.scene.xyInChart(t,e)},e.prototype.xyToPosition=function(t){return this.scene.xToTime(t)},e.prototype.onZoomOut=function(t,i,n,s){return null==s&&(s=null),s?e.__super__.onZoomOut.call(this,t,i,n,s):this.computeZoomOut(t,i,null)},e.prototype.onZoomIn=function(t,i,n,s){var r;return null==s&&(s=null),s?e.__super__.onZoomIn.call(this,t,i,n,s):(this.dragStartBar0&&(t=this.dragStartBar0,i=this.dragStartBar1,i-t>this.scene.timeEnd-this.scene.timeStart&&(r=this.scene.getClickBar(n),t=r[0],i=r[1])),[t,i])},e.prototype.onScroll=function(t,e,i){return this.s.scroll(t,e,this.scene.displayUnit,i,1,"page")},e.prototype.onGoHome=function(t,e){var i,n;return i=this.scene.getDisplayLimits()[1],null===i?[t,e]:(this.scene.anchor="newestData",n=e-t,[i-n,i,i])},e.prototype.onStartDragging=function(t,e,i){var n;return this.animationUnit=null,this.scene.anchor=null,this.dragStartUnit=this.scene.displayUnit,n=this.scene.getClickBar(i),this.dragStartBar0=n[0],this.dragStartBar1=n[1],n},e.prototype.onSnapWhileDragging=function(t,e,i){var n,s,r,o;return this._minDisplayRange=this.scene.settings.area._minDisplayRange,n="block"===this.scene.settings.interaction.scrolling.limitMode,r=this._preventOverscale(t,e,null,i,n),t=r[0],e=r[1],s=this.computeDisplayUnit(t,e),o=this._preventOverscroll(t,e,s,!1),t=o[0],e=o[1],this.events.notifySceneChanges({time:!0}),[t,e]},e.prototype.onSnapAfterDragging=function(t,e,i,n,s){var r,o,a,h,l,u;return h=this.snap(t,e,i,a,n,s),t=h[0],e=h[1],a=h[2],o=h[3],r=h[4],this.targetUnit=a,this.animationUnit=!s||a&&this.scene.displayUnit.isEqual(a)?this.scene.displayUnit:null,this.scene.period=o,this.scene.anchor=r,l=[null,null],this.dragStartBar0=l[0],this.dragStartBar1=l[1],u=[null,null,null],this.dragStartFrom=u[0],this.dragStartTo=u[1],this.dragStartUnit=u[2],this.events.notifySceneChanges({time:!0}),this.chart.notifyTimeChanged(t,e,a,"user"),[t,e]},e.prototype.onPositionChanged=function(t,e){var i;return i=null!=this.animationUnit?this.animationUnit:this.computeDisplayUnit(t,e),this.scene.setTimeRange(t,e,i),this.events.notifySceneChanges({time:!0})},e.prototype.onAnimationDone=function(t,e){var i;return this.targetUnit&&(i=null!=this.targetUnit?this.targetUnit:this.computeDisplayUnit(t,e),this.scene.setTimeRange(t,e,i)),this.targetUnit=null,this.animationUnit=null,this.chart.notifyAnimationDone()},e.prototype.computeZoomOut=function(t,e,i){var n;return null==i&&(n=this.s.getBiggerDisplayPeriod(this.scene.timeStart,this.scene.timeEnd),null!=n&&(i=n.displayPeriod)),null==i?[t,e]:(t=i.roundTimeDown(t),e=i.roundTimeUp(e),[t,e])},e.prototype.snap=function(t,e,i,n,s,r){var o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P;return null==n&&(n=null),null!=this.scene.settings.interaction.scrolling.limitMode&&r&&r&&(b=this._preventOverscale(t,e,n,i,!0),t=b[0],e=b[1]),S=n?n:r?this.computeDisplayUnit(t,e):this.scene.displayUnit,(s||r)&&(l=e-t,w=this._preventOverscroll(t,e,S,!1),t=w[0],e=w[1],C=this._preventOverscroll(t,e,S,!0),t=C[0],e=C[1],r||(r=e-t!==l)),!n&&r?(S=this.computeDisplayUnit(t,e),this.snap(t,e,i,S,s,r)):(c=t,x=e,f=r?null:this.scene.period,o=this.scene.anchor,g=this.scene.settings.interaction.snapMode,g?(p="y"===this.scene.majorTimeUnit.unit,"displayUnit"===g?y=S:("multiperiod"===g||"period"===g)&&(m=e-t,P=this.scene.getDisplayLimits(),a=P[0],h=P[1],null!=a&&(m=Math.min(m,h-a)),v=this.s.getClosestDisplayPeriod(m,this.scene.majorTimeUnit,"multiperiod"===g||p),null!=v.displayUnit&&(S=v.displayUnit),y=v.displayPeriod,f=v.displayPeriod,o=v.displayAnchor||o),"period"!==g||p?r?(t=y.roundTimeRound(t),e=y.roundTimeRound(e)):(d=Math.max(y.numberOfUnits(t,e),1),u=Math.abs(y.roundTimeRound(t)-t),_=Math.abs(y.roundTimeRound(e)-e),_>u?(t=y.roundTimeRound(t),e=y.add(t,d)):(e=y.roundTimeRound(e),t=y.sub(e,d))):(t=y.roundTimeDown(i),e=y.add(t,1))):(t=Math.round(t),e=Math.round(e)),[t,e,S,f,o])},e.prototype._snapToAnchor=function(t,e,i){var n,s,r;return"now"===this.scene.anchor?(r=this.scene.getCurTime(),n=-1):"newestData"===this.scene.anchor&&(r=this.scene.mainData.dataTo,n=-1),null!=r&&-1===n&&e>r&&(s=r-e,e=i.roundTimeUp(e+s),t=i.roundTimeUp(t+s)),[t,e]},e.prototype._preventOverscroll=function(t,e,i,n){var s,r,o;return o=this.scene.getDisplayLimits(),s=o[0],r=o[1],this.s.preventOverscroll(i,t,e,s,r,this.scene.getCurTime(),n)},e.prototype._preventOverscale=function(t,e,i,n,s){var r,o,a,h,l,u;return u=this.scene.getDisplayLimits(),r=u[0],o=u[1],a=-1/0,h=1/0,s&&null!=r&&null!=o&&(a=r,h=o),l=i?[i]:this.scene.settings.area.displayUnitsParsed,this.s.preventOverscale(this.scene,l,n,t,e,a,h)},e}(Linearchart_Scrolling);var Timechart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Selection=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.selectStart=null,this.selectingPointer=null,this.isSelecting=!1,this.lastX=0,this.lastY=0,this.roundAround=!1,this.selectionRemoved=!1}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=15,e.prototype.updateOrder=1300,e.settings={tolerance:6,enabled:!0,grabThreshold:5},e.prototype.onSceneChange=function(t){return(t.changes.time||t.changes.bounds)&&null!=this.selectStart&&(t.x=this.lastX,t.y=this.lastY,t.identifier=this.selectingPointer,this.onPointerDrag(t)),t.changes.selection?this.snapSelection():void 0},e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u;if(this.scene.selectionStart&&this.scene.selectionEnd)return o=Math.round(this.scene.x0),l=Math.round(this.scene.y0),u=Math.round(l+this.scene.height+this.scene.bottomAxisSize),a=Math.round(this.scene.timeToX(this.scene.selectionStart)),h=Math.round(this.scene.timeToX(this.scene.selectionEnd)),i=this.scene.height+this.scene.bottomAxisSize,n=moment(this.scene.selectionStart).utc().format(this.scene.minorTimeFormat),s=moment(Math.max(this.scene.selectionStart,this.scene.selectionEnd-1)).utc().format(this.scene.minorTimeFormat),e=t.context,Base_Graphics.pushClip(e,o,l,this.scene.width,i),Base_Graphics.rectStyle(e,this.scene.settings.area.style.selection),e.fillRect(a,l,h-a,i),e.beginPath(),e.moveTo(a,l),e.lineTo(a,u),e.moveTo(h,l),e.lineTo(h,u),Base_Graphics.stroke(e,this.scene.settings.area.style.selection),Base_Graphics.textStyle(e,this.scene.settings.area.style.selectionLabel),r=e.measureText(n).width,e.textBaseline="top",h-a>3.3*r?(e.textAlign="start",e.fillText(n,a+2,l+2),e.textAlign="end",e.fillText(s,h-2,l+2)):(e.textAlign="end",e.fillText(n,a-2,l+2),e.textAlign="start",e.fillText(s,h+2,l+2)),Base_Graphics.popClip(e)},e.prototype.onPointerMove=function(t){var e,i;if(this.scene.settings.interaction.selection.enabled&&(this.scene.xyInBottom(t.x,t.y)&&(t.cursor="text"),this.scene.selectionStart&&this.scene.selectionEnd&&this.scene.xyInChartOrBottom(t.x,t.y)&&this.scene.timeStart<this.scene.timeEnd)){if(e=this.scene.timeToX(this.scene.selectionStart),i=this.scene.timeToX(this.scene.selectionEnd),Math.abs(i-t.x)<=this.scene.settings.interaction.selection.grabThreshold)return t.cursor="e-resize",t.consumed=!0;if(Math.abs(e-t.x)<=this.scene.settings.interaction.selection.grabThreshold)return t.cursor="w-resize",t.consumed=!0}},e.prototype.onPointerDown=function(t){var e,i,n,s;if(this.scene.xyInChartOrBottom(t.x,t.y)&&null==this.selectingPointer&&this.scene.settings.interaction.selection.enabled){if(this.selectionRemoved=!1,this.lastX=t.x,this.lastY=t.y,null!=this.scene.selectionStart||null!=this.scene.selectionEnd){if(n=this.scene.timeToX(this.scene.selectionStart),s=this.scene.timeToX(this.scene.selectionEnd),e=Math.abs(n-t.x),i=Math.abs(s-t.x),e<this.scene.settings.interaction.selection.grabThreshold&&i>=e)return this.selectingPointer=t.identifier,this.selectStart=this.scene.selectionEnd,this.selectingPointer=t.identifier,t.consumed=!0,this.roundAround=!0,void(this.isSelecting=!0);
if(i<this.scene.settings.interaction.selection.grabThreshold&&e>=i)return this.selectStart=this.scene.selectionStart,this.selectingPointer=t.identifier,t.consumed=!0,this.roundAround=!0,void(this.isSelecting=!0)}return this.scene.xyInBottom(t.x,t.y)?(this.selectingPointer=t.identifier,this.selectStart=this.scene.xToTime(t.x),t.capture=!0,this.roundAround=!1,t.x>=n&&t.x<=s?this.isSelecting=!1:(null!=this.scene.selectionStart&&(this.selectionRemoved=!0,this.scene.selectionStart=null,this.scene.selectionEnd=null,t.changes.selection=!0),this.isSelecting=!1)):void 0}},e.prototype.onPointerDrag=function(t){var e,i,n,s;if(null!=this.selectStart&&this.selectingPointer===t.identifier)return this.isSelecting=!0,this.lastX=t.x,this.lastY=t.y,s=this.scene.xToTime(t.x),e=Math.abs(this.selectStart-s),this.selectStart<s?(i=Math.max(this.selectStart-e,this.scene.snapTimeDown(this.selectStart)),n=s):(i=s,n=Math.min(this.selectStart+e,this.scene.snapTimeUp(this.selectStart))),this.scene.selectionStart=i,this.scene.selectionEnd=n,t.changes.selection=!0,t.consumed=!0},e.prototype.onPointerUp=function(t){var e,i,n;return console.log("p up"),null!=this.selectStart&&this.selectingPointer===t.identifier?(this.isSelecting&&(n=this.snapSelection(),i=n[0],e=n[1],i===e&&(i=null,e=null),this.scene.selectionStart=i,this.scene.selectionEnd=e,this.chart.notifySelectionChanged("user"),t.changes.selection=!0),(this.isSelecting||this.selectionRemoved)&&(t.consumed=!0),this.isSelecting=!1,this.selectStart=null,this.selectingPointer=null):void 0},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.snapSelection=function(){var t,e;return this.scene.selectionStart?this.roundAround?(e=this.scene.snapTimeRound(this.scene.selectionStart),t=this.scene.snapTimeRound(this.scene.selectionEnd)):(e=this.scene.snapTimeDown(this.scene.selectionStart),t=this.scene.snapTimeUp(this.scene.selectionEnd)):(e=null,t=null),[e,t]},e}(Base_ChartElement);var Timechart_TimeUpdater,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_TimeUpdater=function(t){"use strict";function e(t){var e;this.chart=t,this.dataTick=__bind(this.dataTick,this),this.timerTick=__bind(this.timerTick,this),this.settings=this.chart.settings,this.scene=this.chart.scene,this.events=this.chart.events,this.timerUnit=new Base_TimeStep(1,"ms"),this.settings.currentTime.enabled&&(e=new Linearchart_Marker,e.time=this.scene.getCurTime(),e.style=this.scene.settings.currentTime.style,e.label=this.scene.settings.currentTime.label,this.scene.markers.push(e)),this.settings.advanced.timeUpdateInterval&&(this.timeTimer=setTimeout(this.timerTick,this.settings.advanced.timeUpdateInterval)),this.settings.advanced.dataUpdateInterval&&(this.dataTimer=setTimeout(this.dataTick,this.settings.advanced.dataUpdateInterval))}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=35,e.prototype.updateOrder=900,e.settingsCurTime={enabled:!0,label:"",style:{lineColor:"red",fillColor:"red"},serverTime:null,computedTimeOffset:0},e.prototype.timerTick=function(){return this.timeTimer=null,this.chart.removed?void 0:(this.updateCurTime(),this.updateVisiblePeriod())},e.prototype.dataTick=function(){var t,e,i,n,s;if(this.dataTimer=null,!this.chart.removed){if(this.scene.displayUnit){e=this.scene.getCurTime(),t=function(t){return function(){return t.updateVisiblePeriod(),t.events.notifySceneChanges({data:!0})}}(this),s=this.scene.data;for(n in s)i=s[n],i.updateData(this.scene.displayUnit.unit,e,t)}return this.dataTimer=setTimeout(this.dataTick,this.settings.advanced.dataUpdateInterval)}},e.prototype.doAnimations=function(t){return this.scene.displayUnit&&!this.scene.displayUnit.isEqual(this.timerUnit)&&(this.updateCurTime(),this.timerUnit=this.scene.displayUnit),t.changes.data?this.updateVisiblePeriod():void 0},e.prototype.updateCurTime=function(){var t,e,i,n,s;return this.timeTimer&&clearTimeout(this.timeTimer),n=this.scene.displayUnit,e=this.settings.advanced.timeUpdateInterval,n&&this.settings.currentTime.enabled&&(t=this.scene.getCurTime(),this.scene.markers[0].time=t,s=this.scene.timeToX(t),i=s+200>this.scene.x0&&s-200<this.scene.x0+this.scene.width,i&&(e=Math.min(e,this.scene.dxToDtime(1)),this.events.notifySceneChanges({markers:!0}))),this.timeTimer=setTimeout(this.timerTick,e)},e.prototype.updateVisiblePeriod=function(){var t,e,i,n,s,r;if(this.scene.displayUnit&&null!=this.scene.timeEnd)return t=this.scene.getCurTime(),i=this.scene.getDataLimits()[1],n=this.scene.timeEnd,s=this.scene.timeStart,this.settings.area.followAnchor&&("now"===this.scene.anchor&&t>n&&(r=this.scene.displayUnit,e=r.roundTimeUp(t)-n,this.chart.scrolling.setTimeRangeSnap(s+e,n+e,n+e,this.scene.displayUnit,!0,"timer",!0,!1)),"newestData"===this.scene.anchor&&i>n)?(r=this.scene.displayUnit,e=r.roundTimeUp(i)-n,this.chart.scrolling.setTimeRangeSnap(s+e,n+e,n+e,this.scene.displayUnit,!0,"timer",!0,!1)):void 0},e}(Base_ChartElement);var Timechart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Scene=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.settings=null,e.prototype.timeStart=0,e.prototype.timeEnd=0,e.prototype.anchor=null,e.prototype.period=null,e.prototype.displayUnit=null,e.prototype.data={},e.prototype.mainData=null,e.prototype.selectionStart=null,e.prototype.selectionEnd=null,e.prototype.minorTimeFormat=null,e.prototype.minorTimeUnit=null,e.prototype.majorTimeFormat=null,e.prototype.majorTimeUnit=null,e.prototype.hoverFrom=null,e.prototype.hoverTo=null,e.prototype.setTimeRange=function(t,e,i){return i||Base_Helpers.error("Scene.setTimeRange: no display unit"),this.timeStart=t,this.timeEnd=e,this.displayUnit=i},e.prototype.pixelsPerTime=function(){return this.width/(this.timeEnd-this.timeStart)},e.prototype.getScale=function(){return(this.timeEnd-this.timeStart)/this.width},e.prototype.timeToX=function(t){return this.x0+this.width*(t-this.timeStart)/(this.timeEnd-this.timeStart)},e.prototype.timeToXCoefs=function(){return[this.x0-this.timeStart*this.width/(this.timeEnd-this.timeStart),this.width/(this.timeEnd-this.timeStart)]},e.prototype.xToTime=function(t){return this.timeStart+(this.timeEnd-this.timeStart)*(t-this.x0)/this.width},e.prototype.xToFraction=function(t){return(t-this.x0)/this.width},e.prototype.dxToDtime=function(t){return t/this.width*(this.timeEnd-this.timeStart)},e.prototype.snapTimeDown=function(t){return this.displayUnit.roundTimeDown(t)},e.prototype.snapTimeUp=function(t){return this.displayUnit.roundTimeUp(t)},e.prototype.snapTimeRound=function(t){return this.displayUnit.roundTimeRound(t)},e.prototype.getDataLimits=function(){var t,e;return t=this.mainData.dataLimitFrom,e=this.mainData.dataLimitTo,null==t||null==e?[null,null]:(this.displayUnit&&(t=this.displayUnit.roundTimeDown(t),e=this.displayUnit.roundTimeUp(e)),[t,e])},e.prototype.getDisplayLimits=function(){var t,e,i,n,s,r,o;if(r=this.getDataLimits(),t=r[0],i=r[1],null===t)return[null,null];for(o=this.markers,n=0,s=o.length;s>n;n++)e=o[n],t=Math.min(t,e.time),i=Math.max(i,e.time);return[t,i]},e.prototype.getClickBar=function(t){return[this.displayUnit.roundTimeDown(t),this.displayUnit.roundTimeUp(t+1)]},e.prototype.getCurTime=function(){return(new Date).getTime()+this.settings.currentTime.computedTimeOffset},e}(Linearchart_Scene);var Timechart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_InfoPopup=function(t){function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.animationOrder=700,e.prototype.paintOrder=25,e.prototype.updateOrder=1100,e.prototype.doAnimations=function(t){var e,i;return this.chart.selection.isSelecting&&this.scene.selectionStart?(e=this.scene.selectionStart,i=this.scene.selectionEnd,this.showInfoPopup(e,i,null,this.buildContent(e,i,null),t)):void 0},e.prototype.getPopupAreaMouseMoved=function(t,e){var i,n;return this.scene.displayUnit&&this.scene.xyInChartOrBottom(t,e)?(i=this.scene.hoverFrom,n=this.scene.hoverTo,[i,n]):null},e.prototype.buildHeader=function(t,e){var i,n,s,r,o,a,h,l,u,c,p;return c=this.scene.displayUnit,n=Math.ceil(c.numberOfUnits(t,e)),p=n*c.count===1?this.scene.settings.localization.timeUnitsNames[c.unit]:this.scene.settings.localization.timeUnitsNamesPlural[c.unit],1===n?(a=moment(t).utc(),s=a.format(this.scene.settings.localization.infoDates.fullTimeFormats[c.unit]),r=""+s):(("d"===c.unit||"M"===c.unit||"y"===c.unit||"ms"===c.unit)&&(e-=1),a=moment(t).utc(),h=moment(e).utc(),i=c.getBigger()||c,"y"!==c.unit&&i.roundTimeDown(t)===i.roundTimeDown(e)?(u=a.format(this.scene.settings.localization.infoDates.majorTimeFormats[c.unit]),o=a.format(this.scene.settings.localization.infoDates.minorTimeFormats[c.unit]),l=h.format(this.scene.settings.localization.infoDates.minorTimeFormats[c.unit]),r=""+o+" - "+l+" "+u):(o=a.format(this.scene.settings.localization.infoDates.fullTimeFormats[c.unit]),l=h.format(this.scene.settings.localization.infoDates.fullTimeFormats[c.unit]),r=""+o+" - "+l)),"<em></em><strong>"+r+("<small>("+n*c.count+" "+p+")</small></strong>")},e}(Linearchart_InfoPopup);var Timechart_ClickNotifier,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_ClickNotifier=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=20,e.prototype.updateOrder=1200,e.prototype.chart=null,e.prototype.scene=null,e.prototype.pointer=null,e.prototype.previewPointerMove=function(t){return this.pointer=null,this.updateHover(t)},e.prototype.onPointerOut=function(t){return this.scene.hoverSeriesItem=null,this.hoverEvent=null,t.changes.hover=!0,this.chart.notifyHoverChanged(t)},e.prototype.previewPointerDown=function(t){return this.pointer=t.identifier,this.updateHover(t)},e.prototype.updateHover=function(t){var e,i,n,s,r,o,a,h,l,u;if(e=this.getClickRange(t.x,t.y),i=null,s=null,n=null,e&&(i=e[0],s=e[1],o=e[2],n=this.chart.renderer.hitTest(t.x,t.y)),this.chart.legend&&!n)for(r=this.chart.legend.findItemAt(t.x,t.y),h=this.scene.settings.computedSeries,a=l=0,u=h.length;u>l;a=l+=1)r===h[a]&&(n={seriesIndex:a},t.cursor="pointer");return i!==this.scene.hoverFrom||s!==this.scene.hoverTo||!n!=!this.scene.hoverSeriesItem||n&&(n.seriesIndex!==this.scene.hoverSeriesItem.seriesIndex||n.x0!==this.scene.hoverSeriesItem.x0)?(this.scene.hoverFrom=i,this.scene.hoverTo=s,this.scene.hoverSeriesItem=n,t.changes.hover=!0,this.chart.notifyHoverChanged(t)):void 0},e.prototype.onClick=function(t){var e;return t.identifier===this.pointer&&null!=this.scene.hoverFrom?(e=this.scene.xToTime(t.x),null!=this.scene.selectionStart&&(this.scene.selectionStart>e||this.scene.selectionEnd<e)?(this.scene.selectionStart=null,this.scene.selectionEnd=null,this.chart.notifySelectionChanged("user"),t.changes.selection=!0,t.consumed=!0):(this.buildClickEvent(t),this.chart.notifyClick(t),t.consumed=!0)):void 0},e.prototype.onRightClick=function(t){var e;return null!=this.scene.hoverFrom&&(this.buildClickEvent(t),e=this.chart.notifyRightClick(t),e.defaultPrevented)?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){return null!=this.scene.hoverFrom?(this.buildClickEvent(t),this.chart.notifyDoubleClick(t),t.consumed=!0):void 0},e.prototype.getClickRange=function(t,e){var i,n,s,r,o,a,h;return this.scene.xyInChartOrBottom(t,e)?(a=this.scene.xToTime(t),null!=this.scene.selectionStart&&a>=this.scene.selectionStart&&a<this.scene.selectionEnd?(r=this.scene.selectionStart,o=this.scene.selectionEnd,s=Math.max(2,this.scene.displayUnit.numberOfUnits(r,o))):this.scene.displayUnit?(h=!0,null!=this.scene.majorTimeUnit&&(i=this.scene.majorTimeUnit.roundTimeDown(a),n=this.scene.majorTimeUnit.roundTimeUp(a+1),e>this.scene.y0+this.scene.height&&(i>this.scene.timeStart||n<this.scene.timeEnd)&&(r=i,o=n,s=this.scene.displayUnit.numberOfUnits(r,o),h=!1)),h&&(r=this.scene.displayUnit.roundTimeDown(a),o=this.scene.displayUnit.roundTimeUp(a+1),s=1)):(r=null,o=null,s=null),[r,o,s]):null},e.prototype.buildClickEvent=function(t){return t.clickStart=this.scene.hoverFrom,t.clickEnd=this.scene.hoverTo,null!==this.scene.hoverSeriesItem?(t.clickSeries=this.scene.settings.series[this.scene.hoverSeriesItem.seriesIndex],t.clickMarker=this.scene.hoverSeriesItem.isMarker):void 0},e}(Base_ChartElement);var Timechart_Navigator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Navigator=function(t){function e(t){this.chart=t,this.scene=t.scene,this.settings=t.settings,this.reinitializePeriod=!0}return __extends(e,t),e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.navigation&&(this.reinitializePeriod=!0),this.reinitializePeriod?this.setupInitialDisplayPeriod():void 0},e.prototype.setupInitialDisplayPeriod=function(){var t,e,i;if(this.scene.width)return this.reinitializePeriod=!1,t=this.settings.navigation.initialDisplayAnchor,e=this.settings.navigation.initialDisplayPeriod,i=this.settings.navigation.initialDisplayUnit,this.computeDisplayPeriod(e,t,i,function(i){return function(n,s,r){return i.scene.setMessage("impl",null),i.scene.loading=!1,null!=i.scene.displayUnit&&(r=i.scene.displayUnit),i.scene.timeStart||i.scene.timeEnd?void 0:i.chart.scrolling.setTimeRange(n,s,r,!1,"init",t,e)}}(this))},e.prototype.computeDisplayPeriod=function(t,e,i,n){var s,r,o,a,h;return h=this.chart.scrolling.computeDisplayPeriod(t,e,i,this.scene.mainData.dataFrom,this.scene.mainData.dataTo),r=h[0],o=h[1],a=h[2],null!=r&&null!=o&&a&&null!=r&&null!=o?n(r,o,a):null==this.scene.mainData.settings.dataFunction&&null==this.scene.mainData.settings.url&&null==this.scene.mainData.settings.urlByUnit&&null==this.scene.mainData.settings.preloaded?void this.error("Cannot compute data dependant display period, no data given. DisplayPeriod = "+t+", DisplayAnchor = "+e):(s=function(a){return function(h,l,u,c,p,d){var f,m;if(!a.chart.removed)return null===h||null===l||0===h&&0===l&&a.scene.mainData.noData?void n(c,p,d):(m=a.chart.scrolling.computeDisplayPeriod(t,e,i,h,l),r=m[0],o=m[1],f=m[2],null==r||null==o?void a.error("Could not setup display time interval. Check your configuration."):Timechart_TimeSetup.isSmallerOrEqualUnit(u,f.unit)?n(r,o,f):a.scene.mainData.determineDataLimits(f.unit,!0,!0,function(t,e,i){return s(t,e,i,h,l,f)}))}}(this),this.scene.mainData.determineDataLimits(null,!0,!0,function(){return function(t,e,i){return s(t,e,i,0,0,null)}}(this)))},e}(Base_ChartElement);var Base_Resizer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Resizer=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.options=this.scene.settings.interaction.resizing,this.layers=this.chart.layers,this.oh=0,this.sy=0,this.barVisible=!1,this.resizing=!1,this.aspect=null,this.layers.resizerBar&&this.chart.events.addContainer(this.layers.resizerBar)}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=65,e.prototype.updateOrder=300,e.settings={enabled:!0,fixedAspect:!1,visibilityDistance:45,grabDistance:10},e.prototype.onSceneChange=function(){return this.options.enabled?void 0:this.hideUI()},e.prototype.onPointerOut=function(){return this.options.enabled?this.hideUI():void 0},e.prototype.onPointerMove=function(t){var e;if(this.options.enabled)if(e=this.scene.chartHeight-t.y,e<this.options.visibilityDistance){if(this.barVisible||this.showUI(),e<this.options.grabDistance)return t.consumed=!0,t.cursor="ns-resize"}else if(this.barVisible)return this.hideUI()},e.prototype.onPointerDown=function(t){var e;if(this.options.enabled)return this.sy=t.y,e=this.scene.chartHeight-t.y,this.resizing=e<this.options.grabDistance&&t.y<=this.scene.chartHeight,this.resizing?(this.aspect=this.options.fixedAspect?Math.max(1,this.chart.scene.chartWidth)/Math.max(1,this.chart.scene.chartHeight):0,this.oh=this.scene.chartHeight,this.showUI(),t.cursor="ns-resize",t.consumed=!0):void 0},e.prototype.onDoubleClick=function(){return this.resizing?this.chart.setFullscreen(!this.chart.isFullscreen()):void 0},e.prototype.onPointerDrag=function(t){return this.options.enabled?this.chart.isFullscreen()?(this.chart.setFullscreen(!1),this.hideUI(),t.consumed=!0):this.resizing?(t.consumed=!0,this.wasMaximized=!1,this.scene.settings.height=Math.min(this.scene.settings.maxHeight,Math.max(this.scene.settings.minHeight,this.oh+(t.y-this.sy))),this.aspect&&(this.scene.settings.width=this.scene.settings.height*this.aspect),this.chart.updateSize()):void 0:void 0},e.prototype.showUI=function(){return this.barVisible?void 0:(this.barVisible=!0,Base_Helpers.fadeIn(this.layers.resizerBar))},e.prototype.hideUI=function(){return this.barVisible?(this.barVisible=!1,this.resizing=!1,Base_Helpers.fadeOut(this.layers.resizerBar)):void 0},e}(Base_ChartElement);var Base_MessagesOverlay,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_MessagesOverlay=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=70,e.prototype.updateOrder=200,e.prototype.scene=null,e.prototype.loadingTime=null,e.prototype.doAnimations=function(t){return this.scene.loading?t.animating=!0:void 0},e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f;return l=this.scene,a=this.scene.getMessage(),o=this.scene.loading,o||(this.loadingTime=null),null!=a||o?(null==this.loadingTime&&(this.loadingTime=t.time),i=this.scene.settings.advanced.style.loadingArcStyle,n=t.context,"corner"===i.location?(p=l.x0+l.width,d=l.y0):(p=l.x0+l.width/2,d=l.y0+l.height/2),null!=a&&(Base_Graphics.textStyle(n,this.scene.settings.advanced.style.messageTextStyle),n.textBaseline="middle",n.textAlign="center",r=Base_Graphics.getTextHeight(n,this.scene.settings.advanced.style.messageTextStyle.font),c=n.measureText(a).width,"corner"===i.location&&(p-=c,d+=1.5*r),this.scene.loading?(d-=r,f=d+i.r+r):f=d,n.fillText(a,p,f)),this.scene.loading?(h=i.r,u=i.lineWidth,a||"corner"!==i.location||(p-=1.2*(h+u),d+=1.2*(h+u)),n.save(),n.lineCap="round",n.lineWidth=u,e=(t.time-this.loadingTime)/700*Math.PI,s=n.createLinearGradient(p+h*Math.cos(e+Math.PI),d+h*Math.sin(e+Math.PI),p+h*Math.cos(e),d+h*Math.sin(e)),s.addColorStop(0,i.lineColor),s.addColorStop(1,"transparent"),n.strokeStyle=s,n.beginPath(),n.arc(p,d,h,e,e+Math.PI),n.stroke(),n.restore()):void 0):void 0},e}(Base_ChartElement);var Base_Title,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Title=function(t){"use strict";function e(t){this.chart=t,this.computePanelSize=__bind(this.computePanelSize,this),this.scene=t.scene,this.settings=this.scene.settings.title,this.lines=[],this.lineSpacing=0,this.panel=new Base_ChartPanel,this.panel.packingOrder=10,this.panel.location="outside",this.panel.side="top",this.panel.align="fill",this.panel.visible=!1,this.panel.computeSize=this.computePanelSize}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=55,e.prototype.updateOrder=500,e.settings={enabled:!0,enabledOnExport:!0,align:"center",margin:25,style:{font:"20px Arial",fillColor:"#000"},text:""},e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.title?e.bounds=!0:void 0},e.prototype.getPanels=function(t){var e;return this.panel.visible=t?this.settings.enabledOnExport:this.settings.enabled,(e=this.panel).visible&&(e.visible=!!this.settings.text),this.panel.margin=this.settings.margin,this.panel.visible?(this.panel.location=t&&!this.settings.enabled?"external":"outside",[this.panel]):[]},e.prototype.computePanelSize=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f;if(this.lines=[],l=this.settings.text,i.save(),Base_Graphics.textStyle(i,this.settings.style),u=i.measureText(l).width,n=Base_Graphics.getTextHeight(i,this.settings.style.font),this.lineSpacing=1.15*n,u>t){for(c=0,p=l.split(" "),r=p[0],h=i.measureText(r).width,s=d=1,f=p.length-1;f>=d;s=d+=1)o=r+" "+p[s],a=i.measureText(o).width,t>=a?(r=o,h=a):(this.lines.push(r),u=Math.max(u,h),r=p[s],h=i.measureText(r).width);this.lines.push(r),u=Math.max(c,h)}else this.lines.push(l);return i.restore(),n=(this.lines.length-1)*this.lineSpacing+n,[u,n]},e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c;if(this.panel.visible){for(r=this.settings,e=t.context,i=this.panel.left,s=this.panel.right,a=this.panel.top,Base_Graphics.textStyle(e,r.style),e.textBaseline="top","left"===r.align?(e.textAlign="start",o=i):"right"===r.align?(e.textAlign="end",o=s):(e.textAlign="center",o=(i+s)/2),u=this.lines,c=[],h=0,l=u.length;l>h;h++)n=u[h],e.fillText(n,o,a),c.push(a+=this.lineSpacing);return c}},e}(Base_ChartElement);var Base_Legend,Base_Legend_Entry,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Legend_Entry=function(){function t(){this.data=null,this.label=null,this.markerStyle={},this.textColor=null}return t}(),Base_Legend=function(t){"use strict";function e(t){this.chart=t,this.computePanelSize=__bind(this.computePanelSize,this),this.scene=t.scene,this.settings=this.scene.settings.legend,this.panel=new Base_ChartPanel,this.panel.packingOrder=50,this.panel.location="outside",this.panel.computeSize=this.computePanelSize,this.entries=[],this.labelRenderer=new Base_LabelRenderer(t),this.hoverObject=null,this.selectedObjects=[],this.entryWidth=0,this.entryHeight=0,this.textHeight=0,this.columns=null,this.rows=null,this.contentWidth=0,this.contentHeight=0,this.baseTextColor=null,this.markerSize=0,this.drawingEntries=0,this.orientation="left"===this.settings.panel.side||"right"===this.settings.panel.side?"vertical":"horizontal",this.lastInsensitive=!1}return __extends(e,t),e.prototype.animationOrder=300,e.settings={enabled:!1,width:null,height:null,numberOfRows:null,numberOfColumns:null,margin:1,padding:5,maxLineSymbols:15,lineSpacing:.2,text:{font:"12px Arial",fillColor:"#000"},marker:{size:20,alignment:"left",lineColor:"#fff"},equalizeRowsColumns:!0,panel:{padding:0,margin:1,align:"fill",side:"left"},advanced:{selectedBackground:"rgba(208,233,255,0.3)",selectedBorder:"rgba(208,233,255,0.3)",disabledSeries:{fillColor:"rgba(191,187,185,0.3)",lineColor:"rgba(64,62,62,0.3)",textColor:"rgba(64,62,62,0.3)"}}},e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.legend?(e.bounds=!0,this.settings.enabled||(this.entries=[]),this.labelStyle={textStyle:this.settings.text,align:"left",lineSpacing:this.settings.lineSpacing,padding:0}):void 0},e.prototype.setItems=function(t){var e,i,n,s,r,o;if(this.settings.enabled){for(this.entries=[],o=[],s=0,r=t.length;r>s;s++)i=t[s],e=new Base_Legend_Entry,e.data=i.data,n=e.label=new Base_Label,n.text=i.label,n.align="left",e.textColor=i.textColor,o.push(this.entries.push(e));return o}},e.prototype.getPanels=function(){var t;return Base_Helpers.extend(this.panel,this.settings.panel),t=this.settings.enabled?[this.panel]:[]},e.prototype.computePanelSize=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;if(0===this.entries.length)return[0,0];for(Base_Graphics.textStyleNoShadow(i,this.labelStyle.textStyle),this.lastInsensitive=!1,m=this.labelStyle.maxWidth=i.measureText("M").width*this.settings.maxLineSymbols,l=0,c=this.settings.numberOfRows,u=this.settings.numberOfColumns,f=2*(this.settings.margin+this.settings.padding),d=2*(this.settings.panel.margin+this.settings.panel.padding),_=this.entries,y=0,v=_.length;v>y;y++)a=_[y],this.labelRenderer.measure(i,a.label,this.labelStyle),l=Math.max(l,2*a.label.hheight);return this.textHeight=this.entries[0].label.lineHeight,this.markerSize=this.settings.marker.size||this.textHeight,l=Math.max(l,this.markerSize),this.entryHeight=Math.max(l,this.markerSize)+f,this.entryWidth=m+this.markerSize+this.settings.padding+f,o=(null!=this.settings.width?Math.min(t,Math.max(this.settings.width,this.entryWidth)+d):t)-d,r=(null!=this.settings.height?Math.min(e,Math.max(this.settings.height,this.entryHeight)+d):e)-d,"vertical"===this.orientation&&(this.rows=Math.floor(r/this.entryHeight),n=Math.min(Math.ceil(this.entries.length/this.rows),Math.floor(o/this.entryWidth)),this.columns=null!=u?Math.min(u,n):n,this.drawingEntries=Math.min(Math.floor(r/this.entryHeight)*this.columns,this.entries.length),g=this.columns*this.entryWidth,this.drawingEntries>this.rows?(this.settings.equalizeRowsColumns&&(this.rows=Math.ceil(this.drawingEntries/this.columns)),h=this.rows*this.entryHeight):h=this.drawingEntries*this.entryHeight),"horizontal"===this.orientation&&(this.columns=Math.floor(o/this.entryWidth),s=Math.min(Math.ceil(this.entries.length/this.columns),Math.floor(r/this.entryHeight)),this.rows=null!=c?Math.min(c,s):s,this.drawingEntries=Math.min(Math.floor(o/this.entryWidth)*this.rows,this.entries.length),h=this.rows*this.entryHeight,this.drawingEntries>this.columns?(this.settings.equalizeRowsColumns&&(this.columns=Math.ceil(this.drawingEntries/this.rows)),g=this.columns*this.entryWidth):g=this.drawingEntries*this.entryWidth),this.contentHeight=h,this.contentWidth=g,p=this.settings.panel.padding,[g+2*p,h+2*p]},e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S;if(!this.settings.enabled||0===this.entries.length||0===this.drawingEntries)return null;for(o=t.context,c=this.panel.top,a=this.panel.left,h=this.settings.margin,l=this.settings.padding,u=this.settings.panel.padding,s=0,n=0,i=0,Base_Graphics.textStyleNoShadow(o,this.settings.text),S=[],s=_=0,x=this.drawingEntries;x>=0?x>_:_>x;s=x>=0?++_:--_){if(p=u+h,d=a+p+n*this.entryWidth,g=c+p+i*this.entryHeight,r=this.entries[s],r.label.lineSpacing=this.settings.lineSpacing,"right"===this.settings.marker.alignment?(m=d+l+r.label.hwidth,f=d+this.entryWidth-2*(h+l)-this.markerSize/2):(m=d+this.markerSize+2*l+r.label.hwidth,f=d+l+this.markerSize/2),e=r.label.hheight>this.markerSize/2?0:this.markerSize/2-this.textHeight/2,y=g+l+this.markerSize/2,v=g+e+l+r.label.hheight,this.drawingEntries<this.entries.length&&s+1===this.drawingEntries){this.lastInsensitive=!0,o.fillStyle="#000",o.textAlign="left",o.font="bold 12px Arial",o.fillText(". . .",m-r.label.hwidth,v);break}if((r.data===this.hoverObject||Base_Helpers.arrayContains(this.selectedObjects,r.data))&&this.rect(o,d,g,this.settings.advanced.selectedBorder,this.settings.advanced.selectedBackground,this.entryWidth-2*h,this.entryHeight-2*h),this.labelStyle.textStyle.fillColor=r.textColor,this.labelRenderer.paintWithStyle(o,m,v,1,r.label,this.labelStyle),this.paintMarker(o,f,y,this.markerSize/2,r),s+=1,"vertical"===this.orientation){if(i+=1,i===this.rows&&(i=0,n+=1),n===this.columns)break;S.push(void 0)}else{if(n+=1,n===this.columns&&(n=0,i+=1),i===this.rows)break;S.push(void 0)}}return S},e.prototype.findItemAt=function(t,e){var i,n,s,r,o,a,h;if(this.entries.length>0)return h=this.panel.top+this.settings.panel.padding,r=this.panel.left+this.settings.panel.padding,(o=r>t||t>r+this.contentWidth||h>e||e>h+this.contentHeight)?null:(n=Math.abs("vertical"===this.orientation?this.contentHeight/this.entryHeight:this.contentWidth/this.entryWidth),"vertical"===this.orientation?(i=Math.floor((t-r)/this.entryWidth),a=Math.floor((e-h)/this.entryHeight)):(i=Math.floor((e-h)/this.entryHeight),a=Math.floor((t-r)/this.entryWidth)),s=Math.floor(n*i+a),s>this.drawingEntries-1?null:this.lastInsensitive&&s===this.drawingEntries-1?null:this.entries[s].data)},e.prototype.rect=function(t,e,i,n,s,r,o){return t.beginPath(),t.rect(e,i,r,o),t.fillStyle=s,t.fill(),t.lineWidth=0,t.strokeStyle=n,t.stroke()},e.prototype.paintMarker=function(){return 1},e.prototype.shape=function(t,e,i,n,s,r){return null==r&&(r=null),t.lineWidth=1,t.beginPath(),t.rect(e,i,n,s),t.strokeStyle=null!==r?r:"black",t.stroke()},e}(Base_ChartElement);var Base_Credits,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Credits=function(t){"use strict";function e(t,e){this.chart=t,this.settings=e,this.imageLoaded=__bind(this.imageLoaded,this),this.scene=this.chart.scene,(this.settings.enabledOnExport||this.settings.enabled)&&(this.scene.settings.getAssetImage(this.settings.image),this.settings.imageExport&&this.scene.settings.getAssetImage(this.settings.imageExport)),this.panel=new Base_ChartPanel,this.panel.packingOrder=0,this.panel.side="bottom",this.panel.align="right",this.panel.visible=!1,this.panel.margin=3}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=60,e.prototype.updateOrder=400,e.settings={enabled:!1,enabledOnExport:!1,url:"http://zoomcharts.com",image:"builtin://logo",imageScaling:.5,location:"outside"},e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.credits?e.bounds=!0:void 0},e.prototype.getPanels=function(t){var e,i;return e=t?this.settings.enabledOnExport:this.settings.enabled,e&&(this.panel.location="outside","outside"===this.settings.location?(this.panel.floating=!1,t&&!this.settings.enabled&&(this.panel.location="external")):this.panel.floating=!0,i=this.scene.settings.getAssetImage(this.settings.image,this.imageLoaded))?(this.panel.desiredWidth=i.width*this.settings.imageScaling,this.panel.desiredHeight=i.height*this.settings.imageScaling,this.panel.visible=!0,[this.panel]):(this.panel.visible=!1,[])},e.prototype.paintScene=function(t){var e,i;if(this.panel.visible)return i=this.scene.settings.getAssetImage(this.settings.image),e=this.settings.imageExport?this.scene.settings.getAssetImage(this.settings.imageExport):i,t["export"]&&(i=e),i?t.context.drawImage(i,0,0,i.width,i.height,this.panel.left,this.panel.top,this.panel.right-this.panel.left,this.panel.bottom-this.panel.top):void 0},e.prototype.onPointerMove=function(t){var e,i;return e=t.x,i=t.y,this.panel.visible&&e>=this.panel.left&&i>=this.panel.top&&e<=this.panel.right&&i<=this.panel.bottom&&this.settings.url?t.cursor="pointer":void 0},e.prototype.onClick=function(t){var e,i;return e=t.x,i=t.y,this.panel.visible&&e>=this.panel.left&&i>=this.panel.top&&e<=this.panel.right&&i<=this.panel.bottom&&this.settings.url?(Base_Helpers.openUrl(this.settings.url),t.consumed=!0):void 0},e.prototype.imageLoaded=function(){return(this.settings.location="outside")?this.chart.updateSize(!0):this.chart.events.notifySceneChanges({repaint:!0})},e}(Base_ChartElement);var Piechart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t
}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Selection=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.dragPointers={}}return __extends(e,t),e.prototype.animationOrder=400,e.prototype.paintOrder=10,e.prototype.updateOrder=1200,e.prototype.scene=null,e.prototype.events=null,e.prototype.currentSlice=null,e.prototype.currentLabel=null,e.prototype.currentPie=null,e.prototype.draggedLabelSlice=null,e.prototype.draggedLabel=null,e.prototype.hoverEvent=null,e.prototype.doAnimations=function(){return this.hoverEvent?this.onPointerMove(this.hoverEvent):void 0},e.prototype.previewPointerDrag=function(t){return this.hoverEvent=t},e.prototype.onPointerMove=function(t){return this.hoverEvent=t,this.updateCurrentObject(t)},e.prototype.onPointerOut=function(t){return this.switchCurrentSlice(null,null,t),this.hoverEvent=null},e.prototype.onPointerDown=function(t){var e;return this.updateCurrentObject(t),(this.currentSlice||this.currentPie)&&(t.consumed=!0),e=this.scene.findLabelAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.draggedLabelSlice=e[0],this.draggedLabel=e[1],this.draggedLabel&&this.scene.settings.interaction.dragging.enabled?t.consumed=!0:(this.draggedLabel=null,this.draggedLabelSlice=null)},e.prototype.onPointerUp=function(t){return this.draggedLabel?(this.draggedLabel=null,t.consumed=!0):void 0},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.onPointerDrag=function(t){var e;return this.draggedLabel?(e=this.draggedLabel,e.userPlaced=!0,e.x+=t.dx,e.y+=t.dy,t.consumed=!0,t.changes.pie=!0):void 0},e.prototype.onClick=function(t){var e;return this.onPointerMove(t),this.fillClickParams(t),e=this.chart.notifyClick(t),(this.currentSlice||this.currentPie)&&(t.consumed=!0),e.defaultPrevented?void 0:this.updateSelection(t,t.slice,!1)},e.prototype.onRightClick=function(t){var e;return this.onPointerMove(t),this.fillClickParams(t),(this.currentSlice||this.currentPie)&&(t.consumed=!0),e=this.chart.notifyRightClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){return this.onPointerMove(t),this.fillClickParams(t),this.chart.notifyDoubleClick(t),t.consumed=!0},e.prototype.fillClickParams=function(t){var e,i;return e=this.scene.findSliceAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),i=this.scene.findPieAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickPie=e?e.pie:i,e?t.cursor="pointer":void 0},e.prototype.updateSelection=function(t,e,i){var n,s;if(this.scene.settings.interaction.selection.enabled)if(n=t.shiftKey,s="toggle"===this.scene.settings.interaction.mode||t.ctrlKey,e){if(!(n||i&&e.selected||s&&!e.selected))return s&&e.selected?(Base_Helpers.removeFromArray(this.scene.selection,e),e.selected=!1,this.setSelection(this.scene.selection,this.scene.selectionIds,!0)):this.setSelection(!e.selected||this.scene.selection.length>1?[e]:[]);if(!e.selected)return this.scene.selection.push(e),e.selected=!0,this.setSelection(this.scene.selection,this.scene.selectionIds,!0)}else if(!n&&!s)return this.setSelection([])},e.prototype.switchCurrentSlice=function(t,e,i){return t!==this.currentSlice||e!==this.currentLabel?(i.changes.current=!0,this.scene.hoverSlice&&(this.scene.hoverSlice.active=!1),this.scene.hoverPie&&(this.scene.hoverPie.active=!1),this.scene.hoverSlice=t,this.scene.hoverPie=null,this.scene.hoverLabel=e,this.currentSlice=t,this.currentLabel=e,this.currentPie=null,this.currentSlice&&(this.scene.hoverSlice.active=!0,i.hoverSlice=this.currentSlice),this.events.notifySceneChanges({pie:!0}),this.chart.notifyHoverChanged(i)):void 0},e.prototype.switchCurrentPie=function(t,e){return t!==this.currentPie?(e.changes.current=!0,this.scene.hoverSlice&&(this.scene.hoverSlice.active=!1),this.scene.hoverPie&&(this.scene.hoverPie.active=!1),this.scene.hoverPie=t,this.scene.hoverSlice=null,this.currentSlice=null,this.currentPie=t,this.currentPie&&(this.scene.hoverPie.active=!0,e.hoverPie=this.currentPie),this.events.notifySceneChanges({pie:!0}),this.chart.notifyHoverChanged(e)):void 0},e.prototype.onSceneChange=function(t){return t.changes.pie&&this.updateSelectionIds()?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged("")):void 0},e.prototype.updateSelectionIds=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f;for(n=[],p=this.scene.selectionIds,s=0,h=p.length;h>s;s++)for(t=p[s],d=this.scene.pies,r=0,l=d.length;l>r;r++)if(e=d[r],!e.background)for(f=e.slices,o=0,u=f.length;u>o;o++)if(i=f[o],i.id===t){n.push(i);break}if(n.length>0)for(a=0,c=n.length;c>a;a++)i=n[a],i.selected||(i.selected=!0,this.scene.selection.push(i)),Base_Helpers.removeFromArray(this.scene.selectionIds,i.id);return n.length>0},e.prototype.setSelection=function(t,e,i,n){var s,r,o,a,h,l,u,c;if(null==e&&(e=[]),null==i&&(i=!1),null==n&&(n="user"),this.scene.selectionIds=e,i)r=!0;else{for(c=this.scene.selection,a=0,l=c.length;l>a;a++)o=c[a],Base_Helpers.arrayContains(t,o)||(o.selected=!1,r=!0);for(h=0,u=t.length;u>h;h++)o=t[h],o.selected||(o.selected=!0,r=!0);this.scene.selection=t}return s=this.updateSelectionIds(),r||(r=s),r?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(n)):void 0},e.prototype.updateCurrentObject=function(t){var e,i,n;return n=this.findSliceAt(t.x,t.y),e=this.scene.findLabelAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),e=e?e[1]:null,n&&(t.cursor="pointer"),this.switchCurrentSlice(n,e,t),i=this.scene.findPieAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),i&&i.background&&!n?(t.cursor="pointer",this.switchCurrentPie(i,t)):this.switchCurrentPie(null,t)},e.prototype.findSliceAt=function(t,e){var i;return i=this.scene.findSliceAt(t,e,this.scene.settings.interaction.selection.tolerance),!i&&this.chart.legend&&(i=this.chart.legend.findItemAt(t,e)),i},e}(Base_ChartElement);var Piechart_Styles,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Styles=function(t){function e(t){this.chart=t,this.scene=t.scene}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=25,e.prototype.updateOrder=900,e.prototype.onSceneChange=function(t){var e,i,n,s,r,o,a;if(t.changes.settings||t.changes.pie||t.changes.selection||t.changes.style){for(this.insideLabelBase=this.scene.settings.slice.insideLabelStyle,this.labelBase=this.scene.settings.slice.labelStyle,o=this.scene.pies,a=[],s=0,r=o.length;r>s;s++)e=o[s],this.updatePie(e),this.computePieColors(e),a.push(function(){var t,s,r,o;for(r=e.allSlices,o=[],n=t=0,s=r.length;s>t;n=++t)i=r[n],o.push(this.updateSlice(i,n));return o}.call(this));return a}},e.prototype.updatePie=function(t){return Base_Helpers.extend(t,this.scene.settings.pie.style),0===t.slices.length&&Base_Helpers.extend(t,this.scene.settings.pie.noDataStyle),t.background&&Base_Helpers.extend(t,this.scene.settings.pie.backgroundStyle),this.scene.hoverPie===t&&Base_Helpers.extend(t,this.scene.settings.pie.backgroundHoveredStyle),this.scene.settings.pie.styleFunction?this.scene.settings.pie.styleFunction(t):void 0},e.prototype.computePieColors=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T;for(o=t.sliceColors,r=t.colorDistribution,p=0,S=t.slices,d=0,y=S.length;y>d;d++)c=S[d],c.removed||(p+=1);if(1===p)return void(t.slices[0].fillColor=o[0]);if(1===o.length&&(n=o[0],o=[n,Base_Graphics.blendColors(n,"#fff",.8)]),s=o.length,"gradient"===r){for(l=0,b=t.slices,P=[],f=0,v=b.length;v>f;f++)c=b[f],c.removed||(e=o[l*(s-1)|0],i=o[l*(s-1)+1|0],a=l*(s-1),a-=Math.floor(a),n=Base_Graphics.blendColors(e,i,a),c.fillColor=n,P.push(l+=1/(p-.9)));return P}if("gradientProportional"===r){for(l=0,w=t.slices,M=[],m=0,_=w.length;_>m;m++)c=w[m],c.removed||(e=o[l*(s-1)|0],i=o[l*(s-1)+1|0],a=l*(s-1),a-=Math.floor(a),n=Base_Graphics.blendColors(e,i,a),c.fillColor=n,M.push(l+=c.fraction));return M}for(C=t.slices,T=[],h=g=0,x=C.length;x>g;h=++g)c=C[h],c.removed||(n=o[h%s],u=h/s|0,1===u?n=Base_Graphics.deriveColor(n,1.5,1):u>=2&&(n=Base_Graphics.deriveColor(n,.5,1)),T.push(c.fillColor=n));return T},e.prototype.updateSlice=function(t,e){var i,n,s,r,o,a;return s=t.pie,r=this.scene.settings.slice.styleFunction,t.removed?void 0:(t.labelStyle=this.labelBase,t.insideLabelStyle=this.insideLabelBase,t.expandable=this.scene.data.canExapnd(t.id),Base_Helpers.extend(t,this.scene.settings.slice.style),t===s.othersSlice&&Base_Helpers.extend(t,this.scene.settings.slice.othersStyle),t===s.previousSlice&&Base_Helpers.extend(t,this.scene.settings.slice.previousStyle),t.percent=s.total>0?t.value/s.total*100:0,r||(t.label=""+t.percent.toFixed(1)+"%",!t.percent,t.data.name&&(t.label=t.data.name+" "+t.label)),t.selected&&Base_Helpers.extend(t,this.scene.settings.slice.selectedStyle),this.scene.hoverSlice===t&&Base_Helpers.extend(t,this.scene.settings.slice.hoverStyle),t.data.style&&Base_Helpers.extend(t,t.data.style),r&&(r(t,t.data),t.label&&!Base_Helpers.isString(t.label)&&(t.label=""+t.label),t.insideLabel&&!Base_Helpers.isString(t.insideLabel)&&(t.insideLabel=""+t.insideLabel)),s.background&&(s.activeSliceId!==t.id?(Base_Helpers.extend(t,this.scene.settings.slice.backgroundStyle),e%2===1&&(t.fillColor=t.fillColor2)):Base_Helpers.extend(t,this.scene.settings.slice.backgroundActiveStyle)),o=t.fillColor?t.fillColor:"rgba(255,255,255,0)",a=t.lineColor?t.lineColor:t.lineBrightness?Base_Graphics.deriveColor(o,t.lineBrightness,1):"rgba(255,255,255,0)",i=t.brightness*s.brightness,1!==i&&(o=Base_Graphics.deriveColor(o,i,1),a=Base_Graphics.deriveColor(a,i,1),-1!==o.indexOf("rgba(255,255,255")&&-1!==a.indexOf("rgba(255,255,255")&&(a="rgba(200,200,200,1.000)")),t.labelStyle!==this.labelBase&&(n=Base_Helpers.realClone(this.labelBase),Base_Helpers.extendDeep(n,t.labelStyle),t.labelStyle=n),t.insideLabelStyle!==this.insideLabelBase&&(n=Base_Helpers.realClone(this.insideLabelBase),Base_Helpers.extendDeep(n,t.insideLabelStyle),t.insideLabelStyle=n),s.removed&&s.parentSlice?(t.targetFillColor=s.parentSlice.targetFillColor,t.targetLineColor=s.parentSlice.targetLineColor):(t.targetFillColor=Base_Graphics.normalizeColor(o),t.targetLineColor=Base_Graphics.normalizeColor(a)))},e}(Base_ChartElement);var Piechart_Layers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Layers=function(t){function e(t){this.chart=t,this.scene=t.scene,this.container=Base_Helpers.createDom("div","DVSL-container"),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="100%",this.background=Base_Helpers.createDom("div","DVSL-background",null,this.container),this.setContainerStyle(this.background),this.backgroundImage=Base_Helpers.createDom("div","DVSL-PC-background-image",null,this.container),this.backgroundImage.style.position="absolute",this.backgroundImage.style.overflow="hidden",this.canvas=Base_Helpers.createDom("canvas","DVSL-canvas",null,this.container),this.setContainerStyle(this.canvas),this.outerBorder=Base_Helpers.createDom("div","DVSL-border",null,this.container),this.setContainerStyle(this.outerBorder),this.resizerBar=Base_Helpers.createDom("div","DVSL-resizer",null,this.container),this.mouseTrackLayer=Base_Helpers.createDom("div",null,null,this.container),this.setContainerStyle(this.mouseTrackLayer),this.updateSettings(this.scene.settings,"init")}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=35,e.prototype.updateOrder=600,e.prototype.scene=null,e.prototype.container=null,e.prototype.background=null,e.prototype.canvas=null,e.prototype.outerBorder=null,e.prototype.mouseTrackLayer=null,e.prototype.backgroundImage=null,e.prototype.updateSettings=function(t){var e;return Base_Helpers.hasProp(t,"area.style.image")&&(e=t.area.style.image,this.backgroundImage.style.backgroundImage=e?"url("+e+")":""),Base_Helpers.hasProp(t,"advanced.themeCSSClass")?(null!=this.curTheme&&Base_Helpers.removeClass(this.container,this.curTheme),this.curTheme=this.scene.settings.advanced.themeCSSClass,Base_Helpers.addClass(this.container,this.curTheme)):void 0},e.prototype.doAnimations=function(t){var e,i,n,s,r;return t.changes.bounds&&(n=this.scene.settings.width,i=this.scene.settings.height,this.scene.chartWidth>this.scene.settings.container.clientWidth&&this.container&&""!==this.container.style.display&&(n=this.scene.chartWidth),this.scene.chartHeight>this.scene.settings.container.clientHeight&&this.container&&""!==this.container.style.display&&(i=this.scene.chartHeight),n&&(this.container.style.width=""+n+"px"),i&&(this.container.style.height=""+i+"px"),this.resizerBar.style.width=""+this.scene.width+"px",this.resizerBar.style.left=""+this.scene.x0+"px"),t.changes.position&&this.scene.settings.area.style.image&&this.scene.pies.length>0?(e=this.scene.currentInnerRadius-this.scene.settings.pie.margin,s=this.scene.pies[0].x,r=this.scene.pies[0].y,this.backgroundImage.style.left=s-e+"px",this.backgroundImage.style.top=r-e+"px",this.backgroundImage.style.width=2*e+"px",this.backgroundImage.style.height=2*e+"px"):void 0},e.prototype.setContainerStyle=function(t){return t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px"},e}(Base_ChartElement);var Piechart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Scrolling=function(t){function e(t,e){this.chart=t,this.view=e,this.scene=t.scene,this.events=t.events,this.pie=null,this.slice=null,this.fraction=null,this.offset=null}return __extends(e,t),e.prototype.animationOrder=200,e.prototype.paintOrder=5,e.prototype.updateOrder=1300,e.prototype.doAnimations=function(){},e.prototype.onPointerDown=function(t){return this.pie=this.scene.view.findPieAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.slice=this.scene.view.findSliceAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.slice&&(this.pie=this.slice.pie),this.mode=null},e.prototype.onPointerDrag=function(t){var e,i,n,s;if(this.pie||this.slice)return null===this.mode&&(this.pie&&this.scene.settings.interaction.scrolling.enabled?this.mode="scroll":this.slice&&this.scene.settings.interaction.dragging.enabled&&(this.mode="drag")),s=this.scene.view.getMovement(this.pie,t),e=s[0],i=s[1],"scroll"===this.mode?(this.pie.scrollOffset+=e,this.updatePieScrolling(this.pie),t.consumed=!0,t.changes.pie=!0):"drag"===this.mode?(this.slice.userPlaced=!0,n=this.slice.currentCutoutDistance+i,0>n?(this.slice.currentCutoutDistance=0,this.slice.userPlaced=!1):(this.slice.currentCutoutDistance=n,this.slice.userPlaced=!0),t.consumed=!0,t.changes.pie=!0):void 0},e.prototype.onPointerUp=function(t){return"scroll"===this.mode?(this.updatePieAfterScroll(this.pie),t.consumed=!0):"drag"===this.mode&&(t.consumed=!0),this.pie=null,this.slice=null,this.mode=null},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.updatePieScrolling=function(t){var e,i,n,s;if(i=!1,t.scrollOffset<0){for(n=t.scrollOffset,e=0,s=0;t.slices.length>e+1&&t.slices[e].fraction<-(t.scrollOffset+s);)e+=1,s+=t.slices[s].fraction;t.offset+=e,t.scrollOffset+=s,i=!0}else t.scrollOffset>0&&0===t.offset&&(t.scrollOffset=0);return i?this.scene.view.updatePie(this.pie):void 0},e.prototype.updatePieAfterScroll=function(){return 1},e}(Base_ChartElement);var Piechart_Navigator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Navigator=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.events=t.events}return __extends(e,t),e.prototype.animationOrder=250,e.prototype.paintOrder=30,e.prototype.updateOrder=800,e.prototype.setPie=function(t,e,i){var n,s;for(Base_Helpers.isArray(t)||(t=[t]),this.scene.pendingAction=null,n=0;this.scene.length()>t.length;)this.scene.pop(),n++;for(;this.scene.length()>0&&this.scene.peek().id!==t[this.scene.length()-1];)this.scene.pop(),n++;for(;this.scene.length()<t.length;)s=new Piechart_Pie,s.id=t[this.scene.length()],s.offset=this.scene.length()+1===t.length?e:0,this.scene.push(s),this.scene.view.updatePie(s),n++;return s=this.scene.peek(),s.offset!==e?(this.scroll(s,e),n++):n&&s&&this.scene.view.updatePie(s),n?(this.chart.notifyChartUpdate(i),this.events.notifySceneChanges({pie:!0})):void 0},e.prototype.getPie=function(){var t,e,i,n,s;for(n=this.scene.stack,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.id);return s},e.prototype.getPieOffset=function(){return this.scene.peek().offset},e.prototype.goBack=function(t){return this.scene.length()>1?(this.scene.pop(),this.scene.pendingAction=null,this.updateAndNotifyCurrent(t)):void 0},e.prototype.goCenter=function(t){var e;return e=this.scene.peek(),e.offset>0&&this.scene.settings.interaction.others.centerGoesToPrevious?this.goPrevious(e,t):this.scene.length()>1?(this.scene.pop(),this.scene.pendingAction=null,this.updateAndNotifyCurrent(t)):void 0},e.prototype.drillDown=function(t,e){var i;return this.scene.pendingAction=null,i=new Piechart_Pie,i.id=t,i.offset=0,this.scene.push(i),this.updateAndNotifyCurrent(e)},e.prototype.goOthers=function(t,e){var i;return t.othersStack||(t.othersStack=[]),t.othersStack.push(t.offset),i=this.scene.view.scrollForward(t,t.offset+t.count),i||(this.scene.pendingAction="forward",this.scene.pendingOffset=null),this.events.notifySceneChanges({pie:!0}),this.chart.notifyChartUpdate(e)},e.prototype.goPrevious=function(t,e){var i;if(t.offset>0)return i=this.scene.view.scrollBackward(t),i||(this.scene.pendingAction="back",this.scene.pendingOffset=null),this.chart.notifyChartUpdate(e),this.events.notifySceneChanges({pie:!0})},e.prototype.scroll=function(t,e){var i;if(i=!0,t.offset>e){if(i=this.scene.view.scrollBackward(t,e),!i)return this.scene.pendingAction="back",this.scene.pendingOffset=e}else if(t.offset<e&&(i=this.scene.view.scrollForward(t,e),!i))return this.scene.pendingAction="forward",this.scene.pendingOffset=e},e.prototype.updateAndNotifyCurrent=function(t){var e;return e=this.scene.peek(),this.scene.view.updatePie(e),this.chart.notifyChartUpdate(t),this.events.notifySceneChanges({pie:!0})},e.prototype.expandSlice=function(t,e){var i,n;return n=t.pie,n!==this.scene.peek()?(this.chart.setSelection([]),this.goBack(e),!0):t===n.othersSlice?(this.chart.setSelection([]),this.goOthers(n,e),!0):t===n.previousSlice?(this.chart.setSelection([]),this.goPrevious(n,e),!0):(i=t.id,t.expandable&&this.scene.data.canExapnd(i)?(this.chart.setSelection([]),this.drillDown(i,e),!0):!1)},e.prototype.onSceneChange=function(t){var e,i,n,s,r,o,a,h,l,u,c;if(i=!1,e=this.scene.peek(),t.changes.dataArrived)for(n=t.changes.dataArrivedIds,u=this.scene.pies,o=0,h=u.length;h>o;o++)s=u[o],n.hasOwnProperty(s.id)&&(s===e?(r="forward"===this.scene.pendingAction?this.scene.view.scrollForward(s,this.scene.pendingOffset):"back"===this.scene.pendingAction?this.scene.view.scrollBackward(s,this.scene.pendingOffset):this.scene.view.updatePie(s),r&&(this.scene.pendingAction=null,this.scene.pendingOffset=null),i=r):this.scene.view.updatePie(s),t.changes.pie=!0);if(t.changes.data)for(c=this.scene.stack,a=0,l=c.length;l>a;a++)s=c[a],(!s.data||s===e||t.changes.dataDeep)&&(s===e?(r="forward"===this.scene.pendingAction?this.scene.view.scrollForward(s,this.scene.pendingOffset):"back"===this.scene.pendingAction?this.scene.view.scrollBackward(s,this.scene.pendingOffset):this.scene.view.updatePie(s),r&&(this.scene.pendingAction=null,this.scene.pendingOffset=null),i=r):this.scene.view.updatePie(s),t.changes.pie=!0);return i?this.chart.notifyChartUpdate("data",!0):void 0},e}(Base_ChartElement);var Piechart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_InfoPopup=function(t){function e(t){this.chart=t,this.scene=t.scene,this.options=this.scene.settings,this.events=t.events,this.currentSlice=null,this.x=null,this.y=null,this.popup=new Base_InfoPopup(t)}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=15,e.prototype.updateOrder=1100,e.prototype.previewPointerMove=function(t){return this.onMove(t.x,t.y)},e.prototype.doAnimations=function(){return null!==this.x&&null!==this.y?this.onMove(this.x,this.y):void 0},e.prototype.previewPointerDown=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.previewPointerDrag=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onPointerOut=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onMove=function(t,e){var i,n;return this.x=t,this.y=e,this.options.info.enabled?(n=this.scene.findSliceAt(t,e,this.scene.settings.interaction.selection.tolerance),i=this.scene.findPieAt(t,e,this.scene.settings.interaction.selection.tolerance),i&&!n&&(n=i.getActiveSlice()),this.setCurrentObject(t,e,n)):void 0},e.prototype.setCurrentObject=function(t,e,i){var n;return i?(i!==this.currentSlice?(n=this.buildContents(i),this.popup.show(t,t,e,n)):this.popup.updateXY(t,t,e),this.currentSlice=i):(this.currentSlice=null,this.popup.hide())},e.prototype.buildContents=function(t){var e;return this.options.info.contentsFunction?(e=function(e){return function(i){return t===e.currentSlice?e.popup.updateContents(i):void 0}}(this),this.options.info.contentsFunction.call(this.scene.api,t.data,t,e)):t.label},e}(Base_ChartElement);var Piechart_PieView,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_PieView=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.renderer=new Piechart_PieRenderer(t),this.animator=new Piechart_Animations(t),this.layout=new Piechart_PieLayout(t,this),this.builder=new Piechart_PieBuilder(t)}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=30,e.prototype.updateOrder=700,e.prototype.updatePie=function(t){return this.builder.updatePie(t)},e.prototype.scrollForward=function(t,e){return this.builder.scrollForward(t,e)},e.prototype.scrollBackward=function(t,e){return this.builder.scrollBackward(t,e)},e.prototype.onSceneChange=function(t){return this.renderer.onSceneChange(t)},e.prototype.doAnimations=function(t){var e,i,n,s,r;for((t.changes.settings||t.changes.pie||t.changes.bounds)&&(n=!1,i=this.scene.peek(),null!=i&&(n=this.layout.placeStack(i,t.context))),e=this.animator.doAnimations(t),s=0,r=e.length;r>s;s++)i=e[s],this.layout.placeLabels(i,t.context);return n||e?(t.changes.position=!0,this.chart.notifyPositionChange(t)):void 0},e.prototype.paintScene=function(t){return this.renderer.paintScene(t)},e.prototype.getMovement=function(t,e){var i,n,s,r,o,a,h,l,u,c;return h=e.x-e.dx-t.x,u=e.y-e.dy-t.y,l=e.x-t.x,c=e.y-t.y,i=Math.atan2(u,h),n=Math.atan2(c,l),i-n>Math.PI&&(n+=2*Math.PI),n-i>Math.PI&&(i+=2*Math.PI),a=(n-i)/(t.currentEndAngle-t.currentStartAngle),s=Math.sqrt(h*h+u*u),r=Math.sqrt(l*l+c*c),o=r-s,[a,o]},e.prototype.findPieAt=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y;for(n=this.scene.currentInnerRadius,h=this.scene.currentRadius-n,a=g=y=this.scene.pies.length-1;g>=0;a=g+=-1)if(l=this.scene.pies[a],d=l.x,m=l.y,u=l.currentInnerRadius*h+n,c=l.currentRadius*h+n,f=Math.max(0,u-i),f=c+i,p=f*f,r=t-d,o=e-m,s=r*r+o*o,l.background&&p>=s)return l;return null},e.prototype.findSliceAt=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A;for(r=this.scene.currentInnerRadius,m=this.scene.currentRadius-r,S=this.scene.settings.interaction.selection.cutoutDistance,f=k=B=this.scene.pies.length-1;k>=0;f=k+=-1)if(g=this.scene.pies[f],!(g.background||(P=g.x,T=g.y,y=g.currentInnerRadius*m+r,_=g.currentRadius*m+r,M=Math.max(0,y-i),v=M*M,M=_+i+S,x=M*M,p=t-P,d=e-T,l=p*p+d*d,v>l||l>x)))for(h=Math.sqrt(l),p/=h,d/=h,n=g.currentStartAngle,s=g.currentEndAngle-n,n+=s*g.scrollOffset,a=Math.cos(n),w=Math.sin(n),A=g.allSlices,D=0,L=A.length;L>D;D++)if(C=A[D],o=a,b=w,n+=s*C.currentFraction,a=Math.cos(n),w=Math.sin(n),h>=y+C.cutoutDistance&&h<=_+C.cutoutDistance){if(u=b*p-o*d,c=w*p-a*d,0>u&&c>0)return C;if(Math.abs(s*C.currentFraction)>Math.PI&&(0>u&&0>c||u>0&&c>0))return C}return this.findLabelAt(t,e,i)[0]},e.prototype.findLabelAt=function(t,e){var i,n,s,r,o,a,h,l,u,c,p;for(i=h=c=this.scene.pies.length-1;h>=0;i=h+=-1)for(s=this.scene.pies[i],o=t-s.x,a=e-s.y,p=s.allSlices,l=0,u=p.length;u>l;l++){if(r=p[l],r.currentLabel&&(n=r.currentLabel,n.visible&&n.x-n.hwidth<=o&&n.x+n.hwidth>=o&&n.y-n.hheight<=a&&n.y+n.hheight>=a))return[r,n];if(r.currentInsideLabel&&(n=r.currentInsideLabel,n.visible&&n.x-n.hwidth<=o&&n.x+n.hwidth>=o&&n.y-n.hheight<=a&&n.y+n.hheight>=a))return[r,n]}return[null,null]},e}(Piechart_View);var Facetchart_FacetAxis;Facetchart_FacetAxis=function(){function t(t,e){this.chart=t,this.facet=e,this.scene=this.chart.scene,this.options=this.scene.settings.facetAxis,this.currentItemWidth=1,this.currentItemHeight=1,this.itemRenderer=new Base_LabelRenderer(this.chart),this.panel=new Base_ChartPanel,this.panel.side="bottom",this.panel.packingOrder=110}return t.settings={enabled:!0,size:40,defaultUnitWidth:50,maxUnitWidth:400,labels:{enabled:!0,angle:0,lineSpacing:.2,interLabelSpacing:.6,textStyle:{fillColor:"#000",font:"12px Arial"},margin:4,padding:0}},t.prototype.getPanel=function(){return this.options.enabled&&this.options.size>0?(this.panel.desiredHeight=this.options.size,this.panel.visible=!0,this.scene.bottomAxisSize=this.options.size):(this.panel.desiredHeight=0,this.panel.visible=!1,this.scene.bottomAxisSize=0),this.panel},t.prototype.paint=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_;if(n.length>1&&this.panel.visible&&(a=t.context,s=e+i,c=n[1]-n[0],f=this.panel.top,u=this.panel.bottom-this.panel.top,this.options.labels.enabled)){for(d=!1,(Math.abs(1-this.currentItemWidth/c)>.01||Math.abs(1-this.currentItemHeight/u)>.01)&&(this.currentItemWidth=c,this.currentItemHeight=u,d=!0),t.changes.settings&&(d=!0),this.layout=new Base_LabelLayoutBase(a,this.options.labels),v=this.facet.items,_=[],h=g=0,y=v.length;y>g;h=++g)l=v[h],m=n[h],l.label?(null===l.currentLabel||d||l.currentLabel.text!==l.label?(p=this.buildLabel(l.label,c,u),l.currentLabel=p):p=l.currentLabel,r=Math.max(m+1,e),o=Math.min(m+c-2,s),Base_Graphics.pushClip(a,r,f,o-r,u),this.itemRenderer.paintWithStyle(a,m+p.x,f+p.y,1,p,this.options.labels),_.push(Base_Graphics.popClip(a))):_.push(l.currentLabel=null);return _}},t.prototype.buildLabel=function(t,e,i){var n,s,r,o,a,h,l,u;return o=new Base_Label,o.text=t,s=o.angle=this.layout.angle,n=this.options.labels.align,n?o.align=n:n=o.align=s>0?"left":0>s?"right":"center",h=e/2,u=Math.sin(s),r=Math.cos(s),a=function(t){var n,o,a,l,c;return l=t*r,0!==u?(a=i-2*t*r,c=Math.max(0,a/Math.abs(u))):c=i>=2*t?e:0,s>0?(n=h+c/2*r,o=t*r+c/2*u):0>s?(n=h-c/2*r,o=t*r-c/2*u):(n=h,o=t),[n,o,r,u,c]},l=this.layout.fitLabelInRect(o,n,n,a),o},t}();var Facetchart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Selection=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.dragPointers={}}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=15,e.prototype.updateOrder=1e3,e.settings={enabled:!0,tolerance:2},e.prototype.scene=null,e.prototype.events=null,e.prototype.currentItem=null,e.prototype.currentFacet=null,e.prototype.draggedLabelItem=null,e.prototype.draggedLabel=null,e.prototype.hoverEvent=null,e.prototype.doAnimations=function(){return this.hoverEvent?this.onPointerMove(this.hoverEvent):void 0},e.prototype.previewPointerDrag=function(t){return this.hoverEvent=t},e.prototype.onPointerMove=function(t){var e,i,n,s,r,o,a;if(this.hoverEvent=t,i=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),i&&(t.cursor="pointer"),e=this.chart.renderer.hitTest(t.x,t.y),!e&&this.chart.legend&&(n=this.chart.legend.findItemAt(t.x,t.y)))for(r=this.scene.settings.computedSeries,s=o=0,a=r.length;a>o;s=o+=1)n===r[s]&&(e={seriesIndex:s},t.cursor="pointer");return(!e!=!this.scene.hoverSeriesItem||e&&(e.seriesIndex!==this.scene.hoverSeriesItem.seriesIndex||e.x0!==this.scene.hoverSeriesItem.x0))&&(this.scene.hoverSeriesItem=e,t.changes.hover=!0),this.switchcurrentItem(i,t)},e.prototype.onPointerOut=function(t){return this.hoverEvent=this.scene.hoverSeriesItem=null,this.events.notifySceneChanges({selection:!0}),this.switchcurrentItem(null,t)},e.prototype.onPointerDown=function(t){var e;return this.onPointerMove(t),e=this.scene.findLabelAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.draggedLabelItem=e[0],this.draggedLabel=e[1],this.draggedLabel?t.consumed=!0:void 0},e.prototype.onPointerUp=function(t){return this.draggedLabel?(this.draggedLabel=null,t.consumed=!0):void 0},e.prototype.onPointerCancel=function(){return this.draggedLabel?this.draggedLabel=null:void 0},e.prototype.onPointerDrag=function(t){var e;return this.draggedLabel?(e=this.draggedLabel,e.userPlaced=!0,e.x+=t.dx,e.y+=t.dy,t.consumed=!0,t.changes.label=!0):void 0},e.prototype.onClick=function(t){var e,i;return e=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickItem=e,t.clickFacet=e?e.facet:null,t.consumed=!0,e&&(t.cursor="pointer"),i=this.chart.notifyClick(t),i.defaultPrevented?void 0:this.updateSelection(t,e,!1)},e.prototype.onRightClick=function(t){var e,i;return e=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickItem=e,t.clickFacet=e?e.facet:null,i=this.chart.notifyRightClick(t),e&&(t.cursor="pointer"),i.defaultPrevented?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){var e;return e=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickItem=e,e&&(t.cursor="pointer"),this.chart.notifyDoubleClick(t),t.consumed=!0},e.prototype.updateSelection=function(t,e,i){if(this.scene.settings.interaction.selection.enabled){if(!(t.shiftKey||e&&!e.selected))return this.setSelection([]);if(e&&t.shiftKey||i&&e.selected){if(!e.selected)return this.scene.selection.push(e),e.selected=!0,this.setSelection(this.scene.selection,this.scene.selectionIds,!0)}else if(e)return this.setSelection([e])}},e.prototype.switchcurrentItem=function(t,e){return t!==this.currentItem?(e.changes.current=!0,this.scene.hoverItem&&(this.scene.hoverItem.active=!1),this.scene.hoverItem=t,this.currentItem=t,this.currentFacet=null,this.currentItem&&(this.scene.hoverItem.active=!0,e.hoverItem=this.currentItem),this.events.notifySceneChanges({items:!0}),this.chart.notifyHoverChanged(e)):void 0},e.prototype.onSceneChange=function(t){return t.changes.items&&this.updateSelectionIds()?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(origin)):void 0},e.prototype.updateSelectionIds=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f;for(n=[],p=this.scene.selectionIds,s=0,h=p.length;h>s;s++)for(e=p[s],d=this.scene.activeFacet,r=0,l=d.length;l>r;r++)for(t=d[r],f=t.items,o=0,u=f.length;u>o;o++)if(i=f[o],i.id===e){n.push(i);break}if(n.length>0)for(a=0,c=n.length;c>a;a++)i=n[a],i.selected||(i.selected=!0,this.scene.selection.push(i)),Base_Helpers.removeFromArray(this.scene.selectionIds,i.id);
return n.length>0},e.prototype.setSelection=function(t,e,i,n){var s,r,o,a,h,l,u,c;if(null==e&&(e=[]),null==i&&(i=!1),null==n&&(n="user"),this.scene.selectionIds=e,i)r=!0;else{for(c=this.scene.selection,a=0,l=c.length;l>a;a++)o=c[a],Base_Helpers.arrayContains(t,o)||(o.selected=!1,r=!0);for(h=0,u=t.length;u>h;h++)o=t[h],o.selected||(o.selected=!0,r=!0);this.scene.selection=t}return s=this.updateSelectionIds(),r||(r=s),r?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(n)):void 0},e}(Base_ChartElement);var Facetchart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_InfoPopup=function(t){function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=25,e.prototype.updateOrder=800,e.settings={enabled:!0,contentsFunction:null},e.prototype.doAnimations=function(t){return t.changes.position||t.changes.navigation?this.updatePopup(t):void 0},e.prototype.getPopupAreaMouseMoved=function(t,e){var i,n,s,r;return this.scene.xyInChartOrBottom(t,e)&&this.scene.activeFacet?(i=this.scene.activeFacet,n=this.scene.xToPosition(t),s=Math.floor(n),r=Math.ceil(n),s===r&&(r=s+1),s<i.offset||s>=i.items.length+i.offset?null:[s,r]):null},e.prototype.buildHeader=function(t){var e,i,n;return e=this.scene.activeFacet,i=e.items[t-e.offset],n=i.label||"","<em></em><strong>"+n+"</strong>"},e}(Linearchart_InfoPopup);var Facetchart_Facet,Facetchart_Item,Facetchart_ItemValue,Facetchart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Facet=function(){function t(){this.id=null,this.data=null,this.items=[],this.parentItem=null,this.activeItemId=null,this.offset=0,this.count=0,this.totalCount=0,this.from=0,this.to=0,this.left=0,this.right=1,this.opacity=1}return t.prototype.getActiveItem=function(){var t,e,i,n;if(!this.activeItemId)return null;for(n=this.items,e=0,i=n.length;i>e;e++)if(t=n[e],t.id===this.activeItemId)return t;return null},t}(),Facetchart_Item=function(){function t(t,e,i,n){this.facet=t,this.id=e,this.index=i,this.data=n,this.expandable=!0,this.selected=!1,this.active=!1,this.url=null,this.values=[],this.innerFacet=null,this.label=null,this.currentLabel=null}return t}(),Facetchart_ItemValue=function(){function t(t,e,i,n){this.facet=t,this.id=e,this.index=i,this.data=n}return t.prototype.value=0,t.prototype.fillColor=null,t.prototype.lineColor=null,t.prototype.lineWidth=1,t.prototype.label=null,t.prototype.previewContents=!1,t.prototype.previewData=null,t.prototype.currentLabel=null,t}(),Facetchart_Scene=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t),this.data=null,this.stack=[],this.selection=[],this.selectionIds=[],this.activeFacet=null,this.hoverItem=null}return __extends(e,t),e.prototype.xToPosition=function(t){var e,i,n,s;return e=this.activeFacet,i=this.x0+e.left*this.width,s=this.x0+e.right*this.width,n=e.from+(t-i)/(s-i)*(e.to-e.from)},e.prototype.positionToX=function(t){var e,i,n;return e=this.activeFacet,i=this.x0+e.left*this.width,n=this.x0+e.right*this.width,i+(t-e.from)*(n-i)/(e.to-e.from)},e.prototype.timeToX=function(t){return this.positionToX(t)},e.prototype.xToTime=function(t){return this.xToPosition(t)},e.prototype.length=function(){return this.stack.length},e.prototype.peek=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1]},e.prototype.push=function(t,e){var i,n,s,r,o,a,h,l;if(r=this.peek(),r&&!e)for(h=r.items,o=0,a=h.length;a>o;o++)if(s=h[o],s.data.__id===t.id){e=s;break}return e?(t.parentItem=e,e.innerFacet=t,l=this.getItemPlacement(e),i=l[0],n=l[1],t.left=i,t.right=n,r.activeItemId=e.id):r&&(r.activeItemId=null),this.stack.push(t),this.activeFacet=t},e.prototype.pop=function(){var t;return this.stack.length>0&&(t=this.stack.pop(),t.parentItem&&(t.parentItem.facet.activeItemId=null)),this.activeFacet=this.stack.length>0?this.peek():null,this.activeFacet},e.prototype.getParent=function(t){var e,i,n,s,r;for(i=null,r=this.stack,n=0,s=r.length;s>n;n++){if(e=r[n],e===t)return i;i=e}return null},e.prototype.getChild=function(t){var e,i,n,s,r;for(i=null,r=this.stack,n=0,s=r.length;s>n;n++){if(e=r[n],i===t)return e;i=e}return null},e.prototype.updateLinks=function(t){var e,i,n,s,r,o,a,h,l,u;if(n=this.getParent(t),e=this.getChild(t),n&&!t.parentItem)for(h=n.items,s=0,o=h.length;o>s;s++)if(i=h[s],i.id===t.id){t.parentItem=i,n.activeItemId=i.id;break}if(e&&!e.parentItem){for(l=t.items,u=[],r=0,a=l.length;a>r;r++){if(i=l[r],i.id===e.id){e.parentItem=i,t.activeItemId=i.id;break}u.push(void 0)}return u}},e.prototype.getItemPlacement=function(t){var e,i,n,s,r,o;return n=t.facet,s=t.index,i=n.to-n.from,e=n.from,r=(s-e)/i,o=(s-e+1)/i,[n.left+r*(n.right-n.left),n.left+o*(n.right-n.left)]},e.prototype.getFacetPlacementFromItem=function(t,e,i){var n,s,r,o,a,h,l;return r=t.facet,o=t.index,a=o+1,n=(o-r.from)/(r.to-r.from),s=(a-r.from)/(r.to-r.from),h=e-n*(e-i)/(n-s),l=h+(e-i)/(n-s),[h,l]},e.prototype.findFacetAt=function(){return null},e.prototype.findItemAt=function(t,e){var i,n;return i=this.activeFacet,this.xyInChart(t,e)&&i?(n=Math.floor(this.xToPosition(t)),n>=i.offset&&n<i.offset+i.count?i.items[n-i.offset]:null):null},e.prototype.findLabelAt=function(){return[null,null]},e}(Linearchart_Scene);var Facetchart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Scrolling=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t),this.facet=null,this.animatingFacet=null,this.leftAnimator=null,this.rightAnimator=null,this.activePieReady=!1}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=10,e.prototype.updateOrder=1100,e.prototype.setState=function(t,e,i,n){var s,r,o,a,h;if(Base_Helpers.isArray(t)||(t=[t]),0===t.length)return void this.chart.error("setPie - array needs at least one item.");for(s=0;this.scene.length()>t.length;)this.scene.pop(),s++;for(;this.scene.length()>0&&this.scene.peek().id!==t[this.scene.length()-1];)this.scene.pop(),s++;for(;this.scene.length()<t.length;)a=t[this.scene.length()],this.drillDown(a,null),s++;return r=this.scene.peek(),this.facet=r,s&&this.goToPositionDragging(r.from,r.to),r.offset!==e||i&&r.count!==i?(o=e,h=i>0?o+i:e+r.count,s?(this.goToPositionDragging(o,h),this.animateFillChart()):this.goToPosition(o,h,!0)):s&&this.animateFillChart(),this.chart.notifyChartUpdate(n),s?this.events.notifySceneChanges({navigation:!0}):void 0},e.prototype.getState=function(){var t;return[function(){var e,i,n,s;for(n=this.scene.stack,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.id);return s}.call(this),this.scene.peek().offset,this.scene.peek().count]},e.prototype.goUp=function(t){var e;return this.scene.length()>1?(this.scene.pop(),this.facet=e=this.scene.peek(),this.goToPositionDragging(e.from,e.to),this.animateFillChart(),this.events.notifySceneChanges({navigation:!0}),this.updateAndNotifyCurrent(t)):this.goToPosition(0,this.getMaxItems(),!0)},e.prototype.getMaxItems=function(){var t;return t=this.scene.width/this.scene.settings.facetAxis.defaultUnitWidth,this.facet.data.totalCount&&(t=Math.min(t,this.facet.data.totalCount)),t},e.prototype.drillDown=function(t,e){var i;return this.stopAnimations(),i=new Facetchart_Facet,i.id=t,this.scene.push(i),this.chart.builder.updateFacet(i),this.facet=i,this.currentFrom=i.from,this.currentTo=i.to,this.animateFillChart(),this.events.notifySceneChanges({navigation:!0}),this.updateAndNotifyCurrent(e)},e.prototype.updateAndNotifyCurrent=function(t){return this.chart.builder.updateFacet(this.facet),this.chart.notifyChartUpdate(t)},e.prototype.onSceneChange=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d;if(e=this.facet,t.changes.settings&&t.changes.settingsChanges.series)for(t.changes.items=!0,c=this.scene.stack,r=0,h=c.length;h>r;r++)i=c[r],this.chart.builder.rebuildValues(i);if(t.changes.dataArrived||t.changes.data){if(this.activePieReady=!1,t.changes.dataArrived)for(n=t.changes.dataArrivedIds,p=this.scene.stack,o=0,l=p.length;l>o;o++)s=p[o],n.hasOwnProperty(s.id)&&(this.chart.builder.updateFacet(s,t),t.changes.items=!0,this.activePieReady||(this.activePieReady=s===e&&!s.loading));if(t.changes.data)for(d=this.scene.stack,a=0,u=d.length;u>a;a++)i=d[a],(!i.data||i===e||t.changes.dataDeep)&&(i.rebuild=!0,this.chart.builder.updateFacet(i,t),t.changes.items=!0,this.activePieReady||(this.activePieReady=i===e&&!i.loading))}return this.activePieReady&&this.scene.width>0?(this.activePieReady=!1,this.currentFrom===this.currentTo&&e.from<e.to&&(this.currentFrom=e.from,this.currentTo=e.to,this.animateFillChart()),this.chart.notifyChartUpdate(null)):void 0},e.prototype.doAnimations=function(t){var i,n,s,r,o,a,h;for(n=this.facet,this.animatingFacet?(n.left=this.leftAnimator.get(t.time),n.right=this.rightAnimator.get(t.time),n.opacity=this.opacityAnimator.get(t.time),i=this.leftAnimator.finished(t.time)||this.rightAnimator.finished(t.time),i&&(this.animatingFacet=null,this.leftAnimator=null,this.rightAnimator=null,this.opacityAnimator=null),this.events.notifySceneChanges({position:!0}),t.animating=!0):(r=n.right-n.left,s=Math.min(1,Math.abs(r)),n.opacity=1),this.layoutFacets(),h=this.scene.stack,o=0,a=h.length;a>o;o++)n=h[o],this.chart.builder.updateFacet(n);return e.__super__.doAnimations.call(this,t)},e.prototype.xyInArea=function(t,e){return this.scene.xyInChartOrBottom(t,e)},e.prototype.xyToPosition=function(t){return this.scene.xToPosition(t)},e.prototype.onZoomOut=function(t,i,n,s){return null==s&&(s=null),e.__super__.onZoomOut.call(this,t,i,n,s)},e.prototype.onZoomIn=function(t,i,n,s){return null==s&&(s=null),e.__super__.onZoomIn.call(this,t,i,n,s)},e.prototype.onScroll=function(t,i,n){return e.__super__.onScroll.call(this,t,i,n)},e.prototype.onGoHome=function(t,e){return[0,e-t,0]},e.prototype.onStartDragging=function(){return this.stopAnim()},e.prototype.onSnapWhileDragging=function(t,e){var i,n,s,r,o,a,h,l,u,c;return s=e-t,n=(t+e-(this.dragStartFrom+this.dragStartTo))/2,o=0,h=1,u=this.facet.totalCount,this.dragStartFrom<=0&&0>n?this.scene.stack.length>1?(o=Math.min(.19,-n/s/3),h=1-4*o,t=this.dragStartFrom,e=this.dragStartTo):(c=s*Math.pow(3,-n/s),a=-n/5,u>0&&(c=Math.min(u,c)),t=-a,e=c+a):0>t?(r=Math.max(-s,t/2),t=r,e=r+s):u>0&&e>u&&(i=u,l=i+Math.min(s,(e-i)/2),t=l-s,e=l),0>t&&(o-=t*(h-o)/(e-t),t=0),this.facet.left=o,this.facet.right=h,[t,e]},e.prototype.onSnapAfterDragging=function(t,e,i,n,s){var r;return this.shouldZoomOut()?(this.goUp("user"),null):(r=this.snap(t,e,i,n,s),t=r[0],e=r[1],this.animateFillChart(),this.chart.notifyChartUpdate("user"),[t,e])},e.prototype.shouldZoomOut=function(){return this.facet.right-this.facet.left<.5&&this.scene.stack.length>1&&0===this.dragStartFrom},e.prototype.onPositionChanged=function(t,e){var i;return i=this.facet,i.from=t,i.to=e,this.chart.builder.updateFacet(i),this.events.notifySceneChanges({position:!0})},e.prototype.onAnimationDone=function(){return this.chart.notifyChartUpdate(null),this.chart.notifyAnimationDone()},e.prototype.snap=function(t,e,i,n,s){var r,o,a;return r=this.scene.width/(e-t),o=Math.min(this.scene.settings.facetAxis.maxUnitWidth,r),this.facet.totalCount>0&&(o=Math.max(o,this.scene.width/this.facet.totalCount)),s=r/o,t=i+(t-i)*s,e=i+(e-i)*s,t=Math.round(t),e=Math.round(e),0>t?(e-=t,t=0):this.facet.totalCount>0&&e>this.facet.totalCount&&(a=Math.max(0,this.facet.totalCount-(e-t)),e=e-t+a,t=a),[t,e]},e.prototype.animateFillChart=function(){return 0!==this.facet.left||1!==this.facet.right||this.animatingFacet!==this.facet?(this.animatingFacet=this.facet,this.leftAnimator=new Base_Animator(this.facet.left,0,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.rightAnimator=new Base_Animator(this.facet.right,1,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.opacityAnimator=new Base_Animator(this.facet.opacity,1,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.events.notifySceneChanges({animating:!0})):void 0},e.prototype.stopAnim=function(){return this.animatingFacet=null,this.leftAnimator=null,this.rightAnimator=null},e.prototype.layoutFacets=function(){var t,e,i,n,s,r,o;for(t=this.facet,i=t.left>0||t.right<1?.5:0,e=s=r=this.scene.stack.length-2;s>=0;e=s+=-1)n=this.scene.stack[e],t.parentItem&&(o=this.scene.getFacetPlacementFromItem(t.parentItem,t.left,t.right),n.left=o[0],n.right=o[1]),n.opacity=i,i=n.left>0||n.right<1?.2:0,t=n;return this.shouldZoomOut()?(this.facet.opacity=.5,this.facet.parentItem.facet.opacity=1):this.facet.opacity=1},e}(Linearchart_Scrolling);var Facetchart_Builder;Facetchart_Builder=function(){"use strict";function t(t){this.chart=t,this.scene=t.scene,this.loading=!1}return t.prototype.updateFacet=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v;if(s=this.scene.data.getPieData(t.id),t.data=s,!s)return t.loading=!0,void this.scene.data.requestPieData(t.id,Math.floor(t.from));if(i=!1,!this.scene.width||t.from<t.to&&!t.rebuild||(t.rebuild=!1,u=Math.max(1,Math.floor(this.scene.width/this.scene.settings.facetAxis.maxUnitWidth)),l=Math.max(1,Math.floor(this.scene.width/this.scene.settings.facetAxis.defaultUnitWidth)),h=s.totalCount?Math.min(s.totalCount,l):l,t.offset=Math.floor(t.from),t.count=0,t.to=t.from+Math.round(h),t.items=[]),s.totalCount&&(t.totalCount=s.totalCount),o=Math.max(0,Math.floor(t.from)),f=Math.ceil(t.to),d=s.values.length+s.offset,r=s.offset,t.loading=!1,r>o&&(o=r,this.scene.data.requestLessPieData(t.id),t.loading=!0),f>d&&(f=d,s.done||(this.scene.data.requestMorePieData(t.id),t.loading=!0)),n=t.offset+t.items.length,(f<t.offset||o>n)&&(t.offset=o,t.items=[],n=o),o>t.offset)t.items=t.items.slice(o-t.offset),t.offset=o;else if(o<t.offset){for(c=[],a=m=o,y=t.offset-1;y>=m;a=m+=1)c.push(this.buildItem(t,s,a));t.items=c.concat(t.items),t.offset=o,i=!0}if(n>f)t.items=t.items.slice(0,f-t.offset);else if(f>n){for(a=g=n,v=f-1;v>=g;a=g+=1)t.items.push(this.buildItem(t,s,a));i=!0}return t.count=t.items.length,i&&(e?(e.changes.items=!0,e.changes.changedItems||(e.changes.changedItems={}),e.changes.changedItems[t.id]=!0):(p=[],p[t.id]=!0,this.chart.events.notifySceneChanges({items:!0,changedItems:p}))),this.scene.updateLinks(t)},t.prototype.rebuildValues=function(t){var e,i,n,s,r;for(s=t.items,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(this.updateItem(e));return r},t.prototype.buildItem=function(t,e,i){var n;return e=e.values[i-e.offset],n=new Facetchart_Item(t,e.__id,i,e),this.updateItem(n),n},t.prototype.updateItem=function(t){var e,i,n,s,r,o;for(n=[],o=this.scene.settings.computedSeries,s=0,r=o.length;r>s;s++)e=o[s],i=new Facetchart_ItemValue(t.facet,t.id,t.index,t.data),i.value=t.data?this.getSeriesValue(t.data,e):null,n.push(i);return t.values=n},t.prototype.getSeriesValue=function(t,e){var i,n;return n=e.data.valueFunction,n?parseFloat(n(t)):(i=e.data.field||"value",parseFloat(t[i]))},t.prototype.buildPreviewData=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f;if(s=t.id,o=this.scene.data,i=o.getPieData(s),r=null,i)if(i.offset>0)o.requestLessPieData(t.id,0,i.offset);else{for(r=[],a=0,f=i.values,u=0,p=f.length;p>u;u++)l=f[u],h=this.getSeriesValue(l,e),r.push(h),a+=h;if(a>0)for(a=1/a,n=c=0,d=r.length;d>c;n=++c)l=r[n],r[n]=l*a;else r=null}else t.expandable&&o.canExapnd(s)&&o.requestPieData(t.id,0);return r},t}();var Facetchart_Styles,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Styles=function(t){function e(t){this.chart=t,this.scene=t.scene}return __extends(e,t),e.prototype.animationOrder=200,e.prototype.paintOrder=20,e.prototype.updateOrder=900,e.prototype.doAnimations=function(t){var e,i;if((t.changes.settings||t.changes.items||t.changes.selection||t.changes.navigation)&&(e=this.scene.activeFacet)){for(this.computeFacetStyleRec(e),i=[];e&&e.parentItem;)e=e.parentItem.facet,i.push(this.computeFacetStyleRec(e));return i}},e.prototype.computeFacetStyleRec=function(t){var e,i,n,s,r,o;for(this.computeFacetStyle(t),r=t.items,o=[],e=n=0,s=r.length;s>n;e=++n)i=r[e],this.computeItemStyle(t,i),o.push(i.innerFacet?this.computeFacetStyleRec(i.innerFacet):void 0);return o},e.prototype.computeFacetStyle=function(){return 1},e.prototype.computeItemStyle=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m;if(s=this.scene.settings.computedSeries,Base_Helpers.extend(e,this.scene.settings.items.style),e.selected&&Base_Helpers.extend(e,this.scene.settings.items.selectedStyle),this.scene.hoverItem===e&&Base_Helpers.extend(e,this.scene.settings.items.hoverStyle),e.data.style&&Base_Helpers.extend(e,e.data.style),e.id===e.facet.activeItemId)for(p=e.values,i=o=0,l=p.length;l>o;i=++o)r=p[i],r.fillColor=null,r.lineColor=null;else for(d=e.values,i=a=0,u=d.length;u>a;i=++a)r=d[i],Base_Helpers.extend(r,s[i].style);if(this.scene.settings.items.styleFunction?(this.scene.settings.items.styleFunction(e,e.data),e.label&&!Base_Helpers.isString(e.label)&&(e.label=""+e.label)):e.data.name&&(e.label=e.data.name),e.id!==e.facet.activeItemId){for(f=e.values,m=[],i=h=0,c=f.length;c>h;i=++h)r=f[i],n=s[i],n.styleFunction&&n.styleFunction(r,e.data),m.push(r.previewContents?r.previewData=this.chart.builder.buildPreviewData(e,n):r.previewData=null);return m}return r.previewData=null},e}(Base_ChartElement);var Base_Toolbar,Base_ToolbarPanel,ToolbarItemNames,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ToolbarItemNames={},Base_Toolbar=function(t){"use strict";function e(t,e){var i,n,s,r,o,a,h;if(this.chart=t,this.options=e,this.scene=this.chart.scene,this.panels={},this.panelList=[],this.items=[],this.itemBuilders={},this.options.enabled){for(a=this.options.items,n=0,r=a.length;r>n;n++)i=a[n],this.addItem(i);for(h=this.options.extraItems,s=0,o=h.length;o>s;s++)i=h[s],this.addItem(i)}this.chart.events.addElement(this),this.chart.events.notifySceneChanges({bounds:!0})}return __extends(e,t),e.prototype.animationOrder=2e3,e.settings={enabled:!1,location:"inside",side:"top",align:"right",showLabels:!0,cssClass:"DVSL-bar-infobar",items:[],extraItems:[],back:!0,"export":!0},e.prototype.remove=function(){var t,e,i,n,s,r,o,a;for(o=this.panelList,i=0,s=o.length;s>i;i++)e=o[i],e.remove();for(a=this.items,n=0,r=a.length;r>n;n++)t=a[n],t.remove();return this.chart.events.removeElement(this)},e.prototype.addItem=function(t){var e,i,n,s,r,o,a;if(t=Base_Helpers.isString(t)?{item:t}:Base_Helpers.clone(t),t.showLabels=void 0!==t.showLabels?t.showLabels:this.options.showLabels,Base_Helpers.isString(t.item)){if(s=t.item||t,this.options.hasOwnProperty(s)&&this.options[s]===!1)return;if(!ToolbarItemNames.hasOwnProperty(s))return void this.chart.error("Toolbar item name '"+s+"' not recognized.");i=ToolbarItemNames[s](this.chart,t)}else i=t.itemConstructor?new t.itemConstructor(this.chart,t):new Base_Bar_UserButton(this.chart,t);return n=t.location||this.options.location,a=t.side||this.options.side,e=t.align||this.options.align,o=n+a,this.panels.hasOwnProperty(o)||(r=new Base_ToolbarPanel(this,n,a),this.panelList.push(r),this.panels[o]=r),r=this.panels[o],r.addItem(i,e),this.items.push(i)},e.prototype.getPanels=function(){return this.panelList},e.prototype.onSceneChange=function(t){var e,i,n,s,r;for(s=this.items,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.onSceneChange(t.changes));return r},e.prototype.doAnimations=function(t){var e,i,n,s,r;for(s=this.items,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.doAnimations(t));return r},e.prototype.previewGlobalPointerDown=function(t){var e,i,n,s,r;for(s=this.items,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.previewPointerDown?e.previewPointerDown(t):void 0);return r},e}(Base_ChartElement),Base_ToolbarPanel=function(t){function e(t,e,i){this.toolbar=t,this.location=e,this.side=i,this.packingOrder="inside"===e?1e3:-1,this.container=this.toolbar.chart.layers.container,this.floating=!1,this.align="fill","top"===this.side?(this.vertical=!1,this.left=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-top DVSL-bar-horizontal",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-top DVSL-bar-horizontal",null,this.container)):"bottom"===this.side?(this.vertical=!1,this.left=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-bottom DVSL-bar-horizontal",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-bottom DVSL-bar-horizontal",null,this.container)):"left"===this.side?(this.vertical=!0,this.left=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-top DVSL-bar-vertical",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-bottom DVSL-bar-vertical",null,this.container)):"right"===this.side?(this.vertical=!0,this.left=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-top DVSL-bar-vertical",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-bottom DVSL-bar-vertical",null,this.container)):this.chart.error("Unrecognized side: '"+e+"'"),this.left.style.visibility="hidden",this.right.style.visibility="hidden"}return __extends(e,t),e.prototype.addItem=function(t,e){return"left"===e||"top"===e?this.left.appendChild(t.domElement):"right"===e||"bottom"===e?this.right.appendChild(t.domElement):this.chart.error("Unrecognized align: '"+e+"'")},e.prototype.computeSize=function(){return this.vertical?[Math.max(this.left.offsetWidth,this.right.offsetWidth),0]:[0,Math.max(this.left.offsetHeight,this.right.offsetHeight)]},e.prototype.placePanel=function(t,e,i,n){return this.vertical?(this.left.style.width=i-t+"px",this.right.style.width=i-t+"px",this.left.style.top=e+"px",this.right.style.bottom=this.toolbar.scene.chartHeight-n+"px","left"===this.side?(this.left.style.left=t+"px",this.right.style.left=t+"px"):(this.left.style.right=this.toolbar.scene.chartWidth-i+"px",this.right.style.right=this.toolbar.scene.chartWidth-i+"px")):(this.left.style.left=t+"px",this.left.style.height=n-e+"px",this.right.style.right=this.toolbar.scene.chartWidth-i+"px",this.right.style.height=n-e+"px","top"===this.side?(this.left.style.top=e+"px",this.right.style.top=e+"px"):(this.left.style.bottom=this.toolbar.scene.chartHeight-n+"px",this.right.style.bottom=this.toolbar.scene.chartHeight-n+"px")),this.left.style.visibility="visible",this.right.style.visibility="visible"},e.prototype.remove=function(){return this.container.removeChild(this.left),this.container.removeChild(this.right)},e}(Base_ChartPanel),ToolbarItemNames.fullscreen=function(t,e){return new Base_Bar_ToggleButton(t,{label:"Fullscreen",title:"Toggle fullscreen mode",cssClass:"DVSL-bar-btn-fullscreen",cssClassEnabled:"DVSL-bar-btn-fullscreen-active",showLabels:e.showLabels,onEnable:function(){return t.setFullscreen(!0)},onDisable:function(){return t.setFullscreen(!1)},getChartState:function(){return t.isFullscreen()}})},ToolbarItemNames.back=function(t,e){return new Base_Bar_UserButton(t,{label:"Back",cssClass:"DVSL-bar-btn-back",title:"Move one step back in navigation",showLabels:e.showLabels,onClick:function(){return function(){return t.back(!0,"user")}}(this)})};var Netchart_Bar_ZoomControl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Bar_ZoomControl=function(t){function e(t,e){var i,n,s;this.chart=t,this.options=e,this.zoomMove=__bind(this.zoomMove,this),this.zoomDown=__bind(this.zoomDown,this),this.scene=t.scene,this.events=t.events,this.scrolling=this.chart.scrolling,i=Base_Helpers.createDom("li",null,null,null),s=Base_Helpers.createDom("span","DVSL-NC-zoom",null,i),this.handle=Base_Helpers.createDom("em",null,null,s),n=Base_Helpers.createDom("nav",null,null,this.cont),this.mouse=new Base_MouseEvents(i,this.scene.settings.advanced.pointer),this.mouse.listen("drag",this.zoomMove),this.mouse.listen("down",this.zoomDown),this.domElement=i}return __extends(e,t),e.prototype.zoomDown=function(t){return t.y<100?this.zoomMove(t):void 0},e.prototype.zoomMove=function(t){var e,i;return i=t.y-10,i=Math.max(0,Math.min(80,i)),this.handle.style.top=""+i+"px",e=this.getZoomValue(i/80),this.chart.autoZoom.manualZoom(e/this.scene.zoom),this.events.notifySceneChanges({position:!0}),t.consumed=!0},e.prototype.getSliderPosition=function(){var t,e,i,n;return n=this.scene.settings.interaction.zooming.zoomExtent,e=n[0],t=n[1],i=Math.log(Math.max(e,Math.min(t,this.scene.zoom))),e=Math.log(e),t=Math.log(t),1-(i-e)/(t-e)},e.prototype.getZoomValue=function(t){var e,i,n,s;return s=this.scene.settings.interaction.zooming.zoomExtent,i=s[0],e=s[1],i=Math.log(i),e=Math.log(e),n=(1-t)*(e-i)+i,Math.exp(n)},e.prototype.doAnimations=function(){var t;return t=this.getSliderPosition(),this.handle.style.top=""+80*t+"px"},e.prototype.remove=function(){return this.mouse.remove()},e}(Base_Bar_Item),ToolbarItemNames.zoomcontrol=function(t,e){return new Netchart_Bar_ZoomControl(t,e)};var Base_Bar_ExportDropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_ExportDropdown=function(t){function e(t,i){var n;this.chart=t,n=[new Base_Bar_UserButton(t,{label:"For Office and Web (jpeg)",onClick:function(){return Base_Export.exportAndStartDownload(t,"jpeg",{scaling:1})}}),new Base_Bar_UserButton(t,{label:"For Photoshop (png)",onClick:function(){return Base_Export.exportAndStartDownload(t,"png",{scaling:3})}}),new Base_Bar_UserButton(t,{label:"For Printer (pdf)",onClick:function(){return Base_Export.exportAndStartDownload(t,"pdf")}})],window.JSON&&t.exportVisibleData&&(n.push(new Base_Bar_UserButton(t,{label:"Spreadsheet (csv)",onClick:function(){return Base_Export.exportAndStartDownload(t,"csv")}})),n.push(new Base_Bar_UserButton(t,{label:"Spreadsheet (xls)",onClick:function(){return Base_Export.exportAndStartDownload(t,"xls")}}))),i={showLabels:i.showLabels,title:"Export Data",label:"Export",cssClass:"DVSL-bar-btn-export",items:n},e.__super__.constructor.call(this,t,i)}return __extends(e,t),e}(Base_Bar_Dropdown),ToolbarItemNames["export"]=function(t,e){return new Base_Bar_ExportDropdown(t,e)};var Linearchart_Legend,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Legend=function(t){"use strict";function e(t){this.chart=t,this.onClick=__bind(this.onClick,this),e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.paintOrder=75,e.prototype.updateOrder=100,e.settings={panel:{side:"bottom",align:"left",packingOrder:105}},e.prototype.onSceneChange=function(t){var i;return e.__super__.onSceneChange.call(this,t),i=t.changes,i.settings&&(this.updateSettings(i.settingsChanges),Base_Helpers.hasProp(i,"settingsChanges.computedSeries"))?(this.rebuildItems(),i.bounds=!0):void 0},e.prototype.updateSettings=function(t){return Base_Helpers.hasProp(t,"legend.text.fillColor")?this.baseTextColor=this.settings.text.fillColor:void 0},e.prototype.doAnimations=function(){return this.hoverObject=this.scene.hoverSeriesItem?this.scene.settings.computedSeries[this.scene.hoverSeriesItem.seriesIndex]:null},e.prototype.paintMarker=function(t,e,i,n,s){var r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S;return _=this.settings.marker.size,y=s.data,h=e-_/2,l=e,u=e+_/2,c=_/2.1,p=_/2,d=3*_/4,t.beginPath(),S=i+_/2,v={},v=Base_Helpers.realClone(y),y.enabled||(o=this.settings.advanced.disabledSeries,v.style.fillColor=y.style.fillColor?o.fillColor:null,v.style.lineColor=o.lineColor),"line"===v.type?(x=[c,p,d],r=[h,l,u],g=[r,[S-c,S-p,S-d]],v.style.marker.width*=.8,a=S-p,m=new Linearchart_Renderer_Line([v]),m.paintLines(t,[v],[{segments:g}],[null],x,S),m.paintMarkers(t,v,[l],[p],[a])):(x=[_,_],f=_/2,r=[e],m=new Linearchart_Renderer_Columns(this.scene,[v]),m.paintStack(t,r,[f],[x],[null],S))},e.prototype.rebuildItems=function(){var t,e,i,n,s,r,o,a;for(i=[],s=this.scene.settings.computedSeries,t=this.settings.advanced.disabledSeries,o=0,a=s.length;a>o;o++)n=s[o],e=n.enabled?n.style.fillColor:t.fillColor,r=n.enabled?this.baseTextColor:t.textColor,i.push({fillColor:e,textColor:r,label:n.name,data:n});return this.setItems(i)},e.prototype.onClick=function(t){var e,i,n,s,r,o;if(e=this.findItemAt(t.x,t.y)){for(s=this.scene.settings.computedSeries,n=r=0,o=s.length;o>r;n=r+=1)i=s[n],i===e&&(i.enabled=!i.enabled,this.chart.events.notifySceneChanges({settings:!0,settingsChanges:{computedSeries:{}}}));return t.preventDefault()}},e}(Base_Legend);var Linearchart_Bar_LinLogButton,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Bar_LinLogButton=function(t){function e(t,i){this.chart=t,this.options=i,e.__super__.constructor.call(this,t),this.linClass="DVSL-bar-btn-lin",this.logClass="DVSL-bar-btn-log",i.cssClass=this.linClass,i.title="Switch lin/log scale",i.label="Lin",this.createButton(i),this.logScale=!1}return __extends(e,t),e.prototype.onClick=function(){return this.chart.setLogScale(!this.chart.scene.settings.valueAxis["default"].logScale,"user")},e.prototype.onSceneChange=function(t){if(t.toolbar||t.settings&&this.chart.scene.settings.valueAxis["default"].logScale!==this.logScale)if(this.logScale=this.chart.scene.settings.valueAxis["default"].logScale,this.logScale){if(Base_Helpers.removeClass(this.a,this.linClass),Base_Helpers.addClass(this.a,this.logClass),this.options.showLabels)return this.p.innerHTML="Log"}else if(Base_Helpers.removeClass(this.a,this.logClass),Base_Helpers.addClass(this.a,this.linClass),this.options.showLabels)return this.p.innerHTML="Lin"},e}(Base_Bar_Button),ToolbarItemNames.logScale=function(t,e){return new Linearchart_Bar_LinLogButton(t,e)};var Timechart_Bar_DisplayPeriodDropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Bar_DisplayPeriodDropdown=function(t){function e(t,i){this.chart=t,this.custom={name:t.settings.localization.custom},this.periods=[{name:"Last second",displayAnchor:"now",displayPeriod:"1 s",displayUnit:"25 ms"},{name:"Last minute",displayAnchor:"now",displayPeriod:"1 m",displayUnit:"1 s"},{name:"Last hour",displayAnchor:"now",displayPeriod:"1 h",displayUnit:"1 m"},{name:"Last day",displayAnchor:"now",displayPeriod:"1 d",displayUnit:"1 h"},{name:"Last week",displayAnchor:"now",displayPeriod:"1 w",displayUnit:"6 h"},{name:"Last month",displayAnchor:"now",displayPeriod:"1 M",displayUnit:"1 d"},{name:"Last year",displayAnchor:"now",displayPeriod:"1 y",displayUnit:"1 M"},{name:"All data",displayAnchor:"newestData",displayPeriod:"max",displayUnit:"auto"}],i={cssClass:"DVSL-bar-btn-month",title:"Select units in which to show the data",name:"Unit",showLabels:i.showLabels,items:this.generatePeriods()},e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.prototype.onSelectionChange=function(t){return this.chart.setDisplayPeriod(t.displayPeriod,t.displayAnchor,t.displayUnit,!0,"user")
},e.prototype.onSceneChange=function(t){var e,i,n,s,r;if(i=!1,t.settings&&t.settingsChanges.area&&(this.setItems(this.generatePeriods()),i=!0),t.time||t.toolbar||i){for(r=this.options.items,n=0,s=r.length;s>n;n++)if(e=r[n],this.chart.isThisDisplayPeriod(e.displayPeriod,e.displayAnchor))return void this.setSelectedItem(e);return this.setSelectedItem(this.custom)}},e.prototype.generatePeriods=function(){var t,e,i,n,s,r,o,a;for(n=[],t=this.chart.settings.area._minUnit,a=this.periods,r=0,o=a.length;o>r;r++)e=a[r],i=Base_TimeStep.parse(e.displayPeriod),s=Base_TimeStep.parse(e.displayUnit),s&&s.isSmaller(t)||i&&i.isSmallerOrEqual(t)||n.push(e);return n},e}(Base_Bar_Combobox),ToolbarItemNames.displayPeriod=function(t,e){return new Timechart_Bar_DisplayPeriodDropdown(t,e)};var Timechart_Bar_DisplayUnitDropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Bar_DisplayUnitDropdown=function(t){function e(t,i){var n;this.chart=t,n=this.generateUnits(),i={cssClass:"DVSL-bar-btn-bars",title:"Select units in which to show the data",name:"Unit",showLabels:i.showLabels,items:n},e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.prototype.onSelectionChange=function(t){return this.chart.setDisplayUnit(t.value,!0,!0,"user")},e.prototype.onSceneChange=function(t){var e,i,n,s,r,o,a;if(s=!1,t.settings&&t.settingsChanges.area&&(this.setItems(this.generateUnits()),s=!0),(t.time||t.toolbar||s)&&(n=this.chart.displayUnit,n&&(!this.selectedItem||!n.isEqual(this.selectedItem.value)))){for(e=!1,a=this.options.items,r=0,o=a.length;o>r;r++)if(i=a[r],i.value.isEqual(n)){this.setSelectedItem(i),e=!0;break}if(!e)return this.setSelectedItem({name:n.name,value:n})}},e.prototype.generateUnits=function(){var t,e,i,n,s;for(t=[],s=this.chart.settings.area.displayUnitsParsed,i=0,n=s.length;n>i;i++)e=s[i],t.push({name:e.name,value:e});return t},e}(Base_Bar_Combobox),ToolbarItemNames.displayUnit=function(t,e){return new Timechart_Bar_DisplayUnitDropdown(t,e)};var Timechart_TimeSlicer;Timechart_TimeSlicer=function(){function t(t,e,i,n,s,r,o){this.scene=t,this.step=e,null==i&&(i=[]),this.uniform=null!=r?r:!0,this.extraSteps=null!=o?o:2,n=n||this.scene.timeStart,s=s||this.scene.timeEnd,this.extraArrays=i.slice(0),this.arrays=i.slice(0),this.arrays.push("xes"),this.arrays.push("times"),this.uniformTolerance=Math.min(1,this.step.count-2),this.approxExtraTime=this.extraSteps*e.approxTime(),this.init(n-this.approxExtraTime,s+this.approxExtraTime)}return t.prototype.scene=null,t.prototype.step=null,t.prototype.uniform=!1,t.prototype.currentFrom=0,t.prototype.currentTo=0,t.prototype.fromBar=null,t.prototype.toBar=null,t.prototype.fromIndex=0,t.prototype.toIndex=0,t.prototype.times=[],t.prototype.xes=[],t.prototype.oldMul=0,t.prototype.oldAdd=0,t.prototype.arrays=[],t.prototype.extraArrays=[],t.prototype.bufExpandSize=100,t.prototype.extraSteps=2,t.prototype.uniformTolerance=0,t.prototype.approxExtraTime=0,t.prototype._getOrigin=function(t){var e,i;return 1===this.step.count||this.uniform?this.step.roundTimeDown(t):(e=this.step.getBigger().roundTimeDown(t),i=this.step.numberOfUnits(e,t),this.step.add(e,i))},t.prototype._add=function(t){var e,i;return this.uniform||1===this.step.count||"d"!==this.step.unit?t.add(this.step.unit,this.step.count):(i=t.daysInMonth(),e=t.date(),e+2*this.step.count>i+1+this.uniformTolerance?t.add("d",i-e+1):t.add(this.step.unit,this.step.count))},t.prototype._sub=function(t){var e,i,n;return this.uniform||1===this.step.count||"d"!==this.step.unit?t.subtract(this.step.unit,this.step.count):(e=t.date(),e<=this.step.count?(t.subtract("M",1),i=t.daysInMonth()-1,n=i+1-this.step.count+this.uniformTolerance,t.date(1+n-(n%this.step.count|0))):t.subtract(this.step.unit,this.step.count))},t.prototype.init=function(t,e){var i,n,s,r,o,a,h,l,u,c,p;for(u=this.arrays,o=0,h=u.length;h>o;o++)i=u[o],this[i]=[];if(t>=e)return this.fromIndex=0,this.toIndex=0,this.fromBar=null,void(this.toBar=null);for(this.fromBar=moment(this._getOrigin(t)).utc(),this.fromIndex=0,s=moment(this.fromBar).utc(),this.times.push(s.valueOf());s.valueOf()<e;)this._add(s),this.times.push(s.valueOf());for(this.toIndex=this.times.length,this.toBar=s,this.currentFrom=t,this.currentTo=e,this.xes=function(){var t,e,i,n;for(i=this.times,n=[],t=0,e=i.length;e>t;t++)s=i[t],n.push(this.scene.timeToX(s));return n}.call(this),c=this.extraArrays,p=[],a=0,l=c.length;l>a;a++)n=c[a],r=[],r.length=this.times.length,p.push(this[n]=r);return p},t.prototype.makeMiniSlice=function(t){var e,i,n,s,r,o,a,h;return h=this.scene.timeToXCoefs(),s=h[0],r=h[1],e=moment(this._getOrigin(t)).utc(),i=e.valueOf(),o=s+i*r,this._add(e),n=e.valueOf(),a=s+n*r,[i,o,n,a]},t.prototype.update=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k;if(null==t&&(t=this.scene.timeStart),null==e&&(e=this.scene.timeEnd),t-=this.approxExtraTime,e+=this.approxExtraTime,t===this.currentFrom&&e===this.currentTo)return this.updateXes(this.fromIndex,this.toIndex),[0,this.fromIndex,this.toIndex];if(null===this.fromBar||t>this.toBar.valueOf()||e<this.fromBar.valueOf())return this.init(t,e),[0,this.toIndex,this.toIndex];if(c=0,u=this.fromIndex,l=this.toIndex,C=this.scene.timeToXCoefs(),f=C[0],m=C[1],r=this.fromBar.valueOf()-t,r>0){if(s=(r/this.step.approxTime()|0)+2,this.fromIndex<s){for(i=[],i.length=s+this.bufExpandSize,P=this.arrays,g=0,x=P.length;x>g;g++)n=P[g],this[n]=i.concat(this[n]);c+i.length,u+=i.length,l+=i.length,this.fromIndex+=i.length,this.toIndex+=i.length}for(d=this.fromBar.valueOf();d>t;)this._sub(this.fromBar),this.fromIndex-=1,d=this.fromBar.valueOf(),this.times[this.fromIndex]=d,this.xes[this.fromIndex]=f+d*m}if(a=e-this.toBar.valueOf(),a>0){if(s=(a/this.step.approxTime()|0)+2,this.times.length<this.toIndex+s)for(h=this.toIndex+s+this.bufExpandSize,M=this.arrays,y=0,S=M.length;S>y;y++)n=M[y],this[n].length=h;for(d=this.toBar.valueOf();e>d;)this._add(this.toBar),d=this.toBar.valueOf(),this.times[this.toIndex]=d,this.xes[this.toIndex]=f+d*m,this.toIndex+=1}for(this._add(this.fromBar);this.fromBar.valueOf()<t;)this.fromIndex+=1,this._add(this.fromBar);for(this._sub(this.fromBar),this._sub(this.toBar);this.toBar.valueOf()>=e;)this.toIndex-=1,this._sub(this.toBar);if(this._add(this.toBar),o=this.toIndex-this.fromIndex+this.bufExpandSize,this.fromIndex>o){for(p=this.fromIndex-this.bufExpandSize,T=this.arrays,v=0,b=T.length;b>v;v++)n=T[v],this[n].splice(0,p);c-=p,u-=p,l-=p,this.fromIndex-=p,this.toIndex-=p}if(this.toIndex<this.times.length-o)for(k=this.arrays,_=0,w=k.length;w>_;_++)n=k[_],this[n].length=this.toIndex+this.bufExpandSize;return this.updateXes(u,l),this.currentFrom=t,this.currentTo=e,[c,u,l]},t.prototype.updateXes=function(t,e){var i,n,s,r,o,a,h;if(o=this.scene.timeToXCoefs(),n=o[0],s=o[1],this.oldAdd!==n||this.oldMul!==s){for(this.oldAdd=n,this.oldMul=s,h=[],i=r=t,a=e-1;a>=r;i=r+=1)h.push(this.xes[i]=n+this.times[i]*s);return h}},t}();var Base_Api;Base_Api=function(){function t(){}return t.themes={},t.prototype.customize=function(t){var e;if(e=this.constructor.themes,!e||!e.hasOwnProperty(t))throw"No customization named "+t;return this.updateSettings(e[t])},t.prototype.saveState=function(){return this._impl.save()},t.prototype.restoreState=function(t,e){return null==e&&(e=!1),this._impl.restore(t,e)},t.prototype.fullscreen=function(t){return t===!0?this._impl.setFullscreen(!0):t===!1&&this._impl.setFullscreen(!1),this._impl.isFullscreen()},t.prototype.updateSettings=function(t){return null==t&&(t={}),this._impl.updateSettings(t,"api"),this},t.prototype.updateFilters=function(){return this._impl.updateFilters()},t.prototype.updateStyle=function(){return this._impl.updateStyle()},t.prototype.on=function(t,e){return this._impl.on(t,e)},t.prototype.off=function(t,e){return this._impl.off(t,e)},t.prototype.updateSize=function(){return this._impl.updateSize(!0),this},t.prototype.reloadData=function(){return this._impl.reloadData()},t.prototype.addData=function(t,e){return null==e&&(e="default"),this._impl.addData(t,e)},t.prototype.removeData=function(t,e){return null==e&&(e="default"),this._impl.removeData(t,e)},t.prototype.replaceData=function(t,e){return null==e&&(e="default"),this._impl.replaceData(t,e)},t.prototype.remove=function(){return this._impl.remove()},t.prototype.saveAsImage=function(t,e,i){return this.exportImageAsString(t,e,i)},t.prototype.exportGetDimensions=function(t){return this.exportImageGetDimensions(t)},t.prototype.exportImageAsString=function(t,e,i){return Base_Export.exportToImage(this._impl,t,e,i)},t.prototype.exportImageGetDimensions=function(t){return Base_Export.exportToImageGetDimensions(this._impl,t)},t.prototype["export"]=function(t,e,i){return Base_Export.exportAndStartDownload(this._impl,t,e,i)},t.prototype.addSubchartContainer=function(t){return this._impl.layers.mouseTrackLayer.appendChild(t)},t.prototype.paintNow=function(t){return null==t&&(t=!1),this._impl.events.paintNow(t),this},t.prototype.hideMenu=function(){return this._impl.hideMenu(),this},t.prototype.back=function(){return this._impl.back(),this},t.prototype.home=function(){return this._impl.goHome()},t.prototype.clearHistory=function(){return this._impl.clearHistory(),this},t.prototype.closePopup=function(){return this._impl.log("closePopup is deprecated, use hideMenu"),this.hideMenu(),this},t.prototype.measureFps=function(t,e){return this._impl.events.measureFps(t,e)},t}();var Netchart_Legend,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Legend=function(t){"use strict";function e(t){this.chart=t,e.__super__.constructor.call(this,t),this.classes=[],this.renderer=t.renderer}return __extends(e,t),e.prototype.paintOrder=51,e.prototype.updateOrder=100,e.settings={panel:{side:"bottom",align:"left"},marker:{size:50}},e.prototype.onSceneChange=function(t){var i;return e.__super__.onSceneChange.call(this,t),i=t.changes,i.settings&&(this.updateSettings(i.settingsChanges),i.settingsChanges.legend)?(this.rebuildItems(),i.bounds=!0):void 0},e.prototype.updateSettings=function(t){var e,i,n,s,r,o,a,h,l,u,c,p;if(Base_Helpers.hasProp(t,"style.nodeClasses")||Base_Helpers.hasProp(t,"style.linkClasses")){for(o=this.scene.settings.style,i=Base_Helpers.extend({},o.node),e=Base_Helpers.extend({},o.link),c=o.nodeClasses,a=0,l=c.length;l>a;a++)r=c[a],s=Base_Helpers.clone(i),this.classes.push({className:r.className,itemType:"node",style:Base_Helpers.extend(s,r.style)});for(p=o.linkClasses,h=0,u=p.length;u>h;h++)n=p[h],s=Base_Helpers.clone(e),this.classes.push({className:r.className,itemType:"link",style:Base_Helpers.extend(s,n.style)})}return Base_Helpers.hasProp(t,"legend.text.fillColor")?this.baseTextColor=this.settings.text.fillColor:void 0},e.prototype.doAnimations=function(){return 1},e.prototype.paintMarker=function(t,e,i,n,s){var r,o;return o={},s.data instanceof Itemschart_Node?(o.geometry=this.getGeometry(e,i,.6),o.paintDetails=!1,this.renderer.paintNodes(t,[s.data],o,0)):s.data instanceof Itemschart_Link?(o.geometry=this.getGeometry(e,i,1),o.paintDetails=!0,r=s.multiId,this.renderer.paintLinks(t,[s.data],{id:s},o)):void 0},e.prototype.rebuildItems=function(){var t,e,i,n,s,r;n=[],e=this.settings.marker.size/2,r=this.classes;for(s in r)__hasProp.call(r,s)&&(t=this.classes[s],i="node"===t.itemType?new Itemschart_Node(null):new Itemschart_Link,i instanceof Itemschart_Node?(i.data={},i.currentRadius=e,i.currentHwidth=e,i.renderRadius=e,i.renderHwidth=e):(i.from={x:2*-e,y:0,renderRadius:e,renderHwidth:e},i.to={x:e+e/2,y:0,renderRadius:e,renderHwidth:e}),i=Base_Helpers.extend(i,t.style),n.push({textColor:this.baseTextColor,label:t.className,data:i}));return this.setItems(n)},e.prototype.getGeometry=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m;return n=this.settings.marker.size,l=-n,c=n,d=-n,m=n,r=i,a=i,s=t,o=e,h=t-n,u=t+n,p=e-n,f=e+n,[r,s,a,o,i,h,u,p,f,l,d,c,m]},e.prototype.onClick=function(){return 1},e}(Base_Legend);var Netchart_Toolbar;ToolbarItemNames.rearrange=function(t,e){return new Base_Bar_UserButton(t,{label:"Rearrange",cssClass:"DVSL-bar-btn-rearrange",title:"Rearrange elements",showLabels:e.showLabels,onClick:function(){return function(){return t.resetLayout()}}(this)})},ToolbarItemNames.freeze=function(t,e){return new Base_Bar_ToggleButton(t,{label:"Freeze",cssClass:"DVSL-bar-btn-lock-all",cssClassEnabled:"DVSL-bar-btn-lock-all-active",title:"Lock all",titleActive:"Unlock all",showLabels:e.showLabels,getChartState:function(){return"static"===t.scene.settings.layout.mode},onEnable:function(){return t.scene.settings.layout.mode="static",t.events.notifySceneChanges({layout:!0})},onDisable:function(){return t.scene.settings.layout.mode="dynamic",t.events.notifySceneChanges({layout:!0})}})},ToolbarItemNames.fit=function(t,e){return new Base_Bar_ToggleButton(t,{label:"Fit",cssClass:"DVSL-bar-btn-fit",cssClassEnabled:"DVSL-bar-btn-fit-active",title:"Fit to screen",showLabels:e.showLabels,getChartState:function(){return"overview"===t.scene.autoZoomMode},onEnable:function(){return t.autoZoom.setZoom("overview")},onDisable:function(){return t.autoZoom.setZoom("auto")}})},Netchart_Toolbar=function(){function t(){}return t.settings={enabled:!0,side:"bottom",align:"left",showLabels:!1,align:"left",items:[{item:"fit"},{item:"rearrange"},{item:"freeze"},{item:"back"},{item:"fullscreen"},{item:"zoomcontrol",side:"left",align:"bottom"}]},t}();var Base_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty;Base_Impl=function(){"use strict";function t(t,e){var i,n,s,r;if(this.settings=t,this.scene=e,this.notifyAssetsLoaded=__bind(this.notifyAssetsLoaded,this),this.defaultError=__bind(this.defaultError,this),this.chartUpdateNotify=__bind(this.chartUpdateNotify,this),this._containerResize=__bind(this._containerResize,this),!t.container)throw"Chart container not set";if(!(t.container.nodeType>0))throw"Chart container not a dom object";this.container=this.settings.container,this.scene.settings=t,this.layers=null,this.toolbar=null,this.removed=!1,this.curState=null,this.goingBack=!1,this.chartUpdateOrigin=null,this.currentNavigationState=null,this.fullScreenMode=!1,this.fullscreenBeforeW=0,this.fullscreenBeforeH=0,this.previousSizeW=0,this.previousSizeH=0,this.EVENT_NAMES={},r=t.events;for(n in r)s=r[n],0===n.indexOf("on")&&(i=n.charAt(2).toLowerCase()+n.slice(3),this.EVENT_NAMES[n]=i,this.EVENT_NAMES[i]=i)}return t.prototype.bigfoot=[-2, "//zoomcharts.com/logo-bb29d60953b200852662358fef7cb2394e1863736c35f72f347d2ae918e5b808615.png", "//zoomcharts.com/c8e1474a27139603276698ff08fc846f/en/supported-projects/"],t.prototype.onRemove=function(){return Base_Helpers.error("Need to override onRemove")},t.prototype.onSettingsChanged=function(){return Base_Helpers.error("Need to override onSettingsChanged")},t.prototype.addData=function(){return Base_Helpers.error("Add data not implemented for this chart")},t.prototype.removeData=function(){return Base_Helpers.error("Remove data not implemented for this chart")},t.prototype.reloadData=function(){return Base_Helpers.error("Reload data not implemented for this chart")},t.prototype.replaceData=function(){return Base_Helpers.error("Replace data not implemented for this chart")},t.prototype.hideMenu=function(){return 1},t.prototype.updateFilters=function(){return this.events.notifySceneChanges({filters:!0})},t.prototype.updateStyle=function(){return this.events.notifySceneChanges({style:!0})},t.prototype.initialize=function(t){return this.api=t,this.eventListeners={},this.assetsLoaded=!0,this.assetsLoader=new Base_AssetsLoader(this),this.assetsLoader.load(this.settings.advanced.assets,this.notifyAssetsLoaded)&&(this.assetsLoaded=!1),this.container=this.settings.container,void 0!==this.container._DVSL_ChartInstance&&null!==this.container._DVSL_ChartInstance&&this.container._DVSL_ChartInstance.remove(),this.container._DVSL_ChartInstance=this,this.container.appendChild(this.layers.container),"undefined"!=typeof G_vmlCanvasManager&&(G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.layers.canvas)),this.events=new Base_ChartEvents(this.layers.mouseTrackLayer,this.layers.canvas,this),this.title=new Base_Title(this),this.credits=new Base_Credits(this,this.scene.settings.credits),this.api._impl=this},t.prototype.finalInitialize=function(){var t,e,i,n,s,r;return this.events.addElement(this.layers),this.events.addElement(this.title),this.events.addElement(this.credits),this.events.addElement(new Base_Resizer(this)),this.events.addElement(new Base_MessagesOverlay(this)),this.settings.advanced.trackTouches&&this.events.addElement(new Base_TouchMarkers(this.scene)),i=this.bigfoot,r=(new Date).getTime(),i[0]>0?(t=r-i[0],t>0?(n=["Trial expired","Trial expired","It expired "+moment.duration(t).humanize()+" ago","Use the link at bottom-right to upgrade"],this.scene.setMessage("d",n[0],1e3),this._xcount=0,e=function(t){return function(){return t._xcount<n.length-1?t._xcount+=1:Base_Helpers.openUrl(i[2]),t.scene.setMessage("d",n[t._xcount],1e3),t.updateSettings({area:{style:{fillColor:"rgba(255,230,230, "+Math.min(1,t._xcount/n.length)+")"}},advanced:{style:{messageTextStyle:{font:""+(15+5*t._xcount)+"px Arial"}}}})}}(this),this.events.addElement({previewPointerUp:e})):t>-6048e5&&this.scene.setMessage("d","Trial ending soon, "+moment.duration(-t).humanize()+" remaining",1e3),s={url:i[2],image:i[1]+"?t="+r,imageExport:Base_images_logo,imageScaling:1,location:"inside",enabled:!0,enabledOnExport:!0},this.events.addElement(new Base_Credits(this,s))):-2===i[0]?(s={url:i[2],image:i[1]+"?t="+r,imageExport:Base_images_logo,imageScaling:1,location:"outside",enabled:!0,enabledOnExport:!0},this.events.addElement(new Base_Credits(this,s))):i[0]<0&&this.scene.getAssetImage(i[1]+"?t="+r),this.events.notifySceneChanges({settings:!0,settingsChanges:this.scene.settings,data:!0}),this.updateSize(),this.updateEvents({},this.settings.events),Base_Helpers.listenResize(this.container,this._containerResize),Base_Helpers.listen(window,"resize",this._containerResize)},t.prototype.updateSettings=function(t,e){var i,n;return null==e&&(e=null),this.log("Update Settings, "+JSON.stringify(t)),n=Base_Helpers.clone(this.settings.events),i=this.settings.apply(t),this.removed?void 0:(i.events&&this.updateEvents(n,this.settings.events),i.advanced&&i.advanced.assets&&this.assetsLoader.load(this.settings.advanced.assets,this.notifyAssetsLoaded)&&(this.assetsLoaded=!1),this.layers.updateSettings(i),this.onSettingsChanged(i),i.toolbar&&this.assetsLoaded&&(this.toolbar&&this.toolbar.remove(),this.toolbar=new Base_Toolbar(this,this.settings.toolbar)),this.events.notifySceneChanges({settings:!0,settingsChanges:i}),(i.width||i.height||i.maxWidth||i.minWidth||i.minHeight||i.maxHeight)&&this.updateSize(!0),e?this.notifySettingsChanged(i,e):void 0)},t.prototype.remove=function(){return this.cancelChartUpdateNotify(),this.removed=!0,this.toolbar&&this.toolbar.remove(),this.events.remove(),this.container.removeChild(this.layers.container),this.onRemove(),this.layers=null,this.scene=null,this.events=null,this.container._DVSL_ChartInstance=void 0,Base_Helpers.unlistenResize(this.container,this._containerResize),Base_Helpers.unlisten(window,"resize",this._containerResize)},t.prototype._containerResize=function(){return this.updateSize(!1)},t.prototype.setFullscreen=function(t){return t!==this.fullScreenMode?(this.fullScreenMode=t,t?(Base_Helpers.addClass(this.layers.container,"DVSL-fullscreen"),this.fullscreenBeforeW=this.scene.chartWidth,this.fullscreenBeforeH=this.scene.chartHeight):Base_Helpers.removeClass(this.layers.container,"DVSL-fullscreen"),this.updateSize(!0)):void 0},t.prototype.isFullscreen=function(){return this.fullScreenMode},t.prototype.updateSize=function(t){var e,i,n,s;return null==t&&(t=!1),this.removed?void 0:(i=this.settings.width,e=this.settings.height,s=0,n=0,""!==this.layers.container.style.display&&(s=this.settings.minWidth,n=this.settings.minHeight),i||(i=parseInt(Math.max(s,Math.min(this.settings.maxWidth,this.scene.settings.container.clientWidth)))),e||(e=parseInt(Math.max(n,Math.min(this.settings.maxHeight,this.scene.settings.container.clientHeight)))),this.fullScreenMode?(i=window.innerWidth,e=window.innerHeight):this.fullscreenBeforeW>0&&(i=this.fullscreenBeforeW,e=this.fullscreenBeforeH,this.fullscreenBeforeW=0,this.fullscreenBeforeH=0),(t||i>=2&&i!==this.previousSizeW||e>=2&&e!==this.previousSizeH)&&(this.layers.container.style.height=e+"px",this.layers.container.style.width=i+"px",this.log("Update size, "+e+", "+i),this.previousSizeH=e,this.previousSizeW=i,this.scene.chartWidth=i,this.scene.chartHeight=e,null!=this.events&&this.events.notifySceneChanges({bounds:!0})),Base_Helpers.updateResize(this.container))},t.prototype.on=function(t,e){return(t=this.EVENT_NAMES[t])?(this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(e)):void this.error("Unrecognized event name: "+t)},t.prototype.off=function(t,e){return t=this.EVENT_NAMES[t],t?null!=this.eventListeners[t]?Base_Helpers.removeFromArray(this.eventListeners[t],e):void 0:void this.error("Unrecognized event name: "+t)},t.prototype.updateEvents=function(t,e){var i,n,s,r;s=this.EVENT_NAMES,r=[];for(n in s)i=s[n],null!=t[n]&&this.off(i,t[n]),r.push(null!=e[n]?this.on(i,e[n]):void 0);return r},t.prototype.notifyHoverChanged=function(t){return t.origin="user",this.dispatchEventParams("hoverChange",this.extendEventParams(t),null)},t.prototype.notifyDoubleClick=function(t){return t.origin="user",this.dispatchEvent("doubleClick",this.extendEventParams(t),this.defaultDoubleClick)},t.prototype.notifyRightClick=function(t){return t.origin="user",this.dispatchEvent("rightClick",this.extendEventParams(t),this.defaultRightClick)},t.prototype.notifyClick=function(t){return t.origin="user",this.dispatchEvent("click",this.extendEventParams(t),this.defaultClick)},t.prototype.notifyAnimationDone=function(){return this.dispatchEventParams("animationDone",this.extendEventParams({}),null)},t.prototype.notifySelectionChanged=function(t){return this.dispatchEventParams("selectionChange",this.extendEventParams({origin:t}),null)},t.prototype.notifySettingsChanged=function(t,e){return this.dispatchEventParams("settingsChange",this.extendEventParams({changes:t,origin:e}),null)},t.prototype.notifyPositionChange=function(t){return t.origin="user",this.dispatchEventParams("positionChange",this.extendEventParams(t),null)},t.prototype.notifyChartUpdate=function(t,e){var i,n;return null==e&&(e=!1),n=this.scene.settings.events.chartUpdateDelay,i=(new Date).getTime(),e&&(this.chartUpdateForce=!0),t&&(this.chartUpdateWasBack=this.goingBack,this.chartUpdateOrigin=t,this.chartUpdateTime=i),n=this.chartUpdateTime+n-i,n>0?this.chartUpdateTimeout=setTimeout(this.chartUpdateNotify,n):this.chartUpdateNotify()},t.prototype.cancelChartUpdateNotify=function(){return this.chartUpdateOrigin=null,this.chartUpdateTimeout?(clearTimeout(this.chartUpdateTimeout),this.chartUpdateTimeout=null):void 0},t.prototype.chartUpdateNotify=function(){var t,e;if(this.chartUpdateOrigin)return e=this.saveNavigation(),!e||this.curState&&JSON.stringify(e)===JSON.stringify(this.curState)?this.chartUpdateForce?(this.chartUpdateForce=!1,t=this.chartUpdateOrigin,this.chartUpdateOrigin=null,this.doChartUpdateNotify(t)):void 0:(this.chartUpdateForce=!1,!this.chartUpdateWasBack&&this.curState&&this.scene.pushBack(this.curState),this.curState=e,t=this.chartUpdateOrigin,this.chartUpdateOrigin=null,this.doChartUpdateNotify(t))},t.prototype.back=function(t,e){var i;return null==t&&(t=!0),null==e&&(e="api"),0===this.scene.backStack.length?!1:(i=this.scene.backStack.pop(),this.goingBack=!0,this.restoreNavigation(i,t,e),this.goingBack=!1,!0)},t.prototype.goHome=function(t,e){var i;return null==t&&(t=!0),null==e&&(e="api"),0===this.scene.backStack.length?!1:(i=this.scene.backStack[0],this.restoreNavigation(i,t,e),!0)},t.prototype.clearHistory=function(){return this.scene.backStack=[],!0},t.prototype.saveNavigation=function(){return Base_Helpers.error("Need to override saveNavigation")},t.prototype.restoreNavigation=function(){return Base_Helpers.error("Need to override restoreNavigation")},t.prototype.doChartUpdateNotify=function(t){return this.dispatchEventParams("chartUpdate",this.extendEventParams({origin:t}),null)},t.prototype.dispatchEventParams=function(t,e,i){var n,s,r;if(!(i||null!=this.eventListeners[t]&&this.eventListeners[t].length>0))return{};n=Base_Helpers.createEvent(t);for(s in e)__hasProp.call(e,s)&&(r=e[s],void 0===n[s]&&(n[s]=r));return this.dispatchEvent(t,n,i)},t.prototype.dispatchEvent=function(t,e,i){var n,s,r,o;if(!(i||null!=this.eventListeners[t]&&this.eventListeners[t].length>0))return e;if(e.chart=this.api,null!=this.eventListeners[t])for(o=this.eventListeners[t],s=0,r=o.length;r>s;s++)n=o[s],this.log("Call user event handler, "+t,e),n.call(this.api,e);return e.defaultPrevented||null==i||(this.log("Call default event handler, "+t),i.call(this.api,e)),e},t.prototype.error=function(t,e){return this.dispatchEventParams("error",{message:t,arg:e},this.defaultError)},t.prototype.log=function(t,e){return this.settings.advanced.logging?Base_Helpers.log(t,e):void 0},t.prototype.defaultError=function(t){return this.settings.events.onError&&this.settings.events.onError(t),Base_Helpers.error(t.message,t.arg?t.arg:null)},t.prototype.notifyAssetsLoaded=function(){return this.assetsLoaded=!0,this.toolbar||(this.toolbar=new Base_Toolbar(this,this.settings.toolbar),this.events.notifySceneChanges({toolbar:!0}),this.updateSize(!0)),Base_Helpers.updateResize(this.container)},t}();var Timechart_Toolbar;ToolbarItemNames.zoomOut=function(t,e){return new Base_Bar_UserButton(t,{label:"Zoom-out",cssClass:"DVSL-bar-btn-zoomout",title:"Zoom out",showLabels:e.showLabels,onClick:function(){return function(){return t.zoomOut(null,!0,"user")}}(this)})},Timechart_Toolbar=function(){function t(){}return t.settings={enabled:!0,logScale:!0,displayUnit:!0,displayPeriod:!0,zoomOut:!0,items:[{item:"back",align:"left"},{item:"zoomOut",align:"left"},{item:"logScale",align:"right"},{item:"displayPeriod",align:"right"},{item:"displayUnit",align:"right"},{item:"export",align:"right"}]},t}();var Timechart_TimeAxis,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_TimeAxis=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.tt=new Timechart_TimeSetup(this.scene),this.options=this.scene.settings.timeAxis,this.context=null,this.tt=null,this.curSceneScale=0,this.minorFormat=null,this.majorFormat=null,this.minorTimeUnit=null,this.majorTimeUnit=null,this.minorLabelHeight=null,this.majorLabelHeight=null,this.minorLabelWidths=null,this.minorLabelBallonWidths=null,this.majorLabelWidths=null,this.fullLabelWidths=null,this.multiYearWidth=null,this.majorSlices=null,this.minorSlices=null,this.panel=new Base_ChartPanel,this.panel.side="bottom",this.panel.packingOrder=110}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=30,e.prototype.updateOrder=1e3,e.settings={enabled:!0,size:44,vgrid:!0,minUnitWidth:12,maxUnitWidth:200,showHolidays:!0,miniTimeRuler:!0,unitSizePolicy:"auto",style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,minorTimeBalloonStyle:{fillColor:"#FFF"},majorTimeBalloonStyle:{fillColor:"AAA"},minorTimeLabel:{fillColor:"#000000",font:"12px Arial"},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial"},dateLighten:{fillColor:"rgba(255,255,255,0.2)"},dateHolidays:{fillColor:"rgba(230,230,230,0.2)"},minorTimeRuler1:{lineColor:"rgba(0,0,0,0.2)"},minorTimeRuler2:{lineColor:"rgba(255,255,255,0.1)"},vgrid:{lineColor:"rgba(0,0,0,0.1)"}}},e.prototype.onSceneChange=function(t){return t.changes.settings&&t.changes.settingsChanges.timeAxis?t.changes.bounds=!0:void 0},e.prototype.getPanels=function(){return this.options.enabled&&this.options.size>0?(this.panel.desiredHeight=this.options.size,this.panel.visible=!0,this.scene.bottomAxisSize=this.options.size):(this.panel.desiredHeight=0,this.panel.visible=!1,this.scene.bottomAxisSize=0),this.panel},e.prototype.computeTextSizes=function(t){var e,i,n,s,r,o,a,h,l;for(n=moment(0xc694d6e77ef8).utc(),t.save(),Base_Graphics.textStyle(t,this.scene.settings.timeAxis.style.minorTimeLabel),this.minorLabelHeight=t.measureText("M").width,this.minorLabelWidths={},this.minorLabelBallonWidths={},h=Base_TimeStep.knownUnits,s=0,o=h.length;o>s;s++)e=h[s],i=t.measureText(n.format(this.scene.settings.localization.timeAxisDates.minorLabelTimeFormats[e])).width,this.minorLabelWidths[e]=i,this.minorLabelBallonWidths[e]=i+1.2*this.minorLabelHeight;for(Base_Graphics.textStyle(t,this.scene.settings.timeAxis.style.majorTimeLabel),this.majorLabelHeight=t.measureText("M").width,this.majorLabelWidths={},this.fullLabelWidths={},l=Base_TimeStep.knownUnits,r=0,a=l.length;a>r;r++)e=l[r],this.majorLabelWidths[e]=t.measureText(n.format(this.scene.settings.localization.timeAxisDates.majorLabelTimeFormats[e])).width+this.majorLabelHeight,this.fullLabelWidths[e]=t.measureText(n.format(this.scene.settings.localization.timeAxisDates.majorLabelFullTimeFormats[e])).width+this.majorLabelHeight;return this.multiYearWidth=t.measureText("8888 - 8888").width+this.majorLabelHeight,t.restore()},e.prototype.multiples={s:[1,2,5,15,30],m:[1,2,5,15,30],h:[1,3,6,12,24],d:[1,2,5,10],w:[1,5,10,20],M:[1,3,6],y:[1,10,100,1e3]},e.prototype.getMajorLabelWidth=function(t,e){return"y"===t.unit&&t.count>1?this.multiYearWidth:e?this.majorLabelWidths[t.unit]:this.fullLabelWidths[t.unit]},e.prototype.computeLabels=function(t){var e,i,n,s,r,o,a,h,l,u;if(a=new Timechart_TimeSetup(this.scene.settings),i=this.scene.timeEnd-this.scene.timeStart,o=a.toBiggerDisplayPeriod(t),null!=o)for(e=new Base_TimeStep("s",1),s=o.isSmaller(e)?e:o,r=this.computeMinorUnit(s),o=a.toBiggerDisplayPeriod(s);o&&(o.approxTime()<=.5*i||s.approxTime()<this.scene.dxToDtime(this.getMajorLabelWidth(s,r)));)s=o,r=this.computeMinorUnit(s),o=a.toBiggerDisplayPeriod(o);if(null==o)for(s="y"===t.unit?t:new Base_TimeStep("y",1),u=this.multiples.y,h=0,l=u.length;l>h&&(n=u[h],s=new Base_TimeStep("y",n),r=this.computeMinorUnit(s),!(s.approxTime()>this.scene.dxToDtime(this.getMajorLabelWidth(s,r))));h++);return[r,s]},e.prototype.computeMinorUnit=function(t){var e,i,n,s,r,o,a,h,l;for(n=this.scene.displayUnit.clone(),s=new Base_TimeStep(Base_TimeStep.toSmallerUnit[t.unit],1),s.unit&&s.isBigger(n)&&(n=s),r=n.approxTime(),i=null,o=1.5*this.scene.dxToDtime(this.minorLabelWidths[n.unit]),l=this.multiples[n.unit],a=0,h=l.length;h>a;a++)if(e=l[a],e<n.count&&(e=n.count),n.count=e,r=n.approxTime(),r>=o){i=n;break}return i&&i.isEqual(t)&&(i=null),i},e.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E,N,R,H,U,Y,z,G,V,W,Z,j,q,X,J,Q,K,$,te,ee,ie,ne,se,re,oe,ae,he,le,ue,ce,pe,de,fe,me,ge,ye,ve,_e,xe,Se,be,we,Ce,Pe,Me;if(null!=this.scene.displayUnit&&this.panel.visible&&this.scene.timeStart<this.scene.timeEnd){for(a=t.context,null===this.minorLabelHeight&&this.computeTextSizes(a),W=this.panel.left,Z=this.panel.right,K=this.panel.top+1,te=this.panel.bottom,l=te-K,$=this.scene.y0,u=this.scene.height,ee=te-1.8*this.majorLabelHeight,Base_Graphics.pushClip(a,W,$,this.scene.width,l+u),k=this.scene.getScale(),Math.abs(1-this.curSceneScale/k)<.001||(this.curSceneScale=k,pe=this.computeLabels(this.scene.displayUnit),M=pe[0],b=pe[1],null!=M?(this.minorFormat=this.scene.settings.localization.timeAxisDates.minorLabelTimeFormats[M.unit],this.majorFormat=this.scene.settings.localization.timeAxisDates.majorLabelTimeFormats[b.unit]):(this.minorFormat=null,this.majorFormat=this.scene.settings.localization.timeAxisDates.majorLabelFullTimeFormats[b.unit]),this.minorTimeUnit=M,this.majorTimeUnit=b,(null===this.majorSlices||b.approxTime()!==this.majorSlices.step.approxTime())&&(this.majorSlices=new Timechart_TimeSlicer(this.scene,b)),null==M||null!==this.minorSlices&&M.approxTime()===this.minorSlices.step.approxTime()?null===M&&(this.minorSlices=null):this.minorSlices=new Timechart_TimeSlicer(this.scene,M,[],null,null,!1)),this.majorSlices.update(),this.minorSlices&&this.minorSlices.update(),J=this.majorSlices.xes,E=this.majorSlices.times,o=this.majorSlices.fromIndex,N=this.majorSlices.toIndex,T=this.majorSlices.step.numberOfUnits(0,E[o]),f=(0|T)%2===0,a.beginPath(),p=ie=o,de=N-2;de>=ie;p=ie+=1)f=!f,f||(q=(0|Math.max(J[p],W))+1,X=0|Math.min(J[p+1],Z),a.rect(q,K,X-q,l));
if(Base_Graphics.fill(a,this.scene.settings.timeAxis.style.dateLighten),this.options.showHolidays&&this.minorSlices&&("d"===this.minorSlices.step.unit||"h"===this.minorSlices.step.unit)){for(_e=this.scene.timeToXCoefs(),R=_e[0],H=_e[1],n=864e5,D=this.scene.timeStart,D=Math.round(D-D%n),s=moment(D).utc().weekday(),c=this.scene.settings.localization.holidayWeekdays,a.beginPath(),q=D*H+R;Z>=q;)X=q+H*n,Base_Helpers.arrayContains(c,s)&&a.rect(q,$,X-q,Math.min(5,l)+u),s=(s+1)%7,q=X;Base_Graphics.fill(a,this.scene.settings.timeAxis.style.dateHolidays)}if(this.options.vgrid){for(h=Base_Graphics.beginStrokeAndFill(a,this.options.style.vgrid),p=ne=xe=o+1,Se=N-2;Se>=ne&&(V=(0|J[p])+.5,!(V>=Z));p=ne+=1)h.moveTo(V,$),h.lineTo(V,te);Base_Graphics.endStrokeAndFill(a,h,this.options.style.vgrid)}if(m="y"===this.majorSlices.step.unit&&this.majorSlices.step.count>1,A=this.getMajorLabelWidth(this.majorSlices.step,this.minorFormat),this.scene.settings.timeAxis.style.showMajorTimeBalloons){for(a.beginPath(),p=se=o,be=N-2;be>=se;p=se+=1)U=J[p],Y=J[p+1],U>=Z||W>=Y||(D=E[p],I=(U+Y)/2,W>U&&(U=W,I=Math.min((U+Y)/2,Y-A)),Y>Z&&(Y=Z,I=Math.max((U+Y)/2,U+A)),Base_Graphics.strokeBalloon2(a,I,ee+1,A,this.majorLabelHeight));Base_Graphics.paint(a,this.scene.settings.timeAxis.style.majorTimeBalloonStyle)}for(Base_Graphics.textStyle(a,this.scene.settings.timeAxis.style.majorTimeLabel),a.textAlign="center",a.textBaseline="middle",p=re=o,we=N-2;we>=re;p=re+=1)U=J[p],Y=J[p+1],U>=Z||W>=Y||(D=E[p],m?(L=E[p+1],B=moment(D).utc().format(this.majorFormat)+" - "+moment(L).utc().format(this.majorFormat)):B=moment(D).utc().format(this.majorFormat),I=(U+Y)/2,W>U&&(U=W,I=Math.min((U+Y)/2,Y-A)),Y>Z&&(Y=Z,I=Math.max((U+Y)/2,U+A)),a.fillText(B,I,ee));if(this.minorSlices){if(E=this.minorSlices.times,J=this.minorSlices.xes,o=this.minorSlices.fromIndex,N=this.minorSlices.toIndex,A=this.minorLabelWidths[this.minorSlices.step.unit],v=K+.4*this.minorLabelHeight|0,g=K-1,y=v+1.6*this.minorLabelHeight|0,this.scene.settings.timeAxis.style.showMinorTimeBalloons){for(a.beginPath(),F=null,p=oe=o,Ce=N-1;Ce>=oe;p=oe+=1)V=J[p],F=Base_Graphics.strokeBalloon(a,V,K-5,A,this.minorLabelHeight);Base_Graphics.paint(a,this.scene.settings.timeAxis.style.minorTimeBalloonStyle)}else{for(r=this.majorSlices.fromIndex,O=this.majorSlices.toIndex,j=this.majorSlices.xes,a.beginPath(),d=r,p=ae=o,Pe=N-1;Pe>=ae;p=ae+=1){for(V=J[p];V>j[d];)d+=1;if(j[d]!==V){if(V>=Z)break;V=(0|V)-.5,a.moveTo(V,g),a.lineTo(V,y)}}for(Base_Graphics.stroke(a,this.scene.settings.timeAxis.style.minorTimeRuler1),a.beginPath(),d=r,p=he=o,Me=N-1;Me>=he;p=he+=1){for(V=J[p];V>j[d];)d+=1;if(j[d]!==V){if(V>=Z)break;V=(0|V)+.5,a.moveTo(V,g),a.lineTo(V,y)}}Base_Graphics.stroke(a,this.scene.settings.timeAxis.style.minorTimeRuler2)}for(Base_Graphics.textStyle(a,this.scene.settings.timeAxis.style.minorTimeLabel),a.textAlign=this.scene.settings.timeAxis.style.showMinorTimeBalloons?"center":"left",Q=this.scene.settings.timeAxis.style.showMinorTimeBalloons?0:3,a.textBaseline="top",p=le=o,fe=N-1;fe>=le;p=le+=1)V=J[p],D=E[p],B=moment(D).utc().format(this.minorFormat),a.fillText(B,V+Q,v)}if(e=null,this.scene.settings.timeAxis.style.miniTimeRuler&&null!=e&&e.xes[e.fromIndex+1]-e.xes[e.fromIndex]>2){for(z=K-1,G=K+3,J=e.xes,x=this.majorSlices.fromIndex,C=null!=this.minorSlices?this.minorSlices.fromIndex:x,S=this.majorSlices.xes,P=null!=this.minorSlices?this.minorSlices.xes:S,a.beginPath(),_=x,w=C,i=0,p=ue=me=e.fromIndex,ge=e.toIndex-2;ge>=me?ge>=ue:ue>=ge;p=ge>=me?++ue:--ue){for(V=J[p];V>S[_];)_+=1;if(S[_]!==V){for(;V>P[w];)w+=1;if(P[w]!==V){if(V>=Z)break;V=(0|V)-.5,a.moveTo(V,z),a.lineTo(V,G),i++}}}for(i&&Base_Graphics.stroke(a,this.scene.settings.timeAxis.style.minorTimeRuler1),i=0,a.beginPath(),_=x,w=C,p=ce=ye=e.fromIndex,ve=e.toIndex-2;ve>=ye?ve>=ce:ce>=ve;p=ve>=ye?++ce:--ce){for(V=J[p];V>S[_];)_+=1;if(S[_]!==V){for(;V>P[w];)w+=1;if(P[w]!==V){if(V>=Z)break;V=(0|V)+.5,a.moveTo(V,z),a.lineTo(V,G),i++}}}i&&Base_Graphics.stroke(a,this.scene.settings.timeAxis.style.minorTimeRuler2)}Base_Graphics.popClip(a),this.scene.minorTimeFormat=this.minorFormat,this.scene.minorTimeUnit=this.minorTimeUnit,this.scene.majorTimeFormat=this.majorFormat,this.scene.majorTimeUnit=this.majorTimeUnit}},e}(Base_ChartElement);var Linearchart_Impl,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Impl=function(t){"use strict";function e(t,i){e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.prototype.scrolling=null,e.prototype.renderer=null,e.prototype.replaceSeries=function(t){return this.settings.series=[],this.updateSettings({series:t})},e.prototype.setLogScale=function(t,e){var i,n,s,r;s={},r=this.settings.valueAxis;for(i in r)n=r[i],s[i]={logScale:t};return this.updateSettings({valueAxis:s},e)},e.prototype.finalInitialize=function(){return e.__super__.finalInitialize.call(this),this.legend=this.events.addElement(new Linearchart_Legend(this))},e}(Base_Impl);var Timechart_DataWarehouse;Timechart_DataWarehouse=function(){function t(t){this.chart=t,this.scene=this.chart.scene,this.dataSources={},this.requests={},this.results={},this.dataSlicesCache={},this.nextRequestId=0,this.hasNewRequests=!1}return t.prototype.registerDataProcessingRequest=function(t){return this.requests[this.nextRequestId]=t,this.results[this.nextRequestId]={leadIn:null,leadOut:null,times:[],xes:[],values:[],fromIndex:0,toIndex:0,data:[],from:0,to:0,slicer:null,dataExistsFrom:null,dataExistsTo:null},this.hasNewRequests=!0,this.nextRequestId++},t.prototype.removeDataProcessingRequest=function(t){return delete this.requests[t],delete this.results[t]},t.prototype.getData=function(t){return this.results[t]},t.prototype.clear=function(){return this.requests={},this.results={}},t.prototype.process=function(t){var e,i,n,s,r,o,a,h,l,u,c;if(e=t.changes,e.settings||e.data){this.dataSources={},l=this.scene.data;for(r in l)h=l[r],this.dataSources[r]=h}if(e.time||e.data||e.displayUnit||e.bounds||e.settings||this.hasNewRequests)if(this.scene.timeStart>=this.scene.timeEnd){u=this.requests;for(s in u)o=u[s],a=this.results[s],a.dataExistsFrom=null,a.dataExistsTo=null}else{this.hasNewRequests=!1,this.loading=!1,this.hasSomeData=!1,n=e.data||e.time,c=this.requests;for(s in c)o=c[s],a=this.results[s],i=this.updateData(n,o,a),this.updateSlices(i,s,o,a);this.scene.loading=this.loading,this.loading?this.scene.setMessage("noData",this.scene.settings.localization.loadingLabel,10):this.hasSomeData?this.scene.setMessage("noData",null):this.scene.setMessage("noData",this.scene.settings.localization.noDataLabel,999)}},t.prototype.exportData=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f;for(u=new Timechart_TimeSlicer(this.scene,i,[],t,e,!0,0),p=u.times,l=[],d=0,f=n.length;f>d;d++)h=n[d],o=h.data,a={},c=this.dataSources[o.source],r=c.getDataForRange(t,e,i,null),s=new Array(p.length-1),this.fillValues(r.values,u.times,s,u.fromIndex,u.toIndex,o,i),l.push(s);return{timestamps:u.times.slice(u.fromIndex,u.toIndex-1),values:l}},t.prototype.updateData=function(t,e,i){var n,s,r,o,a,h;return s=this.dataSources[e.source],r=this.getUnitToUse(e),o=(this.scene.timeEnd-this.scene.timeStart)*s.settings.prefetchRatio,(t||!i.from&&this.scene.timeStart||!i.to&&this.scene.timeEnd||i.from>=i.to||this.scene.timeStart-o<i.from||this.scene.timeEnd+o>i.to||null!=i.dataExistsFrom&&i.dataExistsFrom>this.scene.timeEnd||null!=i.dataExistsTo&&i.dataExistsTo<this.scene.timeStart)&&(t=!0,a=this.scene.timeStart-2*o,h=this.scene.timeEnd+2*o,n=s.getDataForRange(a,h,r,function(t){return function(){return t._newDataArrived()}}(this)),s.noData||(this.hasSomeData=!0),n.from>this.scene.timeEnd||n.to<this.scene.timeStart?(i.data=[],i.from=0,i.to=0,i.dataExistsFrom=null,i.datasExistsTo=null,this.loading||(this.loading=n.loading)):(this.loading||(this.loading=n.loading&&(n.from>this.scene.timeStart||n.to<this.scene.timeEnd)),i.data=n.values,i.from=a,i.to=h,i.dataExistsFrom=n.from,i.dataExistsTo=n.to)),t},t.prototype.updateSlices=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m;return a=this.getUnitToUse(i),o=i.index,r=i.valueFunction,s=n.data,l=n.slicer=this.getSlice(e,i,a),m=l.update(this.scene.timeStart,this.scene.timeEnd),p=m[0],c=m[1],u=m[2],d=n.times=l.times,n.xes=l.xes,f=n.values=l.values,s=n.data,n.fromIndex=l.fromIndex,n.toIndex=l.toIndex,s?s.length>0&&!r&&o>=s[0].length?this.chart.error("No data for this DataIndex: "+o+", only "+(s[0].length-1)+" values present"):(t?this.fillValues(s,d,f,l.fromIndex,l.toIndex,i,a):(this.fillValues(s,d,f,l.fromIndex,c+1,i,a),this.fillValues(s,d,f,u-1,l.toIndex,i,a)),this.setLeads(i,n,a)):(n.values=function(){var t,e,i;for(i=[],t=0,e=d.length;e>t;t++)h=d[t],i.push(null);return i}(),n.leadIn=null,n.leadOut=null)},t.prototype.getSlice=function(t,e,i){var n,s;return n=""+t+"-"+i.toString(),s=this.dataSlicesCache.hasOwnProperty(n)?this.dataSlicesCache[n]:this.dataSlicesCache[n]=new Timechart_TimeSlicer(this.scene,i,["values"])},t.prototype.getUnitToUse=function(){return this.scene.displayUnit},t.prototype.setLeads=function(t,e,i){var n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w;return u=t.noDataPolicy,r=t.index,s=t.valueFunction,n=e.data,v=e.values,m=e.times,h=null,l=null,"join"===u&&n&&(a=e.fromIndex,null===v[a]&&(o=Timechart_Data.binSearch(n,m[a]),o=Timechart_Data.linSearchDown(n,o,r,s),-1!==o&&(f=n[o][0],b=e.slicer.makeMiniSlice(f),p=b[0],x=b[1],d=b[2],S=b[3],c=[p,d],_=[x,S],y=[null,null],this.fillValues(n,c,y,0,2,t,i),h={times:c,xes:_,values:y,fromIndex:0,toIndex:2})),g=e.toIndex,null===v[g-2]&&(o=Timechart_Data.binSearch(n,m[g-1]),o=Timechart_Data.linSearchUp(n,o,r,s),-1!==o&&(f=n[o][0],w=e.slicer.makeMiniSlice(f),p=w[0],x=w[1],d=w[2],S=w[3],c=[p,d],_=[x,S],y=[null,null],this.fillValues(n,c,y,0,2,t,i),l={times:c,xes:_,values:y,fromIndex:0,toIndex:2}))),e.leadIn=h,e.leadOut=l},t.prototype.fillValues=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d;if(a=r.aggregation,l=r.index,h=r.valueFunction,c=r.aggregatedValueFunction,!(n+1>=s)&&("sum"===a?this.fillValueSum(t,e,i,n,s,l,h):"min"===a?this.fillValueMin(t,e,i,n,s,l,h):"max"===a?this.fillValueMax(t,e,i,n,s,l,h):"avg"===a?this.fillValueAvg(t,e,i,n,s,l,h):"first"===a?this.fillValueFirst(t,e,i,n,s,l,h):"last"===a?this.fillValueLast(t,e,i,n,s,l,h):this.chart.error("Unrecognized aggregation function: "+a),c))for(u=p=n,d=s-2;d>=p;u=p+=1)i[u]=c(i[u],e[u],o)},t.prototype.fillValueSum=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m;for(l=t.length,u=Timechart_Data.binSearch(t,e[n]),c=f=n,m=s-2;m>=f;c=f+=1){for(p=e[c+1],a=0,h=0;l>u&&t[u][0]<p;)d=o?o(t[u]):t[u][r],u+=1,null!=d&&(a+=d,h+=1);i[c]=h>0?a:null}},t.prototype.fillValueMin=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m;for(l=t.length,u=Timechart_Data.binSearch(t,e[n]),c=f=n,m=s-2;m>=f;c=f+=1){for(p=e[c+1],a=1/0,h=0;l>u&&t[u][0]<p;)d=o?o(t[u]):t[u][r],u+=1,null!=d&&(a=Math.min(a,d),h+=1);i[c]=h>0?a:null}},t.prototype.fillValueMax=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m;for(l=t.length,u=Timechart_Data.binSearch(t,e[n]),c=f=n,m=s-2;m>=f;c=f+=1){for(p=e[c+1],a=-1/0,h=0;l>u&&t[u][0]<p;)d=o?o(t[u]):t[u][r],u+=1,null!=d&&(h+=1,a=Math.max(a,d));i[c]=h>0?a:null}},t.prototype.fillValueAvg=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m;for(l=t.length,u=Timechart_Data.binSearch(t,e[n]),c=f=n,m=s-2;m>=f;c=f+=1){for(p=e[c+1],a=0,h=0;l>u&&t[u][0]<p;)d=o?o(t[u]):t[u][r],u+=1,null!=d&&(a+=d,h+=1);i[c]=h>0?a/h:null}},t.prototype.fillValueFirst=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f,m;for(h=t.length,l=Timechart_Data.binSearch(t,e[n]),u=f=n,m=s-2;m>=f;u=f+=1){for(p=e[u+1],a=null,c=!0;h>l&&t[l][0]<p;)c&&(d=o?o(t[l]):t[l][r],null!=d&&(a=d,c=!1)),l+=1;i[u]=a}},t.prototype.fillValueLast=function(t,e,i,n,s,r,o){var a,h,l,u,c,p,d,f;for(h=t.length,l=Timechart_Data.binSearch(t,e[n]),u=d=n,f=s-2;f>=d;u=d+=1){for(c=e[u+1],a=null;h>l&&t[l][0]<c;)p=o?o(t[l]):t[l][r],l+=1,null!=p&&(a=p);i[u]=a}},t.prototype._newDataArrived=function(){return this.chart.events.notifySceneChanges({data:!0})},t}();var Base_Settings;Base_Settings=function(){function t(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f;for(this._imageCache={},this._imageLoading={},this._loadedAssets={},this._assetsLoaded=!0,this._assetsToLoad=[],this._imgAssets={},this.applyDefaults(e),a=[],d=[t,"zoomcharts"],l=0,c=d.length;c>l;l++)s=d[l],a.push(new RegExp("((file:///|https?://)[^/]+/.*?)/?"+s+"(-dev|.min|).js")),a.push(new RegExp("((file:///|https?://)[^/]+/.*/src)/?"+s));f=document.getElementsByTagName("script");for(i in f)if(h=f[i],h.src)for(u=0,p=a.length;p>u;u++)o=a[u],(n=h.src.match(o))&&(r="/"===n[1][n[1].length-1]?"":"/",this.assetsUrlBase=n[1]+r+"assets/")}return t.defaults={container:null,width:null,height:null,minHeight:165,maxHeight:2e4,minWidth:100,maxWidth:2e4,theme:null,assetsUrlBase:"",area:{style:{fillColor:"transparent",overlayColor:null,image:null}},data:Base_Data.settings,advanced:{highDpi:{"default":!0,safari:!1,firefox:!0,msie:!0,chrome:!1},pointer:{noClickOnDoubleClick:!0,dragSensitivity:10,doubleClickSensitivity:40,doubleClickTimeout:300,longPressTimeout:500,speedAveragingPeriod:200},trackTouches:!1,logging:!1,style:{messageTextStyle:{fillColor:"#000",font:"15px Arial"},loadingArcStyle:{r:10,lineColor:"#444",lineWidth:1}},maxCanvasWidth:2047,maxCanvasHeight:2047,themeCSSClass:"DVSL-round",assets_applyMethod:"merge",assets:["assets://base.css"],builtinAssets:{logo:Base_images_logo,"error.png":Base_images_error},pdfExportAssets:["assets://jspdf/jspdf.min.js","assets://jspdf/jspdf.plugin.addimage.min.js"],exportProxyURL:"https://zoomcharts.com/developers/export"},events:{onError:null,onSettingsChange:null,onClick:null,onDoubleClick:null,onRightClick:null,onHoverChange:null,onSelectionChange:null,onChartUpdate:null,onPositionChange:null,onAnimationDone:null,chartUpdateDelay:0},interaction:{resizing:Base_Resizer.settings,animation:{scrollDuration:500,hoverDuration:200}},toolbar:Base_Toolbar.settings,title:Base_Title.settings,credits:Base_Credits.settings,legend:Base_Legend.settings},t.prototype.applyCompatibility=function(t,e){var i,n,s,r,o,a,h;for(h=[],o=0,a=e.length;a>o;o++)if(n=e[o],i=n.from,s=n.to,r=Base_Helpers.getProp(t,i),void 0!==r){if(n.filter&&!n.filter(r))continue;n.transform&&(r=n.transform(r)),h.push(this.applyRec(t,Base_Helpers.wrapValue(r,s),{}))}else h.push(void 0);return h},t.prototype.apply=function(t){var e,i;if(null!=t)return e={},i=null,null!=t.theme&&(i=t.theme,delete t.theme),i&&(this.applyRec(this,i,e,0),t.theme=i),this.applyRec(this,t,e,0),e},t.prototype.applyDefaults=function(t){var e;return e=t.theme,e?(delete t.theme,this.apply(t),this.apply(e),t.theme=e):this.apply(t)},t.applyRec=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d,f,m,g,y,v;if(null==n&&(n=0),n>10)throw"Stack depth greater than 10, seems like recursive settings";if(void 0===t)throw console.error(n,t,e),"Tried to applyRec on undefined";for(o in e)if(m=e[o],p=t[o],(void 0===p||m!==p)&&(s=Base_Helpers.isArray(m),l=Base_Helpers.isObject(m),u=Base_Helpers.isArray(p),c=Base_Helpers.isObject(p),r=Base_Helpers.isFunction(m),d=!1,u&&!s&&(console.error("Applying settings: Setting expected to be array but got something else: "+o+" = "+m),d=!0),null===m||!c||l||r||(console.error("Applying settings: Setting expected to be object but got something else: "+o+" = "+m),d=!0),!d))if(l)if(null==p&&(s?(t[o]=[],i[o]=[],c=!0):(t[o]={},i[o]={},c=!0)),(null===m||void 0===m)&&(t[o]=m,i[o]=m),l&&!c&&(t[o]={},i[o]={}),"container"===o)t[o]=m,i[o]=m;else if(s){if(h=o+"_applyMethod",a=e[h]||t[h],"merge"===a)for(f=t[o],y=0,v=m.length;v>y;y++)g=m[y],Base_Helpers.arrayContains(f,g)||f.push(g);else t[o]=m;i[o]=m}else i.hasOwnProperty(o)||(i[o]={}),this.applyRec(t[o],m,i[o],n+1);else void 0===m?(delete t[o],i[o]=m):(t[o]=m,i[o]=m);return 1},t.extendDefaults=function(e,i){var n;return n=Base_Helpers.realClone(e),t.applyRec(n,i,{},0),n},t.prototype.applyRec=t.applyRec,t.prototype.applyById=function(t,e,i){var n,s,r,o,a,h,l,u,c;for(c=[],a=0,l=e.length;l>a;a++){if(n=e[a],r=!1,n.id)for(h=0,u=t.length;u>h;h++)if(o=t[h],o.id===n.id){s={},this.applyRec(o,n,s,0),i.push(s),r=!0;break}r?c.push(void 0):(t.push(n),c.push(i.push(n)))}return c},t.prototype.getAssetUrl=function(t){var e;return 0===t.indexOf("builtin://")?this.advanced.builtinAssets[t.slice(10)]:0===t.indexOf("assets://")?(e="/"===this.assetsUrlBase[this.assetsUrlBase.length-1]?this.assetsUrlBase:this.assetsUrlBase+"/",e+t.slice(9)):t},t.prototype.getAssetImage=function(t,e){var i,n,s;return this._imageCache.hasOwnProperty(t)?this._imageCache[t]:this._imageLoading.hasOwnProperty(t)?null:(s=this.getAssetUrl(t))?(n=function(i){return function(n){return delete i._imageLoading[t],i._imageCache[t]=n,e?e(n):void 0}}(this),i=function(t){return function(){var e;return e=t.getAssetImage("builtin://error.png",n),e?n(e):void 0}}(this),this._imageLoading[t]=Base_Helpers.buildImage(s,n,i),this._imageCache[t]):null},t}();var Piechart_Legend,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Legend=function(t){"use strict";function e(t){this.chart=t,e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.paintOrder=20,e.prototype.updateOrder=1e3,e.settings={marker:{shape:"rect"}},e.prototype.onSceneChange=function(t){var i;return e.__super__.onSceneChange.call(this,t),i=t.changes,i.pie?(this.rebuildItems(),i.bounds=!0):void 0},e.prototype.doAnimations=function(){return this.hoverObject=this.scene.hoverSlice,this.selectedObjects=this.scene.selection},e.prototype.paintMarker=function(t,e,i,n,s){var r,o;return o=s.data,r={fillColor:o.currentFillColor,lineColor:this.settings.marker.lineColor},t.beginPath(),Base_Graphics.strokeMarker(t,this.settings.marker.shape,e,i,n),Base_Graphics.paint(t,r)},e.prototype.rebuildItems=function(){var t,e,i,n,s,r;if(e=[],t=this.scene.peek())for(n=t.slices,s=0,r=n.length;r>s;s++)i=n[s],e.push({textColor:this.settings.text.fillColor,label:i.label||i.data.name,data:i});return this.setItems(e)},e}(Base_Legend);var Facetchart_Toolbar;ToolbarItemNames.zoomOut=function(t,e){return new Base_Bar_UserButton(t,{label:"Zoom-out",cssClass:"DVSL-bar-btn-zoomout",title:"Zoom-out to previous level",showLabels:e.showLabels,onClick:function(){return function(){return t.zoomOut(null,!0,"user")}}(this)})},Facetchart_Toolbar=function(){function t(){}return t.settings={enabled:!0,items:[{item:"back",align:"left"},{item:"zoomOut",align:"left"},{item:"logScale",align:"right"},{item:"export",align:"right"}]},t}();var Piechart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Settings=function(t){function e(t){e.__super__.constructor.call(this,"piechart",e.defaults),this.apply(t)}return __extends(e,t),e.FlatTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"flat"}},e.BevelTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"bevel"}},e.GradientTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"smoothy"}},e.CanTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"can",depth:8}},e.defaults=Base_Settings.extendDefaults(Base_Settings.defaults,{theme:e.FlatTheme,data:Piechart_Data.settings,legend:Piechart_Legend.settings,navigation:{initialDrilldown:"",initialOffset:0},pie:{radius:null,adaptiveRadius:!0,outerMargin:1,margin:2,centerMargin:5,showInnerPies:!0,showInnerPiesExport:!0,innerRadius:.3,innerRadiusWhenDrilldown:.2,x:null,y:null,startAngle:-Math.PI/2,endAngle:1.5*Math.PI,theme:"flat",depth:0,style:{fillColor:"transparent",sliceColors:["#2fc32f","#b0dc0b","#eab404","#de672c","#ec2e2e","#d5429b","#6f52b8","#1c7cd5","#56b9f7","#0ae8eb"],colorDistribution:"list",brightness:1},noDataStyle:{fillColor:"#ddd"},backgroundStyle:{},backgroundHoveredStyle:{brightness:.7},styleFunction:null},slice:{margin:2,minFraction:0,style:{lineBrightness:0,brightness:1,cutoutDistance:0,lineColor:null,lineWidth:1,label:null,insideLabel:null,url:null,icon:null,lineDash:null},hoverStyle:{brightness:1.2,lineBrightness:2,lineWidth:.35},selectedStyle:{cutoutDistance:15},backgroundStyle:{fillColor:"#e2e2e2",fillColor2:"#e0e0e0"},backgroundActiveStyle:{brightness:1.3},othersStyle:{fillColor:"#ccc",lineDecoration:"zigzag"},previousStyle:{fillColor:"#ccc",lineDecoration:"zigzag"},connectorStyle:{lineColor:"#333",lineWidth:1,lineDash:null},labelStyle:{backgroundStyle:null,textStyle:{fillColor:"#000",font:"12px Arial"},lineSpacing:.2,margin:4,padding:0,borderRadius:999},insideLabelStyle:{textStyle:{fillColor:"#fff",font:"12px Arial"},lineSpacing:.2,margin:4,padding:0,borderRadius:0},expandableMarkStyle:{lineWidth:1,lineColor:"rgba(255,255,255,0.8)",distance:4,lineDash:null},styleFunction:null},filters:{sliceFilter:null},labels:{enabled:!0,connectors:!0,connectorLength:20,angle:0,insideLabel:"append",insideLabelVisibilityFraction:.8,interLabelSpacing:.6,placement:"aligned"},icons:{sizeExtent:[16,64],placement:"auto",autohideWhenTooSmall:!0},advanced:{initialAnimation:!0,renderQuality:1,backImage:"builtin://piechart-back",backAlwaysVisible:!1,assets:["assets://piechart.css"],labelInsideTreshold:1,pointer:{noClickOnDoubleClick:!1},builtinAssets:{"piechart-back":Piechart_images_back}},events:{onPieChange:null,onPieReadyStateChanged:null},interaction:{mode:"drilldown",selection:{enabled:!0,tolerance:2},others:{enabled:!0,centerGoesToPrevious:!1,navigationFraction:.15,maxSlicesVisible:15,maxOthersFraction:.6,minSliceFraction:.01},scrolling:{enabled:!1},dragging:{enabled:!1}},info:{enabled:!0,contentsFunction:null},toolbar:{enabled:!1,items:["back","export"]},localization:{othersLabel:"Others",previousLabel:"Previous",loadingLabel:"Loading...",closeButton:"Close"}}),e.prototype.apply=function(t){var i;return this.applyCompatibility(t,[{from:"labels.connectorStyle",to:"slice.connectorStyle"},{from:"labels.textStyle",to:"slice.labelStyle.textStyle"},{from:"labels.backgroundStyle",to:"slice.labelStyle.backgroundStyle"},{from:"labels.insideTextStyle",to:"slice.insideLabelStyle.textStyle"},{from:"labels.padding",to:"slice.labelStyle.padding"},{from:"labels.borderRadius",to:"slice.labelStyle.borderRadius"},{from:"area.initialPieId",to:"navigation.initialDrilldown"},{from:"area.initialPieOffset",to:"navigation.initialOffset"},{from:"area.initialAnimation",to:"advanced.initialAnimation"}]),i=e.__super__.apply.call(this,t)},e}(Base_Settings);var Piechart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Impl=function(t){"use strict";function e(t,i){this.defaultDoubleClick=__bind(this.defaultDoubleClick,this),this.defaultClick=__bind(this.defaultClick,this),e.__super__.constructor.call(this,new Piechart_Settings(t),new Piechart_Scene),this.scene.loading=!1,this.layers=new Piechart_Layers(this,this.scene),this.initialize(i),this.events.addElement(new Piechart_Scrolling(this)),this.selection=this.events.addElement(new Piechart_Selection(this)),this.scene.view=new Piechart_PieView(this),this.popup=this.events.addElement(new Piechart_InfoPopup(this)),this.legend=this.events.addElement(new Piechart_Legend(this)),this.events.addElement(new Piechart_Styles(this)),this.navigator=this.events.addElement(new Piechart_Navigator(this)),this.events.addElement(this.scene.view),this.scene.data=new Piechart_Data(this),this.finalInitialize(),this.navigator.setPie(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset,"init")}return __extends(e,t),e.prototype.api=null,e.prototype.onRemove=function(){return this.layers=null,this.renderer=null,this.scene.data.remove(),this.scene.data=null,this.scene=null},e.prototype.onSettingsChanged=function(t){var e;return e={},t.data&&(this.scene.data.remove(),this.scene.data=new Piechart_Data(this),e.data=!0),t.area&&t.navigation&&this.navigator.setPie(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset),(t.labels||t.icons||t.pie||t.slice||t.interaction)&&(e.pie=!0),this.events.notifySceneChanges(e)},e.prototype.save=function(){var t;return t=this.saveSelection(),JSON.stringify({pie:this.navigator.getPie(),offset:this.navigator.getPieOffset(),selection:t})},e.prototype.restore=function(t,e){var i;if(t)return i=JSON.parse(t),this.setPie(i.pie,i.offset,e),this.setSelection(i.selection)},e.prototype.reloadData=function(t){return this.removed?void 0:(this.log("Reload data"),this.scene.data.remove(),this.scene.data=new Piechart_Data(this),this.events.notifySceneChanges({data:!0,dataDeep:t}))},e.prototype.updateFilters=function(){return this.updateFilter(!0)},e.prototype.updateFilter=function(t){return this.log("Update filter"),this.events.notifySceneChanges({data:!0,dataDeep:t})},e.prototype.setSelection=function(t){var e,i,n,s,r;for(this.log("Set selection"),i=[],n=[],s=0,r=t.length;r>s;s++)e=t[s],e instanceof Piechart_Slice?i.push(e):Base_Helpers.isString(e)?n.push(e):this.error("SetSelection: Selection contents must be Piechart_Slice object or string, got "+e);return this.selection.setSelection(i,n,!1,"api")},e.prototype.saveSelection=function(){var t,e,i,n,s;for(e=this.scene.selectionIds.splice(0),s=this.scene.selection,i=0,n=s.length;n>i;i++)t=s[i],e.push(t.id);return e},e.prototype.setPie=function(t,e,i,n){return null==i&&(i=!0),null==n&&(n="api"),this.log("Set pie"),this.navigator.setPie(t,e,n)},e.prototype.setPieOffset=function(t,e,i){return null==e&&(e=!0),null==i&&(i="api"),this.log("Set pie offset"),this.navigator.setPie(this.getPie(),t,i)},e.prototype.getPie=function(){return this.navigator.getPie()},e.prototype.getActiveSlices=function(){var t,e,i,n,s;for(e=[],s=this.scene.stack,i=0,n=s.length;n>i;i++)t=s[i],t.parentSlice&&e.push(t.parentSlice);return e},e.prototype.getActivePies=function(){return this.scene.stack},e.prototype.expandSlice=function(t,e){return this.navigator.expandSlice(t,e)},e.prototype.getSliceDimensions=function(t,e){var i,n,s,r,o,a,h,l,u,c,p;if(!Base_Helpers.isArray(t))return this.error("getSliceDimensions: slice Id must be an array"),null;if(t.length<2)return null;if(!e&&this.scene.stack.length+1<t.length)return null;for(n=0,c=this.scene.stack,a=0,l=c.length;l>a;a++){if(i=c[a],i.id!==t[n])return null;if(n+=1,n===t.length-1)break}for(r=t[n],p=i.slices,h=0,u=p.length;u>h;h++)if(o=p[h],o.id===r)return s=o.renderParams,s?[i.x,i.y,s[0],s[1],s[2],s[3]]:null;return null},e.prototype.saveNavigation=function(){var t;return t=this.scene.peek(),!t||t.loading?null:{pie:this.navigator.getPie(),offset:this.navigator.getPieOffset()}},e.prototype.restoreNavigation=function(t,e,i){return this.navigator.setPie(t.pie,t.offset,i)},e.prototype.doChartUpdateNotify=function(t){return e.__super__.doChartUpdateNotify.call(this),this.dispatchEventParams("pieChange",this.extendEventParams({origin:t}),null),this.dispatchEventParams("pieReadyStateChanged",this.extendEventParams({origin:t}),null)},e.prototype.extendEventParams=function(t){var e;return e=this.scene.peek(),t.pie=e,t.offset=e.offset,t.count=e.count,t.slice=this.scene.hoverSlice,t.label=this.scene.hoverLabel,t.clickSlice=t.slice,t.selection=this.scene.selection,t},e.prototype.defaultClick=function(t){var e,i,n;if(n=t.slice,i=t.clickPie,e="drilldown"===this.settings.interaction.mode,e||n&&(n===n.pie.othersSlice||n===n.pie.previousSlice))if(n){if(n.url)return Base_Helpers.openUrl(n.url),t.preventDefault();if(this.navigator.expandSlice(n,"user"))return t.preventDefault()}else if(i)return this.setSelection([],"user"),this.navigator.goCenter("user"),t.preventDefault()},e.prototype.defaultDoubleClick=function(){},e}(Base_Impl);var Itemschart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Settings=function(t){function e(t,i){e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.defaults=Base_Settings.extendDefaults(Base_Settings.defaults,{data:{cacheSize:1e4,random:null,randomGridLinkProbability:.6,randomNodes:0,randomLinks:0,requestMaxUnits:2,preloadNodeLinks:!1},style:{nodeLabelMinSize:40,nodeDetailMinZoom:.2,linkLabelMinZoom:3,itemsMinZoom:.5,linkDecorationScale:4,linkDecorationMinSize:4,multilinkSpacing:10,nodeLabelScaleBase:30,linkLabelScaleBase:.6,scaleObjectsWithZoom:!1,nodeRadiusExtent:[30,150],linkRadiusExtent:[.6,30],linkStrengthExtent:[.1,1],linkLengthExtent:[.3,150],nodeAutoScaling:null,linkAutoScaling:null,linkStrengthAutoScaling:null,linkLengthAutoScaling:null,nodeRules:{},linkRules:{},nodeClasses:[],linkClasses:[],node:{fillColor:"#c7dae0",lineColor:null,lineWidth:null,radius:30,shadowColor:null,lineDash:null},link:{fillColor:"#333",shadowColor:null,fromDecoration:null,toDecoration:null,label:null,radius:1,length:1,strength:1,lineDash:null,toPieValue:0,toPieColor:null},item:{align:"center",aspectRatio:4,borderRadius:1e3,textStyle:{fillColor:"black",font:"12px Arial"},backgroundStyle:{fillColor:"rgba(255,255,255,0.7)"}},linkLabel:{padding:0,margin:0,align:"center",aspectRatio:4,borderRadius:1e3,textStyle:{fillColor:"black",font:"12px Arial"},backgroundStyle:{fillColor:"#FFF",lineColor:"gray"}},nodeLabel:{scaleWithZoom:!1,scaleWithSize:!1,align:"center",aspectRatio:4,borderRadius:1e3,padding:0,textStyle:{fillColor:"black",font:"12px Arial"},backgroundStyle:{fillColor:"rgba(255,255,255,0.7)"}},selection:{fillColor:"lightblue",sizeConstant:5,sizeProportional:.2},nodeLocked:{},nodeExpanded:{},nodeFocused:{fillColor:"#09c"},nodeNotLoaded:{fillColor:"#fff"},hiddenLinks:{fillColor:"#BBB",lineColor:"rgba(100,100,100,0.3)",lineWidth:1,size:7},nodeHovered:{shadowOffsetX:0,shadowOffsetY:0,shadowBlur:12,shadowColor:"blue"},nodeBackground:{},linkHovered:{shadowOffsetX:0,shadowOffsetY:0,shadowBlur:12,shadowColor:"blue"},itemHovered:{backgroundStyle:{shadowOffsetX:0,shadowOffsetY:0,shadowBlur:12,shadowColor:"blue"}},removedColor:"#EEE",fadeTime:600},info:{enabled:!1,nodeContentsFunction:null,linkContentsFunction:null},interaction:{zooming:{zoomInOnDoubleClick:!0,doubleClickZoom:1.5,sensitivity:1,wheel:!0,fingers:!0},panning:{enabled:!0},selection:{enabled:!0,nodesSelectable:!0,linksSelectable:!0,tolerance:10,nodesMovable:!0}},nodeMenu:{enabled:!0,buttons:[],showData:!1,contentsFunction:null},linkMenu:{enabled:!0,showData:!1,contentsFunction:null},advanced:{perNodeLoadingIndicator:!0,style:{loadingArcStyle:{location:"corner"}}}}),e.prototype.apply=function(t){var i,n,s,r,o;if(Base_Helpers.hasProp(t,"style.makeImagesCircular")&&(this.style.node.imageCropping=t.style.makeImagesCircular),i=e.__super__.apply.call(this,t),t.style){if(t.style.nodeRules){r=t.style.nodeRules;for(n in r)s=r[n],this.style.nodeRules[n]=s}if(t.style.linkRules){o=t.style.linkRules;for(n in o)s=o[n],this.style.linkRules[n]=s}}return i},e}(Base_Settings);var Linearchart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Settings=function(t){function e(t,i){e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.defaults=Base_Settings.extendDefaults(Base_Settings.defaults,{area:{style:{noData:{fillColor:"#888",image:"builtin://linearchart-no-data-dark"},zoomHighlight:{fillColor:"rgba(30,160,220,0.15)",fadeIn:100,fadeOut:500,fadeCross:500},zoomHighlightInactive:{fillColor:"rgba(30,160,220,0.08)"}}},legend:Linearchart_Legend.settings,valueAxis:{"default":{enabled:!0,position:"outside",side:"left",title:null,logScale:!1,hgrid:!0,axisLine:!1,minValue:null,maxValue:null,scaleStep:null,scaleMinStep:0,scaleAdjustmentTolerance:.3,scaleAdjustmentAnimationDelay:200,scaleAdjustmentAnimation:"=",zeroLine:"visible",valueFormatterFunction:null,style:{title:{fillColor:"#000000",font:"13px Arial",reverseDirection:!1,alignment:"center",margin:5},tick:{lineColor:"#AAAAAA"},axisLine:{lineColor:"rgba(127,127,127,0.5)",lineWidth:1},valueLabel:{fillColor:"#000000",font:"11px Arial",margin:0},labelSpacing:25,baseLine:{lineColor:"rgba(127,127,127,0.5)",depthColor:"rgba(127,127,127,0.5)",lineWidth:1,lineDepth:1},hgrid:{lineColor:"rgba(255,255,255,0.2)"}}}},chartTypes:{columns:{style:{minHeight:4,gradient:.8,lineColor:"",fillColor:"limegreen",lineWidth:1,lineDash:!1,padding:[3,3],shadowOffsetX:1,shadowOffsetY:-1,shadowBlur:3,shadowColor:null,previewLineColor:"rgba(255,255,255,.5)",previewData:!1,depth:0,depthBrightness:.5}},line:{style:{lineColor:"#f00",lineDash:!1,fillColor:"",fillGradient:null,lineWidth:1,shadowOffsetX:1,shadowOffsetY:-1,shadowBlur:5,shadowColor:!1,smoothing:!1,steps:!1,marker:{shape:null,width:10,fillColor:""}}}},stacks:{"default":{name:"",type:"normal",separateNegativeValues:null}},seriesDefault:{enabled:!0,type:"columns",valueAxis:"default",name:null,showInLegend:!0,stack:null,cluster:null,data:{source:"default",index:1,field:null,valueFunction:null,aggregation:"sum",aggregatedValueFunction:null,noDataPolicy:"join"},style:{}},series:[],computedSeries:[],colors:[],info:{enabled:!0,showNoData:!0,valueFormatterFunction:null,aggregations:[],style:{highlight:{fillColor:"rgba(30,160,220,0.15)",fadeIn:200,fadeOut:200}},advanced:{contentsFunction:null,showOnlyHoveredSeries:!1,scope:null}},toolbar:{enabled:!0,logScale:!0,backButton:!0,zoomOutButton:!0,"export":!0},interaction:{swipeSensitivity:.6,scrolling:{enabled:!0,swipePageFlipping:!0,keyboardScrollingFactor:1,kineticFriction:2},zooming:{enabled:!0,wheel:!1,swipe:!0,fingers:!0,fingersMaxZoom:10,sensitivity:1,keyboardFactor:2,upDownTreshold:10,zoomHighlightThreshold:1.5}},localization:{valueUnits:{K:1e3,M:1e6,G:1e9,T:1e12,E:1e15}}}),e.prototype.apply=function(t){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S;
if(t.series?(h=t.series,delete t.series):h=null,n=e.__super__.apply.call(this,t),n.stacks){this.computedStacks={},v=this.stacks;for(o in v)d=v[o],c={},this.applyRec(c,e.defaults.stacks["default"],{}),this.applyRec(c,d,{}),this.computedStacks[o]=c}if(h&&(t.series=h,this.series||(this.series=[]),n.series=[],this.applyById(this.series,h,n.series)),h||n.chartTypes||n.seriesDefault){i={"default":!0},_=this.valueAxis;for(o in _)p=_[o],i[o]=!0;for(n.computedSeries=this.computedSeries=[],l=0===this.series.length?[{}]:this.series,f=0,g=l.length;g>f;f++)if(h=l[f],Base_Helpers.isObject(h)){if(a={},this.applyRec(a,e.defaults.seriesDefault,{}),u=h.type||a.type,"columns"!==u&&"line"!==u)throw"Settings: Unrecognized series.type = "+u;if(this.applyRec(a,this.chartTypes[u],{}),this.applyRec(a,h,{}),!i[a.valueAxis])throw"Settings: Unrecognized value axis: "+a.valueAxis;if(0===a.data.index)throw"Settings: series.data.index = 0, not allowed";this.computedSeries.push(a)}}if(n.valueAxis){for(r=!1,x=this.computedSeries,m=0,y=x.length;y>m;m++)a=x[m],"default"===a.valueAxis&&(r=!0);this.computedValueAxisList=[],this.computedValueAxis={},s=e.defaults.valueAxis["default"],S=this.valueAxis;for(o in S)d=S[o],("default"!==o||r)&&(c={},this.applyRec(c,s,{}),this.applyRec(c,d,{}),c.id=o,null!=c.style.baseLineColor&&(c.style.baseLine.lineColor=c.style.baseLineColor),null!=c.style.baseLineWidth&&(c.style.baseLine.lineWidth=c.style.baseLineWidth),null!=c.style.hgridLineColor&&(c.style.hgrid.lineColor=c.style.hgridLineColor),this.computedValueAxis[o]=c,this.computedValueAxisList.push(c));this.computedValueAxisList.sort(function(t,e){return t.id.localeCompare(e.id)})}return n},e}(Base_Settings);var Linearchart_Renderer;Linearchart_Renderer=function(){"use strict";function t(t,e){this.chart=t,this.valueAxis=e,this.scene=this.chart.scene,this.clusters=[],this.buildSeries()}return t.prototype.buildSeries=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m;for(this.clusters=[],s={},e=null,r={},i=Linearchart_Settings.defaults.stacks["default"],d=this.scene.settings.computedSeries,n=l=0,c=d.length;c>l;n=++l)a=d[n],a.enabled&&(a.cluster?(t=s[a.cluster],t||(t=s[a.cluster]=new Linearchart_Series_Cluster(this.scene),this.clusters.push(t))):"line"===a.type?a.stack?r.hasOwnProperty(a.stack)?t=r[a.stack]:(t=r[a.stack]=new Linearchart_Series_Cluster(this.scene),this.clusters.push(t)):(t=new Linearchart_Series_Cluster(this.scene),this.clusters.push(t)):(e||(e=new Linearchart_Series_Cluster(this.scene),this.clusters.push(e)),t=e),h=this.scene.settings.computedStacks[a.stack]||i,t.addSeries(n,a,h,this.valueAxis[a.valueAxis]));for(f=this.clusters,m=[],u=0,p=f.length;p>u;u++)o=f[u],m.push(o.afterInit());return m},t.prototype.process=function(t){var e,i,n,s,r;for(s=this.clusters,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.process(t));return r},t.prototype.afterProcess=function(){var t,e,i,n,s;for(n=this.clusters,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.afterProcess());return s},t.prototype.paint=function(t){var e,i,n,s,r,o;for(e=t.context,r=this.clusters,o=[],n=0,s=r.length;s>n;n++)i=r[n],o.push(i.paint(e));return o},t.prototype.hitTest=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f;for(a=4,r=null,n=1/0,c=this.clusters,h=c.length-1;h>=0;h+=-1)o=c[h],p=o.hitTest(t,e,a),s=p[0],i=p[1],n>i&&(r=s,n=i);if(n>a)for(n=1/0,r=null,d=this.clusters,l=0,u=d.length;u>l;l++)o=d[l],f=o.hitTestStack(t,e,a),s=f[0],i=f[1],n>i&&(r=s,n=i);return r},t.prototype.exportData=function(t,e){var i,n,s,r,o;for(n=[],o=this.clusters,s=0,r=o.length;r>s;s++)i=o[s],i.exportData(t,e,n);return n},t}();var PieChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart=function(t){"use strict";function e(t){return this._impl=new Piechart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.themes={flat:Piechart_Settings.FlatTheme,bevel:Piechart_Settings.BevelTheme,gradient:Piechart_Settings.GradientTheme,raised:Piechart_Settings.CanTheme},e.settings=Piechart_Settings,e.prototype.updateFilter=function(){return this._impl.updateFilter(),this},e.prototype.selection=function(t){return null!=t&&this._impl.setSelection(t),this._scene.selection},e.prototype.getPie=function(){return this._impl.getPie()},e.prototype.getPieOffset=function(){return this._impl.navigator.getPieOffset()},e.prototype.setPie=function(t,e){return null==e&&(e=0),this._impl.setPie(t,e,"api"),this},e.prototype.setPieOffset=function(t){return this._impl.setPieOffset(t,"api"),this},e.prototype.getActiveSlices=function(){return this._impl.getActiveSlices()},e.prototype.getActivePies=function(){return this._impl.getActivePies()},e.prototype.getActivePie=function(){var t;return t=this._impl.getActivePies(),t[t.length-1]},e.prototype.expandSlice=function(t){return this._impl.expandSlice(t,"api")},e.prototype.getSliceDimensions=function(t,e){return null==e&&(e=!1),this._impl.getSliceDimensions(t,e)},e}(Base_Api);var Netchart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Settings=function(t){function e(t){e.__super__.constructor.call(this,"netchart",e.defaults),this.apply(t)}return __extends(e,t),e.FlatTheme={advanced:{themeCSSClass:"DVSL-flat",assets:["assets://netchart.css"]}},e.defaults=Base_Settings.extendDefaults(Itemschart_Settings.defaults,{theme:e.FlatTheme,area:{centerX:.5,centerY:.5,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0},style:{scaleObjectsWithZoom:!0},layout:{nodeSpacing:16,mode:"dynamic",incrementalLayoutMaxTime:300,initialLayoutMaxTime:2e3,aspectRatio:!1,layoutFreezeTimeout:1500,globalLayoutOnChanges:!0,advanced:{adaptiveFreezeTreshold:1.2}},filters:{nodeFilter:null,linkFilter:null,nodeLinksProcessor:null,multilinkProcessor:null},interaction:{zooming:{autoZoomAfterClick:!1,initialAutoZoom:"overview",zoomExtent:[.5,4],autoZoomExtent:[.5,1],autoZoomSize:.98},selection:{lockNodesOnMove:!0,allowMoveNodesOffscreen:!0}},navigation:Netchart_Navigator.settings,nodeMenu:{buttons:["hide","expand","focus","lock"]},toolbar:Netchart_Toolbar.settings,localization:{loadingLabel:"Loading...",closeButton:"Close",menu:{dynaminc:"Dynamic",fixed:"Fixed",focus:"Focus",unfocus:"Unfocus",collapse:"Collapse",expand:"Expand",hide:"Hide"}},legend:Netchart_Legend.settings}),e.prototype.apply=function(t){var i;return i=e.__super__.apply.call(this,t)},e}(Itemschart_Settings);var Netchart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Impl=function(t){"use strict";function e(t,i){this.defaultDoubleClick=__bind(this.defaultDoubleClick,this),this.defaultRightClick=__bind(this.defaultRightClick,this),this.defaultClick=__bind(this.defaultClick,this),e.__super__.constructor.call(this,new Netchart_Settings(t),new Netchart_Scene),this.graph=new Netchart_Graph(this),this.navigator=new Netchart_Navigator(this),this.scrolling=new Netchart_Scrolling(this),this.layout=new Netchart_Layout(this),this.layers=new Netchart_Layers(this),this.initialize(i),this.renderer=new Itemschart_Renderer(this),this.legend=new Netchart_Legend(this),this.info=new Itemschart_InfoPopup(this),this.menu=new Itemschart_Menu(this),this.events.addElement(this.navigator),this.events.addElement(this.layout),this.events.addElement(this.scrolling),this.autoZoom=this.events.addElement(new Netchart_AutoZoom(this)),this.events.addElement(new Itemschart_Selection(this)),this.events.addElement(new Itemschart_Styles(this)),this.events.addElement(this.legend),this.events.addElement(this.renderer),this.events.addElement(this.menu),this.events.addElement(this.info),this.autoZoom.resetZoom=!0,this.scene.data=new Netchart_Data(this),this.scene.data.applyPreloadedData(),this.scene.loading=!1,this.navigator.onNewDataObject(),this.navigator.showInitialNodes(),this.finalInitialize()}return __extends(e,t),e.prototype.api=null,e.prototype.renderer=null,e.prototype.scrolling=null,e.prototype.selection=null,e.prototype.onRemove=function(){return this.renderer=null,this.scene.data.remove(),this.scene.data=null},e.prototype.onSettingsChanged=function(t){var e,i;return e={},i=t.navigation&&(t.navigation.mode||t.navigation.initialNodes),null!=t.data&&(t.data.dataFunction||t.data.format||t.data.preloaded||t.data.url||t.data.randomNodes)&&(this.buildNewDataObj(),this.navigator.onNewDataObject(),i=!0),i&&(this.navigator.showInitialNodes(),this.autoZoom.resetZoom=!0),t.filters&&(e.filters=!0),t.style&&(e.style=!0),this.events.notifySceneChanges(e)},e.prototype.save=function(){var t,e;return e=this.graph.save(),t=this.navigator.save(),JSON.stringify({xy:e,nav:t})},e.prototype.restore=function(t){var e,i,n;if(t)return i=JSON.parse(t),n=i.xy,e=i.nav,e&&this.navigator.restore(e),n&&this.graph.restore(n),this.autoZoom.resetZoom=!0},e.prototype.saveNavigation=function(){var t;return t=JSON.stringify(this.navigator.save())},e.prototype.restoreNavigation=function(t){return this.navigator.restore(JSON.parse(t))},e.prototype.getCurrentNodes=function(){var t,e,i,n,s;for(e=[],s=this.scene.nodes(),i=0,n=s.length;n>i;i++)t=s[i],t.removed||e.push(t);return e},e.prototype.getCurrentLinks=function(){var t,e,i,n,s;for(t=[],s=this.scene.links(),i=0,n=s.length;n>i;i++)e=s[i],e.removed||t.push(e);return t},e.prototype.getNodeDimensions=function(t){var e,i,n,s,r;return Base_Helpers.isObject(t)||(t=this.getNode(t)),t?(r=this.scene.toDisplay(t.x,t.y),n=r[0],s=r[1],e=t.currentRadius*this.scene.zoom,i=t.currentHwidth*this.scene.zoom,{x:n,y:s,radius:e,hwidth:i}):null},e.prototype.lockNode=function(t,e,i){return Base_Helpers.isObject(t)&&(t=t.id),this.graph.lockNode(t,e,i)},e.prototype.unlockNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.graph.unlockNode(t)},e.prototype.addFocusNode=function(t,e){return Base_Helpers.isObject(t)&&(t=t.id),this.settings.navigation.autoZoomOnFocus&&(this.scene.autoZoomMode=!0),this.navigator.addFocusNode(t,e,"api")},e.prototype.clearFocus=function(){return this.navigator.clear("api")},e.prototype.removeFocusNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.unexpandNode(t,"api")},e.prototype.expandNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.expandNode(t,"api")},e.prototype.collapseNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.collapseNode(t,"api")},e.prototype.uncollapseNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.uncollapseNode(t,"api")},e.prototype.hideNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.hideNode(t,"api")},e.prototype.getNode=function(t){return this.scene.idToNode[t]},e.prototype.getLink=function(t){return this.scene.idToLink[t]},e.prototype.setSelection=function(t,e){var i,n,s,r,o;for(s=[],r=0,o=t.length;o>r;r++)n=t[r],n instanceof Itemschart_Node||n instanceof Itemschart_Link?s.push(n):this.error("SetSelection: Non chart object in selection: "+n);return i=e|this.scene.selection.length!==s.length,1!==s.length||i||(i=this.scene.selection[0]!==s[0]),i?(this.scene.selection=s,this.events.notifySceneChanges({selection:!0}),this.notifySelectionChanged("api")):void 0},e.prototype.setZoom=function(t){return this.autoZoom.setZoom(t,!0)},e.prototype.resetLayout=function(){return this.layout.resetLayout(),this.scene.settings.layout.mode="dynamic",this.autoZoom.setZoom("overview",!1),this.events.notifySceneChanges({layout:!0})},e.prototype.reloadData=function(){return this.removed?void 0:(this.buildNewDataObj(),this.navigator.onNewDataObject())},e.prototype.replaceData=function(t){return this.removed?void 0:(this.buildNewDataObj(),this.scene.data.addData(t))},e.prototype.addData=function(t){return this.removed?void 0:this.scene.data.addData(t)},e.prototype.removeData=function(t){var e,i,n,s;if(!this.removed){if(t.nodes)for(s=t.nodes,i=0,n=s.length;n>i;i++)e=s[i],this.navigator.removeNode(e.id.toString());return this.scene.data.removeData(t),this.events.notifySceneChanges({data:!0})}},e.prototype.exportData=function(t,e){var i;return i=t?this.graph.exportData():this.scene.data.exportData(),e&&this.graph.exportCoordinates(i.nodes),i},e.prototype.buildNewDataObj=function(){return this.scene.data.remove(),this.events.clearSceneChanges({dataArrived:!0}),this.scene.data=new Netchart_Data(this),this.scene.data.applyPreloadedData(),this.events.notifySceneChanges({data:!0})},e.prototype.hideMenu=function(){return this.menu.hideMenu()},e.prototype.extendEventParams=function(t){var e;return(t.x||t.y)&&(e=this.scene.fromDisplay(t.x,t.y),t.chartX=e[0],t.chartY=e[1]),t.nodes=this.scene.nodes(),t.links=this.scene.links(),t.hoverLink=this.scene.hoverLink,t.hoverNode=this.scene.hoverNode,t.hoverItem=this.scene.hoverItem,t.selection=this.scene.selection,t},e.prototype.defaultClick=function(t){var e;if(null!=t.clickNode&&(e=t.clickNode,this.scene.settings.navigation.expandOnClick)){if(!e.expanded)return this.expandNode(e.id),t.preventDefault();if(e.expanded&&"manual"===this.scene.settings.navigation.mode)return this.collapseNode(e.id),t.preventDefault()}},e.prototype.defaultRightClick=function(t){return null!=t.clickNode&&(this.scene.data.getNodeLinks(t.clickNode.id),this.menu.toggleNodeMenu(t.clickNode),t.preventDefault()),null!=t.clickLink?(this.menu.toggleLinkMenu(t.x,t.y,t.clickLink),t.preventDefault()):void 0},e.prototype.defaultDoubleClick=function(t){var e;return e=t.clickNode,e?(this.addFocusNode(e.id),t.preventDefault()):void 0},e}(Base_Impl);var Timechart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Settings=function(t){function e(t){e.__super__.constructor.call(this,"timechart",e.defaults),this.area._minUnit=null,this.area._minDisplayRange=10,this.currentTime.computedTimeOffset=1e3*-(new Date).getTimezoneOffset()*60,this.apply(t)}return __extends(e,t),e.StaticChart={interaction:{zooming:{enabled:!1},selection:{enabled:!1},scrolling:{enabled:!1}}},e.FlatTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},area:{style:{noData:{fillColor:"#DDD",image:"builtin://linearchart-no-data-light"},loadingData:{fillColor:"#EEE"}}},chartTypes:{columns:{style:{gradient:1,depth:0}}},timeAxis:{style:{showMajorTimeBalloons:!1,showMinorTimeBalloons:!1,majorTimeLabel:{fillColor:"#000",shadowColor:null},minorTimeLabel:{fillColor:"#000",shadowColor:null},dateLighten:{fillColor:"rgba(0,0,0,0.05)"}}}},e.RoundTheme={advanced:{themeCSSClass:"DVSL-round",assets:[]},valueAxis:{"default":{style:{valueLabel:{fillColor:"#000000",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"}}}},timeAxis:{style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,minorTimeBalloonStyle:{fillColor:"#FFF",shadowOffsetX:0,shadowOffsetY:2,shadowBlur:2,shadowColor:"#888"},majorTimeBalloonStyle:{fillColor:"AAA",shadowOffsetX:0,shadowOffsetY:-1,shadowBlur:0,shadowColor:"rgba(0,0,0,0.3)"},minorTimeLabel:{fillColor:"#000000",font:"12px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:1,shadowColor:"#7c7c7c"},dateLighten:{fillColor:"rgba(0,0,0,0.05)"},minorTimeRuler1:{lineColor:"rgba(0,0,0,0.2)"},minorTimeRuler2:{lineColor:"rgba(255,255,255,0.1)"}}},chartTypes:{columns:{style:{gradient:.8,depth:3}}},area:{style:{noData:{image:"builtin://linearchart-no-data-dark"}}}},e.GradientTheme={advanced:{themeCSSClass:"DVSL-gradient",assets:[]},valueAxis:{"default":{style:{valueLabel:{fillColor:"#000000",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"}}}},timeAxis:{style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,minorTimeBalloonStyle:{fillColor:"#FFF",shadowOffsetX:0,shadowOffsetY:2,shadowBlur:2,shadowColor:"#888"},majorTimeBalloonStyle:{fillColor:"AAA",shadowOffsetX:0,shadowOffsetY:-1,shadowBlur:0,shadowColor:"rgba(0,0,0,0.3)"},minorTimeLabel:{fillColor:"#000000",font:"12px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:1,shadowColor:"#7c7c7c"},dateLighten:{fillColor:"rgba(255,255,255,0.2)"},minorTimeRuler1:{lineColor:"rgba(0,0,0,0.2)"},minorTimeRuler2:{lineColor:"rgba(255,255,255,0.1)"}}},chartTypes:{columns:{style:{gradient:.8,depth:3}}},area:{style:{noData:{image:"builtin://linearchart-no-data-dark"}}}},e.defaults=Base_Settings.extendDefaults(Linearchart_Settings.defaults,{theme:e.FlatTheme,navigation:{initialDisplayAnchor:"newestData",initialDisplayPeriod:"max",initialDisplayUnit:"auto",followAnchor:!1},area:{displayUnits:[{unit:"1 s",name:"second"},{unit:"5 s",name:"5 seconds"},{unit:"1 m",name:"minute"},{unit:"5 m",name:"5 minutes"},{unit:"1 h",name:"hour"},{unit:"6 h",name:"6 hours"},{unit:"1 d",name:"day"},{unit:"1 M",name:"month"},{unit:"1 y",name:"year"}],displayPeriods:[{displayPeriod:"10 ms"},{displayPeriod:"100 ms"},{displayPeriod:"s"},{displayPeriod:"m"},{displayPeriod:"h"},{displayPeriod:"d"},{displayPeriod:"M"},{displayPeriod:"y"},{displayPeriod:"10 y"},{displayPeriod:"100 y"}],noData:!0,style:{loadingData:{fillColor:"#BBB"},markerText:{font:"12px Arial"},selection:{lineColor:"#000000",fillColor:"rgba(30,160,220,0.15)"},selectionLabel:{fillColor:"#000000",font:"12px Arial"}}},currentTime:Timechart_TimeUpdater.settingsCurTime,timeAxis:Timechart_TimeAxis.settings,data:Timechart_Data.settings,toolbar:Timechart_Toolbar.settings,localization:{timeUnitsNames:{ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},timeUnitsNamesPlural:{ms:"milliseconds",s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",y:"years"},weekdays:["Su","Mon","Tue","Wed","Thu","Fri","Sa"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],custom:"Custom",firstDayOfWeek:0,holidays:[],holidayWeekdays:[0,6],markerDates:{timeFormats:{ms:"HH:mm:ss",s:"HH:mm:ss",m:"HH:mm:ss",h:"HH:mm",d:"D, HH:mm",w:"MMM D",M:"MMM D",y:"YYYY, MMM D"}},infoDates:{majorTimeFormats:{y:null,M:"YYYY",w:"YYYY",d:"YYYY",h:"MMM D, YYYY",m:"MMM D, YYYY",s:"MMM D, YYYY",ms:"MMM D, YYYY"},minorTimeFormats:{y:"YYYY",M:"MMM",w:"[Week] W",d:"MMM D",h:"HH:mm",m:"HH:mm",s:"HH:mm:ss",ms:"ss.SSS"},fullTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY, HH:mm",h:"MMM D, YYYY HH:00",d:"MMM D, YYYY",w:"[Week] W, YYYY",M:"MMM YYYY",y:"YYYY"}},timeAxisDates:{minorLabelTimeFormats:{ms:"ss.SSS",s:"HH:mm:ss",m:"HH:mm",h:"HH:00",d:"MMM D",w:"MMM D",M:"MMM",y:"YYYY"},majorLabelTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY",h:"MMM D, YYYY HH:00",d:"MMM D, YYYY",w:"[Week] W, YYYY",M:"MMM YYYY",y:"YYYY"},majorLabelFullTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY",h:"MMM D, YYYY HH:00",d:"MMM D, YYYY",w:"[Week] W, YYYY",M:"MMM YYYY",y:"YYYY"}},noDataLabel:"No data",loadingLabel:"Loading..."},events:{onTimeChange:null,chartUpdateDelay:400},interaction:{snapMode:"displayUnit",selection:Timechart_Selection.settings,scrolling:Timechart_Scrolling.settings},advanced:{timeUpdateInterval:1e3,dataUpdateInterval:null,maxUnitsToDisplay:2e4,maxZoomOutFactor:1.5,builtinAssets:{"linearchart-no-data-light":builtinImages["no-data-light.png"],"linearchart-no-data-dark":builtinImages["no-data-dark.png"]},assets:["assets://timechart.css"]}}),e.prototype.apply=function(t){var i,n,s,r,o,a,h,l,u,c;if(this.applyCompatibility(t,[{from:"settings.toolbars",to:"settings.toolbar"},{from:"settings.toolbar.periodSelection",to:"settings.toolbar.displayPeriod"},{from:"settings.toolbar.zoomOutButton",to:"settings.toolbar.zoomOut"},{from:"settings.toolbar.backButton",to:"settings.toolbar.back"},{from:"settings.interaction.scrolling.noData",to:"settings.interaction.scrolling.limitMode"},{from:"settings.interaction.scrolling.noDataSnapBackProportion",to:"settings.interaction.scrolling.overscrollProportion",transform:function(t){return 1-t}},{from:"area.initialDisplayPeriod",to:"navigation.initialDisplayPeriod"},{from:"area.initialDisplayAnchor",to:"navigation.initialDisplayAnchor"},{from:"area.initialDisplayUnit",to:"navigation.initialDisplayUnit"},{from:"area.followAnchor",to:"navigation.followAnchor"},{from:"timeAxis.style.vgrid",to:"settings.timeAxis.style.vgrid.lineColor",filter:function(t){return"string"==typeof t}}]),t.data&&(r=!0,Base_Helpers.isArray(t.data)?(s=t.data,t.data=null):s=null),i=e.__super__.apply.call(this,t),r){if(i.data=!0,this.computedData=[],s)for(a=0,l=s.length;l>a;a++)n=s[a],o={},this.applyRec(o,e.defaults.data,{}),this.applyRec(o,n,{}),this.computedData.push(o);else this.computedData.push(this.data);for(c=this.computedData,h=0,u=c.length;u>h;h++)n=c[h],null!=n.name&&(n.id=n.name)}return this._calcMinUnit(),Base_Helpers.hasProp(this,"area.displayUnits")&&(this.area.displayUnitsParsed=this._parseUnits(this.area.displayUnits)),Base_Helpers.hasProp(this,"area.displayPeriods")&&(this.area.displayPeriodsParsed=this._parsePeriods(this.area.displayPeriods)),Base_Helpers.isNumber(Base_Helpers.getProp(t,"currentTime.serverTime"))&&(this.currentTime.computedTimeOffset=t.currentTime.serverTime-(new Date).getTime()-1e3*(new Date).getTimezoneOffset()*60),this.area&&(this.area._minDisplayRange=this.area._minUnit?10*this.area._minUnit.approxTime():10),i},e.prototype._parseUnits=function(t){var e,i,n,s,r;for(e=[],s=0,r=t.length;r>s;s++)i=t[s],n=Base_TimeStep.parse(i),null===n?Base_Helpers.error("Settings: unknown time unit '"+i+"'"):this.area._minUnit.isSmallerOrEqual(n)&&e.push(n);return e},e.prototype._parsePeriods=function(t){var e,i,n,s,r,o,a;for(i=[],o=0,a=t.length;a>o;o++)n=t[o],r=Base_Helpers.clone(n),r.displayUnit=s=Base_TimeStep.parse(n.displayUnit),r.displayPeriod=e=Base_TimeStep.parse(n.displayPeriod),null!==e&&!this.area._minUnit.isSmallerOrEqual(e)||null!==s&&!this.area._minUnit.isSmallerOrEqual(s)||i.push(r);return i},e.prototype._filterPeriods=function(t){var e,i,n,s,r,o;for(i=[],r=0,o=t.length;o>r;r++)n=t[r],s=Base_TimeStep.parse(n.displayUnit),e=Base_TimeStep.parse(n.displayPeriod),null!==e&&!this.area._minUnit.isSmallerOrEqual(e)||null!==s&&!this.area._minUnit.isSmallerOrEqual(s)||i.push(n);return i},e.prototype._calcMinUnit=function(){var t,e,i,n,s,r,o,a,h,l;if(null!=this.area&&null!=this.data&&null!=this.area.displayUnits&&null!=this.data.units){for(t=new Base_TimeStep("y",1e6),h=this.area.displayUnits,s=0,o=h.length;o>s;s++)i=h[s],n=Base_TimeStep.parse(i),n.isSmaller(t)&&(t=n);for(e=new Base_TimeStep("y",1e6),l=this.data.units,r=0,a=l.length;a>r;r++)i=l[r],n=new Base_TimeStep(i,1),n.isSmaller(e)&&(e=n);return e.isBigger(t)&&(t=e),this.area._minUnit=t}},e}(Linearchart_Settings);var Facetchart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Settings=function(t){function e(t){e.__super__.constructor.call(this,"facetchart",e.defaults),this.apply(t)}return __extends(e,t),e.defaults=Base_Settings.extendDefaults(Linearchart_Settings.defaults,{theme:null,data:Piechart_Data.settings,filters:{sliceFilter:null},navigation:{initialDrilldown:"",initialOffset:0},items:{style:{brightness:1,cutoutDistance:0,label:null,insideLabel:null,expandable:!0,url:null,icon:null},hoverStyle:{brightness:1.2},selectedStyle:{cutoutDistance:15},backgroundStyle:{fillColor:"#e2e2e2",fillColor2:"#e0e0e0"},backgroundActiveStyle:{brightness:1.3},styleFunction:null},facetAxis:Facetchart_FacetAxis.settings,events:{onPieChange:null,onPieReadyStateChanged:null},interaction:{selection:Facetchart_Selection.settings},info:Facetchart_InfoPopup.settings,toolbar:Facetchart_Toolbar.settings}),e.prototype.apply=function(t){var i;return this.applyCompatibility(t,[{from:"area.initialPieId",to:"navigation.initialDrilldown"},{from:"area.initialPieOffset",to:"navigation.initialOffset"}]),i=e.__super__.apply.call(this,t)},e}(Linearchart_Settings);var Timechart_Renderer;Timechart_Renderer=function(){"use strict";function t(t,e){this.chart=t,this.dataWarehouse=e,this.scene=this.chart.scene,this.events=this.chart.events,this.buildSeries(),this.shades=new Linearchart_DataLimitRenderer(this)}return t.prototype.animationOrder=400,t.prototype.paintOrder=5,t.prototype.updateOrder=1500,t.prototype.buildSeries=function(){var t,e,i,n,s,r,o,a,h;for(this.valueAxis={},o=this.scene.settings.computedValueAxisList,i=0,s=o.length;s>i;i++)t=o[i],this.valueAxis[t.id]=new Linearchart_ValueAxis(this,t);for(this.r=new Linearchart_Renderer(this.chart,this.valueAxis),this.dataWarehouse.clear(),this.requestIds=[],a=this.scene.settings.computedSeries,h=[],n=0,r=a.length;r>n;n++)e=a[n],h.push(this.requestIds.push(this.dataWarehouse.registerDataProcessingRequest(e.data)));return h},t.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&((e.settingsChanges.computedSeries||e.settingsChanges.valueAxis)&&this.buildSeries(),e.settingsChanges.valueAxis&&(e.bounds=!0)),e.bounds||e.settings?e.time=!0:void 0},t.prototype.getPanels=function(){var t,e,i,n,s;for(e=[],s=this.scene.settings.computedValueAxisList,i=0,n=s.length;n>i;i++)t=s[i],e.push(this.valueAxis[t.id].getPanel());return e},t.prototype.doAnimations=function(t){var e,i,n,s,r,o,a,h,l,u,c;if(e=t.changes,this.dataWarehouse.process(t),null!=this.scene.displayUnit){for(this.displayUnit!==this.scene.displayUnit&&(this.displayUnit=this.scene.displayUnit,e.displayUnit=!0),i=[],h=this.requestIds,o=0,a=h.length;a>o;o++)n=h[o],i.push(this.dataWarehouse.getData(n));(e.time||e.data||e.displayUnit||e.bounds)&&this.r.process(i),l=this.valueAxis;for(s in l)r=l[s],r.process(t);this.r.afterProcess(),u=this.valueAxis,c=[];for(s in u)r=u[s],c.push(r.afterProcess(t));return c}},t.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u,c;e=t.context,h=[this.scene.x0,this.scene.y0,this.scene.width,this.scene.height],o=h[0],a=h[1],r=h[2],i=h[3],l=this.valueAxis;for(n in l)s=l[n],s.paintUnder(e);Base_Graphics.pushClip(e,o,a,r,i),this.r.paint(t),this.shades.paint(e),Base_Graphics.popClip(e),u=this.valueAxis,c=[];for(n in u)s=u[n],c.push(s.paint(e,e));return c},t.prototype.hitTest=function(t,e){return this.scene.xyInChart(t,e)?this.r.hitTest(t,e,this.scene.settings.interaction.selection.tolerance):null},t.prototype.exportData=function(t,e){return this.r.exportData(t,e)},t}();var Facetchart_Layer,Facetchart_Renderer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Layer=function(){function t(t,e,i){var n,s,r,o,a;for(this.chart=e,this.facet=i,this.scene=this.chart.scene,this.valueAxis={},this.xes=[],a=this.scene.settings.computedValueAxisList,r=0,o=a.length;o>r;r++)s=a[r],n=this.valueAxis[s.id]=new Linearchart_ValueAxis(e,s);this.facetAxis=new Facetchart_FacetAxis(e,i),this.r=new Linearchart_Renderer(this.chart,this.valueAxis)}return t.prototype.getPanels=function(){var t,e,i,n,s;for(t=[],s=this.scene.settings.computedValueAxisList,i=0,n=s.length;n>i;i++)e=s[i],t.push(this.valueAxis[e.id].getPanel());return t.push(this.facetAxis.getPanel()),t},t.prototype.setPanels=function(t){var e,i,n,s,r;for(r=this.scene.settings.computedValueAxisList,e=n=0,s=r.length;s>n;e=++n)i=r[e],this.valueAxis[i.id].panel=t[e];return this.facetAxis.panel=t[t.length-1]},t.prototype.doAnimations=function(t,e){var i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y,v,_,x,S,b,w,C,P,M,T,k,D,L,B,A,I,F,O,E;if(b=e[0],M=e[1],S=e[2],n=e[3],c=this.facet.offset,a=this.facet.left,p=this.facet.right,a=b+S*a,p=b+S*p,w=Math.max(b,a),C=Math.min(b+S,p),this.bounds=[w,M,C-w,n],i=t.changes,i.position||i.data||i.bounds||i.items){for(v=(p-a)/(this.facet.to-this.facet.from),y=a-this.facet.from*v,g=[],P=[],l=Math.max(c,Math.floor(this.facet.from-1)),h=Math.min(c+this.facet.count,Math.ceil(this.facet.to+1)),s=T=l,B=h-1;B>=T;s=T+=1)g.push(s),P.push(s*v+y);for(g.push(h),P.push(h*v+y),this.xes=P,x=[],A=this.scene.settings.computedSeries,f=k=0,L=A.length;L>k;f=++k){for(d=A[f],_=[],m=[],s=D=l,I=h-1;I>=D;s=D+=1)r=this.facet.items[s-c],o=r.values[f],_.push(o.value),m.push(o);x.push({xes:P,times:g,fromIndex:0,toIndex:g.length,values:_,style:m})}this.r.process(x)}F=this.valueAxis;for(u in F)b=F[u],b.process(t);this.r.afterProcess(),O=this.valueAxis,E=[];for(u in O)b=O[u],E.push(b.afterProcess(t));return E},t.prototype.paintScene=function(t){var e,i,n,s,r,o,a,h,l,u;e=t.context,h=this.bounds,o=h[0],a=h[1],r=h[2],i=h[3],e.globalAlpha=this.facet.opacity,l=this.valueAxis;for(n in l)s=l[n],s.paintUnder(e,e);Base_Graphics.pushClip(e,o,a,r,i),this.r.paint(t),Base_Graphics.popClip(e),this.facetAxis.paint(t,this.bounds[0],this.bounds[2],this.xes),u=this.valueAxis;for(n in u)s=u[n],s.paint(e,e);return e.globalAlpha=1},t}(),Facetchart_Renderer=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene,this.events=this.chart.events,this.layers=[],this.panels=[]}return __extends(e,t),e.prototype.animationOrder=400,e.prototype.paintOrder=5,e.prototype.updateOrder=1200,e.prototype.onSceneChange=function(t){var e,i,n,s,r,o,a,h,l,u,c,p,d;if(e=t.changes,e.settings||e.navigation){for(e.settings&&(o=e.settingsChanges,(o.valueAxis||o.series)&&(this.layers=[]),(o.valueAxis||o.facetAxis)&&(e.bounds=!0),o.computedSeries&&(this.layers=[])),c=this.layers,n=a=0,l=c.length;l>a;n=++a)r=c[n],r.facet!==this.scene.stack[n]&&(this.layers=this.layers.slice(0,n));for(;this.layers.length<this.scene.stack.length;)i=this.scene.stack[this.layers.length],s=new Facetchart_Layer(t,this.chart,i),this.layers.push(s);for(0===this.layers.length&&this.layers.push(new Facetchart_Layer(t,this.chart,new Facetchart_Facet)),this.panels=[],this.panels=this.layers[0].getPanels(),p=this.layers,d=[],h=0,u=p.length;u>h;h++)s=p[h],d.push(s.setPanels(this.panels));return d}},e.prototype.getPanels=function(){return this.panels},e.prototype.doAnimations=function(t){var e,i,n,s,r,o,a,h,l;for(s=this.scene.x0,r=this.scene.y0,n=this.scene.width,e=this.scene.height,h=this.layers,l=[],o=0,a=h.length;a>o;o++)i=h[o],l.push(i.doAnimations(t,[s,r,n,e]));return l},e.prototype.paintScene=function(t){var e,i,n,s,r;for(s=this.layers,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.paintScene(t));return r},e.prototype.exportData=function(t,e){return this.layers[this.layers.length-1].r.exportData(t,e)},e.prototype.hitTest=function(t,e){return this.scene.xyInChart(t,e)&&this.layers.length>0?this.layers[this.layers.length-1].r.hitTest(t,e,this.scene.settings.interaction.selection.tolerance):null},e}(Base_ChartElement);var NetChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};NetChart=function(t){"use strict";function e(t){return this._impl=new Netchart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.settings=Netchart_Settings,e.prototype.getNode=function(t){return this._impl.getNode(t)},e.prototype.getLink=function(t){return this._impl.getLink(t)},e.prototype.showNode=function(t){return this._impl.addFocusNode(t,.9)},e.prototype.hideNode=function(t){return this._impl.hideNode(t)},e.prototype.expandNode=function(t){return this._impl.expandNode(t)},e.prototype.addFocusNode=function(t,e){return null==e&&(e=-1),this._impl.addFocusNode(t,e)
},e.prototype.removeFocusNode=function(t){return this._impl.removeFocusNode(t)},e.prototype.clearFocus=function(){return this._impl.clearFocus()},e.prototype.collapseNode=function(t){return this._impl.collapseNode(t)},e.prototype.lockNode=function(t,e,i){return this._impl.lockNode(t,e,i)},e.prototype.unlockNode=function(t){return this._impl.unlockNode(t)},e.prototype.zoom=function(t){return t&&this._impl.setZoom(t),this._impl.scene.zoom},e.prototype.resetLayout=function(){return this._impl.resetLayout()},e.prototype.selection=function(t){return null!=t&&this._impl.setSelection(t),this._scene.selection},e.prototype.zoomIn=function(t,e){return null==e&&(e=!0),this._impl.zoomIn(t,e)},e.prototype.nodes=function(){return this._impl.getCurrentNodes()},e.prototype.links=function(){return this._impl.getCurrentLinks()},e.prototype.getNodeDimensions=function(t){return this._impl.getNodeDimensions(t)},e.prototype.exportData=function(t,e){return null==t&&(t=!0),null==e&&(e=!0),this._impl.exportData(t,e)},e}(Base_Api);var Timechart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Impl=function(t){"use strict";function e(t,i){this.defaultRightClick=__bind(this.defaultRightClick,this),this.defaultClick=__bind(this.defaultClick,this),e.__super__.constructor.call(this,new Timechart_Settings(t),new Timechart_Scene),this.layers=new Linearchart_Layers(this),this.initialize(i),this.initDataObjects(),this.dataWarehouse=new Timechart_DataWarehouse(this),this.renderer=this.events.addElement(new Timechart_Renderer(this,this.dataWarehouse)),this.scrolling=this.events.addElement(new Timechart_Scrolling(this)),this.selection=this.events.addElement(new Timechart_Selection(this)),this.navigator=this.events.addElement(new Timechart_Navigator(this)),this.events.addElement(new Timechart_ClickNotifier(this)),this.infoPopup=this.events.addElement(new Timechart_InfoPopup(this)),this.timeAxis=this.events.addElement(new Timechart_TimeAxis(this)),this.events.addElement(new Timechart_TimeUpdater(this)),this.events.addElement(new Linearchart_Markers(this)),this.events.addElement(new Linearchart_Highlights(this)),this.finalInitialize()}return __extends(e,t),e.prototype.timeStart=0,e.prototype.timeEnd=0,e.prototype.displayUnit=null,e.prototype.selectionStart=0,e.prototype.selectionEnd=0,e.prototype.onRemove=function(){return this.layers=null,this.renderer=null,this.scene.data=null,this.scene=null},e.prototype.initDataObjects=function(){var t,e,i,n,s,r,o,a,h;o=this.scene.data;for(i in o)e=o[i],e.remove();for(this.scene.data={},this.scene.mainData=null,a=this.settings.computedData,h=[],s=0,r=a.length;r>s;s++)n=a[s],t=new Timechart_Data(this,n),this.scene.mainData||(this.scene.mainData=t),h.push(this.scene.data[n.id]=t);return h},e.prototype.onSettingsChanged=function(t){var e,i;return null!=t.data?(t.toolbars=!0,this.initDataObjects()):Base_Helpers.hasProp(t,"area.displayUnits")&&(i=new Timechart_TimeSetup(this.settings),i.isAllowedDisplayUnit(this.scene.displayUnit)||(e=i.computeDisplayUnit(this.scene.timeStart,this.scene.timeEnd,this.scene.displayUnit,this.scene.timeStart,this.scene.timeEnd,this.scene),this.scrolling.setTimeRangeSnap(this.scene.timeStart,this.scene.timeEnd,null,e,!0,"api",!0,!0))),this.events.notifySceneChanges({time:!0})},e.prototype.addData=function(t,e){return this.log("Add data"),this.scene.data[e].addData(null,t,!0),this.events.notifySceneChanges({data:!0})},e.prototype.reloadData=function(){return this.removed?void 0:(this.initDataObjects(),this.events.notifySceneChanges({data:!0}))},e.prototype.save=function(){return JSON.stringify({from:this.timeStart,to:this.timeEnd,unit:this.displayUnit.toString(),selFrom:this.scene.selectionStart,selTo:this.scene.selectionEnd,anchor:this.scene.anchor,period:this.scene.period})},e.prototype.restore=function(t,e){var i,n;if(t)return i=JSON.parse(t),(n=Base_TimeStep.parse(i.unit))?(this.scrolling.setTimeRange(i.from,i.to,n,e,"api",i.anchor,i.period),this.setSelection(i.selFrom,i.selTo)):void this.error("Restore state: illegal display  unit: "+i.unit)},e.prototype.setSelection=function(t,e,i){return null==i&&(i="api"),this.scene.selectionStart!==t||this.scene.selectionEnd!==e?(this.scene.selectionStart=t,this.scene.selectionEnd=e,this.events.notifySceneChanges({selection:!0}),this.notifySelectionChanged(i)):void 0},e.prototype.setTimeRange=function(t,e,i,n,s){return null==s&&(s="api"),this.setSelection(null,null,s),this.scrolling.setTimeRange(t,e,i,n,s)},e.prototype.setDisplayPeriod=function(t,e,i,n,s){return null==e&&(e=null),null==i&&(i=null),null==n&&(n=!0),null==s&&(s="api"),null==e&&(e=this.scene.anchor),this.setSelection(null,null),"string"==typeof e&&(e=e.trim()),"string"==typeof t&&(t=t.trim()),this.navigator.computeDisplayPeriod(t,e,i,function(i){return function(r,o,a){return i.scrolling.setTimeRange(r,o,a,n,s,e,t)}}(this))},e.prototype.scrollIntoView=function(t,e){return null==e&&(e=.2),this.error("ScrollIntoView: not implemented")},e.prototype.scroll=function(t,e){var i,n,s,r,o,a,h,l;return h=t.trim().split(" "),3!==h.length?void this.error("Incorrect scroll format: "+t):(n=h[0],i=parseInt(h[1]),a=h[2],"<"!==n&&">"!==n||"number"!=typeof i?void this.error("Scroll:Incorrect scroll format: "+t):(r=new Timechart_TimeSetup(this.settings),l=r.scroll(this.timeStart,this.timeEnd,this.displayUnit,n,i,a),s=l[0],o=l[1],this.scrolling.setTimeRange(s,o,this.displayUnit,e,"api",null,this.scene.period)))},e.prototype.zoomOut=function(t,e,i){return null==e&&(e=!0),null==i&&(i="api"),this.setSelection(null,null),this.scrolling.zoomOut(t,this.scene.timeStart,this.scene.timeEnd,e,i),this.scene.period=null},e.prototype.zoomIn=function(t,e,i,n){return null==e&&(e=null),null==i&&(i=!0),null==n&&(n="api"),this.setSelection(null,null),this.scrolling.zoomIn(t,e,this.scene.timeStart,this.scene.timeEnd,i,n),this.scene.period=null},e.prototype.setDisplayUnit=function(t,e,i,n){var s,r,o,a,h,l,u,c,p,d;if(null==i&&(i=!1),null==n&&(n="api"),u=Base_TimeStep.parse(t),null!=u){if(c=!1,i){for(r=(this.timeEnd-this.timeStart)/u.approxTime(),a=this.settings.advanced.maxUnitsToDisplay;r>a;)u=u.getBigger(),r=(this.timeEnd-this.timeStart)/u.approxTime();d=this.scrolling.snap(this.timeStart,this.timeEnd,null,u,!1,!0),o=d[0],l=d[1],p=d[2],h=d[3],s=d[4],l-o>this.timeEnd-this.timeStart&&(c=!0)}return c?this.scrolling.setTimeRange(o,l,u,e,n,h,s):this.scrolling.setTimeRange(this.timeStart,this.timeEnd,u,!1,n,this.scene.anchor,this.scene.period)}},e.prototype.exportVisibleData=function(){var t,e,i,n,s,r,o,a,h,l,u,c,p,d,f,m,g,y;for(a=this.settings.computedSeries,t=this.dataWarehouse.exportData(this.timeStart,this.timeEnd,this.displayUnit,a),l=this.settings.localization.infoDates.fullTimeFormats[this.displayUnit.unit],u=t.timestamps,c=t.values,e=["timestamp","time"],p=0,m=a.length;m>p;p++)o=a[p],e.push(o.name||o.id||"");for(s=[e],i=d=0,g=u.length;g>d;i=++d){for(h=u[i],r=[h,moment(h).utc().format(l)],n=f=0,y=a.length;y>f;n=++f)o=a[n],r.push(c[n][i]);s.push(r)}return s},e.prototype.isThisDisplayPeriod=function(t,e){var i,n,s,r;return this.displayUnit?(i=this.scene.mainData.dataFrom,n=this.scene.mainData.dataTo,r=this.scrolling.computeDisplayPeriod(t,e,this.displayUnit,i,n),i=r[0],n=r[1],s=r[2],i===this.timeStart&&n===this.timeEnd):!1},e.prototype.notifyTimeChanged=function(t,e,i,n){return this.timeStart=t,this.timeEnd=e,this.displayUnit=i,this.notifyChartUpdate(n)},e.prototype.saveNavigation=function(){return this.displayUnit?[this.timeStart,this.timeEnd,this.displayUnit,this.scene.anchor,this.scene.period]:null},e.prototype.restoreNavigation=function(t,e,i){var n,s;return this.timeStart=t[0],this.timeEnd=t[1],this.displayUnit=t[2],n=t[3],s=t[4],this.scrolling.setTimeRange(this.timeStart,this.timeEnd,this.displayUnit,e,i,n,s)},e.prototype.doChartUpdateNotify=function(t){return e.__super__.doChartUpdateNotify.call(this,t),this.dispatchEventParams("timeChange",this.extendEventParams({origin:t}),null)},e.prototype.extendEventParams=function(t){return t.timeStart=this.timeStart,t.timeEnd=this.timeEnd,t.displayUnit=null!=this.displayUnit?this.displayUnit.toString():null,t.selectionStart=this.scene.selectionStart,t.selectionEnd=this.scene.selectionEnd,t.hoverStart=this.scene.hoverFrom,t.hoverEnd=this.scene.hoverTo,null!==this.scene.hoverSeriesItem&&(t.hoverSeries=this.scene.settings.series[this.scene.hoverSeriesItem.seriesIndex],t.hoverMarker=this.scene.hoverSeriesItem.isMarker),t},e.prototype.defaultClick=function(t){return this.setSelection(null,null,"user"),this.scrolling.setTimeRangeSnap(t.clickStart,t.clickEnd,null,null,!0,"user",!1,!0)},e.prototype.defaultRightClick=function(t){return this.infoPopup.show(t),t.preventDefault()},e}(Linearchart_Impl);var Facetchart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Impl=function(t){"use strict";function e(t,i){this.defaultDoubleClick=__bind(this.defaultDoubleClick,this),this.defaultClick=__bind(this.defaultClick,this),e.__super__.constructor.call(this,new Facetchart_Settings(t),new Facetchart_Scene),this.layers=new Linearchart_Layers(this),this.initialize(i),this.builder=new Facetchart_Builder(this),this.renderer=this.events.addElement(new Facetchart_Renderer(this)),this.scrolling=this.events.addElement(new Facetchart_Scrolling(this)),this.selection=this.events.addElement(new Facetchart_Selection(this)),this.events.addElement(new Facetchart_Styles(this)),this.events.addElement(new Facetchart_InfoPopup(this)),this.events.addElement(new Linearchart_Highlights(this)),this.scene.data=new Piechart_Data(this,this.settings.data),this.finalInitialize(),this.scrolling.setState(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset,0,"init")}return __extends(e,t),e.prototype.api=null,e.prototype.onRemove=function(){return this.layers=null,this.renderer=null,this.scene.data.remove(),this.scene.data=null,this.scene=null},e.prototype.onSettingsChanged=function(t){var e;return e={settings:!0,settingsChanges:t},t.data&&(this.scene.data.remove(),this.scene.data=new Piechart_Data(this),e.data=!0),t.navigation&&t.navigation&&this.scrolling.setState(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset,null,"api"),(t.labels||t.series||t.interaction)&&(e.items=!0),this.events.notifySceneChanges(e),t.data||t.facetAxis||t.valueAxis?this.updateSize(!0):void 0},e.prototype.reloadData=function(t){return this.log("Reload data"),this.scene.data.remove(),this.scene.data=new Piechart_Data(this),this.events.notifySceneChanges({data:!0,dataDeep:t})},e.prototype.updateFilters=function(){return this.updateFilter(!0)},e.prototype.updateFilter=function(t){return this.log("Update filter"),this.events.notifySceneChanges({data:!0,dataDeep:t})},e.prototype.setSelection=function(t,e){var i,n,s,r,o;for(null==e&&(e="api"),this.log("Set selection"),n=[],s=[],r=0,o=t.length;o>r;r++)i=t[r],i instanceof Facetchart_Item?n.push(i):Base_Helpers.isString(i)?s.push(i):this.error("SetSelection: Selection contents must be Facetchart_Item object or string, got "+i);return this.selection.setSelection(n,s,!1,e)},e.prototype.setPie=function(t,e,i,n){return null==i&&(i=null),null==n&&(n=!0),this.log("Set pie"),this.scrolling.setState(t,e,i,"api")},e.prototype.getPie=function(){return this.scrolling.getState()[0]},e.prototype.getPieOffset=function(){return this.scrolling.getState()[1]},e.prototype.getActiveItems=function(){var t,e,i,n,s;for(e=[],s=this.scene.stack,i=0,n=s.length;n>i;i++)t=s[i],t.parentItem&&e.push(t.parentItem);return e},e.prototype.getActiveFacets=function(){return this.scene.stack},e.prototype.zoomOut=function(t,e,i){return null==e&&(e=!0),null==i&&(i="api"),this.scrolling.goUp(i)},e.prototype.expandItem=function(t,e){var i,n;return i=t.facet,i===this.scene.peek()&&(n=t.id,t.expandable&&this.scene.data.canExapnd(n))?(this.setSelection([]),this.scrolling.drillDown(n,e),!0):!1},e.prototype.saveNavigation=function(){var t;return t=this.scene.peek(),!t||t.loading||0===t.count||this.scrolling.isActive()?null:this.scrolling.getState()},e.prototype.restoreNavigation=function(t,e,i){return this.scrolling.setState(t[0],t[1],t[2],i)},e.prototype.save=function(){var t,e,i,n,s,r;for(e=this.scene.selectionIds.splice(0),r=this.scene.selection,n=0,s=r.length;s>n;n++)t=r[n],e.push(t.id);return i=this.scrolling.getState(),JSON.stringify({pie:i[0],offset:i[1],count:i[2],selection:e})},e.prototype.restore=function(t,e){var i;if(t)return i=JSON.parse(t),this.setPie(i.pie,i.offset,i.count,e),this.setSelection(i.selection)},e.prototype.doChartUpdateNotify=function(t){return e.__super__.doChartUpdateNotify.call(this,t),this.dispatchEventParams("pieChange",this.extendEventParams({origin:t}),null),this.dispatchEventParams("pieReadyStateChanged",this.extendEventParams({origin:t}),null)},e.prototype.extendEventParams=function(t){return t.facet=this.scene.peek(),t.offset=t.facet.offset,t.count=t.facet.count,t.hoverItem=this.scene.hoverItem,t.selection=this.scene.selection,t.pie=t.facet,t.slice=t.clickItem,t.clickSlice=t.clickItem,t.clickPie=t.clickFacet,t},e.prototype.defaultClick=function(t){var e,i;if(i=t.slice,e=t.clickPie,i){if(i.url)return Base_Helpers.openUrl(i.url),t.preventDefault();if(this.expandItem(i,"user"))return t.preventDefault()}},e.prototype.defaultDoubleClick=function(){},e}(Linearchart_Impl);var TimeChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};TimeChart=function(t){"use strict";function e(t){return this._impl=new Timechart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.themes={flat:Timechart_Settings.FlatTheme,round:Timechart_Settings.RoundTheme,gradient:Timechart_Settings.GradientTheme,"static":Timechart_Settings.StaticChart},e.settings=Timechart_Settings,e.prototype.time=function(t,e,i){return null==i&&(i=!0),void 0!==t&&void 0!==e&&this._impl.setTimeRange(t,e,null,i),[this._impl.timeStart,this._impl.timeEnd]},e.prototype.setDisplayPeriod=function(t,e,i){return this._impl.setDisplayPeriod(t,e,null,i)},e.prototype.displayUnit=function(t,e,i,n){return null==e&&(e=!0),null==i&&(i=!1),null==n&&(n=null),null!=t&&this._impl.setDisplayUnit(t,e,i,n),null!=this._impl.displayUnit?this._impl.displayUnit.toString():null},e.prototype.selection=function(t,e){return void 0!==t&&void 0!==e&&this._impl.setSelection(t,e),[this._scene.selectionStart,this._scene.selectionEnd]},e.prototype.scroll=function(t,e){return null==e&&(e=!0),this._impl.scroll(t,e)},e.prototype.zoomOut=function(t,e){return null==t&&(t=null),null==e&&(e=!0),this._impl.zoomOut(t,e,"api")},e.prototype.zoomIn=function(t,e,i){return null==t&&(t=null),null==e&&(e=null),null==i&&(i=!0),this._impl.zoomIn(t,e,i,"api")},e.prototype.replaceSeries=function(t){return this._impl.replaceSeries(t)},e.prototype.exportVisibleData=function(){return this._impl.exportVisibleData()},e}(Base_Api);var FacetChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};FacetChart=function(t){"use strict";function e(t){return this._impl=new Facetchart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.settings=Facetchart_Settings,e.prototype.updateFilter=function(){return this._impl.updateFilter(),this},e.prototype.selection=function(t){return null!=t&&this._impl.setSelection(t),this._scene.selection},e.prototype.setPie=function(t,e,i){return null==e&&(e=0),null==i&&(i=null),this._impl.setPie(t,e,i,"api"),this},e.prototype.getPie=function(){return this._impl.getPie()},e.prototype.getPieOffset=function(){return this._impl.getPieOffset()},e.prototype.getActiveItems=function(){return this._impl.getActiveItems()},e.prototype.getActiveFacets=function(){return this._impl.getActiveFacets()},e.prototype.getActiveFacet=function(){var t;return t=this._impl.getActiveFacets(),t[t.length-1]},e.prototype.expandSlice=function(t){return this._impl.expandItem(t,"api")},e.prototype.replaceSeries=function(t){return this._impl.replaceSeries(t)},e}(Base_Api);
this.NetChart = NetChart;
this.TimeChart = TimeChart;
this.PieChart = PieChart;
this.FacetChart = FacetChart;
}).call(this);
