(function(a){a.fn.gallery=function(e){var m=new Array;var h="400px";var s=0;var d=400;var r=400;var u=a(this);var i=a(".default-img");var c=a(".view-larger");var l=a("#product-desc");var t=a(".img-link, .more-images");n(i.attr("src"));function n(x){if(i.length==0){return}var v="../"+i.attr("src").replace(/[\.\.\/]+/,"").toLowerCase();var w=navigator.userAgent.match(/iPad/i)!=null;if(w){}if(v.indexOf("_t.")!=-1){a.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/ContentService/ContentService.svc/GetImagesByFileName?localimagelink="+v,contentType:"application/json; charset=utf-8",dataType:"json",success:function(y){InitGallery(y)
}})}else{c.show();a(i).unwrap()}}function b(v){var w=true;a.each(v,function(x){if((v[x].lrgURL=="")||(v[x].hdURL=="")){w=false;return false}});return w}InitGallery=function(v){m=v;if(b(m)){if(m.length>1){c.hide();t.after('<a href="javascript:void(\'0\')" class="zoom-images"></a><a href="javascript:void(\'0\')" class="more-images"></a>');a(".img-link img").addClass("mag-icon")}else{if(m.length==1){c.hide();t.after('<a href="javascript:void(\'0\')" class="zoom-images"></a>');a(".img-link img").addClass("mag-icon")
}else{c.show();a(i).unwrap()}}a(".img-link, .more-images, .zoom-images").click(function(w){a(this).blur();g(w)})}else{c.show();a(i).unwrap()}};function g(v){if(m[s].lrgURL!=""){lrgsrc=window.location.protocol+"//"+window.location.host+"/HDimages/"+m[s].lrgURL+"?w=400"}$img=a(i);if(!$img.is(":animated")){if($img.hasClass("img-hd")){f(lrgsrc)}else{if($img.hasClass("img-larger")){if(m[s].hdURL!=""){hdsrc=window.location.protocol+"//"+window.location.host+"/HDimages/"+m[s].hdURL+"?w=1200";q(v,hdsrc)}}else{j()}}}return false
}function j(){a(".more-images, .zoom-images").hide();l.fadeOut("fast",function(){a(".view-larger").hide();u.animate({width:"670px",height:"350px"},500,function(){i.animate({width:"400px"},500,function(){a(this).addClass("img-larger").attr("src",lrgsrc).draggable();a("#help-gal").addClass("zoom");a(".zoom").click(function(v){g(v)})});u.append('<div id="close-gal"><a href="">Close</a></div><div id="help-gal"></div>');if(m.length>1){if(a("#gallery-thumbs").length==0){k()}}a("#close-gal").click(function(){o();return false
})})})}function k(){u.after('<div id="gallery-thumbs"></div>');a("#gallery-thumbs").append('<ul class="ul-thumbs"></ul>');a.each(m,function(v){if(m[v].smURL!=""){a(".ul-thumbs").append('<li><a rel="'+v+'" class="img-thumb" href="'+window.location.protocol+"//"+window.location.host+"/images/"+m[v].lrgURL+'" ><img src="'+window.location.protocol+"//"+window.location.host+"/HDimages/"+m[v].smURL+'?w=50"/></a></li>')}});a("#gallery-thumbs").fadeIn();if(s==0){a(".ul-thumbs li:first a").addClass("thumb-selected")}a("a.img-thumb").click(function(){s=a(this).attr("rel");
if(m[s].lrgURL!=""){lrgsrc=window.location.protocol+"//"+window.location.host+"/HDimages/"+m[s].lrgURL+"?w=400";f(lrgsrc)}a(".thumb-selected").each(function(){a(this).removeClass("thumb-selected")});a(this).addClass("thumb-selected");return false})}function q(w,v){var B=a(i).offset();var A=a(i).width()/2;var z=a(i).height()/2;if(w.currentTarget.className=="img-link"){A=w.pageX-B.left;z=w.pageY-B.top}var y=(350/2)-z*3;var x=(587/2)-A*3;i.animate({top:y,left:x,width:1200},500,function(){a(this).attr("src",hdsrc).removeClass("img-larger mag-icon").addClass("img-hd").draggable();
a("#help-gal").removeClass("zoom").addClass("drag");a(".drag").click(function(C){return false})})}function f(v){i.animate({top:"0",left:"0",width:"400px"},500,function(){a(this).attr("src",v).removeClass("img-hd").addClass("img-larger");a("#help-gal").removeClass("drag").addClass("zoom");a(".zoom").click(function(w){g(w)})})}function o(){a("#gallery-thumbs, #close-gal").remove();a("#help-gal").remove();i.animate({top:"0",left:"0",width:"150px"},500,function(){s==0?"":a(this).fadeOut(100);if(s!=0){a(this).fadeOut(100,function(){a(this).attr("src",window.location.protocol+"//"+window.location.host+"/images/"+m[s].Url)
})}else{a(this).attr("src",window.location.protocol+"//"+window.location.host+"/images/"+m[s].Url)}s=0;u.animate({width:"170px"},500,function(){l.fadeIn("fast");a(".more-images, .zoom-images").show();i.draggable("destroy").removeClass("img-larger img-hd ui-draggable-disabled ui-state-disabled").addClass("mag-icon").fadeIn();a(this).css("height","")})})}a.fn.preload=function(){this.each(function(){a("<img/>")[0].src=this;console.log(this)})};function p(v){if(window.console&&window.console.log){window.console.log(v)
}}}})(jQuery);